exports.ccxtex=function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=52)}([function(e,t,i){"use strict";e.exports=function e(t,i,s={}){for(const[r,a]of Object.entries(i)){const i=Object.assign(s,{[r]:class extends t{constructor(e){super(e),this.constructor=i,this.__proto__=i.prototype,this.message=e}}})[r];e(i,a,s)}return s}(Error,{BaseError:{ExchangeError:{AuthenticationError:{PermissionDenied:{},AccountSuspended:{}},ArgumentsRequired:{},BadRequest:{},BadResponse:{NullResponse:{}},InsufficientFunds:{},InvalidAddress:{AddressPending:{}},InvalidOrder:{OrderNotFound:{},OrderNotCached:{},CancelPending:{},OrderImmediatelyFillable:{},OrderNotFillable:{},DuplicateOrderId:{}},NotSupported:{}},NetworkError:{DDoSProtection:{},ExchangeNotAvailable:{},InvalidNonce:{},RequestTimeout:{}}}})},function(e,t,i){"use strict";const s=i(29),r=i(85),{isNode:a,keys:o,values:n,deepExtend:d,extend:c,clone:h,flatten:l,unique:u,indexBy:p,sortBy:m,groupBy:f,aggregate:y,uuid:b,unCamelCase:w,precisionFromString:v,throttle:g,capitalize:k,now:T,sleep:C,timeout:_,TimedOut:O,buildOHLCVC:x,decimalToPrecision:S}=s,{ExchangeError:B,InvalidAddress:I,NotSupported:M,AuthenticationError:F,DDoSProtection:E,RequestTimeout:A,ExchangeNotAvailable:P}=i(0),{TRUNCATE:q,ROUND:D,DECIMAL_PLACES:G}=s.precisionConstants,R="undefined"==typeof fetch?i(86)().fetch:fetch;let L=void 0,N=void 0,V=void 0,U=void 0;try{L=i(!function(){var e=new Error("Cannot find module 'web3'");throw e.code="MODULE_NOT_FOUND",e}()),N=i(!function(){var e=new Error("Cannot find module 'ethereumjs-abi'");throw e.code="MODULE_NOT_FOUND",e}()),V=i(!function(){var e=new Error("Cannot find module 'ethereumjs-util'");throw e.code="MODULE_NOT_FOUND",e}()),U=i(!function(){var e=new Error("Cannot find module 'bignumber.js'");throw e.code="MODULE_NOT_FOUND",e}())}catch(e){}const H=void 0;e.exports=class e{getMarket(e){this.marketClasses||(this.marketClasses={});let t=this.marketClasses[e];return t||(t=new r(this,e),this.marketClasses[e]=t,t)}describe(){return{id:void 0,name:void 0,countries:void 0,enableRateLimit:!1,rateLimit:2e3,certified:!1,has:{cancelAllOrders:!1,cancelOrder:!0,cancelOrders:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,deposit:!1,editOrder:"emulated",fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!1,fetchCurrencies:!1,fetchDepositAddress:!1,fetchDeposits:!1,fetchFundingFees:!1,fetchL2OrderBook:!0,fetchLedger:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:"emulated",fetchOpenOrders:!1,fetchOrder:!1,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTradingLimits:!1,fetchTransactions:!1,fetchWithdrawals:!1,privateAPI:!0,publicAPI:!0,withdraw:!1},urls:{logo:void 0,api:void 0,www:void 0,doc:void 0,fees:void 0},api:void 0,requiredCredentials:{apiKey:!0,secret:!0,uid:!1,login:!1,password:!1,twofa:!1,privateKey:!1,walletAddress:!1},markets:void 0,currencies:{},timeframes:void 0,fees:{trading:{tierBased:void 0,percentage:void 0,taker:void 0,maker:void 0},funding:{tierBased:void 0,percentage:void 0,withdraw:{},deposit:{}}},skipJsonOnStatusCodes:[],exceptions:void 0,httpExceptions:{422:B,418:E,429:E,404:P,409:P,500:P,501:P,502:P,520:P,521:P,522:P,525:P,526:P,400:P,403:P,405:P,503:P,530:P,408:A,504:A,401:F,511:F},dontGetUsedBalanceFromStaleCache:!1,commonCurrencies:{XBT:"BTC",BCC:"BCH",DRK:"DASH",BCHABC:"BCH",BCHSV:"BSV"},precisionMode:G,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}constructor(e={}){Object.assign(this,s,{encode:e=>e,decode:e=>e}),this.options={},this.fetchOptions={},this.userAgents={chrome:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36",chrome39:"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36"},this.headers={},this.proxy="",this.origin="*",this.iso8601=(e=>{const t=parseInt(e,10);if(!(isNaN(t)||t<0))try{return new Date(t).toISOString()}catch(e){return}}),this.parse8601=(e=>{if("string"==typeof e&&e&&!e.match(/^[0-9]+$/)&&!(e.indexOf("-")<0||e.indexOf(":")<0))try{const t=Date.parse(e.indexOf("+")>=0||"Z"===e.slice(-1)?e:(e+"Z").replace(/\s(\d\d):/,"T$1:"));if(isNaN(t))return;return t}catch(e){return}}),this.parseDate=(e=>{if("string"==typeof e&&e){if(e.indexOf("GMT")>=0)try{return Date.parse(e)}catch(e){return}return this.parse8601(e)}}),this.microseconds=(()=>1e3*T()),this.seconds=(()=>Math.floor(T()/1e3)),this.minFundingAddressLength=1,this.substituteCommonCurrencyCodes=!0,this.fetchImplementation=R,this.timeout=1e4,this.verbose=!1,this.debug=!1,this.journal="debug.json",this.userAgent=void 0,this.twofa=void 0,this.apiKey=void 0,this.secret=void 0,this.uid=void 0,this.login=void 0,this.password=void 0,this.privateKey=void 0,this.walletAddress=void 0,this.balance={},this.orderbooks={},this.tickers={},this.orders={},this.trades={},this.transactions={},this.requiresWeb3=!1,this.precision={},this.enableLastJsonResponse=!0,this.enableLastHttpResponse=!0,this.enableLastResponseHeaders=!0,this.last_http_response=void 0,this.last_json_response=void 0,this.last_response_headers=void 0,this.arrayConcat=((e,t)=>e.concat(t));const t=(e=this)=>{if(null!==e){for(const t of Object.getOwnPropertyNames(e))this[w(t)]=this[t];t(Object.getPrototypeOf(e))}};t();const i=d(this.describe(),e);for(const[e,t]of Object.entries(i))this[e]=d(this[e],t);for(const e in this.has)this["has"+k(e)]=!!this.has[e];if(this.api&&this.defineRestApi(this.api,"request"),this.initRestRateLimiter(),this.markets&&this.setMarkets(this.markets),this.debug&&H&&H(()=>this.journal,this,Object.keys(this.has)),this.requiresWeb3&&!this.web3&&L){const e=this.web3ProviderURL?new L.providers.HttpProvider(this.web3ProviderURL):new L.providers.HttpProvider;this.web3=new L(L.givenProvider||e)}}defaults(){return{}}nonce(){return this.seconds()}milliseconds(){return T()}encodeURIComponent(...e){return encodeURIComponent(...e)}checkRequiredCredentials(e=!0){Object.keys(this.requiredCredentials).forEach(t=>{if(this.requiredCredentials[t]&&!this[t]){if(e)throw new F(this.id+" requires `"+t+"`");return e}})}checkAddress(e){if(void 0===e)throw new I(this.id+" address is undefined");if(1===u(e).length||e.length<this.minFundingAddressLength||e.includes(" "))throw new I(this.id+" address is invalid or has less than "+this.minFundingAddressLength.toString()+' characters: "'+this.json(e)+'"');return e}initRestRateLimiter(){if(void 0===this.rateLimit)throw new Error(this.id+".rateLimit property is not configured");this.tokenBucket=this.extend({refillRate:1/this.rateLimit,delay:1,capacity:1,defaultCost:1,maxCapacity:1e3},this.tokenBucket),this.throttle=g(this.tokenBucket),this.executeRestRequest=((e,t="GET",i,s)=>{const r=this.fetchImplementation,o={method:t,headers:i,body:s,timeout:this.timeout};if(this.httpAgent&&0===e.indexOf("http://"))o.agent=this.httpAgent;else if(this.httpsAgent&&0===e.indexOf("https://"))o.agent=this.httpsAgent;else if(this.agent){const[t,...i]=e.split("//");t===this.agent.protocol&&(o.agent=this.agent)}let n=r(e,this.extend(o,this.fetchOptions)).catch(i=>{if(a)throw new P([this.id,t,e,i.type,i.message].join(" "));throw i}).then(r=>this.handleRestResponse(r,e,t,i,s));return _(this.timeout,n).catch(i=>{if(i instanceof O)throw new A(this.id+" "+t+" "+e+" request timed out ("+this.timeout+" ms)");throw i})})}setSandboxMode(e){if(e){if(!("test"in this.urls))throw new M(this.id+" does not have a sandbox URL");this.urls.api_backup=h(this.urls.api),this.urls.api=h(this.urls.test)}else"api_backup"in this.urls&&(this.urls.api=h(this.urls.api_backup))}defineRestApi(e,t,i={}){for(const s of Object.keys(e))for(const r of Object.keys(e[s])){let a=e[s][r];for(let e=0;e<a.length;e++){let o=a[e].trim(),n=o.split(/[^a-zA-Z0-9]/),d=r.toUpperCase(),c=r.toLowerCase(),h=this.capitalize(c),l=n.map(this.capitalize).join(""),u=n.map(e=>e.trim().toLowerCase()).filter(e=>e.length>0).join("_"),p=s+h+this.capitalize(l),m=s+"_"+c+"_"+u;"suffixes"in i&&("camelcase"in i.suffixes&&(p+=i.suffixes.camelcase),"underscore"in i.suffixes&&(m+=i.suffixes.underscore)),"underscore_suffix"in i&&(m+=i.underscoreSuffix),"camelcase_suffix"in i&&(p+=i.camelcaseSuffix);let f=async e=>this[t](o,s,d,e||{});this[p]=f,this[m]=f}}}fetch(e,t="GET",i,s){return a&&this.userAgent&&("string"==typeof this.userAgent?i=c({"User-Agent":this.userAgent},i):"object"==typeof this.userAgent&&"User-Agent"in this.userAgent&&(i=c(this.userAgent,i))),"function"==typeof this.proxy?(e=this.proxy(e),a&&(i=c({Origin:this.origin},i))):"string"==typeof this.proxy&&(this.proxy.length&&a&&(i=c({Origin:this.origin},i)),e=this.proxy+e),i=c(this.headers,i),this.verbose&&console.log("fetch:\n",this.id,t,e,"\nRequest:\n",i,"\n",s,"\n"),this.executeRestRequest(e,t,i,s)}async fetch2(e,t="public",i="GET",s={},r,a){this.enableRateLimit&&await this.throttle();let o=this.sign(e,t,i,s,r,a);return this.fetch(o.url,o.method,o.headers,o.body)}request(e,t="public",i="GET",s={},r,a){return this.fetch2(e,t,i,s,r,a)}parseJson(e){return JSON.parse(e)}parseRestResponse(e,t,i,s){try{return t.length>0?this.parseJson(t):{}}catch(r){this.verbose&&console.log("parseJson:\n",this.id,s,i,e.status,"error",r,"response body:\n'"+t+"'\n");let a=void 0,o=t.match(/<title>([^<]+)/i);o&&(a=o[1].trim());let n=t.match(/offline|busy|retry|wait|unavailable|maintain|maintenance|maintenancing/i),d=t.match(/cloudflare|incapsula|overload|ddos/i);if(r instanceof SyntaxError){let t=P,r="not accessible from this location at the moment";throw n&&(r="offline, on maintenance or unreachable from this location at the moment"),e.status<500&&d&&(t=E),new t([this.id,s,i,e.status,a,r].join(" "))}throw r}}findBroadlyMatchedKey(e,t){const i=Object.keys(e);for(let e=0;e<i.length;e++){const s=i[e];if(t.indexOf(s)>=0)return s}}handleErrors(e,t,i,s,r,a,o){}defaultErrorHandler(e,t,i,s){let{status:r,statusText:a}=e;if(r>=200&&r<=299)return;let o=void 0,n=t,d=t.match(/<title>([^<]+)/i);throw d&&(n=d[1].trim()),(o=this.httpExceptions[r.toString()]||B)===P&&(t.match(/cloudflare|incapsula|overload|ddos/i)?o=E:n+=" (possible reasons: "+["invalid API keys","bad or old nonce","exchange is down or offline","on maintenance","DDoS protection","rate-limiting"].join(", ")+")"),new o([this.id,s,i,r,a,n].join(" "))}isJsonEncodedObject(e){return"string"==typeof e&&e.length>=2&&("{"===e[0]||"["===e[0])}getResponseHeaders(e){let t={};return e.headers.forEach((e,i)=>{i=i.split("-").map(e=>k(e)).join("-"),t[i]=e}),t}handleRestResponse(e,t,i="GET",s,r){return e.text().then(s=>{const r=this.isJsonEncodedObject(s)&&!this.skipJsonOnStatusCodes.includes(e.status)?this.parseRestResponse(e,s,t,i):void 0;let a=this.getResponseHeaders(e);this.enableLastResponseHeaders&&(this.last_response_headers=a),this.enableLastHttpResponse&&(this.last_http_response=s),this.enableLastJsonResponse&&(this.last_json_response=r),this.verbose&&console.log("handleRestResponse:\n",this.id,i,t,e.status,e.statusText,"\nResponse:\n",a,"\n",s,"\n");const o=[e.status,e.statusText,t,i,a,s,r];return this.handleErrors(...o),this.defaultErrorHandler(e,s,t,i),r||s})}setMarkets(e,t){let i=Object.values(e).map(e=>d({limits:this.limits,precision:this.precision},this.fees.trading,e));if(this.markets=d(this.markets,p(i,"symbol")),this.marketsById=p(e,"id"),this.markets_by_id=this.marketsById,this.symbols=Object.keys(this.markets).sort(),this.ids=Object.keys(this.markets_by_id).sort(),t)this.currencies=d(t,this.currencies);else{const e=i.filter(e=>"base"in e).map(e=>({id:e.baseId||e.base,numericId:void 0!==e.baseNumericId?e.baseNumericId:void 0,code:e.base,precision:e.precision?e.precision.base||e.precision.amount:8})),t=i.filter(e=>"quote"in e).map(e=>({id:e.quoteId||e.quote,numericId:void 0!==e.quoteNumericId?e.quoteNumericId:void 0,code:e.quote,precision:e.precision?e.precision.quote||e.precision.price:8})),s=e.concat(t),r=f(s,"code"),a=Object.keys(r).map(e=>r[e].reduce((e,t)=>e.precision>t.precision?e:t,r[e][0])),o=m(l(a),"code");this.currencies=d(p(o,"code"),this.currencies)}return this.currencies_by_id=p(this.currencies,"id"),this.markets}async loadMarkets(e=!1,t={}){if(!e&&this.markets)return this.markets_by_id?this.markets:this.setMarkets(this.markets);let i=void 0;this.has.fetchCurrencies&&(i=await this.fetchCurrencies());const s=await this.fetchMarkets(t);return this.setMarkets(s,i)}async loadAccounts(e=!1,t={}){if(e)this.accounts=await this.fetchAccounts(t);else{if(this.accounts)return this.accounts;this.accounts=await this.fetchAccounts(t)}return this.accountsById=this.indexBy(this.accounts,"id"),this.accounts}fetchBidsAsks(e,t={}){throw new M(this.id+" fetchBidsAsks not supported yet")}async fetchOHLCVC(e,t="1m",i,s,r={}){if(!this.has.fetchTrades)throw new M(this.id+" fetchOHLCV() not supported yet");await this.loadMarkets();let a=await this.fetchTrades(e,i,s,r);return x(a,t,i,s)}async fetchOHLCV(e,t="1m",i,s,r={}){if(!this.has.fetchTrades)throw new M(this.id+" fetchOHLCV() not supported yet");await this.loadMarkets();let a=await this.fetchTrades(e,i,s,r);return x(a,t,i,s).map(e=>e.slice(0,-1))}parseTradingViewOHLCV(e,t,i="1m",s,r){let a=this.convertTradingViewToOHLCV(e);return this.parseOHLCVs(a,t,i,s,r)}convertTradingViewToOHLCV(e){let t=[];for(let i=0;i<e.t.length;i++)t.push([1e3*e.t[i],e.o[i],e.h[i],e.l[i],e.c[i],e.v[i]]);return t}convertOHLCVToTradingView(e){let t={t:[],o:[],h:[],l:[],c:[],v:[]};for(let i=0;i<e.length;i++)t.t.push(parseInt(e[i][0]/1e3)),t.o.push(e[i][1]),t.h.push(e[i][2]),t.l.push(e[i][3]),t.c.push(e[i][4]),t.v.push(e[i][5]);return t}fetchTickers(e,t={}){throw new M(this.id+" fetchTickers not supported yet")}purgeCachedOrders(e){const t=Object.values(this.orders).filter(t=>"open"===t.status||t.timestamp>=e);return this.orders=p(t,"id"),this.orders}fetchOrder(e,t,i={}){throw new M(this.id+" fetchOrder not supported yet")}fetchOrders(e,t,i,s={}){throw new M(this.id+" fetchOrders not supported yet")}fetchOpenOrders(e,t,i,s={}){throw new M(this.id+" fetchOpenOrders not supported yet")}fetchClosedOrders(e,t,i,s={}){throw new M(this.id+" fetchClosedOrders not supported yet")}fetchMyTrades(e,t,i,s={}){throw new M(this.id+" fetchMyTrades not supported yet")}fetchTransactions(e,t,i,s={}){throw new M(this.id+" fetchTransactions not supported yet")}fetchDeposits(e,t,i,s={}){throw new M(this.id+" fetchDeposits not supported yet")}fetchWithdrawals(e,t,i,s={}){throw new M(this.id+" fetchWithdrawals not supported yet")}fetchCurrencies(e={}){return new Promise((e,t)=>e(this.currencies))}fetchMarkets(e={}){return new Promise((e,t)=>e(Object.values(this.markets)))}async fetchOrderStatus(e,t,i={}){return(await this.fetchOrder(e,t,i)).status}account(){return{free:0,used:0,total:0}}commonCurrencyCode(e){return this.substituteCommonCurrencyCodes?this.safeString(this.commonCurrencies,e,e):e}currencyId(e){if(void 0===this.currencies)throw new B(this.id+" currencies not loaded");if(e in this.currencies)return this.currencies[e].id;let t={},i=Object.keys(this.commonCurrencies);for(let e=0;e<i.length;e++){let s=i[e];t[this.commonCurrencies[s]]=s}return this.safeString(t,e,e)}currency(e){if(void 0===this.currencies)throw new B(this.id+" currencies not loaded");if("string"==typeof e&&e in this.currencies)return this.currencies[e];throw new B(this.id+" does not have currency code "+e)}findMarket(e){if(void 0===this.markets)throw new B(this.id+" markets not loaded");if("string"==typeof e){if(e in this.markets_by_id)return this.markets_by_id[e];if(e in this.markets)return this.markets[e]}return e}findSymbol(e,t){return void 0===t&&(t=this.findMarket(e)),"object"==typeof t?t.symbol:e}market(e){if(void 0===this.markets)throw new B(this.id+" markets not loaded");if("string"==typeof e&&e in this.markets)return this.markets[e];throw new B(this.id+" does not have market symbol "+e)}marketId(e){let t=this.market(e);return void 0!==t?t.id:e}marketIds(e){return e.map(e=>this.marketId(e))}symbol(e){return this.market(e).symbol||e}extractParams(e){let t=/{([\w-]+)}/g,i=[],s=t.exec(e);for(;s;)i.push(s[1]),s=t.exec(e);return i}implodeParams(e,t){for(let i in t)e=e.replace("{"+i+"}",t[i]);return e}url(e,t={}){let i=this.implodeParams(e,t),s=this.omit(t,this.extractParams(e));return Object.keys(s).length&&(i+="?"+this.urlencode(s)),i}parseBidAsk(e,t=0,i=1){return[parseFloat(e[t]),parseFloat(e[i])]}parseBidsAsks(e,t=0,i=1){return Object.values(e||[]).map(e=>this.parseBidAsk(e,t,i))}async fetchL2OrderBook(e,t,i={}){let s=await this.fetchOrderBook(e,t,i);return c(s,{bids:m(y(s.bids),0,!0),asks:m(y(s.asks),0)})}parseOrderBook(e,t,i="bids",s="asks",r=0,a=1){return{bids:m(i in e?this.parseBidsAsks(e[i],r,a):[],0,!0),asks:m(s in e?this.parseBidsAsks(e[s],r,a):[],0),timestamp:t,datetime:this.iso8601(t),nonce:void 0}}getCurrencyUsedOnOpenOrders(e){return Object.values(this.orders).filter(e=>"open"===e.status).reduce((t,i)=>{let s=i.symbol,r=this.markets[s],a=i.remaining;return e===r.base&&"sell"===i.side?t+a:e===r.quote&&"buy"===i.side?t+i.price*a:t},0)}parseBalance(e){return Object.keys(this.omit(e,"info")).forEach(t=>{if(void 0!==e[t].free&&void 0===e[t].used)if(this.dontGetUsedBalanceFromStaleCache&&"open_orders"in e.info){const i=e.info.open_orders;Object.values(this.orders).filter(e=>"open"===e.status).length===i&&(e[t].used=this.getCurrencyUsedOnOpenOrders(t),e[t].total=(e[t].used||0)+(e[t].free||0))}else e[t].used=this.getCurrencyUsedOnOpenOrders(t),e[t].total=(e[t].used||0)+(e[t].free||0);["free","used","total"].forEach(i=>{e[i]=e[i]||{},e[i][t]=e[t][i]})}),e}async fetchPartialBalance(e,t={}){return(await this.fetchBalance(t))[e]}fetchFreeBalance(e={}){return this.fetchPartialBalance("free",e)}fetchUsedBalance(e={}){return this.fetchPartialBalance("used",e)}fetchTotalBalance(e={}){return this.fetchPartialBalance("total",e)}async fetchTradingFees(e={}){throw new M(this.id+" fetchTradingFees not supported yet")}async fetchTradingFee(e,t={}){if(!this.has.fetchTradingFees)throw new M(this.id+" fetchTradingFee not supported yet");return await this.fetchTradingFees(t)}async loadTradingLimits(e,t=!1,i={}){if(this.has.fetchTradingLimits&&(t||!("limitsLoaded"in this.options))){let t=await this.fetchTradingLimits(e);for(let i=0;i<e.length;i++){let s=e[i];this.markets[s]=this.deepExtend(this.markets[s],t[s])}this.options.limitsLoaded=this.milliseconds()}return this.markets}filterBySinceLimit(e,t,i){return null!=t&&(e=e.filter(e=>e.timestamp>=t)),null!=i&&(e=e.slice(0,i)),e}filterByValueSinceLimit(e,t,i,s,r){const a=null!=i,o=null!=s;return(a||o)&&(e=Object.values(e).filter(e=>(!a||e[t]===i)&&(!o||e.timestamp>=s))),null!=r&&(e=Object.values(e).slice(0,r)),e}filterBySymbolSinceLimit(e,t,i,s){return this.filterByValueSinceLimit(e,"symbol",t,i,s)}filterByCurrencySinceLimit(e,t,i,s){return this.filterByValueSinceLimit(e,"currency",t,i,s)}filterByArray(e,t,i,s=!0){if(e=Object.values(e),null==i)return s?p(e,t):e;let r=[];for(let s=0;s<e.length;s++)i.includes(e[s][t])&&r.push(e[s]);return s?p(r,t):r}parseTrades(e,t,i,s){let r=Object.values(e||[]).map(e=>this.parseTrade(e,t));r=m(r,"timestamp");let a=void 0!==t?t.symbol:void 0;return this.filterBySymbolSinceLimit(r,a,i,s)}parseTransactions(e,t,i,s){let r=Object.values(e||[]).map(e=>this.parseTransaction(e,t));r=this.sortBy(r,"timestamp");let a=void 0!==t?t.code:void 0;return this.filterByCurrencySinceLimit(r,a,i,s)}parseLedger(e,t,i,s){let r=[],a=Object.values(e||[]);for(let e=0;e<a.length;e++)r.push(this.parseLedgerEntry(a[e],t));r=this.sortBy(r,"timestamp");let o=void 0!==t?t.code:void 0;return this.filterByCurrencySinceLimit(r,o,i,s)}parseOrders(e,t,i,s){let r=Object.values(e).map(e=>this.parseOrder(e,t));r=m(r,"timestamp");let a=void 0!==t?t.symbol:void 0;return this.filterBySymbolSinceLimit(r,a,i,s)}safeCurrencyCode(e,t,i){let s=void 0,r=this.safeString(e,t);return r in this.currencies_by_id?i=this.currencies_by_id[r]:s=this.commonCurrencyCode(r),void 0!==i&&(s=i.code),s}filterBySymbol(e,t){return void 0!==t?e.filter(e=>e.symbol===t):e}parseOHLCV(e,t,i="1m",s,r){return Array.isArray(e)?e.slice(0,6):e}parseOHLCVs(e,t,i="1m",s,r){e=Object.values(e||[]);let a=[];for(let o=0;o<e.length&&!(r&&a.length>=r);o++){let n=this.parseOHLCV(e[o],t,i,s,r);s&&n[0]<s||a.push(n)}return this.sortBy(a,0)}editLimitBuyOrder(e,t,...i){return this.editLimitOrder(e,t,"buy",...i)}editLimitSellOrder(e,t,...i){return this.editLimitOrder(e,t,"sell",...i)}editLimitOrder(e,t,...i){return this.editOrder(e,t,"limit",...i)}async editOrder(e,t,...i){if(!this.enableRateLimit)throw new B(this.id+" editOrder() requires enableRateLimit = true");return await this.cancelOrder(e,t),this.createOrder(t,...i)}createLimitOrder(e,...t){return this.createOrder(e,"limit",...t)}createMarketOrder(e,...t){return this.createOrder(e,"market",...t)}createLimitBuyOrder(e,...t){return this.createOrder(e,"limit","buy",...t)}createLimitSellOrder(e,...t){return this.createOrder(e,"limit","sell",...t)}createMarketBuyOrder(e,t,i={}){return this.createOrder(e,"market","buy",t,void 0,i)}createMarketSellOrder(e,t,i={}){return this.createOrder(e,"market","sell",t,void 0,i)}costToPrecision(e,t){return S(t,D,this.markets[e].precision.price,this.precisionMode)}priceToPrecision(e,t){return S(t,D,this.markets[e].precision.price,this.precisionMode)}amountToPrecision(e,t){return S(t,q,this.markets[e].precision.amount,this.precisionMode)}feeToPrecision(e,t){return S(t,D,this.markets[e].precision.price,this.precisionMode)}currencyToPrecision(e,t){return this.decimalToPrecision(t,D,this.currencies[e].precision,this.precisionMode)}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d=n[a],c=parseFloat(this.costToPrecision(e,s*r));return{type:a,currency:n.quote,rate:d,cost:parseFloat(this.feeToPrecision(e,d*c))}}mdy(e,t="-"){t=t||"";let i=new Date(e),s=i.getUTCFullYear().toString(),r=i.getUTCMonth()+1,a=i.getUTCDate();return(r=r<10?"0"+r:r.toString())+t+(a=a<10?"0"+a:a.toString())+t+s}ymd(e,t="-"){t=t||"";let i=new Date(e),s=i.getUTCFullYear().toString(),r=i.getUTCMonth()+1,a=i.getUTCDate();return s+t+(r=r<10?"0"+r:r.toString())+t+(a=a<10?"0"+a:a.toString())}ymdhms(e,t=" "){let i=new Date(e),s=i.getUTCFullYear(),r=i.getUTCMonth()+1,a=i.getUTCDate(),o=i.getUTCHours(),n=i.getUTCMinutes(),d=i.getUTCSeconds();return s+"-"+(r=r<10?"0"+r:r)+"-"+(a=a<10?"0"+a:a)+t+(o=o<10?"0"+o:o)+":"+(n=n<10?"0"+n:n)+":"+(d=d<10?"0"+d:d)}static hasWeb3(){return L&&V&&N&&U}checkRequiredDependencies(){if(!e.hasWeb3())throw new B("The following npm modules are required:\nnpm install web3 ethereumjs-util ethereumjs-abi bignumber.js --no-save")}ethDecimals(e="ether"){return this.safeValue({wei:0,kwei:3,babbage:3,femtoether:3,mwei:6,lovelace:6,picoether:6,gwei:9,shannon:9,nanoether:9,nano:9,szabo:12,microether:12,micro:12,finney:15,milliether:15,milli:15,ether:18,kether:21,grand:21,mether:24,gether:27,tether:30},e)}ethUnit(e=18){return this.safeValue({0:"wei",3:"kwei",6:"mwei",9:"gwei",12:"szabo",15:"finney",18:"ether",21:"kether",24:"mether",27:"gether",30:"tether"},e)}fromWei(e,t="ether",i=18){return void 0===e?e:(e=18!==i?new U(e).times(new U(10**(18-i))).toFixed():new U(e).toFixed(),parseFloat(this.web3.utils.fromWei(e,t)))}toWei(e,t="ether",i=18){return void 0===e?e:(e=18!==i?new U(this.numberToString(e)).div(new U(10**(18-i))).toFixed():this.numberToString(e),this.web3.utils.toWei(e,t))}decryptAccountFromJson(e,t){return this.decryptAccount("string"==typeof e?JSON.parse(e):e,t)}decryptAccount(e,t){return this.web3.eth.accounts.decrypt(e,t)}decryptAccountFromPrivateKey(e){return this.web3.eth.accounts.privateKeyToAccount(e)}soliditySha3(e){const t=this.solidityValues(e),i=this.solidityTypes(t);return"0x"+N.soliditySHA3(i,t).toString("hex")}soliditySha256(e){const t=this.solidityValues(e),i=this.solidityTypes(t);return"0x"+N.soliditySHA256(i,t).toString("hex")}solidityTypes(e){return e.map(e=>this.web3.utils.isAddress(e)?"address":"uint256")}solidityValues(e){return e.map(e=>this.web3.utils.isAddress(e)?e:new U(e).toFixed())}getZeroExOrderHash(e){return this.soliditySha3([e.exchangeContractAddress,e.maker,e.taker,e.makerTokenAddress,e.takerTokenAddress,e.feeRecipient,e.makerTokenAmount,e.takerTokenAmount,e.makerFee,e.takerFee,e.expirationUnixTimestampSec,e.salt])}getZeroExOrderHashV2(e){const t="000000000000000000000000",i=N.soliditySHA3(["bytes","bytes","address"],[Buffer.from("91ab3d17e3a50a9d89e63fd30b92be7f5336b03b287bb946787a83a9d62a2766f0f24618f4c4be1e62e026fb039a20ef96f4495294817d1027ffaa6d1f70e61ead7c5bef027816a800da1736444fb58a807ef4c9603b7848673f7e3a68eb14a5","hex"),Buffer.from(t,"hex"),e.exchangeAddress]),s=N.soliditySHA3(["bytes","bytes","address","bytes","address","bytes","address","bytes","address","uint256","uint256","uint256","uint256","uint256","uint256","string","string"],[Buffer.from("770501f88a26ede5c04a20ef877969e961eb11fc13b78aaf414b633da0d4f86f","hex"),Buffer.from(t,"hex"),e.makerAddress,Buffer.from(t,"hex"),e.takerAddress,Buffer.from(t,"hex"),e.feeRecipientAddress,Buffer.from(t,"hex"),e.senderAddress,e.makerAssetAmount,e.takerAssetAmount,e.makerFee,e.takerFee,e.expirationTimeSeconds,e.salt,V.keccak(Buffer.from(e.makerAssetData.slice(2),"hex")),V.keccak(Buffer.from(e.takerAssetData.slice(2),"hex"))]);return"0x"+V.keccak(Buffer.concat([Buffer.from("1901","hex"),i,s])).toString("hex")}signZeroExOrder(e,t){const i=this.getZeroExOrderHash(e),s=this.signMessage(i,t);return this.extend(e,{orderHash:i,ecSignature:s})}signZeroExOrderV2(e,t){const i=this.getZeroExOrderHashV2(e),s=this.signMessage(i,t);return this.extend(e,{orderHash:i,signature:this.convertECSignatureToSignatureHex(s)})}convertECSignatureToSignatureHex(e){let t=e.v;return 27!==t&&28!==t&&(t+=27),"0x"+Buffer.concat([V.toBuffer(t),V.toBuffer(e.r),V.toBuffer(e.s)]).toString("hex")+"03"}hashMessage(e){return this.web3.eth.accounts.hashMessage(e)}signHash(e,t){const i=V.ecsign(Buffer.from(e.slice(-64),"hex"),Buffer.from(t.slice(-64),"hex"));return{v:i.v,r:"0x"+i.r.toString("hex"),s:"0x"+i.s.toString("hex")}}signMessage(e,t){const i=this.decryptAccountFromPrivateKey(t).sign(e,t.slice(-64));return{v:parseInt(i.v.slice(2),16),r:i.r,s:i.s}}signMessage2(e,t){return this.signHash(this.hashMessage(e),t.slice(-64))}oath(){if(void 0!==this.twofa)return this.totp(this.twofa);throw new B(this.id+" this.twofa has not been set")}}},function(e,t,i){var s;e.exports=(s=s||function(e,t){var i=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),s={},r=s.lib={},a=r.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,i=e.words,s=this.sigBytes,r=e.sigBytes;if(this.clamp(),s%4)for(var a=0;a<r;a++){var o=i[a>>>2]>>>24-a%4*8&255;t[s+a>>>2]|=o<<24-(s+a)%4*8}else for(var a=0;a<r;a+=4)t[s+a>>>2]=i[a>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i,s=[],r=function(t){var t=t,i=987654321,s=4294967295;return function(){var r=((i=36969*(65535&i)+(i>>16)&s)<<16)+(t=18e3*(65535&t)+(t>>16)&s)&s;return r/=4294967296,(r+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var n=r(4294967296*(i||e.random()));i=987654071*n(),s.push(4294967296*n()|0)}return new o.init(s,t)}}),n=s.enc={},d=n.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],r=0;r<i;r++){var a=t[r>>>2]>>>24-r%4*8&255;s.push((a>>>4).toString(16)),s.push((15&a).toString(16))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s+=2)i[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new o.init(i,t/2)}},c=n.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],r=0;r<i;r++){var a=t[r>>>2]>>>24-r%4*8&255;s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var t=e.length,i=[],s=0;s<t;s++)i[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new o.init(i,t)}},h=n.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},l=r.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,s=i.words,r=i.sigBytes,a=this.blockSize,n=4*a,d=r/n,c=(d=t?e.ceil(d):e.max((0|d)-this._minBufferSize,0))*a,h=e.min(4*c,r);if(c){for(var l=0;l<c;l+=a)this._doProcessBlock(s,l);var u=s.splice(0,c);i.sigBytes-=h}return new o.init(u,h)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u=(r.Hasher=l.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new u.HMAC.init(e,i).finalize(t)}}}),s.algo={});return s}(Math),s)},function(e,t,i){var s;e.exports=(s=i(2),i(5),void(s.lib.Cipher||function(e){var t=s,i=t.lib,r=i.Base,a=i.WordArray,o=i.BufferedBlockAlgorithm,n=t.enc,d=(n.Utf8,n.Base64),c=t.algo,h=c.EvpKDF,l=i.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?C:g}return function(t){return{encrypt:function(i,s,r){return e(s).encrypt(t,i,s,r)},decrypt:function(i,s,r){return e(s).decrypt(t,i,s,r)}}}}()}),u=(i.StreamCipher=l.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),t.mode={}),p=i.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),m=u.CBC=function(){var t=p.extend();function i(t,i,s){var r=this._iv;if(r){var a=r;this._iv=e}else var a=this._prevBlock;for(var o=0;o<s;o++)t[i+o]^=a[o]}return t.Encryptor=t.extend({processBlock:function(e,t){var s=this._cipher,r=s.blockSize;i.call(this,e,t,r),s.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),t.Decryptor=t.extend({processBlock:function(e,t){var s=this._cipher,r=s.blockSize,a=e.slice(t,t+r);s.decryptBlock(e,t),i.call(this,e,t,r),this._prevBlock=a}}),t}(),f=t.pad={},y=f.Pkcs7={pad:function(e,t){for(var i=4*t,s=i-e.sigBytes%i,r=s<<24|s<<16|s<<8|s,o=[],n=0;n<s;n+=4)o.push(r);var d=a.create(o,s);e.concat(d)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},b=(i.BlockCipher=l.extend({cfg:l.cfg.extend({mode:m,padding:y}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var s=i.createEncryptor;else{var s=i.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==s?this._mode.init(this,t&&t.words):(this._mode=s.call(i,this,t&&t.words),this._mode.__creator=s)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),i.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),w=t.format={},v=w.OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var s=a.create([1398893684,1701076831]).concat(i).concat(t);else var s=t;return s.toString(d)},parse:function(e){var t=d.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var s=a.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return b.create({ciphertext:t,salt:s})}},g=i.SerializableCipher=r.extend({cfg:r.extend({format:v}),encrypt:function(e,t,i,s){s=this.cfg.extend(s);var r=e.createEncryptor(i,s),a=r.finalize(t),o=r.cfg;return b.create({ciphertext:a,key:i,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:s.format})},decrypt:function(e,t,i,s){s=this.cfg.extend(s),t=this._parse(t,s.format);var r=e.createDecryptor(i,s).finalize(t.ciphertext);return r},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),k=t.kdf={},T=k.OpenSSL={execute:function(e,t,i,s){s||(s=a.random(8));var r=h.create({keySize:t+i}).compute(e,s),o=a.create(r.words.slice(t),4*i);return r.sigBytes=4*t,b.create({key:r,iv:o,salt:s})}},C=i.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:T}),encrypt:function(e,t,i,s){var r=(s=this.cfg.extend(s)).kdf.execute(i,e.keySize,e.ivSize);s.iv=r.iv;var a=g.encrypt.call(this,e,t,r.key,s);return a.mixIn(r),a},decrypt:function(e,t,i,s){s=this.cfg.extend(s),t=this._parse(t,s.format);var r=s.kdf.execute(i,e.keySize,e.ivSize,t.salt);s.iv=r.iv;var a=g.decrypt.call(this,e,t,r.key,s);return a}})}()))},function(e,t,i){"use strict";const{isString:s,isNumber:r}=i(17),{max:a}=Math,o={ROUND:0,TRUNCATE:1,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,NO_PADDING:0,PAD_WITH_ZERO:1};function n(e){if(s(e))return e;if(Math.abs(e)<1){const t=e.toString(),i=parseInt(t.split("e-")[1]),s="-"===t[0];i&&(e*=Math.pow(10,i-1),e=(s?"-":"")+"0."+new Array(i).join("0")+e.toString().substring(s?3:2))}else{let t=parseInt(e.toString().split("+")[1]);t>20&&(t-=20,e/=Math.pow(10,t),e+=new Array(t+1).join("0"))}return e.toString()}const d=[],c=(e,t=0)=>{if(e=n(e),t>0){const i=d[t]||(d[t]=new RegExp("([-]*\\d+\\.\\d{"+t+"})(\\d)")),[,s]=e.toString().match(i)||[null,e];return s.toString()}return parseInt(e).toString()};const h=(e,t,i,s=0,r=0)=>{if(i<0){let a=Math.pow(10,-i);if(0===t)return(a*h(e/a,t,0,s,r)).toString();if(1===t)return(e-e%a).toString()}const o=n(e),d="-"===o[0],c=d?1:0,l=o.length;for(var u=0;u<l&&"."!==o[u];u++);const p=u<o.length,m=new Uint8Array(l-c+(p?0:1));m[0]=48;let f=m.length,y=-1,b=-1;for(var w=1,v=c;v<l;v++,w++){const e=o.charCodeAt(v);if(46===e)f=w--;else{if(e<48||e>57)throw new Error(`${o}: invalid number (contains an illegal character '${o[w-1]}')`);m[w]=e,48!==e&&y<0&&(y=w)}}y<0&&(y=1);let g=0===s?f:y,k=g+i;b=-1;let T=!0,C=d;for(let e=m.length-1,s=0;e>=0;e--){let r=m[e];if(0!==e){if(r+=s,e>=g+i){r=0===t&&r>=53&&!(53===r&&s)?58:48}r>57?(r=48,s=1):s=0}else s&&(r=49);m[e]=r,48!==r&&(T=!1,y=e,b=b<0?e+1:b)}1===s&&(k=(g=y)+i),T&&(C=!1);const _=y>=f||T?f-1:y,O=b<f?f:b,x=C?1:0,S=x+(f-_),B=a(O-f,0),I=O-_,M=a((0===r?I:k-_)-I,0),F=S+1+B,E=F+M,A=B+M===0,P=new Uint8Array(S+(A?0:1)+B+M);for(C&&(P[0]=45),w=x,v=_;w<S;w++,v++)P[w]=m[v];for(A||(P[S]=46),w=S+1,v=f;w<F;w++,v++)P[w]=m[v];for(w=F;w<E;w++)P[w]=48;return String.fromCharCode(...P)};e.exports={numberToString:n,precisionFromString:function(e){const t=e.replace(/0+$/g,"").split(".");return t.length>1?t[1].length:0},decimalToPrecision:h,truncate_to_string:c,truncate:(e,t=0)=>parseFloat(c(e,t)),precisionConstants:o,ROUND:0,TRUNCATE:1,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,NO_PADDING:0,PAD_WITH_ZERO:1}},function(e,t,i){var s,r,a,o,n,d,c,h;e.exports=(s=i(2),i(18),i(19),a=(r=s).lib,o=a.Base,n=a.WordArray,d=r.algo,c=d.MD5,h=d.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=i.hasher.create(),r=n.create(),a=r.words,o=i.keySize,d=i.iterations;a.length<o;){c&&s.update(c);var c=s.update(e).finalize(t);s.reset();for(var h=1;h<d;h++)c=s.finalize(c),s.reset();r.concat(c)}return r.sigBytes=4*o,r}}),r.EvpKDF=function(e,t,i){return h.create(i).compute(e,t)},s.EvpKDF)},function(e,t,i){var s,r,a;e.exports=(s=i(2),a=(r=s).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,s=this._map;e.clamp();for(var r=[],a=0;a<i;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,n=0;n<4&&a+.75*n<i;n++)r.push(s.charAt(o>>>6*(3-n)&63));var d=s.charAt(64);if(d)for(;r.length%4;)r.push(d);return r.join("")},parse:function(e){var t=e.length,i=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var r=0;r<i.length;r++)s[i.charCodeAt(r)]=r}var o=i.charAt(64);if(o){var n=e.indexOf(o);-1!==n&&(t=n)}return function(e,t,i){for(var s=[],r=0,o=0;o<t;o++)if(o%4){var n=i[e.charCodeAt(o-1)]<<o%4*2,d=i[e.charCodeAt(o)]>>>6-o%4*2;s[r>>>2]|=(n|d)<<24-r%4*8,r++}return a.create(s,r)}(e,t,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},s.enc.Base64)},function(e,t,i){var s;e.exports=(s=i(2),function(e){var t=s,i=t.lib,r=i.WordArray,a=i.Hasher,o=t.algo,n=[];!function(){for(var t=0;t<64;t++)n[t]=4294967296*e.abs(e.sin(t+1))|0}();var d=o.MD5=a.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,r=e[s];e[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var a=this._hash.words,o=e[t+0],d=e[t+1],p=e[t+2],m=e[t+3],f=e[t+4],y=e[t+5],b=e[t+6],w=e[t+7],v=e[t+8],g=e[t+9],k=e[t+10],T=e[t+11],C=e[t+12],_=e[t+13],O=e[t+14],x=e[t+15],S=a[0],B=a[1],I=a[2],M=a[3];S=c(S,B,I,M,o,7,n[0]),M=c(M,S,B,I,d,12,n[1]),I=c(I,M,S,B,p,17,n[2]),B=c(B,I,M,S,m,22,n[3]),S=c(S,B,I,M,f,7,n[4]),M=c(M,S,B,I,y,12,n[5]),I=c(I,M,S,B,b,17,n[6]),B=c(B,I,M,S,w,22,n[7]),S=c(S,B,I,M,v,7,n[8]),M=c(M,S,B,I,g,12,n[9]),I=c(I,M,S,B,k,17,n[10]),B=c(B,I,M,S,T,22,n[11]),S=c(S,B,I,M,C,7,n[12]),M=c(M,S,B,I,_,12,n[13]),I=c(I,M,S,B,O,17,n[14]),S=h(S,B=c(B,I,M,S,x,22,n[15]),I,M,d,5,n[16]),M=h(M,S,B,I,b,9,n[17]),I=h(I,M,S,B,T,14,n[18]),B=h(B,I,M,S,o,20,n[19]),S=h(S,B,I,M,y,5,n[20]),M=h(M,S,B,I,k,9,n[21]),I=h(I,M,S,B,x,14,n[22]),B=h(B,I,M,S,f,20,n[23]),S=h(S,B,I,M,g,5,n[24]),M=h(M,S,B,I,O,9,n[25]),I=h(I,M,S,B,m,14,n[26]),B=h(B,I,M,S,v,20,n[27]),S=h(S,B,I,M,_,5,n[28]),M=h(M,S,B,I,p,9,n[29]),I=h(I,M,S,B,w,14,n[30]),S=l(S,B=h(B,I,M,S,C,20,n[31]),I,M,y,4,n[32]),M=l(M,S,B,I,v,11,n[33]),I=l(I,M,S,B,T,16,n[34]),B=l(B,I,M,S,O,23,n[35]),S=l(S,B,I,M,d,4,n[36]),M=l(M,S,B,I,f,11,n[37]),I=l(I,M,S,B,w,16,n[38]),B=l(B,I,M,S,k,23,n[39]),S=l(S,B,I,M,_,4,n[40]),M=l(M,S,B,I,o,11,n[41]),I=l(I,M,S,B,m,16,n[42]),B=l(B,I,M,S,b,23,n[43]),S=l(S,B,I,M,g,4,n[44]),M=l(M,S,B,I,C,11,n[45]),I=l(I,M,S,B,x,16,n[46]),S=u(S,B=l(B,I,M,S,p,23,n[47]),I,M,o,6,n[48]),M=u(M,S,B,I,w,10,n[49]),I=u(I,M,S,B,O,15,n[50]),B=u(B,I,M,S,y,21,n[51]),S=u(S,B,I,M,C,6,n[52]),M=u(M,S,B,I,m,10,n[53]),I=u(I,M,S,B,k,15,n[54]),B=u(B,I,M,S,d,21,n[55]),S=u(S,B,I,M,v,6,n[56]),M=u(M,S,B,I,x,10,n[57]),I=u(I,M,S,B,b,15,n[58]),B=u(B,I,M,S,_,21,n[59]),S=u(S,B,I,M,f,6,n[60]),M=u(M,S,B,I,T,10,n[61]),I=u(I,M,S,B,p,15,n[62]),B=u(B,I,M,S,g,21,n[63]),a[0]=a[0]+S|0,a[1]=a[1]+B|0,a[2]=a[2]+I|0,a[3]=a[3]+M|0},_doFinalize:function(){var t=this._data,i=t.words,s=8*this._nDataBytes,r=8*t.sigBytes;i[r>>>5]|=128<<24-r%32;var a=e.floor(s/4294967296),o=s;i[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(i.length+1),this._process();for(var n=this._hash,d=n.words,c=0;c<4;c++){var h=d[c];d[c]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}return n},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,i,s,r,a,o){var n=e+(t&i|~t&s)+r+o;return(n<<a|n>>>32-a)+t}function h(e,t,i,s,r,a,o){var n=e+(t&s|i&~s)+r+o;return(n<<a|n>>>32-a)+t}function l(e,t,i,s,r,a,o){var n=e+(t^i^s)+r+o;return(n<<a|n>>>32-a)+t}function u(e,t,i,s,r,a,o){var n=e+(i^(t|~s))+r+o;return(n<<a|n>>>32-a)+t}t.MD5=a._createHelper(d),t.HmacMD5=a._createHmacHelper(d)}(Math),s.MD5)},function(e,t,i){"use strict";var s,r=i(10),a=r.Buffer,o={};for(s in r)r.hasOwnProperty(s)&&"SlowBuffer"!==s&&"Buffer"!==s&&(o[s]=r[s]);var n=o.Buffer={};for(s in a)a.hasOwnProperty(s)&&"allocUnsafe"!==s&&"allocUnsafeSlow"!==s&&(n[s]=a[s]);if(o.Buffer.prototype=a.prototype,n.from&&n.from!==Uint8Array.from||(n.from=function(e,t,i){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return a(e,t,i)}),n.alloc||(n.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var s=a(e);return t&&0!==t.length?"string"==typeof i?s.fill(t,i):s.fill(t):s.fill(0),s}),!o.kStringMaxLength)try{o.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}o.constants||(o.constants={MAX_LENGTH:o.kMaxLength},o.kStringMaxLength&&(o.constants.MAX_STRING_LENGTH=o.kStringMaxLength)),e.exports=o},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("buffer")},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"foxbit",name:"FoxBit",countries:["BR"],has:{CORS:!1,createMarketOrder:!1},rateLimit:1e3,version:"v1",urls:{logo:"https://user-images.githubusercontent.com/1294454/27991413-11b40d42-647f-11e7-91ee-78ced874dd09.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://foxbit.exchange",doc:"https://blinktrade.com/docs"},comment:"Blinktrade API",api:{public:{get:["{currency}/ticker","{currency}/orderbook","{currency}/trades"]},private:{post:["D","F","U2","U4","U6","U18","U24","U26","U30","U34","U70"]}},markets:{"BTC/VEF":{id:"BTCVEF",symbol:"BTC/VEF",base:"BTC",quote:"VEF",brokerId:1,broker:"SurBitcoin"},"BTC/VND":{id:"BTCVND",symbol:"BTC/VND",base:"BTC",quote:"VND",brokerId:3,broker:"VBTC"},"BTC/BRL":{id:"BTCBRL",symbol:"BTC/BRL",base:"BTC",quote:"BRL",brokerId:4,broker:"FoxBit"},"BTC/PKR":{id:"BTCPKR",symbol:"BTC/PKR",base:"BTC",quote:"PKR",brokerId:8,broker:"UrduBit"},"BTC/CLP":{id:"BTCCLP",symbol:"BTC/CLP",base:"BTC",quote:"CLP",brokerId:9,broker:"ChileBit"}},options:{brokerId:"4"}})}async fetchBalance(e={}){let t=await this.privatePostU2({BalanceReqID:this.nonce()}),i=this.safeValue(t.Responses,this.options.brokerId),s={info:t};if(void 0!==i){let e=Object.keys(this.currencies_by_id);for(let t=0;t<e.length;t++){let r=e[t],a=this.currencies_by_id[r].code;if(r in i){let e=this.account();e.used=1e-8*parseFloat(i[r+"_locked"]),e.total=1e-8*parseFloat(i[r]),e.free=e.total-e.used,s[a]=e}}}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){let s=this.market(e),r=await this.publicGetCurrencyOrderbook(this.extend({currency:s.quote,crypto_currency:s.base},i));return this.parseOrderBook(r)}async fetchTicker(e,t={}){let i=this.market(e),s=await this.publicGetCurrencyTicker(this.extend({currency:i.quote,crypto_currency:i.base},t)),r=this.milliseconds(),a="vol_"+i.quote.toLowerCase(),o=this.safeFloat(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"buy"),bidVolume:void 0,ask:this.safeFloat(s,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"vol"),quoteVolume:parseFloat(s[a]),info:s}}parseTrade(e,t){let i=1e3*e.date;return{id:this.safeString(e,"tid"),info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.side,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetCurrencyTrades(this.extend({currency:r.quote,crypto_currency:r.base},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,a,o={}){if("market"===t)throw new r(this.id+" allows limit orders only");let n=this.market(e),d="buy"===i?"1":"2",c={ClOrdID:this.nonce(),Symbol:n.id,Side:d,OrdType:"2",Price:a,OrderQty:s,BrokerID:n.brokerId},h=await this.privatePostD(this.extend(c,o));return{info:h,id:this.indexBy(h.Responses,"MsgType")[8].OrderID}}async cancelOrder(e,t,i={}){return await this.privatePostF(this.extend({ClOrdID:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let t=this.nonce().toString(),i=this.extend({MsgType:e},n);a=this.json(i),r={APIKey:this.apiKey,Nonce:t,Signature:this.hmac(this.encode(t),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("Status"in n&&200!==n.Status)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){var s,r,a,o,n,d;e.exports=(s=i(2),a=(r=s).lib,o=a.Base,n=a.WordArray,(d=r.x64={}).Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),d.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],s=0;s<t;s++){var r=e[s];i.push(r.high),i.push(r.low)}return n.create(i,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),i=t.length,s=0;s<i;s++)t[s]=t[s].clone();return e}}),s)},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,DDoSProtection:o,InsufficientFunds:n,InvalidOrder:d,OrderNotFound:c,AuthenticationError:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okcoinusd",name:"OKCoin USD",countries:["CN","US"],version:"v1",rateLimit:1e3,has:{CORS:!1,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,withdraw:!0,futures:!1},extension:".do",timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},api:{web:{get:["futures/pc/market/marketOverview","spot/markets/index-tickers","spot/markets/currencies","spot/markets/products","spot/markets/tickers","spot/user-level"]},public:{get:["depth","exchange_rate","future_depth","future_estimated_price","future_hold_amount","future_index","future_kline","future_price_limit","future_ticker","future_trades","kline","otcs","ticker","tickers","trades"]},private:{post:["account_records","batch_trade","borrow_money","borrow_order_info","borrows_info","cancel_borrow","cancel_order","cancel_otc_order","cancel_withdraw","funds_transfer","future_batch_trade","future_cancel","future_devolve","future_explosive","future_order_info","future_orders_info","future_position","future_position_4fix","future_trade","future_trades_history","future_userinfo","future_userinfo_4fix","lend_depth","order_fee","order_history","order_info","orders_info","otc_order_history","otc_order_info","repayment","submit_otc_order","trade","trade_history","trade_otc_order","wallet_info","withdraw","withdraw_info","unrepayments_info","userinfo"]}},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766791-89ffb502-5ee5-11e7-8a5b-c5950b68ac65.jpg",api:{web:"https://www.okcoin.com/v2",public:"https://www.okcoin.com/api",private:"https://www.okcoin.com"},www:"https://www.okcoin.com",doc:["https://www.okcoin.com/docs/en/","https://www.npmjs.com/package/okcoin.com"]},fees:{trading:{taker:.002,maker:.002}},exceptions:{10000:r,10001:o,10005:h,10006:h,10007:h,1002:n,1003:d,1004:d,1013:d,1027:d,1050:d,1217:d,10014:d,1009:c,1019:c,1051:c,10009:c,20015:c,10008:r},options:{marketBuyPrice:!1,defaultContractType:"this_week",warnOnFetchOHLCVLimitArgument:!0,fiats:["USD","CNY"],futures:{BCH:!0,BTC:!0,BTG:!0,EOS:!0,ETC:!0,ETH:!0,LTC:!0,NEO:!0,QTUM:!0,USDT:!0,XRP:!0}}})}async fetchMarkets(e={}){let t=(await this.webGetSpotMarketsProducts()).data,i=[];for(let e=0;e<t.length;e++){let s=t[e].symbol,[r,a]=s.split("_"),o=r.toUpperCase(),n=a.toUpperCase(),d=this.commonCurrencyCode(o),c=this.commonCurrencyCode(n),h=d+"/"+c,l={amount:t[e].maxSizeDigit,price:t[e].maxPriceDigit},u=t[e].minTradeSize,p=Math.pow(10,-l.price),m=0!==t[e].online,f=t[e].baseCurrency,y=t[e].quoteCurrency,b=this.extend(this.fees.trading,{id:s,symbol:h,base:d,quote:c,baseId:r,quoteId:a,baseNumericId:f,quoteNumericId:y,info:t[e],type:"spot",spot:!0,future:!1,active:m,precision:l,limits:{amount:{min:u,max:void 0},price:{min:p,max:void 0},cost:{min:u*p,max:void 0}}});if(i.push(b),this.has.futures&&b.base in this.options.futures){let e=this.options.fiats;for(let t=0;t<e.length;t++){const s=e[t],r=s.toLowerCase();i.push(this.extend(b,{quote:s,symbol:b.base+"/"+s,id:b.base.toLowerCase()+"_"+r,quoteId:r,type:"future",spot:!1,future:!0}))}}}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r="publicGet",a={symbol:s.id};void 0!==t&&(a.size=t),s.future&&(r+="Future",a.contract_type=this.options.defaultContractType),r+="Depth";let o=await this[r](this.extend(a,i));return this.parseOrderBook(o)}parseTicker(e,t){let i=this.safeInteger2(e,"timestamp","createdDate"),s=void 0;if(void 0===t&&"symbol"in e){let i=e.symbol;if(i in this.markets_by_id)t=this.markets_by_id[i];else{let[t,i]=e.symbol.split("_"),r=t.toUpperCase(),a=i.toUpperCase();s=(r=this.commonCurrencyCode(r))+"/"+(a=this.commonCurrencyCode(a))}}void 0!==t&&(s=t.symbol);let r=this.safeFloat(e,"last"),a=this.safeFloat(e,"open"),o=this.safeFloat(e,"change"),n=this.safeFloat(e,"changePercentage");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:a,close:r,last:r,previousClose:void 0,change:o,percentage:n,average:void 0,baseVolume:this.safeFloat2(e,"vol","volume"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s="publicGet",a={symbol:i.id};i.future&&(s+="Future",a.contract_type=this.options.defaultContractType),s+="Ticker";let o=await this[s](this.extend(a,t)),n=this.safeValue(o,"ticker");if(void 0===n)throw new r(this.id+" fetchTicker returned an empty response: "+this.json(o));let d=this.safeInteger(o,"date");return void 0!==d&&(d*=1e3,n=this.extend(n,{timestamp:d})),this.parseTicker(n,i)}parseTrade(e,t){let i=void 0;return t&&(i=t.symbol),{info:e,timestamp:e.date_ms,datetime:this.iso8601(e.date_ms),symbol:i,id:e.tid.toString(),order:void 0,type:void 0,side:e.type,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a="publicGet",o={symbol:r.id};r.future&&(a+="Future",o.contract_type=this.options.defaultContractType),a+="Trades";let n=await this[a](this.extend(o,s));return this.parseTrades(n,r,t,i)}parseOHLCV(e,t,i="1m",s,r){let a=e.length>6?6:5;return[e[0],parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[a])]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();let o=this.market(e),n="publicGet",d={symbol:o.id,type:this.timeframes[t]};if(o.future&&(n+="Future",d.contract_type=this.options.defaultContractType),n+="Kline",void 0!==s){if(this.options.warnOnFetchOHLCVLimitArgument)throw new r(this.id+' fetchOHLCV counts "limit" candles from current time backwards, therefore the "limit" argument for '+this.id+" is disabled. Set "+this.id+'.options["warnOnFetchOHLCVLimitArgument"] = false to suppress this warning message.');d.size=parseInt(s)}d.since=void 0!==i?i:this.milliseconds()-864e5;let c=await this[n](this.extend(d,a));return this.parseOHLCVs(c,o,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostUserinfo(e),i=t.info.funds,s={info:t},r=Object.keys(i.free),a="freezed";a in i||(a="holds");let o=Object.keys(i[a]);r=this.arrayConcat(r,o);for(let e=0;e<r.length;e++){let t=r[e],o=t.toUpperCase();o=t in this.currencies_by_id?this.currencies_by_id[t].code:this.commonCurrencyCode(o);let n=this.account();n.free=this.safeFloat(i.free,t,0),n.used=this.safeFloat(i[a],t,0),n.total=this.sum(n.free,n.used),s[o]=n}return this.parseBalance(s)}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();let n=this.market(e),d="privatePost",c={symbol:n.id,type:i};if(n.future)d+="Future",c=this.extend(c,{contract_type:this.options.defaultContractType,match_price:0,lever_rate:10,price:a,amount:s});else if("limit"===t)c.price=a,c.amount=s;else if(c.type+="_market","buy"===i){if(this.options.marketBuyPrice){if(void 0===a)throw new r(this.id+" market buy orders require a price argument (the amount you want to spend or the cost of the order) when this.options['marketBuyPrice'] is true.");c.price=a}else if(c.price=this.safeFloat(o,"cost"),!c.price)throw new r(this.id+" market buy orders require an additional cost parameter, cost = price * amount. If you want to pass the cost of the market order (the amount you want to spend) in the price argument (the default "+this.id+" behaviour), set this.options['marketBuyPrice'] = true. It will effectively suppress this warning exception as well.")}else c.amount=s;o=this.omit(o,"cost"),d+="Trade";let h=await this[d](this.extend(c,o)),l=this.milliseconds();return{info:h,id:h.order_id.toString(),timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:void 0,symbol:e,type:t,side:i,price:a,amount:s,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0}}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();let s=this.market(t),r={symbol:s.id,order_id:e},o="privatePost";return s.future?(o+="FutureCancel",r.contract_type=this.options.defaultContractType):o+="CancelOrder",await this[o](this.extend(r,i))}parseOrderStatus(e){return this.safeValue({"-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}parseOrderSide(e){return 1===e?"buy":2===e?"sell":3===e?"sell":4===e?"buy":e}parseOrder(e,t){let i=void 0,s=void 0;"type"in e&&("buy"===e.type||"sell"===e.type?(i=e.type,s="limit"):"buy_market"===e.type?(i="buy",s="market"):"sell_market"===e.type?(i="sell",s="market"):(i=this.parseOrderSide(e.type),("contract_name"in e||"lever_rate"in e)&&(s="margin")));let r=this.parseOrderStatus(this.safeString(e,"status")),a=void 0;if(void 0===t){let i=this.safeString(e,"symbol");i in this.markets_by_id&&(t=this.markets_by_id[i])}t&&(a=t.symbol);let o=void 0,n=this.getCreateDateField();n in e&&(o=e[n]);let d=this.safeFloat(e,"amount"),c=this.safeFloat(e,"deal_amount");d=Math.max(d,c);let h=Math.max(0,d-c);"market"===s&&(h=0);let l=this.safeFloat(e,"avg_price"),u=(l=this.safeFloat(e,"price_avg",l))*c;return{info:e,id:e.order_id.toString(),timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:a,type:s,side:i,price:e.price,average:l,cost:u,amount:d,filled:c,remaining:h,status:r,fee:void 0}}getCreateDateField(){return"create_date"}getOrdersField(){return"orders"}async fetchOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" fetchOrder requires a symbol parameter");await this.loadMarkets();let s=this.market(t),a="privatePost",o={order_id:e,symbol:s.id};s.future&&(a+="Future",o.contract_type=this.options.defaultContractType),a+="OrderInfo";let n=await this[a](this.extend(o,i)),d=this.getOrdersField();if(n[d].length>0)return this.parseOrder(n[d][0]);throw new c(this.id+" order "+e+" not found")}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOrders requires a symbol parameter");await this.loadMarkets();let a=this.market(e),o="privatePost",n={symbol:a.id},d="order_id"in s;if(a.future){if(o+="FutureOrdersInfo",n.contract_type=this.options.defaultContractType,!d)throw new r(this.id+" fetchOrders() requires order_id param for futures market "+e+" (a string of one or more order ids, comma-separated)")}else{let t=void 0;if("type"in s)t=s.type;else{if(!("status"in s)){let t=d?"type":"status";throw new r(this.id+" fetchOrders() requires "+t+" param for spot market "+e+" (0 - for unfilled orders, 1 - for filled/canceled orders)")}t=s.status}d?(o+="OrdersInfo",n=this.extend(n,{type:t,order_id:s.order_id})):(o+="OrderHistory",n=this.extend(n,{status:t,current_page:1,page_length:200})),s=this.omit(s,["type","status"])}let c=await this[o](this.extend(n,s)),h=this.getOrdersField();return this.parseOrders(c[h],a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:0},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:1},s))}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets(),s&&(i=i+":"+s);let o={symbol:this.currency(e).id+"_usd",withdraw_address:i,withdraw_amount:t,target:"address"},n=a;if(!("chargefee"in n))throw new r(this.id+" withdraw() requires a `chargefee` parameter");if(o.chargefee=n.chargefee,n=this.omit(n,"chargefee"),this.password?o.trade_pwd=this.password:"password"in n?(o.trade_pwd=n.password,n=this.omit(n,"password")):"trade_pwd"in n&&(o.trade_pwd=n.trade_pwd,n=this.omit(n,"trade_pwd")),!("trade_pwd"in o))throw new r(this.id+" withdraw() requires this.password set on the exchange instance or a password / trade_pwd parameter");let d=await this.privatePostWithdraw(this.extend(o,n));return{info:d,id:this.safeString(d,"withdraw_id")}}sign(e,t="public",i="GET",s={},r,a){let o="/";if("web"!==t&&(o+=this.version+"/"),o+=e,"web"!==t&&(o+=this.extension),"private"===t){this.checkRequiredCredentials();let e=this.keysort(this.extend({api_key:this.apiKey},s)),t=this.rawencode(e)+"&secret_key="+this.secret;e.sign=this.hash(this.encode(t)).toUpperCase(),a=this.urlencode(e),r={"Content-Type":"application/x-www-form-urlencoded"}}else Object.keys(s).length&&(o+="?"+this.urlencode(s));return{url:o=this.urls.api[t]+o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if(!(o.length<2)&&"{"===o[0]){if("error_code"in n){let e=this.safeString(n,"error_code"),t=this.id+" "+this.json(n);if(e in this.exceptions){throw new(0,this.exceptions[e])(t)}throw new r(t)}if("result"in n&&!n.result)throw new r(this.id+" "+this.json(n))}}}},function(e,t,i){"use strict";const s=i(1),{AuthenticationError:r,ExchangeError:a,ExchangeNotAvailable:o,InvalidOrder:n,OrderNotFound:d,InsufficientFunds:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"huobipro",name:"Huobi Pro",countries:["CN"],rateLimit:2e3,userAgent:this.userAgents.chrome39,version:"v1",accounts:void 0,accountsById:void 0,hostname:"api.huobi.pro",has:{CORS:!1,fetchTickers:!0,fetchDepositAddress:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchTradingLimits:!0,fetchMyTrades:!0,withdraw:!0,fetchCurrencies:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","1d":"1day","1w":"1week","1M":"1mon","1y":"1year"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766569-15aa7b9a-5edd-11e7-9e7f-44791f4ee49c.jpg",api:{market:"https://api.huobi.pro",public:"https://api.huobi.pro",private:"https://api.huobi.pro",zendesk:"https://huobiglobal.zendesk.com/hc/en-us/articles"},www:"https://www.huobi.pro",referral:"https://www.huobi.br.com/en-us/topic/invited/?invite_code=rwrd3",doc:"https://github.com/huobiapi/API_Docs/wiki/REST_api_reference",fees:"https://www.huobi.pro/about/fee/"},api:{zendesk:{get:["360000400491-Trade-Limits"]},market:{get:["history/kline","detail/merged","depth","trade","history/trade","detail","tickers"]},public:{get:["common/symbols","common/currencys","common/timestamp","common/exchange","settings/currencys"]},private:{get:["account/accounts","account/accounts/{id}/balance","order/orders/{id}","order/orders/{id}/matchresults","order/orders","order/matchresults","dw/withdraw-virtual/addresses","dw/deposit-virtual/addresses","dw/deposit-virtual/sharedAddressWithTag","query/deposit-withdraw","margin/loan-orders","margin/accounts/balance","points/actions","points/orders","subuser/aggregate-balance"],post:["order/orders/place","order/orders","order/orders/{id}/place","order/orders/{id}/submitcancel","order/orders/batchcancel","dw/balance/transfer","dw/withdraw/api/create","dw/withdraw-virtual/create","dw/withdraw-virtual/{id}/place","dw/withdraw-virtual/{id}/cancel","dw/transfer-in/margin","dw/transfer-out/margin","margin/orders","margin/orders/{id}/repay","subuser/transfer"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{"gateway-internal-error":o,"account-frozen-balance-insufficient-error":c,"invalid-amount":n,"order-limitorder-amount-min-error":n,"order-marketorder-amount-min-error":n,"order-limitorder-price-min-error":n,"order-limitorder-price-max-error":n,"order-orderstate-error":d,"order-queryorder-invalid":d,"order-update-error":o,"api-signature-check-failed":r,"api-signature-not-valid":r},options:{createMarketBuyOrderRequiresPrice:!0,fetchMarketsMethod:"publicGetCommonSymbols",fetchBalanceMethod:"privateGetAccountAccountsIdBalance",createOrderMethod:"privatePostOrderOrdersPlace",language:"en-US"}})}async fetchTradingLimits(e,t={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);let i={};for(let s=0;s<e.length;s++){let r=e[s];i[r]=await this.fetchTradingLimitsById(this.marketId(r),t)}return i}async fetchTradingLimitsById(e,t={}){let i={symbol:e},s=await this.publicGetCommonExchange(this.extend(i,t));return this.parseTradingLimits(this.safeValue(s,"data",{}))}parseTradingLimits(e,t,i={}){return{info:e,limits:{amount:{min:this.safeFloat(e,"limit-order-must-greater-than"),max:this.safeFloat(e,"limit-order-must-less-than")}}}}async fetchMarkets(e={}){let t=this.options.fetchMarketsMethod,i=(await this[t]()).data;if(i.length<1)throw new a(this.id+" publicGetCommonSymbols returned empty response: "+this.json(i));let s=[];for(let e=0;e<i.length;e++){let t=i[e],r=t["base-currency"],a=t["quote-currency"],o=r.toUpperCase(),n=a.toUpperCase(),d=r+a,c=(o=this.commonCurrencyCode(o))+"/"+(n=this.commonCurrencyCode(n)),h={amount:t["amount-precision"],price:t["price-precision"]},l="OMG"===o?0:.002,u="OMG"===o?0:.002;s.push({id:d,symbol:c,base:o,quote:n,baseId:r,quoteId:a,active:!0,precision:h,taker:u,maker:l,limits:{amount:{min:Math.pow(10,-h.amount),max:Math.pow(10,h.amount)},price:{min:Math.pow(10,-h.price),max:void 0},cost:{min:0,max:void 0}},info:t})}return s}parseTicker(e,t){let i=void 0;void 0!==t&&(i=t.symbol);let s=this.safeInteger(e,"ts"),r=void 0,a=void 0,o=void 0,n=void 0;"bid"in e&&Array.isArray(e.bid)&&(r=this.safeFloat(e.bid,0),o=this.safeFloat(e.bid,1)),"ask"in e&&Array.isArray(e.ask)&&(a=this.safeFloat(e.ask,0),n=this.safeFloat(e.ask,1));let d=this.safeFloat(e,"open"),c=this.safeFloat(e,"close"),h=void 0,l=void 0,u=void 0;void 0!==d&&void 0!==c&&(h=c-d,u=this.sum(d,c)/2,void 0!==c&&c>0&&(l=h/d*100));let p=this.safeFloat(e,"amount"),m=this.safeFloat(e,"vol"),f=void 0;return void 0!==p&&void 0!==m&&p>0&&(f=m/p),{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:r,bidVolume:o,ask:a,askVolume:n,vwap:f,open:d,close:c,last:c,previousClose:void 0,change:h,percentage:l,average:u,baseVolume:p,quoteVolume:m,info:e}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r=await this.marketGetDepth(this.extend({symbol:s.id,type:"step0"},i));if("tick"in r){if(!r.tick)throw new a(this.id+" fetchOrderBook() returned empty response: "+this.json(r));let e=r.tick,t=this.parseOrderBook(e,e.ts);return t.nonce=e.version,t}throw new a(this.id+" fetchOrderBook() returned unrecognized response: "+this.json(r))}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.marketGetDetailMerged(this.extend({symbol:i.id},t));return this.parseTicker(s.tick,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.marketGetTickers(t),s=i.data,r=this.safeInteger(i,"ts"),a={};for(let e=0;e<s.length;e++){let t=this.safeString(s[e],"symbol"),i=this.safeValue(this.markets_by_id,t),o=t;if(void 0!==i){o=i.symbol;let t=this.parseTicker(s[e],i);t.timestamp=r,t.datetime=this.iso8601(r),a[o]=t}}return a}parseTrade(e,t){let i=void 0;if(void 0===t){let i=this.safeString(e,"symbol");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(i=t.symbol);let s=this.safeInteger2(e,"ts","created-at"),r=this.safeString(e,"order-id"),a=this.safeString(e,"direction"),o=this.safeString(e,"type");if(void 0!==o){let e=o.split("-");a=e[0],o=e[1]}let n=this.safeFloat(e,"price"),d=this.safeFloat2(e,"filled-amount","amount"),c=void 0;void 0!==n&&void 0!==d&&(c=d*n);let h=void 0,l=this.safeFloat(e,"filled-fees"),u=void 0;void 0!==t&&(u="buy"===a?t.base:t.quote);let p=this.safeFloat(e,"filled-points");return void 0!==p&&(void 0!==l&&0!==l||(l=p,u=this.commonCurrencyCode("HBPOINT"))),void 0!==l&&(h={cost:l,currency:u}),{info:e,id:this.safeString(e,"id"),order:r,timestamp:s,datetime:this.iso8601(s),symbol:i,type:o,side:a,price:n,amount:d,cost:c,fee:h}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=await this.privateGetOrderMatchresults(s),a=this.parseTrades(r.data,void 0,t,i);if(void 0!==e){let t=this.market(e);a=this.filterBySymbol(a,t.symbol)}return a}async fetchTrades(e,t,i=1e3,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:r.id};void 0!==i&&(a.size=i);let o=(await this.marketGetHistoryTrade(this.extend(a,s))).data,n=[];for(let e=0;e<o.length;e++){let t=o[e].data;for(let e=0;e<t.length;e++){let i=this.parseTrade(t[e],r);n.push(i)}}return n=this.sortBy(n,"timestamp"),this.filterBySymbolSinceLimit(n,e,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e.id,e.open,e.high,e.low,e.close,e.amount]}async fetchOHLCV(e,t="1m",i,s=1e3,r={}){await this.loadMarkets();let a=this.market(e),o={symbol:a.id,period:this.timeframes[t]};void 0!==s&&(o.size=s);let n=await this.marketGetHistoryKline(this.extend(o,r));return this.parseOHLCVs(n.data,a,t,i,s)}async fetchAccounts(e={}){return await this.loadMarkets(),(await this.privateGetAccountAccounts(e)).data}async fetchCurrencies(e={}){let t=(await this.publicGetSettingsCurrencys(this.extend({language:this.options.language},e))).data,i={};for(let e=0;e<t.length;e++){let s=t[e],r=this.safeValue(s,"name"),a=this.safeInteger(s,"withdraw-precision"),o=this.commonCurrencyCode(r.toUpperCase()),n=s.visible&&s["deposit-enabled"]&&s["withdraw-enabled"];i[o]={id:r,code:o,type:"crypto",name:s["display-name"],active:n,fee:void 0,precision:a,limits:{amount:{min:Math.pow(10,-a),max:Math.pow(10,a)},price:{min:Math.pow(10,-a),max:Math.pow(10,a)},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(s,"deposit-min-amount"),max:Math.pow(10,a)},withdraw:{min:this.safeFloat(s,"withdraw-min-amount"),max:Math.pow(10,a)}},info:s}}return i}async fetchBalance(e={}){await this.loadMarkets(),await this.loadAccounts();let t=this.options.fetchBalanceMethod,i=await this[t](this.extend({id:this.accounts[0].id},e)),s=i.data.list,r={info:i};for(let e=0;e<s.length;e++){let t=s[e],i=t.currency.toUpperCase(),a=this.commonCurrencyCode(i),o=void 0;o=a in r?r[a]:this.account(),"trade"===t.type&&(o.free=parseFloat(t.balance)),"frozen"===t.type&&(o.used=parseFloat(t.balance)),o.total=this.sum(o.free,o.used),r[a]=o}return this.parseBalance(r)}async fetchOrdersByStates(e,t,i,s,r={}){await this.loadMarkets();let a={states:e},o=void 0;void 0!==t&&(o=this.market(t),a.symbol=o.id);let n=await this.privateGetOrderOrders(this.extend(a,r));return this.parseOrders(n.data,o,i,s)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByStates("pre-submitted,submitted,partial-filled,filled,partial-canceled,canceled",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByStates("pre-submitted,submitted,partial-filled",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStates("filled,partial-canceled,canceled",e,t,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetOrderOrdersId(this.extend({id:e},i));return this.parseOrder(s.data)}parseOrderStatus(e){return this.safeString({"partial-filled":"open","partial-canceled":"canceled",filled:"closed",canceled:"canceled",submitted:"open"},e,e)}parseOrder(e,t){let i=this.safeString(e,"id"),s=void 0,r=void 0,a=void 0;if("type"in e){let t=e.type.split("-");s=t[0],r=t[1],a=this.parseOrderStatus(this.safeString(e,"state"))}let o=void 0;if(void 0===t&&"symbol"in e&&e.symbol in this.markets_by_id){let i=e.symbol;t=this.markets_by_id[i]}void 0!==t&&(o=t.symbol);let n=this.safeInteger(e,"created-at"),d=this.safeFloat(e,"amount"),c=this.safeFloat(e,"field-amount");"market"===r&&"buy"===s&&(d="closed"===a?c:void 0);let h=this.safeFloat(e,"price");0===h&&(h=void 0);let l=this.safeFloat(e,"field-cash-amount"),u=void 0,p=void 0;void 0!==c&&(void 0!==d&&(u=d-c),void 0!==l&&c>0&&(p=l/c));const m=this.safeFloat(e,"field-fees");let f=void 0;if(void 0!==m){let e=void 0;void 0!==t&&(e="sell"===s?t.quote:t.base),f={cost:m,currency:e}}return{info:e,id:i,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:o,type:r,side:s,price:h,average:p,cost:l,amount:d,filled:c,remaining:u,status:a,fee:f}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),await this.loadAccounts();let o=this.market(e),d={"account-id":this.accounts[0].id,amount:this.amountToPrecision(e,s),symbol:o.id,type:i+"-"+t};if(this.options.createMarketBuyOrderRequiresPrice&&"market"===t&&"buy"===i){if(void 0===r)throw new n(this.id+" market buy order requires price argument to calculate cost (total amount of quote currency to spend for buying, amount * price). To switch off this warning exception and specify cost in the amount argument, set .options['createMarketBuyOrderRequiresPrice'] = false. Make sure you know what you're doing.");d.amount=this.priceToPrecision(e,parseFloat(s)*parseFloat(r))}"limit"!==t&&"ioc"!==t&&"limit-maker"!==t||(d.price=this.priceToPrecision(e,r));let c=this.options.createOrderMethod,h=await this[c](this.extend(d,a)),l=this.milliseconds();return{info:h,id:h.data,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:void 0,symbol:e,type:t,side:i,price:r,amount:s,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0}}async cancelOrder(e,t,i={}){const s=await this.privatePostOrderOrdersIdSubmitcancel({id:e});return this.extend(this.parseOrder(s),{id:e,status:"canceled"})}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id.toLowerCase()},r=this.safeValue(i,"info",{}),a=this.safeValue(r,"currency-addr-with-tag");let o="privateGetDwDepositVirtualAddresses";a&&(o="privateGetDwDepositVirtualSharedAddressWithTag");const n=await this[o](this.extend(s,t)),d=this.safeValue(n,"data");let c=void 0,h=void 0;return a?(c=this.safeString(d,"address"),h=this.safeString(d,"tag")):c=this.safeString(n,"data"),this.checkAddress(c),{currency:e,address:c,tag:h,info:n}}currencyToPrecision(e,t){return this.decimalToPrecision(t,0,this.currencies[e].precision)}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d=n[a],c=s*d,h="quote";return"sell"===i?c*=r:h="base",{type:a,currency:n[h],rate:d,cost:parseFloat(this.currencyToPrecision(n[h],c))}}async withdraw(e,t,i,s,r={}){await this.loadMarkets(),this.checkAddress(i);let a={address:i,amount:t,currency:this.currency(e).id.toLowerCase()};void 0!==s&&(a["addr-tag"]=s);let o=await this.privatePostDwWithdrawApiCreate(this.extend(a,r)),n=void 0;return"data"in o&&(n=o.data),{info:o,id:n}}sign(e,t="public",i="GET",s={},r,a){let o="/";"market"===t?o+=t:"public"!==t&&"private"!==t||(o+=this.version),o+="/"+this.implodeParams(e,s);let n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();let e=this.ymdhms(this.milliseconds(),"T"),t=this.keysort(this.extend({SignatureMethod:"HmacSHA256",SignatureVersion:"2",AccessKeyId:this.apiKey,Timestamp:e},n)),s=this.urlencode(t),d=[i,this.hostname,o,s].join("\n"),c=this.hmac(this.encode(d),this.encode(this.secret),"sha256","base64");o+="?"+(s+="&"+this.urlencode({Signature:c})),"POST"===i?(a=this.json(n),r={"Content-Type":"application/json"}):r={"Content-Type":"application/x-www-form-urlencoded"}}else Object.keys(s).length&&(o+="?"+this.urlencode(s));return{url:o=this.urls.api[t]+o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,o,n){if("string"==typeof o&&!(o.length<2)&&("{"===o[0]||"["===o[0])&&"status"in n){if("error"===this.safeString(n,"status")){const e=this.safeString(n,"err-code"),t=this.id+" "+this.json(n),i=this.exceptions;if(e in i)throw new i[e](t);throw new a(t)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:o,InsufficientFunds:n,OrderNotFound:d,DDoSProtection:c,InvalidOrder:h,AuthenticationError:l}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"liqui",name:"Liqui",countries:["UA"],rateLimit:3e3,version:"3",userAgent:this.userAgents.chrome,has:{CORS:!1,createMarketOrder:!1,fetchOrderBooks:!0,fetchOrder:!0,fetchOrders:"emulated",fetchOpenOrders:!0,fetchClosedOrders:"emulated",fetchTickers:!0,fetchMyTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27982022-75aea828-63a0-11e7-9511-ca584a8edd74.jpg",api:{public:"https://api.liqui.io/api",private:"https://api.liqui.io/tapi"},www:"https://liqui.io",doc:"https://liqui.io/api",fees:"https://liqui.io/fee"},api:{public:{get:["info","ticker/{pair}","depth/{pair}","trades/{pair}"]},private:{post:["getInfo","Trade","ActiveOrders","OrderInfo","CancelOrder","TradeHistory","CoinDepositAddress","WithdrawCoin","CreateCoupon","RedeemCoupon"]}},fees:{trading:{maker:.001,taker:.0025},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{DSH:"DASH"},exceptions:{exact:{803:h,804:h,805:h,806:h,807:h,831:n,832:n,833:d},broad:{"Invalid pair name":r,"invalid api key":l,"invalid sign":l,"api key dont have trade permission":l,"invalid parameter":h,"invalid order":h,"Requests too often":c,"not available":o,"data unavailable":o,"external service unavailable":o}},options:{fetchOrderMethod:"privatePostOrderInfo",fetchMyTradesMethod:"privatePostTradeHistory",cancelOrderMethod:"privatePostCancelOrder",fetchTickersMaxLength:2048}})}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d="quote",c=n[a],h=parseFloat(this.costToPrecision(e,s*c));return"sell"===i?h*=r:d="base",{type:a,currency:n[d],rate:c,cost:h}}async fetchMarkets(e={}){let t=(await this.publicGetInfo()).pairs,i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){let r=i[e],a=t[r],[o,n]=r.split("_"),d=o.toUpperCase(),c=n.toUpperCase(),h=(d=this.commonCurrencyCode(d))+"/"+(c=this.commonCurrencyCode(c)),l={amount:this.safeInteger(a,"decimal_places"),price:this.safeInteger(a,"decimal_places")},u={amount:{min:this.safeFloat(a,"min_amount"),max:this.safeFloat(a,"max_amount")},price:{min:this.safeFloat(a,"min_price"),max:this.safeFloat(a,"max_price")},cost:{min:this.safeFloat(a,"min_total")}},p=0===this.safeInteger(a,"hidden");s.push({id:r,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:p,taker:a.fee/100,precision:l,limits:u,info:a})}return s}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetInfo()).return,i={info:t},s=t.funds,r=Object.keys(s);for(let e=0;e<r.length;e++){let a=r[e],o=a.toUpperCase();o=this.commonCurrencyCode(o);let n=void 0,d=void 0;0===t.open_orders&&(n=s[a],d=0);let c={free:s[a],used:d,total:n};i[o]=c}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),a={pair:s.id};void 0!==t&&(a.limit=t);let o=await this.publicGetDepthPair(this.extend(a,i));if(!(s.id in o))throw new r(this.id+" "+s.symbol+" order book is empty or not available");let n=o[s.id];return this.parseOrderBook(n)}async fetchOrderBooks(e,t={}){await this.loadMarkets();let i=void 0;if(void 0===e){if((i=this.ids.join("-")).length>2048){let e=this.ids.length;throw new r(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else i=(i=this.marketIds(e)).join("-");let s=await this.publicGetDepthPair(this.extend({pair:i},t)),a={};i=Object.keys(s);for(let e=0;e<i.length;e++){let t=i[e],r=t;if(t in this.markets_by_id){r=this.markets_by_id[t].symbol}a[r]=this.parseOrderBook(s[t])}return a}parseTicker(e,t){let i=1e3*e.updated,s=void 0;void 0!==t&&(s=t.symbol);let r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol_cur"),quoteVolume:this.safeFloat(e,"vol"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=this.ids;if(void 0===e){let e=i.length;i=i.join("-");let t=this.safeInteger(this.options,"fetchTickersMaxLength",2048);if(i.length>this.options.fetchTickersMaxLength)throw new a(this.id+" has "+e.toString()+" markets exceeding max URL length for this endpoint ("+t.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers")}else i=(i=this.marketIds(e)).join("-");let s=await this.publicGetTickerPair(this.extend({pair:i},t)),r={},o=Object.keys(s);for(let e=0;e<o.length;e++){let t=o[e],i=s[t],a=t,n=void 0;t in this.markets_by_id&&(a=(n=this.markets_by_id[t]).symbol),r[a]=this.parseTicker(i,n)}return r}async fetchTicker(e,t={}){return(await this.fetchTickers([e],t))[e]}parseTrade(e,t){let i=this.safeInteger(e,"timestamp");void 0!==i&&(i*=1e3);let s=this.safeString(e,"type");"ask"===s?s="sell":"bid"===s&&(s="buy");let r=this.safeFloat2(e,"rate","price"),a=this.safeString2(e,"trade_id","tid"),o=this.safeString(e,this.getOrderIdKey());if("pair"in e){let i=this.safeString(e,"pair");t=this.safeValue(this.markets_by_id,i,t)}let n=void 0;void 0!==t&&(n=t.symbol);let d=this.safeFloat(e,"amount"),c=void 0,h=void 0,l=this.safeFloat(e,"commission");if(void 0!==l){let t=this.safeString(e,"commissionCurrency");t=t.toUpperCase();let i=this.safeValue(this.currencies_by_id,t),s=void 0;h={cost:l,currency:s=void 0!==i?i.code:this.commonCurrencyCode(t)}}let u=this.safeValue(e,"is_your_order");return void 0!==u&&(c="taker",u&&(c="maker"),void 0===h&&(h=this.calculateFee(n,"limit",s,d,r,c))),{id:a,order:o,timestamp:i,datetime:this.iso8601(i),symbol:n,type:"limit",side:s,takerOrMaker:c,price:r,amount:d,fee:h,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={pair:r.id};void 0!==i&&(a.limit=i);let o=await this.publicGetTradesPair(this.extend(a,s));if(Array.isArray(o)){if(0===o.length)return[]}return this.parseTrades(o[r.id],r,t,i)}async createOrder(e,t,i,s,a,o={}){if("market"===t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();let n={pair:this.market(e).id,type:i,amount:this.amountToPrecision(e,s),rate:this.priceToPrecision(e,a)};a=parseFloat(a),s=parseFloat(s);let d=await this.privatePostTrade(this.extend(n,o)),c=void 0,h="open",l=0,u=s;"return"in d&&("0"===(c=this.safeString(d.return,this.getOrderIdKey()))&&(c=this.safeString(d.return,"init_order_id"),h="closed"),l=this.safeFloat(d.return,"received",0),u=this.safeFloat(d.return,"remains",s));let p=this.milliseconds(),m={id:c,timestamp:p,datetime:this.iso8601(p),lastTradeTimestamp:void 0,status:h,symbol:e,type:t,side:i,price:a,cost:a*l,amount:s,remaining:u,filled:l,fee:void 0};return this.orders[c]=m,this.extend({info:d},m)}getOrderIdKey(){return"order_id"}async cancelOrder(e,t,i={}){await this.loadMarkets();let s={};s[this.getOrderIdKey()]=e;let r=this.options.cancelOrderMethod,a=await this[r](this.extend(s,i));return e in this.orders&&(this.orders[e].status="canceled"),a}parseOrderStatus(e){let t={0:"open",1:"closed",2:"canceled",3:"canceled"};return e in t?t[e]:e}parseOrder(e,t){let i=e.id.toString(),s=this.parseOrderStatus(this.safeString(e,"status")),r=1e3*parseInt(e.timestamp_created),a=void 0;void 0===t&&(t=this.markets_by_id[e.pair]),void 0!==t&&(a=t.symbol);let o=void 0,n=void 0,d=this.safeFloat(e,"rate"),c=void 0,h=void 0;"start_amount"in e?(n=this.safeFloat(e,"start_amount"),o=this.safeFloat(e,"amount")):(o=this.safeFloat(e,"amount"),i in this.orders&&(n=this.orders[i].amount)),void 0!==n&&void 0!==o&&(h=d*(c=n-o));return{info:e,id:i,symbol:a,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,type:"limit",side:e.type,price:d,cost:h,amount:n,remaining:o,filled:c,status:s,fee:void 0}}parseOrders(e,t,i,s){let r=Object.keys(e),a=[];for(let i=0;i<r.length;i++){let s=r[i],o=e[s],n=this.extend(o,{id:s});a.push(this.parseOrder(n,t))}return this.filterBySinceLimit(a,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s={};s[this.getOrderIdKey()]=parseInt(e);let r=this.options.fetchOrderMethod,a=await this[r](this.extend(s,i));e=e.toString();let o=this.parseOrder(this.extend({id:e},a.return[e])),n=e in this.orders?this.orders[e]:{};return this.orders[e]=this.extend(n,o),this.orders[e]}updateCachedOrders(e,t){for(let t=0;t<e.length;t++){const i=e[t].id;this.orders[i]=e[t]}let i=this.indexBy(e,"id"),s=Object.keys(this.orders);for(let e=0;e<s.length;e++){let r=s[e],a=this.orders[r];if(!(r in i)){if(void 0!==t&&t!==a.symbol)continue;"open"===a.status&&(void 0===(a=this.extend(a,{status:"closed",cost:void 0,filled:a.amount,remaining:0})).cost&&void 0!==a.filled&&(a.cost=a.filled*a.price),this.orders[r]=a)}}return this.toArray(this.orders)}async fetchOrders(e,t,i,s={}){if("fetchOrdersRequiresSymbol"in this.options&&this.options.fetchOrdersRequiresSymbol&&void 0===e)throw new a(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();let r={};if(void 0!==e){let t=this.market(e);r.pair=t.id}let o=await this.privatePostActiveOrders(this.extend(r,s)),n=[];"return"in o&&(n=this.parseOrders(o.return,void 0));let d=this.updateCachedOrders(n,e),c=this.filterBySymbol(d,e);return this.filterBySinceLimit(c,t,i)}async fetchOpenOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","open")}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.pair=r.id),void 0!==i&&(a.count=parseInt(i)),void 0!==t&&(a.since=parseInt(t/1e3));let o=this.options.fetchMyTradesMethod,n=await this[o](this.extend(a,s)),d=[];return"return"in n&&(d=n.return),this.parseTrades(d,r,t,i)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();let o={coinName:this.currency(e).id,amount:parseFloat(t),address:i};if(void 0!==s)throw new r(this.id+" withdraw() does not support the tag argument yet due to a lack of docs on withdrawing with tag/memo on behalf of the exchange.");let n=await this.privatePostWithdrawCoin(this.extend(o,a));return{info:n,id:n.return.tId}}signBodyWithSecret(e){return this.hmac(this.encode(e),this.encode(this.secret),"sha512")}getVersionString(){return"/"+this.version}getPrivatePath(e,t){return""}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t],n=this.omit(s,this.extractParams(e));if("private"===t){o+=this.getPrivatePath(e,s),this.checkRequiredCredentials();let t=this.nonce();a=this.urlencode(this.extend({nonce:t,method:e},n));let i=this.signBodyWithSecret(a);r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:i}}else"public"===t?(o+=this.getVersionString()+"/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n))):(o+="/"+this.implodeParams(e,s),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(a=this.json(n),r={"Content-Type":"application/json"}));return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if(this.isJsonEncodedObject(o)&&"success"in n){let e=this.safeValue(n,"success",!1);if("string"==typeof e&&(e="true"===e||"1"===e),!e){const e=this.safeString(n,"code"),t=this.safeString(n,"error"),i=this.id+" "+this.json(n),s=this.exceptions.exact;if(e in s)throw new s[e](i);const a=this.exceptions.broad,o=this.findBroadlyMatchedKey(a,t);if(void 0!==o)throw new a[o](i);throw new r(i)}}}}},function(e,t,i){"use strict";const s=e=>e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,s);e.exports={uuid:s,unCamelCase:e=>e.match(/^[A-Z0-9_]+$/)?e:e.replace(/[a-z0-9][A-Z]/g,e=>e[0]+"_"+e[1]).replace(/[A-Z0-9][A-Z0-9][a-z]/g,e=>e[0]+"_"+e[1]+e[2]).toLowerCase(),capitalize:e=>e.length?e.charAt(0).toUpperCase()+e.slice(1):e}},function(e,t,i){"use strict";const s=Number.isFinite,r=Array.isArray,a=e=>"string"==typeof e,o=e=>null!==e&&"object"==typeof e,n=e=>d(e)&&e.toString||s(e),d=e=>null!=e,c=(e,t)=>o(e)?e[t]:void 0,h=(e,t,i)=>o(e)?t in e?e[t]:e[i]:void 0,l=e=>s(e)||a(e)?parseFloat(e):NaN,u=e=>s(e)||a(e)?parseInt(e,10):NaN;e.exports={isNumber:s,isArray:r,isObject:o,isString:a,isStringCoercible:n,isDictionary:e=>o(e)&&!r(e),hasProps:d,prop:c,asFloat:l,asInteger:u,safeFloat:(e,t,i,r=l(c(e,t)))=>s(r)?r:i,safeInteger:(e,t,i,r=u(c(e,t)))=>s(r)?r:i,safeValue:(e,t,i,s=c(e,t))=>d(s)?s:i,safeString:(e,t,i,s=c(e,t))=>n(s)?String(s):i,safeFloat2:(e,t,i,r,a=l(h(e,t,i)))=>s(a)?a:r,safeInteger2:(e,t,i,r,a=u(h(e,t,i)))=>s(a)?a:r,safeValue2:(e,t,i,s,r=h(e,t,i))=>d(r)?r:s,safeString2:(e,t,i,s,r=h(e,t,i))=>n(r)?String(r):s}},function(e,t,i){var s,r,a,o,n,d,c,h;e.exports=(s=i(2),a=(r=s).lib,o=a.WordArray,n=a.Hasher,d=r.algo,c=[],h=d.SHA1=n.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],r=i[1],a=i[2],o=i[3],n=i[4],d=0;d<80;d++){if(d<16)c[d]=0|e[t+d];else{var h=c[d-3]^c[d-8]^c[d-14]^c[d-16];c[d]=h<<1|h>>>31}var l=(s<<5|s>>>27)+n+c[d];l+=d<20?1518500249+(r&a|~r&o):d<40?1859775393+(r^a^o):d<60?(r&a|r&o|a&o)-1894007588:(r^a^o)-899497514,n=o,o=a,a=r<<30|r>>>2,r=s,s=l}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+a|0,i[3]=i[3]+o|0,i[4]=i[4]+n|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(s+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(s+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=n._createHelper(h),r.HmacSHA1=n._createHmacHelper(h),s.SHA1)},function(e,t,i){var s,r,a,o,n,d,c;e.exports=(s=i(2),a=(r=s).lib,o=a.Base,n=r.enc,d=n.Utf8,c=r.algo,void(c.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=d.parse(t));var i=e.blockSize,s=4*i;t.sigBytes>s&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),o=r.words,n=a.words,c=0;c<i;c++)o[c]^=1549556828,n[c]^=909522486;r.sigBytes=a.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);t.reset();var s=t.finalize(this._oKey.clone().concat(i));return s}})))},function(e,t){e.exports=require("url")},function(e,t,i){var s=i(90).convert,r=i(112),a=i(9).PassThrough,o=i(40);function n(e,t){t=t||{},this.body=e,this.bodyUsed=!1,this.size=t.size||0,this.timeout=t.timeout||0,this._raw=[],this._abort=!1}e.exports=n,n.prototype.json=function(){var e=this;return this._decode().then(function(t){try{return JSON.parse(t.toString())}catch(t){return n.Promise.reject(new o("invalid json response body at "+e.url+" reason: "+t.message,"invalid-json"))}})},n.prototype.text=function(){return this._decode().then(function(e){return e.toString()})},n.prototype.buffer=function(){return this._decode()},n.prototype._decode=function(){var e=this;return this.bodyUsed?n.Promise.reject(new Error("body used already for: "+this.url)):(this.bodyUsed=!0,this._bytes=0,this._abort=!1,this._raw=[],new n.Promise(function(t,i){var s;return"string"==typeof e.body?(e._bytes=e.body.length,e._raw=[new Buffer(e.body)],t(e._convert())):e.body instanceof Buffer?(e._bytes=e.body.length,e._raw=[e.body],t(e._convert())):(e.timeout&&(s=setTimeout(function(){e._abort=!0,i(new o("response timeout at "+e.url+" over limit: "+e.timeout,"body-timeout"))},e.timeout)),e.body.on("error",function(t){i(new o("invalid response body at: "+e.url+" reason: "+t.message,"system",t))}),e.body.on("data",function(t){if(!e._abort&&null!==t){if(e.size&&e._bytes+t.length>e.size)return e._abort=!0,void i(new o("content size at "+e.url+" over limit: "+e.size,"max-size"));e._bytes+=t.length,e._raw.push(t)}}),void e.body.on("end",function(){e._abort||(clearTimeout(s),t(e._convert()))}))}))},n.prototype._convert=function(e){e=e||"utf-8";var t,i,r=this.headers.get("content-type"),a="utf-8";if(r){if(!/text\/html|text\/plain|\+xml|\/xml/i.test(r))return Buffer.concat(this._raw);t=/charset=([^;]*)/i.exec(r)}if(!t&&this._raw.length>0){for(var o=0;o<this._raw.length&&!((i+=this._raw[o].toString()).length>1024);o++);i=i.substr(0,1024)}return!t&&i&&(t=/<meta.+?charset=(['"])(.+?)\1/i.exec(i)),!t&&i&&(t=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(i))&&(t=/charset=(.*)/i.exec(t.pop())),!t&&i&&(t=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(i)),t&&("gb2312"!==(a=t.pop())&&"gbk"!==a||(a="gb18030")),s(Buffer.concat(this._raw),e,a)},n.prototype._clone=function(e){var t,i,s=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return r(s)&&"function"!=typeof s.getBoundary&&(t=new a,i=new a,s.pipe(t),s.pipe(i),e.body=t,s=i),s},n.Promise=global.Promise},function(e){e.exports=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]},function(e,t){function i(e){var t=this;for(var s in this._headers={},e instanceof i&&(e=e.raw()),e)e.hasOwnProperty(s)&&("string"==typeof e[s]?this.set(s,e[s]):"number"!=typeof e[s]||isNaN(e[s])?Array.isArray(e[s])&&e[s].forEach(function(e){t.append(s,e.toString())}):this.set(s,e[s].toString()))}e.exports=i,i.prototype.get=function(e){var t=this._headers[e.toLowerCase()];return t?t[0]:null},i.prototype.getAll=function(e){return this.has(e)?this._headers[e.toLowerCase()]:[]},i.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this._headers).forEach(function(i){this._headers[i].forEach(function(s){e.call(t,s,i,this)},this)},this)},i.prototype.set=function(e,t){this._headers[e.toLowerCase()]=[t]},i.prototype.append=function(e,t){this.has(e)?this._headers[e.toLowerCase()].push(t):this.set(e,t)},i.prototype.has=function(e){return this._headers.hasOwnProperty(e.toLowerCase())},i.prototype.delete=function(e){delete this._headers[e.toLowerCase()]},i.prototype.raw=function(){return this._headers}},function(e,t,i){"use strict";const s=i(1),{InsufficientFunds:r,OrderNotFound:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"acx",name:"ACX",countries:["AU"],rateLimit:1e3,version:"v2",has:{CORS:!0,fetchTickers:!0,fetchOHLCV:!0,withdraw:!0,fetchOrder:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/30247614-1fe61c74-9621-11e7-9e8c-f1a627afa279.jpg",extension:".json",api:"https://acx.io/api",www:"https://acx.io",doc:"https://acx.io/documents/api_v2"},api:{public:{get:["depth","k_with_pending_trades","k","markets","order_book","order_book/{market}","tickers","tickers/{market}","timestamp","trades","trades/{market}"]},private:{get:["members/me","deposits","deposit","deposit_address","orders","order","trades/my","withdraws","withdraw"],post:["orders","orders/multi","orders/clear","order/delete","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002},funding:{tierBased:!1,percentage:!0,withdraw:{}}},exceptions:{2002:r,2003:a}})}async fetchMarkets(e={}){let t=await this.publicGetMarkets(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.id,a=s.name,o=this.safeString(s,"base_unit"),n=this.safeString(s,"quote_unit");if(void 0===o||void 0===n){let e=a.split("/");o=e[0].toLowerCase(),n=e[1].toLowerCase()}let d=o.toUpperCase(),c=n.toUpperCase();d=this.commonCurrencyCode(d),c=this.commonCurrencyCode(c);let h={amount:8,price:8};i.push({id:r,symbol:a,base:d,quote:c,baseId:o,quoteId:n,precision:h,info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privateGetMembersMe()).accounts,i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.currency.toUpperCase(),a={free:parseFloat(s.balance),used:parseFloat(s.locked),total:0};a.total=this.sum(a.free,a.used),i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={market:this.market(e).id};void 0!==t&&(s.limit=t);let r=await this.publicGetDepth(this.extend(s,i)),a=1e3*r.timestamp;return this.parseOrderBook(r,a)}parseTicker(e,t){let i=1e3*e.at;e=e.ticker;let s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){let t=s[e],a=void 0,o=t;if(t in this.markets_by_id)o=(a=this.markets_by_id[t]).symbol;else{let e=t.slice(0,3),i=t.slice(3,6);e=e.toUpperCase(),i=i.toUpperCase(),o=(e=this.commonCurrencyCode(e))+"/"+(i=this.commonCurrencyCode(i))}let n=i[t];r[o]=this.parseTicker(n,a)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickersMarket(this.extend({market:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.created_at);return{id:e.id.toString(),timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:this.safeFloat(e,"funds"),info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTrades(this.extend({market:r.id},s));return this.parseTrades(a,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[1],e[2],e[3],e[4],e[5]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e);void 0===s&&(s=500);let o={market:a.id,period:this.timeframes[t],limit:s};void 0!==i&&(o.timestamp=i);let n=await this.publicGetK(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}parseOrder(e,t){let i=void 0;if(void 0!==t)i=t.symbol;else{let t=e.market;i=this.markets_by_id[t].symbol}let s=this.parse8601(e.created_at),r=e.state,a=void 0;return"done"===r?a="closed":"wait"===r?a="open":"cancel"===r&&(a="canceled"),{id:e.id.toString(),timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,status:a,symbol:i,type:e.ord_type,side:e.side,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),filled:this.safeFloat(e,"executed_volume"),remaining:this.safeFloat(e,"remaining_volume"),trades:void 0,fee:void 0,info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetOrder(this.extend({id:parseInt(e)},i));return this.parseOrder(s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={market:this.marketId(e),side:i,volume:s.toString(),ord_type:t};"limit"===t&&(o.price=r.toString());let n=await this.privatePostOrders(this.extend(o,a)),d=this.markets_by_id[n.market];return this.parseOrder(n,d)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostOrderDelete({id:e}),r=this.parseOrder(s),o=r.status;if("closed"===o||"canceled"===o)throw new a(this.id+" "+this.json(r));return r}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a={currency:this.currency(e).id,sum:t,address:i};return{info:await this.privatePostWithdraw(this.extend(a,r)),id:void 0}}nonce(){return this.milliseconds()}encodeParams(e){if("orders"in e){let t=e.orders,i=this.urlencode(this.keysort(this.omit(e,"orders")));for(let e=0;e<t.length;e++){let s=t[e],r=Object.keys(s);for(let e=0;e<r.length;e++){let t=r[e];i+="&orders%5B%5D%5B"+t+"%5D="+s[t].toString()}}return i}return this.urlencode(this.keysort(e))}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+this.implodeParams(e,s);"extension"in this.urls&&(o+=this.urls.extension);let n=this.omit(s,this.extractParams(e)),d=this.urls.api+o;if("public"===t)Object.keys(n).length&&(d+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=this.encodeParams(this.extend({access_key:this.apiKey,tonce:e},s)),n=i+"|"+o+"|"+t,c=t+"&signature="+this.hmac(this.encode(n),this.encode(this.secret));"GET"===i?d+="?"+c:(a=c,r={"Content-Type":"application/x-www-form-urlencoded"})}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o){if(400===e){const e=this.safeValue(o,"error"),t=this.safeString(e,"code"),i=this.id+" "+this.json(o),s=this.exceptions;if(t in s)throw new s[t](i)}}}},function(e,t,i){"use strict";const s=i(1),{NotSupported:r,DDoSProtection:a,AuthenticationError:o,PermissionDenied:n,ArgumentsRequired:d,ExchangeError:c,ExchangeNotAvailable:h,InsufficientFunds:l,InvalidOrder:u,OrderNotFound:p,InvalidNonce:m}=i(0),{SIGNIFICANT_DIGITS:f}=i(4);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitfinex",name:"Bitfinex",countries:["VG"],version:"v1",rateLimit:1500,certified:!0,has:{CORS:!1,cancelAllOrders:!0,createDepositAddress:!0,deposit:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchFundingFees:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchTickers:!0,fetchTransactions:!0,fetchDeposits:!1,fetchWithdrawals:!1,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:"https://api.bitfinex.com",www:"https://www.bitfinex.com",doc:["https://docs.bitfinex.com/v1/docs","https://github.com/bitfinexcom/bitfinex-api-node"]},api:{v2:{get:["candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist"]},public:{get:["book/{symbol}","lendbook/{currency}","lends/{currency}","pubticker/{symbol}","stats/{symbol}","symbols","symbols_details","tickers","today","trades/{symbol}"]},private:{post:["account_fees","account_infos","balances","basket_manage","credits","deposit/new","funding/close","history","history/movements","key_info","margin_infos","mytrades","mytrades_funding","offer/cancel","offer/new","offer/status","offers","offers/hist","order/cancel","order/cancel/all","order/cancel/multi","order/cancel/replace","order/new","order/new/multi","order/status","orders","orders/hist","position/claim","position/close","positions","summary","taken_funds","total_taken_funds","transfer","unused_taken_funds","withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.001,taker:.002,tiers:{taker:[[0,.002],[5e5,.002],[1e6,.002],[25e5,.002],[5e6,.002],[75e5,.002],[1e7,.0018],[15e6,.0016],[2e7,.14/100],[25e6,.0012],[3e7,.001]],maker:[[0,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[75e5,0],[1e7,0],[15e6,0],[2e7,0],[25e6,0],[3e7,0]]}},funding:{tierBased:!1,percentage:!1,deposit:{BTC:4e-4,IOTA:.5,ETH:.0027,BCH:1e-4,LTC:.001,EOS:.24279,XMR:.04,SAN:.99269,DASH:.01,ETC:.01,XRP:.02,YYW:16.915,NEO:0,ZEC:.001,BTG:0,OMG:.14026,DATA:20.773,QASH:1.9858,ETP:.01,QTUM:.01,EDO:.95001,AVT:1.3045,USDT:0,TRX:28.184,ZRX:1.9947,RCN:10.793,TNB:31.915,SNT:14.976,RLC:1.414,GNT:5.8952,SPK:10.893,REP:.041168,BAT:6.1546,ELF:1.8753,FUN:32.336,SNG:18.622,AID:8.08,MNA:16.617,NEC:1.6504,XTZ:.2},withdraw:{BTC:4e-4,IOTA:.5,ETH:.0027,BCH:1e-4,LTC:.001,EOS:.24279,XMR:.04,SAN:.99269,DASH:.01,ETC:.01,XRP:.02,YYW:16.915,NEO:0,ZEC:.001,BTG:0,OMG:.14026,DATA:20.773,QASH:1.9858,ETP:.01,QTUM:.01,EDO:.95001,AVT:1.3045,USDT:20,TRX:28.184,ZRX:1.9947,RCN:10.793,TNB:31.915,SNT:14.976,RLC:1.414,GNT:5.8952,SPK:10.893,REP:.041168,BAT:6.1546,ELF:1.8753,FUN:32.336,SNG:18.622,AID:8.08,MNA:16.617,NEC:1.6504,XTZ:.2}}},commonCurrencies:{ABS:"ABYSS",AIO:"AION",ATM:"ATMI",BAB:"BCH",CTX:"CTXC",DAD:"DADI",DAT:"DATA",DSH:"DASH",HOT:"Hydro Protocol",IOS:"IOST",IOT:"IOTA",IQX:"IQ",MIT:"MITH",MNA:"MANA",NCA:"NCASH",ORS:"ORS Group",POY:"POLY",QSH:"QASH",QTM:"QTUM",SEE:"SEER",SNG:"SNGLS",SPK:"SPANK",STJ:"STORJ",YYW:"YOYOW",UST:"USDT",UTN:"UTNP"},exceptions:{exact:{temporarily_unavailable:h,"Order could not be cancelled.":p,"No such order found.":p,"Order price must be positive.":u,"Could not find a key matching the given X-BFX-APIKEY.":o,'Key price should be a decimal number, e.g. "123.456"':u,'Key amount should be a decimal number, e.g. "123.456"':u,ERR_RATE_LIMIT:a,Ratelimit:a,"Nonce is too small.":m,"No summary found.":c,"Cannot evaluate your available balance, please try again":h},broad:{"This API key does not have permission":n,"Invalid order: not enough exchange balance for ":l,"Invalid order: minimum size for ":u,"Invalid order":u,"The available balance is only":l}},precisionMode:f,options:{currencyNames:{AGI:"agi",AID:"aid",AIO:"aio",ANT:"ant",AVT:"aventus",BAT:"bat",BCH:"bcash",BCI:"bci",BFT:"bft",BTC:"bitcoin",BTG:"bgold",CFI:"cfi",DAI:"dai",DADI:"dad",DASH:"dash",DATA:"datacoin",DTH:"dth",EDO:"eidoo",ELF:"elf",EOS:"eos",ETC:"ethereumc",ETH:"ethereum",ETP:"metaverse",FUN:"fun",GNT:"golem",IOST:"ios",IOTA:"iota",LRC:"lrc",LTC:"litecoin",LYM:"lym",MANA:"mna",MIT:"mit",MKR:"mkr",MTN:"mtn",NEO:"neo",ODE:"ode",OMG:"omisego",OMNI:"mastercoin",QASH:"qash",QTUM:"qtum",RCN:"rcn",RDN:"rdn",REP:"rep",REQ:"req",RLC:"rlc",SAN:"santiment",SNGLS:"sng",SNT:"status",SPANK:"spk",STORJ:"stj",TNB:"tnb",TRX:"trx",USD:"wire",UTK:"utk",USDT:"tetheruso",VEE:"vee",WAX:"wax",XLM:"xlm",XMR:"monero",XRP:"ripple",XVG:"xvg",YOYOW:"yoyow",ZEC:"zcash",ZRX:"zrx",XTZ:"tezos"},orderTypes:{limit:"exchange limit",market:"exchange market"}}})}async fetchFundingFees(e={}){await this.loadMarkets();const t=await this.privatePostAccountFees(e),i=t.withdraw,s={},r=Object.keys(i);for(let e=0;e<r.length;e++){const t=r[e];let a=t;if(t in this.currencies_by_id){a=this.currencies_by_id[t].code}s[a]=this.safeFloat(i,t)}return{info:t,withdraw:s,deposit:s}}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privatePostSummary(e);return{info:t,maker:this.safeFloat(t,"maker_fee"),taker:this.safeFloat(t,"taker_fee")}}async fetchMarkets(e={}){let t=await this.publicGetSymbolsDetails(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.pair.toUpperCase(),a=r.slice(0,3),o=r.slice(3,6),n=this.commonCurrencyCode(a),d=this.commonCurrencyCode(o),c=n+"/"+d,h={price:s.price_precision,amount:s.price_precision},l={amount:{min:this.safeFloat(s,"minimum_order_size"),max:this.safeFloat(s,"maximum_order_size")},price:{min:Math.pow(10,-h.price),max:Math.pow(10,h.price)}};l.cost={min:l.amount.min*l.price.min,max:void 0},i.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:!0,precision:h,limits:l,info:s})}return i}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d=n[a],c=s*d,h="quote";return"sell"===i?c*=r:h="base",{type:a,currency:n[h],rate:d,cost:parseFloat(this.currencyToPrecision(n[h],c))}}async fetchBalance(e={}){await this.loadMarkets();let t=this.safeString(e,"type","exchange"),i=this.omit(e,"type"),s=await this.privatePostBalances(i),r={info:s};for(let e=0;e<s.length;e++){let i=s[e];if(i.type===t){let e=i.currency.toUpperCase();e=this.commonCurrencyCode(e);let t=this.account();t.free=parseFloat(i.available),t.total=parseFloat(i.amount),t.used=t.total-t.free,r[e]=t}}return this.parseBalance(r)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={symbol:this.marketId(e)};void 0!==t&&(s.limit_bids=t,s.limit_asks=t);let r=await this.publicGetBookSymbol(this.extend(s,i));return this.parseOrderBook(r,void 0,"bids","asks","price","amount")}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s={};for(let e=0;e<i.length;e++){let t=this.parseTicker(i[e]);s[t.symbol]=t}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetPubtickerSymbol(this.extend({symbol:i.id},t));return this.parseTicker(s,i)}parseTicker(e,t){let i=1e3*this.safeFloat(e,"timestamp"),s=void 0;if(void 0!==t)s=t.symbol;else if("pair"in e){let i=e.pair;if(i in this.markets_by_id&&(t=this.markets_by_id[i]),void 0!==t)s=t.symbol;else{let e=i.slice(0,3),t=i.slice(3,6);s=this.commonCurrencyCode(e)+"/"+this.commonCurrencyCode(t)}}let r=this.safeFloat(e,"last_price");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"mid"),baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}parseTrade(e,t){let i=1e3*parseInt(parseFloat(e.timestamp)),s=e.type.toLowerCase(),r=this.safeString(e,"order_id"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),n=a*o,d=void 0;if("fee_amount"in e){let t=-this.safeFloat(e,"fee_amount"),i=this.safeString(e,"fee_currency");i in this.currencies_by_id&&(i=this.currencies_by_id[i].code),d={cost:t,currency:i}}return{id:e.tid.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,order:r,side:s,price:a,amount:o,cost:n,fee:d}}async fetchTrades(e,t,i=50,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:r.id,limit_trades:i};void 0!==t&&(a.timestamp=parseInt(t/1e3));let o=await this.publicGetTradesSymbol(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();let r=this.market(e),a={symbol:r.id};void 0!==i&&(a.limit_trades=i),void 0!==t&&(a.timestamp=parseInt(t/1e3));let o=await this.privatePostMytrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o={symbol:this.marketId(e),side:i,amount:this.amountToPrecision(e,s),type:this.safeString(this.options.orderTypes,t,t),ocoorder:!1,buy_price_oco:0,sell_price_oco:0};o.price="market"===t?this.nonce().toString():this.priceToPrecision(e,r);let n=await this.privatePostOrderNew(this.extend(o,a));return this.parseOrder(n)}async editOrder(e,t,i,s,r,a,o={}){await this.loadMarkets();const n={order_id:e};void 0!==a&&(n.price=this.priceToPrecision(t,a)),void 0!==r&&(n.amount=this.amountToPrecision(t,r)),void 0!==t&&(n.symbol=this.marketId(t)),void 0!==s&&(n.side=s),void 0!==i&&(n.type=this.safeString(this.options.orderTypes,i,i));const d=await this.privatePostOrderCancelReplace(this.extend(n,o));return this.parseOrder(d)}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostOrderCancel({order_id:parseInt(e)})}async cancelAllOrders(e,t={}){return await this.privatePostOrderCancelAll(t)}parseOrder(e,t){let i=e.side,s=e.is_live,r=e.is_cancelled,a=void 0;a=s?"open":r?"canceled":"closed";let o=void 0;if(void 0===t){let i=e.symbol.toUpperCase();i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(o=t.symbol);let n=e.type;if(n.indexOf("exchange ")>=0){n=e.type.split(" ")[1]}let d=parseInt(1e3*parseFloat(e.timestamp));return{info:e,id:e.id.toString(),timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:void 0,symbol:o,type:n,side:i,price:this.safeFloat(e,"price"),average:this.safeFloat(e,"avg_execution_price"),amount:this.safeFloat(e,"original_amount"),remaining:this.safeFloat(e,"remaining_amount"),filled:this.safeFloat(e,"executed_amount"),status:a,fee:void 0}}async fetchOpenOrders(e,t,i,s={}){if(await this.loadMarkets(),void 0!==e&&!(e in this.markets))throw new c(this.id+" has no symbol "+e);let r=await this.privatePostOrders(s),a=this.parseOrders(r,void 0,t,i);return void 0!==e&&(a=this.filterBy(a,"symbol",e)),a}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r={};void 0!==i&&(r.limit=i);let a=await this.privatePostOrdersHist(this.extend(r,s)),o=this.parseOrders(a,void 0,t,i);return void 0!==e&&(o=this.filterBy(o,"symbol",e)),o=this.filterBy(o,"status","closed")}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostOrderStatus(this.extend({order_id:parseInt(e)},i));return this.parseOrder(s)}parseOHLCV(e,t,i="1m",s,r){return[e[0],e[1],e[3],e[4],e[2],e[5]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets(),void 0===s&&(s=100);let a=this.market(e),o={symbol:"t"+a.id,timeframe:this.timeframes[t],sort:1,limit:s};void 0!==i&&(o.start=i);let n=await this.v2GetCandlesTradeTimeframeSymbolHist(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}getCurrencyName(e){if(e in this.options.currencyNames)return this.options.currencyNames[e];throw new r(this.id+" "+e+" not supported for withdrawal")}async createDepositAddress(e,t={}){let i=await this.fetchDepositAddress(e,this.extend({renew:1},t)),s=this.safeString(i,"address");return this.checkAddress(s),{info:i.info,currency:e,address:s,tag:void 0}}async fetchDepositAddress(e,t={}){let i={method:this.getCurrencyName(e),wallet_name:"exchange",renew:0},s=await this.privatePostDepositNew(this.extend(i,t)),r=s.address,a=void 0;return"address_pool"in s&&(a=r,r=s.address_pool),this.checkAddress(r),{currency:e,address:r,tag:a,info:s}}async fetchTransactions(e,t,i,s={}){if(void 0===e)throw new d(this.id+" fetchTransactions() requires a currency code argument");await this.loadMarkets();let r=this.currency(e),a={currency:r.id};void 0!==t&&(a.since=parseInt(t/1e3));let o=await this.privatePostHistoryMovements(this.extend(a,s));return this.parseTransactions(o,r,t,i)}parseTransaction(e,t){let i=this.safeFloat(e,"timestamp_created");void 0!==i&&(i=parseInt(1e3*i));let s=this.safeFloat(e,"timestamp");void 0!==s&&(s=parseInt(1e3*s));let r=void 0;if(void 0===t){let i=this.safeString(e,"currency");i in this.currencies_by_id?t=this.currencies_by_id[i]:r=this.commonCurrencyCode(i)}void 0!==t&&(r=t.code);let a=this.safeString(e,"type");void 0!==a&&(a=a.toLowerCase());let o=this.parseTransactionStatus(this.safeString(e,"status")),n=this.safeFloat(e,"fee");return void 0!==n&&(n=Math.abs(n)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:i,datetime:this.iso8601(i),address:this.safeString(e,"address"),tag:void 0,type:a,amount:this.safeFloat(e,"amount"),currency:r,status:o,updated:s,fee:{currency:r,cost:n,rate:void 0}}}parseTransactionStatus(e){let t={CANCELED:"canceled",ZEROCONFIRMED:"failed",COMPLETED:"ok"};return e in t?t[e]:e}async withdraw(e,t,i,s,r={}){this.checkAddress(i);let a={withdraw_type:this.getCurrencyName(e),walletselected:"exchange",amount:t.toString(),address:i};s&&(a.payment_id=s);let o=(await this.privatePostWithdraw(this.extend(a,r)))[0],n=o.withdrawal_id,d=o.message,h=this.findBroadlyMatchedKey(this.exceptions.broad,d);if(0===n){if(void 0!==h){throw new(0,this.exceptions.broad[h])(this.id+" "+d)}throw new c(this.id+" withdraw returned an id of zero: "+this.json(o))}return{info:o,id:n}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s);o="v2"===t?"/"+t+o:"/"+this.version+o;let n=this.omit(s,this.extractParams(e)),d=this.urls.api+o;if(("public"===t||e.indexOf("/hist")>=0)&&Object.keys(n).length){let e="?"+this.urlencode(n);d+=e,o+=e}if("private"===t){this.checkRequiredCredentials();let e=this.nonce();n=this.extend({nonce:e.toString(),request:o},n),a=this.json(n),n=this.encode(a);let t=this.stringToBase64(n),i=this.encode(this.secret),s=this.hmac(t,i,"sha384");r={"X-BFX-APIKEY":this.apiKey,"X-BFX-PAYLOAD":this.decode(t),"X-BFX-SIGNATURE":s}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o){if(!(a.length<2)&&e>=400&&"{"===a[0]){const e=this.id+" "+this.json(o);let t=void 0;if("message"in o)t=o.message;else{if(!("error"in o))throw new c(e);t=o.error}const i=this.exceptions.exact;if(t in i)throw new i[t](e);const s=this.exceptions.broad,r=this.findBroadlyMatchedKey(s,t);if(void 0!==r)throw new s[r](e);throw new c(e)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:o,InsufficientFunds:n,OrderNotFound:d,ExchangeNotAvailable:c,DDoSProtection:h,InvalidOrder:l}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"zb",name:"ZB",countries:["CN"],rateLimit:1e3,version:"v1",has:{CORS:!1,createMarketOrder:!1,fetchDepositAddress:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchOHLCV:!0,fetchTickers:!0,withdraw:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},exceptions:{1001:r,1002:r,1003:o,1004:o,1005:o,1006:o,1009:c,2001:n,2002:n,2003:n,2005:n,2006:n,2007:n,2009:n,3001:d,3002:l,3003:l,3004:o,3005:r,3006:o,3007:o,3008:d,4001:c,4002:h},urls:{logo:"https://user-images.githubusercontent.com/1294454/32859187-cd5214f0-ca5e-11e7-967d-96568e2e2bd1.jpg",api:{public:"http://api.zb.cn/data",private:"https://trade.zb.cn/api"},www:"https://www.zb.com",doc:"https://www.zb.com/i/developer",fees:"https://www.zb.com/i/rate",referral:"https://vip.zb.com/user/register?recommendCode=bn070u"},api:{public:{get:["markets","ticker","allTicker","depth","trades","kline"]},private:{get:["order","cancelOrder","getOrder","getOrders","getOrdersNew","getOrdersIgnoreTradeType","getUnfinishedOrdersIgnoreTradeType","getAccountInfo","getUserAddress","getWithdrawAddress","getWithdrawRecord","getChargeRecord","getCnyWithdrawRecord","getCnyChargeRecord","withdraw","getLeverAssetsInfo","getLeverBills","transferInLever","transferOutLever","loan","cancelLoan","getLoans","getLoanRecords","borrow","repay","getRepayments"]}},fees:{funding:{withdraw:{BTC:1e-4,BCH:6e-4,LTC:.005,ETH:.01,ETC:.01,BTS:3,EOS:1,QTUM:.01,HSR:.001,XRP:.1,USDT:"0.1%",QCASH:5,DASH:.002,BCD:0,UBTC:0,SBTC:0,INK:20,TV:.1,BTH:0,BCX:0,LBTC:0,CHAT:20,bitCNY:20,HLC:20,BTP:0,BCW:0}},trading:{maker:.002,taker:.002}},commonCurrencies:{ENT:"ENTCash"}})}async fetchMarkets(e={}){let t=await this.publicGetMarkets(),i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){let r=i[e],a=t[r],[o,n]=r.split("_"),d=this.commonCurrencyCode(o.toUpperCase()),c=this.commonCurrencyCode(n.toUpperCase()),h=d+"/"+c,l={amount:a.amountScale,price:a.priceScale};s.push({id:r,symbol:h,baseId:o,quoteId:n,base:d,quote:c,active:!0,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:void 0},price:{min:Math.pow(10,-l.price),max:void 0},cost:{min:0,max:void 0}},info:a})}return s}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetGetAccountInfo(e),i=t.result.coins,s={info:t};for(let e=0;e<i.length;e++){let t=i[e],r=this.account(),a=t.key;a=a in this.currencies_by_id?this.currencies_by_id[a].code:this.commonCurrencyCode(t.enName),r.free=parseFloat(t.available),r.used=parseFloat(t.freez),r.total=this.sum(r.free,r.used),s[a]=r}return this.parseBalance(s)}getMarketFieldName(){return"market"}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privateGetGetUserAddress({currency:i.id}),r=s.message.datas.key,a=void 0;if(r.indexOf("_")>=0){let e=r.split("_");r=e[0],a=e[1]}return{currency:e,address:r,tag:a,info:s}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r={};r[this.getMarketFieldName()]=s.id;let a=await this.publicGetDepth(this.extend(r,i));return this.parseOrderBook(a)}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetAllTicker(t),s={},r={},a=Object.keys(this.marketsById);for(let e=0;e<a.length;e++){r[a[e].replace("_","")]=this.marketsById[a[e]]}let o=Object.keys(i);for(let e=0;e<o.length;e++){let t=r[o[e]];s[t.symbol]=this.parseTicker(i[o[e]],t)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s={};s[this.getMarketFieldName()]=i.id;let r=(await this.publicGetTicker(this.extend(s,t))).ticker;return this.parseTicker(r,i)}parseTicker(e,t){let i=this.milliseconds(),s=void 0;void 0!==t&&(s=t.symbol);let r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e);void 0===s&&(s=1e3);let o={market:a.id,type:this.timeframes[t],limit:s};void 0!==i&&(o.since=i);let n=await this.publicGetKline(this.extend(o,r)),d=this.safeValue(n,"data",[]);return this.parseOHLCVs(d,a,t,i,s)}parseTrade(e,t){let i=1e3*e.date,s="bid"===e.trade_type?"buy":"sell";return{info:e,id:e.tid.toString(),timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:s,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={};a[this.getMarketFieldName()]=r.id;let o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){if("limit"!==t)throw new l(this.id+" allows limit orders only");await this.loadMarkets();let o={price:this.priceToPrecision(e,r),amount:this.amountToPrecision(e,s),tradeType:"buy"===i?"1":"0",currency:this.marketId(e)},n=await this.privateGetOrder(this.extend(o,a));return{info:n,id:n.id}}async cancelOrder(e,t,i={}){await this.loadMarkets();let s={id:e.toString(),currency:this.marketId(t)};return s=this.extend(s,i),await this.privateGetCancelOrder(s)}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();let s={id:e.toString(),currency:this.marketId(t)};s=this.extend(s,i);let r=await this.privateGetGetOrder(s);return this.parseOrder(r,void 0)}async fetchOrders(e,t,i=50,s={}){if(void 0===e)throw new r(this.id+"fetchOrders requires a symbol parameter");await this.loadMarkets();let a=this.market(e),o={currency:a.id,pageIndex:1,pageSize:i},n="privateGetGetOrdersIgnoreTradeType";"tradeType"in s&&(n="privateGetGetOrdersNew");let c=void 0;try{c=await this[n](this.extend(o,s))}catch(e){if(e instanceof d)return[];throw e}return this.parseOrders(c,a,t,i)}async fetchOpenOrders(e,t,i=10,s={}){if(void 0===e)throw new r(this.id+"fetchOpenOrders requires a symbol parameter");await this.loadMarkets();let a=this.market(e),o={currency:a.id,pageIndex:1,pageSize:i},n="privateGetGetUnfinishedOrdersIgnoreTradeType";"tradeType"in s&&(n="privateGetGetOrdersNew");let c=void 0;try{c=await this[n](this.extend(o,s))}catch(e){if(e instanceof d)return[];throw e}return this.parseOrders(c,a,t,i)}parseOrder(e,t){let i=1===e.type?"buy":"sell",s=void 0,r=this.getCreateDateField();r in e&&(s=e[r]);let a=void 0;"currency"in e&&(t=this.marketsById[e.currency]),t&&(a=t.symbol);let o=e.price,n=e.trade_amount,d=e.total_amount,c=d-n,h=this.safeFloat(e,"trade_money"),l=void 0,u=this.parseOrderStatus(this.safeString(e,"status"));return void 0!==h&&void 0!==n&&n>0&&(l=h/n),{info:e,id:e.id,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:a,type:"limit",side:i,price:o,average:l,cost:h,amount:d,filled:n,remaining:c,status:u,fee:void 0}}parseOrderStatus(e){const t={0:"open",1:"canceled",2:"closed",3:"open"};return e in t?t[e]:e}getCreateDateField(){return"trade_date"}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];if("public"===t)o+="/"+this.version+"/"+e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else{let t=this.keysort(this.extend({method:e,accesskey:this.apiKey},s)),i=this.nonce();t=this.keysort(t);let r=this.rawencode(t),a=this.hash(this.encode(this.secret),"sha1");o+="/"+e+"?"+r+"&"+("sign="+this.hmac(this.encode(r),this.encode(a),"md5")+"&reqTime="+i.toString())}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&!(o.length<2)&&"{"===o[0]){let e=this.id+" "+this.json(n);if("code"in n){let t=this.safeString(n,"code");if(t in this.exceptions){throw new(0,this.exceptions[t])(e)}if("1000"!==t)throw new r(e)}let t=this.safeValue(n,"result");if(void 0!==t&&!t){throw""===this.safeString(n,"message")?new c(e):new r(e)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ExchangeNotAvailable:a,AuthenticationError:o,InvalidNonce:n,InsufficientFunds:d,InvalidOrder:c,OrderNotFound:h,DDoSProtection:l}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinegg",name:"CoinEgg",countries:["CN","UK"],has:{fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:"emulated",fetchMyTrades:!0,fetchTickers:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/36770310-adfa764e-1c5a-11e8-8e09-449daac3d2fb.jpg",api:{web:"https://www.coinegg.com/coin",rest:"https://api.coinegg.com/api/v1"},www:"https://www.coinegg.com",doc:"https://www.coinegg.com/explain.api.html",fees:"https://www.coinegg.com/fee.html"},api:{web:{get:["{quote}/allcoin","{quote}/trends","{quote}/{base}/order","{quote}/{base}/trades","{quote}/{base}/depth.js"]},public:{get:["ticker/region/{quote}","depth/region/{quote}","orders/region/{quote}"]},private:{post:["balance","trade_add/region/{quote}","trade_cancel/region/{quote}","trade_view/region/{quote}","trade_list/region/{quote}"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.008,BCH:.002,LTC:.001,ETH:.01,ETC:.01,NEO:0,QTUM:"1%",XRP:"1%",DOGE:"1%",LSK:"1%",XAS:"1%",BTS:"1%",GAME:"1%",GOOC:"1%",NXT:"1%",IFC:"1%",DNC:"1%",BLK:"1%",VRC:"1%",XPM:"1%",VTC:"1%",TFC:"1%",PLC:"1%",EAC:"1%",PPC:"1%",FZ:"1%",ZET:"1%",RSS:"1%",PGC:"1%",SKT:"1%",JBC:"1%",RIO:"1%",LKC:"1%",ZCC:"1%",MCC:"1%",QEC:"1%",MET:"1%",YTC:"1%",HLB:"1%",MRYC:"1%",MTC:"1%",KTC:0}}},exceptions:{103:o,104:o,105:o,106:n,200:d,201:c,202:c,203:h,402:l},errorMessages:{100:"Required parameters can not be empty",101:"Illegal parameter",102:"coin does not exist",103:"Key does not exist",104:"Signature does not match",105:"Insufficient permissions",106:"Request expired(nonce error)",200:"Lack of balance",201:"Too small for the number of trading",202:"Price must be in 0 - 1000000",203:"Order does not exist",204:"Pending order amount must be above 0.001 BTC",205:"Restrict pending order prices",206:"Decimal place error",401:"System error",402:"Requests are too frequent",403:"Non-open API",404:"IP restriction does not request the resource",405:"Currency transactions are temporarily closed"},options:{quoteIds:["btc","eth","usc","usdt"]},commonCurrencies:{JBC:"JubaoCoin"}})}async fetchMarkets(e={}){let t=this.options.quoteIds,i=[];for(let e=0;e<t.length;e++){let s=t[e],r=await this.webGetQuoteAllcoin({quote:s});if(void 0===r)throw new a(this.id+' fetchMarkets() for "'+s+'" returned: "'+this.json(r)+'"');let o=Object.keys(r);if(o.length<1)throw new a(this.id+' fetchMarkets() for "'+s+'" returned: "'+this.json(r)+'"');for(let e=0;e<o.length;e++){let t=o[e],a=r[t],n=t.toUpperCase(),d=s.toUpperCase(),c=t+s,h=(n=this.commonCurrencyCode(n))+"/"+(d=this.commonCurrencyCode(d)),l={amount:8,price:8};i.push({id:c,symbol:h,base:n,quote:d,baseId:t,quoteId:s,active:!0,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:Math.pow(10,l.amount)},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)},cost:{min:void 0,max:void 0}},info:a})}}return i}parseTicker(e,t){let i=t.symbol,s=this.milliseconds(),r=this.safeFloat(e,"last"),a=this.safeFloat(e,"change"),o=void 0,n=void 0,d=void 0;if(void 0!==a){let e=a/100;n=r-(o=r/this.sum(1,e)),d=this.sum(r,o)/2}return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:o,close:r,last:r,previousClose:void 0,change:n,percentage:a,average:d,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"quoteVol"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerRegionQuote(this.extend({coin:i.baseId,quote:i.quoteId},t));return this.parseTicker(s,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=this.options.quoteIds,s={};for(let e=0;e<i.length;e++){let t=i[e],a=await this.webGetQuoteAllcoin({quote:t}),o=Object.keys(a);if(!o.length)throw new r("fetchTickers failed");for(let e=0;e<o.length;e++){let i=o[e],r=a[i],n=i+t;if(n in this.markets_by_id){let e=this.marketsById[n];s[e.symbol]=this.parseTicker({high:r[4],low:r[5],buy:r[2],sell:r[3],last:r[1],change:r[8],vol:r[6],quoteVol:r[7]},e)}}}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r=await this.publicGetDepthRegionQuote(this.extend({coin:s.baseId,quote:s.quoteId},i));return this.parseOrderBook(r)}parseTrade(e,t){let i=1e3*parseInt(e.date),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount"),a=t.symbol,o=this.costToPrecision(a,s*r);return{timestamp:i,datetime:this.iso8601(i),symbol:a,id:this.safeString(e,"tid"),order:void 0,type:"limit",side:e.type,price:s,amount:r,cost:o,fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetOrdersRegionQuote(this.extend({coin:r.baseId,quote:r.quoteId},s));return this.parseTrades(a,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalance(e),i={},s=this.omit(t.data,"uid"),r=Object.keys(s);for(let e=0;e<r.length;e++){let t=r[e],[a,o]=t.split("_"),n=a;a in this.currencies_by_id&&(n=this.currencies_by_id[a].code),n in i||(i[n]={free:void 0,used:void 0,total:void 0}),o="lock"===o?"used":"free",i[n][o]=parseFloat(s[t])}let a=Object.keys(i);for(let e=0;e<a.length;e++){let t=a[e];i[t].total=this.sum(i[t].free,i[t].used)}return this.parseBalance(this.extend({info:t},i))}parseOrder(e,t){let i=t.symbol,s=this.parse8601(e.datetime),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount_original"),o=this.safeFloat(e,"amount_outstanding"),n=a-o,d=this.safeString(e,"status");d="cancelled"===d?"canceled":o?"open":"closed";let c=this.safeValue(e,"info",e);return{id:this.safeString(e,"id"),datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:d,symbol:i,type:"limit",side:e.type,price:r,cost:void 0,amount:a,filled:n,remaining:o,trades:void 0,fee:void 0,info:c}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n=await this.privatePostTradeAddRegionQuote(this.extend({coin:o.baseId,quote:o.quoteId,type:i,amount:s,price:r},a)),d=n.id.toString(),c=this.parseOrder({id:d,datetime:this.ymdhms(this.milliseconds()),amount_original:s,amount_outstanding:s,price:r,type:i,info:n},o);return this.orders[d]=c,c}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t);return await this.privatePostTradeCancelRegionQuote(this.extend({id:e,coin:s.baseId,quote:s.quoteId},i))}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t),r=await this.privatePostTradeViewRegionQuote(this.extend({id:e,coin:s.baseId,quote:s.quoteId},i));return this.parseOrder(r.data,s)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={coin:r.baseId,quote:r.quoteId};void 0!==t&&(a.since=t/1e3);let o=await this.privatePostTradeListRegionQuote(this.extend(a,s));return this.parseOrders(o.data,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({type:"open"},s))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="rest";"web"===t&&(o=t);let n=this.urls.api[o]+"/"+this.implodeParams(e,s),d=this.omit(s,this.extractParams(e));if("public"===t||"web"===t)"web"===t&&(d.t=this.nonce()),Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials(),d=this.urlencode(this.extend({key:this.apiKey,nonce:this.nonce()},d));let e=this.hash(this.encode(this.secret));d+="&signature="+this.hmac(this.encode(d),this.encode(e)),"GET"===i?n+="?"+d:(r={"Content-type":"application/x-www-form-urlencoded"},a=d)}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"!=typeof o)return;if(0===o.length)return;if("{"!==o[0])return;let d=this.safeValue(n,"result");if(void 0===d)return;if(!0===d)return;const c=this.safeString(n,"code"),h=this.errorMessages,l=this.safeString(h,c,"Unknown Error");throw c in this.exceptions?new this.exceptions[c](this.id+" "+l):new r(this.id+" "+l)}}},function(e,t,i){"use strict";const s=i(1),{InsufficientFunds:r,ArgumentsRequired:a,ExchangeError:o,InvalidOrder:n,InvalidAddress:d,AuthenticationError:c,NotSupported:h,OrderNotFound:l}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"gdax",name:"GDAX",countries:["US"],rateLimit:1e3,userAgent:this.userAgents.chrome,has:{cancelAllOrders:!0,CORS:!0,deposit:!0,fetchAccounts:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchTransactions:!0,withdraw:!0},timeframes:{"1m":60,"5m":300,"15m":900,"1h":3600,"6h":21600,"1d":86400},urls:{test:"https://api-public.sandbox.gdax.com",logo:"https://user-images.githubusercontent.com/1294454/27766527-b1be41c6-5edb-11e7-95f6-5b496c469e2c.jpg",api:"https://api.gdax.com",www:"https://www.gdax.com",doc:"https://docs.gdax.com",fees:["https://www.gdax.com/fees","https://support.gdax.com/customer/en/portal/topics/939402-depositing-and-withdrawing-funds/articles"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["currencies","products","products/{id}/book","products/{id}/candles","products/{id}/stats","products/{id}/ticker","products/{id}/trades","time"]},private:{get:["accounts","accounts/{id}","accounts/{id}/holds","accounts/{id}/ledger","accounts/{id}/transfers","coinbase-accounts","fills","funding","orders","orders/{id}","otc/orders","payment-methods","position","reports/{id}","users/self/trailing-volume"],post:["conversions","deposits/coinbase-account","deposits/payment-method","coinbase-accounts/{id}/addresses","funding/repay","orders","position/close","profiles/margin-transfer","reports","withdrawals/coinbase","withdrawals/crypto","withdrawals/payment-method"],delete:["orders","orders/{id}"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.0015,taker:.0025},funding:{tierBased:!1,percentage:!1,withdraw:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:25},deposit:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:10}}},exceptions:{exact:{"Insufficient funds":r,NotFound:l,"Invalid API Key":c,"invalid signature":c,"Invalid Passphrase":c,"Invalid order id":n},broad:{"Order already done":l,"order not found":l,"price too small":n,"price too precise":n}}})}async fetchMarkets(e={}){let t=await this.publicGetProducts(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.id,a=s.base_currency,o=s.quote_currency,n=a+"/"+o,d={min:this.safeFloat(s,"quote_increment"),max:void 0},c={amount:8,price:this.precisionFromString(this.safeString(s,"quote_increment"))},h=this.fees.trading.taker;"ETH"!==a&&"LTC"!==a||(h=.003);let l=!0;"accessible"in s&&(l=this.safeValue(s,"accessible"));const u="online"===s.status&&l;i.push(this.extend(this.fees.trading,{id:r,symbol:n,base:a,quote:o,precision:c,limits:{amount:{min:this.safeFloat(s,"base_min_size"),max:this.safeFloat(s,"base_max_size")},price:d,cost:{min:this.safeFloat(s,"min_market_funds"),max:this.safeFloat(s,"max_market_funds")}},taker:h,active:u,info:s}))}return i}async fetchAccounts(e={}){const t=await this.privateGetAccounts(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"id"),a=this.safeString(s,"currency"),o=this.commonCurrencyCode(a);i.push({id:r,type:void 0,currency:o,info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetAccounts(e),i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.currency,a={free:this.safeFloat(s,"available"),used:this.safeFloat(s,"hold"),total:this.safeFloat(s,"balance")};i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetProductsIdBook(this.extend({id:this.marketId(e),level:2},i));return this.parseOrderBook(s)}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=this.extend({id:i.id},t),r=await this.publicGetProductsIdTicker(s),a=this.parse8601(this.safeValue(r,"time")),o=void 0,n=void 0;"bid"in r&&(o=this.safeFloat(r,"bid")),"ask"in r&&(n=this.safeFloat(r,"ask"));let d=this.safeFloat(r,"price");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:o,bidVolume:void 0,ask:n,askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(r,"volume"),quoteVolume:void 0,info:r}}parseTrade(e,t){let i=this.parse8601(this.safeString2(e,"time","created_at")),s=void 0;if(void 0===t){let i=this.safeString(e,"product_id");t=this.safeValue(this.markets_by_id,i)}t&&(s=t.symbol);let r=void 0,a=void 0,o=void 0;void 0!==t&&(a=t.quote,"liquidity"in e&&(r=t[o="T"===e.liquidity?"taker":"maker"]));let n=this.safeFloat(e,"fill_fees");void 0===n&&(n=this.safeFloat(e,"fee"));let d={cost:n,currency:a,rate:r},c=this.safeString(e,"trade_id"),h="buy"===e.side?"sell":"buy",l=this.safeString(e,"order_id");void 0!==l&&(h="buy"===e.side?"buy":"sell");let u=this.safeFloat(e,"price"),p=this.safeFloat(e,"size");return{id:c,order:l,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,takerOrMaker:o,side:h,price:u,amount:p,fee:d,cost:u*p}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();let r=this.market(e),o={product_id:r.id};void 0!==i&&(o.limit=i);let n=await this.privateGetFills(this.extend(o,s));return this.parseTrades(n,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetProductsIdTrades(this.extend({id:r.id},s));return this.parseTrades(a,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[3],e[2],e[1],e[4],e[5]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o=this.timeframes[t],n={id:a.id,granularity:o};void 0!==i&&(n.start=this.ymdhms(i),void 0===s&&(s=300),n.end=this.ymdhms(this.sum(s*o*1e3,i)));let d=await this.publicGetProductsIdCandles(this.extend(n,r));return this.parseOHLCVs(d,a,t,i,s)}async fetchTime(){let e=await this.publicGetTime();return this.parse8601(e.iso)}parseOrderStatus(e){return this.safeString({pending:"open",active:"open",open:"open",done:"closed",canceled:"canceled",canceling:"open"},e,e)}parseOrder(e,t){let i=this.parse8601(e.created_at),s=void 0;void 0===t&&e.product_id in this.markets_by_id&&(t=this.markets_by_id[e.product_id]);let r=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"size");void 0===o&&(o=this.safeFloat(e,"funds")),void 0===o&&(o=this.safeFloat(e,"specified_funds"));let n=this.safeFloat(e,"filled_size"),d=void 0;void 0!==o&&void 0!==n&&(d=o-n);let c=this.safeFloat(e,"executed_value"),h={cost:this.safeFloat(e,"fill_fees"),currency:void 0,rate:void 0};return t&&(s=t.symbol),{id:e.id,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:r,symbol:s,type:e.type,side:e.side,price:a,cost:c,amount:o,filled:n,remaining:d,fee:h}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetOrdersId(this.extend({id:e},i));return this.parseOrder(s)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r={status:"all"},a=void 0;void 0!==e&&(a=this.market(e),r.product_id=a.id);let o=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(o,a,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r={},a=void 0;void 0!==e&&(a=this.market(e),r.product_id=a.id);let o=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(o,a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r={status:"done"},a=void 0;void 0!==e&&(a=this.market(e),r.product_id=a.id);let o=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(o,a,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={product_id:this.marketId(e),side:i,size:s,type:t};"limit"===t&&(o.price=r);let n=await this.privatePostOrders(this.extend(o,a));return this.parseOrder(n)}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privateDeleteOrdersId({id:e})}async cancelAllOrders(e,t={}){return await this.privateDeleteOrders(t)}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d=n[a],c=s*r,h=n.quote;return{type:a,currency:h,rate:d,cost:parseFloat(this.currencyToPrecision(h,d*c))}}async getPaymentMethods(){return await this.privateGetPaymentMethods()}async deposit(e,t,i,s={}){await this.loadMarkets();let r={currency:this.currency(e).id,amount:t},a="privatePostDeposits";if("payment_method_id"in s)a+="PaymentMethod";else{if(!("coinbase_account_id"in s))throw new h(this.id+" deposit() requires one of `coinbase_account_id` or `payment_method_id` extra params");a+="CoinbaseAccount"}let n=await this[a](this.extend(r,s));if(!n)throw new o(this.id+" deposit() error: "+this.json(n));return{info:n,id:n.id}}async withdraw(e,t,i,s,r={}){this.checkAddress(i);let a=this.currency(e);await this.loadMarkets();let n={currency:a.id,amount:t},d="privatePostWithdrawals";"payment_method_id"in r?d+="PaymentMethod":"coinbase_account_id"in r?d+="CoinbaseAccount":(d+="Crypto",n.crypto_address=i);let c=await this[d](this.extend(n,r));if(!c)throw new o(this.id+" withdraw() error: "+this.json(c));return{info:c,id:c.id}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets(),await this.loadAccounts();let r=void 0,n=this.safeString(s,"id");if(void 0===n){if(void 0===e)throw new a(this.id+" fetchTransactions() requires a currency code argument if no account id specified in params");r=this.currency(e);const t=this.indexBy(this.accounts,"currency"),i=this.safeValue(t,e);if(void 0===i)throw new o(this.id+" fetchTransactions() could not find account id for "+e);n=i.id}const d={id:n};void 0!==i&&(d.limit=i);let c=await this.privateGetAccountsIdTransfers(this.extend(d,s));for(let t=0;t<c.length;t++)c[t].currency=e;return this.parseTransactions(c,r,t,i)}parseTransactionStatus(e){return"canceled_at"in e&&e.canceled_at?"canceled":"completed_at"in e&&e.completed_at?"ok":"canceled_at"in e&&!e.canceled_at&&"completed_at"in e&&!e.completed_at&&"processed_at"in e&&!e.processed_at?"pending":"processed_at"in e&&e.processed_at?"pending":"failed"}parseTransaction(e,t){const i=this.safeValue(e,"details",{}),s=this.safeString(e,"id"),r=this.safeString(i,"crypto_transaction_hash"),a=this.parse8601(this.safeString(e,"created_at")),o=this.parse8601(this.safeString(e,"processed_at"));let n=void 0;const d=this.safeString(e,"currency");n=d in this.currencies_by_id?this.currencies_by_id[d].code:this.commonCurrencyCode(d);const c=this.parseTransactionStatus(e),h=this.safeFloat(e,"amount");let l=this.safeString(e,"type"),u=this.safeString(i,"crypto_address");return u=this.safeString(e,"crypto_address",u),"withdraw"===l&&(l="withdrawal",u=this.safeString(i,"sent_to_address",u)),{info:e,id:s,txid:r,timestamp:a,datetime:this.iso8601(a),address:u,tag:void 0,type:l,amount:h,currency:n,status:c,updated:o,fee:void 0}}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));let d=this.urls.api+o;if("private"===t){this.checkRequiredCredentials();let e=this.nonce().toString(),t="";"GET"!==i&&Object.keys(n).length&&(t=a=this.json(n));let s=e+i+o+t,d=this.base64ToBinary(this.secret),c=this.hmac(this.encode(s),d,"sha256","base64");r={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":this.decode(c),"CB-ACCESS-TIMESTAMP":e,"CB-ACCESS-PASSPHRASE":this.password,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=this.safeValue(this.options,"coinbaseAccounts");void 0===s&&(s=await this.privateGetCoinbaseAccounts(),this.options.coinbaseAccounts=s,this.options.coinbaseAccountsByCurrencyId=this.indexBy(s,"currency"));let r=i.id,a=this.safeValue(this.options.coinbaseAccountsByCurrencyId,r);if(void 0===a)throw new d(this.id+" fetchDepositAddress() could not find currency code "+e+" with id = "+r+" in this.options['coinbaseAccountsByCurrencyId']");let o=await this.privatePostCoinbaseAccountsIdAddresses(this.extend({id:a.id},t)),n=this.safeString(o,"address");return{currency:e,address:this.checkAddress(n),tag:void 0,info:o}}handleErrors(e,t,i,s,r,a,n){if(400===e||404===e){if("{"===a[0]){let e=n.message,t=this.id+" "+e;const i=this.exceptions.exact;if(e in i)throw new i[e](t);const s=this.exceptions.broad,r=this.findBroadlyMatchedKey(s,e);if(void 0!==r)throw new s[r](t);throw new o(t)}throw new o(this.id+" "+a)}}async request(e,t="public",i="GET",s={},r,a){let n=await this.fetch2(e,t,i,s,r,a);if("message"in n)throw new o(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const{unCamelCase:s}=i(16);e.exports=(e=>{for(const t in e)e[s(t)]=e[t];return e})(Object.assign({},i(54),i(55),i(16),i(17),i(4),i(30),i(82),i(36),i(83),i(84)))},function(e,t,i){"use strict";const s=i(31),r=i(79);e.exports={json:(e,t)=>JSON.stringify(e),unjson:JSON.parse,stringToBinary(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return s.lib.WordArray.create(t)},stringToBase64:e=>s.enc.Latin1.parse(e).toString(s.enc.Base64),utf16ToBase64:e=>s.enc.Utf16.parse(e).toString(s.enc.Base64),base64ToBinary:e=>s.enc.Base64.parse(e),base64ToString:e=>s.enc.Base64.parse(e).toString(s.enc.Utf8),binaryToString:e=>e,binaryConcat:(...e)=>e.reduce((e,t)=>e.concat(t)),urlencode:e=>r.stringify(e),rawencode:e=>r.stringify(e,{encode:!1}),urlencodeBase64:e=>e.replace(/[=]+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}},function(e,t,i){var s;e.exports=(s=i(2),i(12),i(56),i(57),i(6),i(7),i(18),i(32),i(58),i(33),i(59),i(60),i(61),i(19),i(62),i(5),i(3),i(63),i(64),i(65),i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(74),i(75),i(76),i(77),i(78),s)},function(e,t,i){var s;e.exports=(s=i(2),function(e){var t=s,i=t.lib,r=i.WordArray,a=i.Hasher,o=t.algo,n=[],d=[];!function(){function t(t){for(var i=e.sqrt(t),s=2;s<=i;s++)if(!(t%s))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var s=2,r=0;r<64;)t(s)&&(r<8&&(n[r]=i(e.pow(s,.5))),d[r]=i(e.pow(s,1/3)),r++),s++}();var c=[],h=o.SHA256=a.extend({_doReset:function(){this._hash=new r.init(n.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],r=i[1],a=i[2],o=i[3],n=i[4],h=i[5],l=i[6],u=i[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var m=c[p-15],f=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,y=c[p-2],b=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;c[p]=f+c[p-7]+b+c[p-16]}var w=s&r^s&a^r&a,v=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),g=u+((n<<26|n>>>6)^(n<<21|n>>>11)^(n<<7|n>>>25))+(n&h^~n&l)+d[p]+c[p];u=l,l=h,h=n,n=o+g|0,o=a,a=r,r=s,s=g+(v+w)|0}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+a|0,i[3]=i[3]+o|0,i[4]=i[4]+n|0,i[5]=i[5]+h|0,i[6]=i[6]+l|0,i[7]=i[7]+u|0},_doFinalize:function(){var t=this._data,i=t.words,s=8*this._nDataBytes,r=8*t.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=e.floor(s/4294967296),i[15+(r+64>>>9<<4)]=s,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=a._createHelper(h),t.HmacSHA256=a._createHmacHelper(h)}(Math),s.SHA256)},function(e,t,i){var s;e.exports=(s=i(2),i(12),function(){var e=s,t=e.lib.Hasher,i=e.x64,r=i.Word,a=i.WordArray,o=e.algo;function n(){return r.create.apply(r,arguments)}var d=[n(1116352408,3609767458),n(1899447441,602891725),n(3049323471,3964484399),n(3921009573,2173295548),n(961987163,4081628472),n(1508970993,3053834265),n(2453635748,2937671579),n(2870763221,3664609560),n(3624381080,2734883394),n(310598401,1164996542),n(607225278,1323610764),n(1426881987,3590304994),n(1925078388,4068182383),n(2162078206,991336113),n(2614888103,633803317),n(3248222580,3479774868),n(3835390401,2666613458),n(4022224774,944711139),n(264347078,2341262773),n(604807628,2007800933),n(770255983,1495990901),n(1249150122,1856431235),n(1555081692,3175218132),n(1996064986,2198950837),n(2554220882,3999719339),n(2821834349,766784016),n(2952996808,2566594879),n(3210313671,3203337956),n(3336571891,1034457026),n(3584528711,2466948901),n(113926993,3758326383),n(338241895,168717936),n(666307205,1188179964),n(773529912,1546045734),n(1294757372,1522805485),n(1396182291,2643833823),n(1695183700,2343527390),n(1986661051,1014477480),n(2177026350,1206759142),n(2456956037,344077627),n(2730485921,1290863460),n(2820302411,3158454273),n(3259730800,3505952657),n(3345764771,106217008),n(3516065817,3606008344),n(3600352804,1432725776),n(4094571909,1467031594),n(275423344,851169720),n(430227734,3100823752),n(506948616,1363258195),n(659060556,3750685593),n(883997877,3785050280),n(958139571,3318307427),n(1322822218,3812723403),n(1537002063,2003034995),n(1747873779,3602036899),n(1955562222,1575990012),n(2024104815,1125592928),n(2227730452,2716904306),n(2361852424,442776044),n(2428436474,593698344),n(2756734187,3733110249),n(3204031479,2999351573),n(3329325298,3815920427),n(3391569614,3928383900),n(3515267271,566280711),n(3940187606,3454069534),n(4118630271,4000239992),n(116418474,1914138554),n(174292421,2731055270),n(289380356,3203993006),n(460393269,320620315),n(685471733,587496836),n(852142971,1086792851),n(1017036298,365543100),n(1126000580,2618297676),n(1288033470,3409855158),n(1501505948,4234509866),n(1607167915,987167468),n(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=n()}();var h=o.SHA512=t.extend({_doReset:function(){this._hash=new a.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,s=i[0],r=i[1],a=i[2],o=i[3],n=i[4],h=i[5],l=i[6],u=i[7],p=s.high,m=s.low,f=r.high,y=r.low,b=a.high,w=a.low,v=o.high,g=o.low,k=n.high,T=n.low,C=h.high,_=h.low,O=l.high,x=l.low,S=u.high,B=u.low,I=p,M=m,F=f,E=y,A=b,P=w,q=v,D=g,G=k,R=T,L=C,N=_,V=O,U=x,H=S,j=B,K=0;K<80;K++){var X=c[K];if(K<16)var W=X.high=0|e[t+2*K],z=X.low=0|e[t+2*K+1];else{var Y=c[K-15],Z=Y.high,Q=Y.low,J=(Z>>>1|Q<<31)^(Z>>>8|Q<<24)^Z>>>7,$=(Q>>>1|Z<<31)^(Q>>>8|Z<<24)^(Q>>>7|Z<<25),ee=c[K-2],te=ee.high,ie=ee.low,se=(te>>>19|ie<<13)^(te<<3|ie>>>29)^te>>>6,re=(ie>>>19|te<<13)^(ie<<3|te>>>29)^(ie>>>6|te<<26),ae=c[K-7],oe=ae.high,ne=ae.low,de=c[K-16],ce=de.high,he=de.low;W=(W=(W=J+oe+((z=$+ne)>>>0<$>>>0?1:0))+se+((z+=re)>>>0<re>>>0?1:0))+ce+((z+=he)>>>0<he>>>0?1:0),X.high=W,X.low=z}var le,ue=G&L^~G&V,pe=R&N^~R&U,me=I&F^I&A^F&A,fe=M&E^M&P^E&P,ye=(I>>>28|M<<4)^(I<<30|M>>>2)^(I<<25|M>>>7),be=(M>>>28|I<<4)^(M<<30|I>>>2)^(M<<25|I>>>7),we=(G>>>14|R<<18)^(G>>>18|R<<14)^(G<<23|R>>>9),ve=(R>>>14|G<<18)^(R>>>18|G<<14)^(R<<23|G>>>9),ge=d[K],ke=ge.high,Te=ge.low,Ce=H+we+((le=j+ve)>>>0<j>>>0?1:0),_e=be+fe;H=V,j=U,V=L,U=N,L=G,N=R,G=q+(Ce=(Ce=(Ce=Ce+ue+((le+=pe)>>>0<pe>>>0?1:0))+ke+((le+=Te)>>>0<Te>>>0?1:0))+W+((le+=z)>>>0<z>>>0?1:0))+((R=D+le|0)>>>0<D>>>0?1:0)|0,q=A,D=P,A=F,P=E,F=I,E=M,I=Ce+(ye+me+(_e>>>0<be>>>0?1:0))+((M=le+_e|0)>>>0<le>>>0?1:0)|0}m=s.low=m+M,s.high=p+I+(m>>>0<M>>>0?1:0),y=r.low=y+E,r.high=f+F+(y>>>0<E>>>0?1:0),w=a.low=w+P,a.high=b+A+(w>>>0<P>>>0?1:0),g=o.low=g+D,o.high=v+q+(g>>>0<D>>>0?1:0),T=n.low=T+R,n.high=k+G+(T>>>0<R>>>0?1:0),_=h.low=_+N,h.high=C+L+(_>>>0<N>>>0?1:0),x=l.low=x+U,l.high=O+V+(x>>>0<U>>>0?1:0),B=u.low=B+j,u.high=S+H+(B>>>0<j>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[30+(s+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(s+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(h),e.HmacSHA512=t._createHmacHelper(h)}(),s.SHA512)},function(e,t,i){"use strict";var s=Object.prototype.hasOwnProperty,r=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},s=0;s<e.length;++s)void 0!==e[s]&&(i[s]=e[s]);return i};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce(function(e,i){return e[i]=t[i],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],s=0;s<t.length;++s)for(var a=t[s],o=a.obj[a.prop],n=Object.keys(o),d=0;d<n.length;++d){var c=n[d],h=o[c];"object"==typeof h&&null!==h&&-1===i.indexOf(h)&&(t.push({obj:o,prop:c}),i.push(h))}return function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(r(i)){for(var s=[],a=0;a<i.length;++a)void 0!==i[a]&&s.push(i[a]);t.obj[t.prop]=s}}}(t),e},decode:function(e,t,i){var s=e.replace(/\+/g," ");if("iso-8859-1"===i)return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch(e){return s}},encode:function(e,t,i){if(0===e.length)return e;var s="string"==typeof e?e:String(e);if("iso-8859-1"===i)return escape(s).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var r="",o=0;o<s.length;++o){var n=s.charCodeAt(o);45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122?r+=s.charAt(o):n<128?r+=a[n]:n<2048?r+=a[192|n>>6]+a[128|63&n]:n<55296||n>=57344?r+=a[224|n>>12]+a[128|n>>6&63]+a[128|63&n]:(o+=1,n=65536+((1023&n)<<10|1023&s.charCodeAt(o)),r+=a[240|n>>18]+a[128|n>>12&63]+a[128|n>>6&63]+a[128|63&n])}return r},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,i,a){if(!i)return t;if("object"!=typeof i){if(r(t))t.push(i);else{if(!t||"object"!=typeof t)return[t,i];(a&&(a.plainObjects||a.allowPrototypes)||!s.call(Object.prototype,i))&&(t[i]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(i);var n=t;return r(t)&&!r(i)&&(n=o(t,a)),r(t)&&r(i)?(i.forEach(function(i,r){if(s.call(t,r)){var o=t[r];o&&"object"==typeof o&&i&&"object"==typeof i?t[r]=e(o,i,a):t.push(i)}else t[r]=i}),t):Object.keys(i).reduce(function(t,r){var o=i[r];return s.call(t,r)?t[r]=e(t[r],o,a):t[r]=o,t},n)}}},function(e,t,i){"use strict";var s=String.prototype.replace,r=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return s.call(e,r,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,i){"use strict";const s=Date.now,r=setTimeout,a=(e,t,i=r,o=s()+t)=>{let n=()=>{},d=!0,c=i(()=>{d=!0;const t=o-s();t>0?n=a(e,t,i,o):e()},t);return function(){d&&(d=!1,clearTimeout(c)),n()}};class o extends Error{constructor(){super("timed out"),this.constructor=o,this.__proto__=o.prototype,this.message="timed out"}}e.exports={now:s,setTimeout_safe:a,sleep:e=>new Promise(t=>a(t,e)),TimedOut:o,timeout:async(e,t)=>{let i=()=>{};const s=new Promise(t=>i=a(t,e));try{return await Promise.race([t,s.then(()=>{throw new o})])}finally{i()}}}},function(e,t){e.exports=require("http")},function(e){e.exports=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]]},function(e){e.exports=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]},function(e,t,i){function s(e,t,i){this.name=this.constructor.name,this.message=e,this.type=t,i&&(this.code=this.errno=i.code),Error.captureStackTrace(this,this.constructor)}e.exports=s,i(113).inherits(s,Error)},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ExchangeNotAvailable:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"_1btcxe",name:"1BTCXE",countries:["PA"],comment:"Crypto Capital API",has:{CORS:!0,withdraw:!0},timeframes:{"1d":"1year"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766049-2b294408-5ecc-11e7-85cc-adaff013dc1a.jpg",api:"https://1btcxe.com/api",www:"https://1btcxe.com",doc:"https://1btcxe.com/api-docs.php"},api:{public:{get:["stats","historical-prices","order-book","transactions"]},private:{post:["balances-and-info","open-orders","user-transactions","btc-deposit-address/get","btc-deposit-address/new","deposits/get","withdrawals/get","orders/new","orders/edit","orders/cancel","orders/status","withdrawals/new"]}}})}async fetchMarkets(e={}){return[{id:"USD",symbol:"BTC/USD",base:"BTC",quote:"USD"},{id:"EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR"},{id:"CNY",symbol:"BTC/CNY",base:"BTC",quote:"CNY"},{id:"RUB",symbol:"BTC/RUB",base:"BTC",quote:"RUB"},{id:"CHF",symbol:"BTC/CHF",base:"BTC",quote:"CHF"},{id:"JPY",symbol:"BTC/JPY",base:"BTC",quote:"JPY"},{id:"GBP",symbol:"BTC/GBP",base:"BTC",quote:"GBP"},{id:"CAD",symbol:"BTC/CAD",base:"BTC",quote:"CAD"},{id:"AUD",symbol:"BTC/AUD",base:"BTC",quote:"AUD"},{id:"AED",symbol:"BTC/AED",base:"BTC",quote:"AED"},{id:"BGN",symbol:"BTC/BGN",base:"BTC",quote:"BGN"},{id:"CZK",symbol:"BTC/CZK",base:"BTC",quote:"CZK"},{id:"DKK",symbol:"BTC/DKK",base:"BTC",quote:"DKK"},{id:"HKD",symbol:"BTC/HKD",base:"BTC",quote:"HKD"},{id:"HRK",symbol:"BTC/HRK",base:"BTC",quote:"HRK"},{id:"HUF",symbol:"BTC/HUF",base:"BTC",quote:"HUF"},{id:"ILS",symbol:"BTC/ILS",base:"BTC",quote:"ILS"},{id:"INR",symbol:"BTC/INR",base:"BTC",quote:"INR"},{id:"MUR",symbol:"BTC/MUR",base:"BTC",quote:"MUR"},{id:"MXN",symbol:"BTC/MXN",base:"BTC",quote:"MXN"},{id:"NOK",symbol:"BTC/NOK",base:"BTC",quote:"NOK"},{id:"NZD",symbol:"BTC/NZD",base:"BTC",quote:"NZD"},{id:"PLN",symbol:"BTC/PLN",base:"BTC",quote:"PLN"},{id:"RON",symbol:"BTC/RON",base:"BTC",quote:"RON"},{id:"SEK",symbol:"BTC/SEK",base:"BTC",quote:"SEK"},{id:"SGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD"},{id:"THB",symbol:"BTC/THB",base:"BTC",quote:"THB"},{id:"TRY",symbol:"BTC/TRY",base:"BTC",quote:"TRY"},{id:"ZAR",symbol:"BTC/ZAR",base:"BTC",quote:"ZAR"}]}async fetchBalance(e={}){let t=(await this.privatePostBalancesAndInfo())["balances-and-info"],i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=this.account();a.free=this.safeFloat(t.available,r,0),a.used=this.safeFloat(t.on_hold,r,0),a.total=this.sum(a.free,a.used),i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){let s=await this.publicGetOrderBook(this.extend({currency:this.marketId(e)},i));return this.parseOrderBook(s["order-book"],void 0,"bid","ask","price","order_amount")}async fetchTicker(e,t={}){let i=(await this.publicGetStats(this.extend({currency:this.marketId(e)},t))).stats,s=this.safeFloat(i,"last_price");return{symbol:e,timestamp:void 0,datetime:void 0,high:this.safeFloat(i,"max"),low:this.safeFloat(i,"min"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(i,"open"),close:s,last:s,previousClose:void 0,change:this.safeFloat(i,"daily_change"),percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(i,"total_btc_traded"),info:i}}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.date+" 00:00:00"),void 0,void 0,void 0,parseFloat(e.price),void 0]}async fetchOHLCV(e,t="1d",i,s,r={}){let a=this.market(e),o=await this.publicGetHistoricalPrices(this.extend({currency:a.id,timeframe:this.timeframes[t]},r)),n=this.toArray(this.omit(o["historical-prices"],"request_currency"));return this.parseOHLCVs(n,a,t,i,s)}parseTrade(e,t){let i=1e3*parseInt(e.timestamp);return{id:e.id,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,order:void 0,type:void 0,side:e.maker_type,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a={currency:r.id};void 0!==i&&(a.limit=i);let o=await this.publicGetTransactions(this.extend(a,s)),n=this.toArray(this.omit(o.transactions,"request_currency"));return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o={side:i,type:t,currency:this.marketId(e),amount:s};"limit"===t&&(o.limit_price=r);let n=await this.privatePostOrdersNew(this.extend(o,a));return{info:n,id:n}}async cancelOrder(e,t,i={}){return await this.privatePostOrdersCancel({id:e})}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,amount:parseFloat(t),address:i};let o=await this.privatePostWithdrawalsNew(this.extend(a,r));return{info:o,id:o.result.uuid}}sign(e,t="public",i="GET",s={},a,o){if("cryptocapital"===this.id)throw new r(this.id+" is an abstract base API for _1btcxe");let n=this.urls.api+"/"+e;if("public"===t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.extend({api_key:this.apiKey,nonce:this.nonce()},s),t=this.json(e);e.signature=this.hmac(this.encode(t),this.encode(this.secret)),o=this.json(e),a={"Content-Type":"application/json"}}return{url:n,method:i,body:o,headers:a}}async request(e,t="public",i="GET",s={},o,n){let d=await this.fetch2(e,t,i,s,o,n);if("string"==typeof d&&d.indexOf("Maintenance")>=0)throw new a(this.id+" on maintenance");if("errors"in d){let e=[];for(let t=0;t<d.errors.length;t++){let i=d.errors[t];e.push(i.code+": "+i.message)}throw e=e.join(" "),new r(this.id+" "+e)}return d}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,AuthenticationError:a,InvalidNonce:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitsane",name:"Bitsane",countries:["IE"],has:{fetchCurrencies:!0,fetchTickers:!0,fetchOpenOrders:!0,fetchDepositAddress:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/41387105-d86bf4c6-6f8d-11e8-95ea-2fa943872955.jpg",api:"https://bitsane.com/api",www:"https://bitsane.com",doc:"https://bitsane.com/help/api",fees:"https://bitsane.com/help/fees"},api:{public:{get:["assets/currencies","assets/pairs","ticker","orderbook","trades"]},private:{post:["balances","order/cancel","order/new","order/status","orders","orders/history","deposit/address","withdraw","withdrawal/status","transactions/history","vouchers","vouchers/create","vouchers/redeem"]}},fees:{trading:{maker:.0015,taker:.0025}},exceptions:{3:a,4:a,5:a,6:o,7:a,8:o,9:a,10:a,11:a},options:{defaultCurrencyPrecision:2}})}async fetchCurrencies(e={}){let t=await this.publicGetAssetsCurrencies(e),i=Object.keys(t),s={};for(let e=0;e<i.length;e++){let r=i[e],a=t[r],o=this.safeInteger(a,"precision",this.options.defaultCurrencyPrecision),n=this.commonCurrencyCode(r),d=this.safeValue(a,"withdrawal",!0),c=this.safeValue(a,"deposit",!0),h=!0;d&&c||(h=!1),s[n]={id:r,code:n,name:this.safeString(a,"full_name",n),active:h,precision:o,funding:{withdraw:{active:d,fee:this.safeValue(a,"withdrawal_fee")},deposit:{active:c,fee:this.safeValue(a,"deposit_fee")}},limits:{amount:{min:this.safeFloat(a,"minAmountTrade"),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0}},info:a}}return s}async fetchMarkets(e={}){let t=await this.publicGetAssetsPairs(),i=[],s=Object.keys(t);for(let e=0;e<s.length;e++){let r=s[e],a=t[r],o=this.commonCurrencyCode(a.base),n=this.commonCurrencyCode(a.quote),d=o+"/"+n,c=this.safeValue(a,"limits"),h=void 0,l=void 0;void 0!==c&&(h=this.safeFloat(c,"minimum"),l=this.safeFloat(c,"maximum"));let u={amount:parseInt(a.precision),price:8};i.push({id:r,symbol:d,base:o,quote:n,baseId:a.base,quoteId:a.quote,active:!0,precision:u,limits:{amount:{min:h,max:l},price:{min:Math.pow(10,-u.price),max:Math.pow(10,u.price)},cost:{min:void 0,max:void 0}},info:r})}return i}parseTicker(e,t){let i=t.symbol,s=this.milliseconds(),r=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high24hr"),low:this.safeFloat(e,"low24hr"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"percentChange"),average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchTicker(e,t={}){return(await this.fetchTickers([e],t))[e]}async fetchTickers(e,t={}){await this.loadMarkets();let i={};if(e){let t=this.marketIds(e);i.pairs=t.join(",")}let s=await this.publicGetTicker(this.extend(i,t)),r=Object.keys(s),a={};for(let e=0;e<r.length;e++){let t=r[e],i=this.safeValue(this.marketsById,t);if(void 0===i)continue;let o=i.symbol,n=s[t];a[o]=this.parseTicker(n,i)}return a}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetOrderbook(this.extend({pair:this.marketId(e)},i));return this.parseOrderBook(s.result,void 0,"bids","asks","price","amount")}parseTrade(e,t){let i=t.symbol,s=1e3*parseInt(e.timestamp),r=parseFloat(e.price),a=parseFloat(e.amount),o=this.costToPrecision(i,r*a);return{timestamp:s,datetime:this.iso8601(s),symbol:i,id:this.safeString(e,"tid"),order:void 0,type:void 0,side:void 0,price:r,amount:a,cost:parseFloat(o),fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={pair:r.id};void 0!==t&&(a.since=parseInt(t/1e3)),void 0!==i&&(a.limit=i);let o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o.result,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalances(e),i={info:t},s=t.result,r=Object.keys(s);for(let e=0;e<r.length;e++){let t=r[e],a=s[t],o=t;o=t in this.currencies_by_id?this.currencies_by_id[t].code:this.commonCurrencyCode(o);let n={free:parseFloat(a.amount),used:parseFloat(a.locked),total:parseFloat(a.total)};i[o]=n}return this.parseBalance(i)}parseOrder(e,t){let i=void 0;t||(t=this.safeValue(this.marketsById,e.pair)),t&&(i=t.symbol);let s=1e3*this.safeInteger(e,"timestamp"),r=parseFloat(e.price),a=this.safeFloat(e,"original_amount"),o=this.safeFloat(e,"executed_amount"),n=this.safeFloat(e,"remaining_amount"),d="closed";return e.is_cancelled?d="canceled":e.is_live&&(d="open"),{id:this.safeString(e,"id"),datetime:this.iso8601(s),timestamp:s,status:d,symbol:i,type:this.safeString(e,"type"),side:this.safeString(e,"side"),price:r,cost:void 0,amount:a,filled:o,remaining:n,trades:void 0,fee:void 0,info:this.safeValue(e,"info",e)}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n={pair:o.id,amount:s,type:t,side:i};"market"!==t&&(n.price=r);let d=await this.privatePostOrderNew(this.extend(n,a));n.id=d.result.order_id,n.timestamp=this.seconds(),n.original_amount=n.amount,n.info=d;let c=(n=this.parseOrder(n,o)).id;return this.orders[c]=n,n}async cancelOrder(e,t,i={}){let s=await this.privatePostOrderCancel(this.extend({order_id:e},i));return this.parseOrder(s.result)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostOrderStatus(this.extend({order_id:e},i));return this.parseOrder(s.result)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=await this.privatePostOrders();return this.parseOrders(r.result,void 0,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privatePostDepositAddress(this.extend({currency:i.id},t));return{currency:e,address:this.safeString(s.result,"address"),tag:void 0,info:s}}async withdraw(e,t,i,s,r={}){await this.loadMarkets();let a={currency:this.currency(e).id,amount:t,address:i};s&&(a.additional=s);let o=await this.privatePostWithdraw(this.extend(a,r));return{id:o.result.withdrawal_id,info:o}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+t+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials(),a=this.extend({nonce:this.nonce()},s);let e=this.json(a),t=this.stringToBase64(this.encode(e));a=this.decode(t),r={"X-BS-APIKEY":this.apiKey,"X-BS-PAYLOAD":a,"X-BS-SIGNATURE":this.hmac(t,this.encode(this.secret),"sha384")}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&!(o.length<2||"{"!==o[0]&&"["!==o[0])){let e=this.safeString(n,"statusCode");if(void 0!==e&&"0"!==e){const t=this.id+" "+this.json(n),i=this.exceptions;throw e in i?new i[e](t):new r(this.id+" "+this.json(n))}return n}}}},function(e,t,i){"use strict";const s=i(44),{PermissionDenied:r,ExchangeError:a,ExchangeNotAvailable:o,OrderNotFound:n,InsufficientFunds:d,InvalidOrder:c}=i(0),{TRUNCATE:h,DECIMAL_PLACES:l}=i(4);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hitbtc2",name:"HitBTC",countries:["HK"],rateLimit:1500,version:"2",has:{createDepositAddress:!0,fetchDepositAddress:!0,CORS:!0,editOrder:!0,fetchCurrencies:!0,fetchOHLCV:!0,fetchTickers:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,withdraw:!0,fetchOrderTrades:!1,fetchDeposits:!1,fetchWithdrawals:!1,fetchTransactions:!0,fetchTradingFee:!0},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","4h":"H4","1d":"D1","1w":"D7","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766555-8eaec20e-5edc-11e7-9c5b-6dc69fc42f5e.jpg",api:"https://api.hitbtc.com",www:"https://hitbtc.com",referral:"https://hitbtc.com/?ref_id=5a5d39a65d466",doc:["https://api.hitbtc.com","https://github.com/hitbtc-com/hitbtc-api/blob/master/APIv2.md"],fees:["https://hitbtc.com/fees-and-limits","https://support.hitbtc.com/hc/en-us/articles/115005148605-Fees-and-limits"]},api:{public:{get:["symbol","symbol/{symbol}","currency","currency/{currency}","ticker","ticker/{symbol}","trades/{symbol}","orderbook/{symbol}","candles/{symbol}"]},private:{get:["order","order/{clientOrderId}","trading/balance","trading/fee/all","trading/fee/{symbol}","history/trades","history/order","history/order/{id}/trades","account/balance","account/transactions","account/transactions/{id}","account/crypto/address/{currency}"],post:["order","account/crypto/withdraw","account/crypto/address/{currency}","account/transfer"],put:["order/{clientOrderId}","account/crypto/withdraw/{id}"],delete:["order","order/{clientOrderId}","account/crypto/withdraw/{id}"],patch:["order/{clientOrderId}"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,BCC:.0018,ETH:.00958,BCH:.0018,USDT:100,DASH:.03,BTG:5e-4,XRP:.509,LTC:.003,ZEC:1e-4,XMR:.09,"1ST":.84,ADX:5.7,AE:6.7,AEON:.01006,AIR:565,AMM:14,AMP:342,ANT:6.7,ARDR:1,ARN:18.5,ART:26,ATB:4e-4,ATL:27,ATM:504,ATS:860,AVT:1.9,BAS:113,BCN:.1,BET:124,BKB:46,BMC:32,BMT:100,BNT:2.57,BQX:4.7,BTCA:351.21,BTM:40,BTX:.04,BUS:.004,CAPP:97,CCT:6,CDT:100,CDX:30,CFI:61,CL:13.85,CLD:.88,CND:574,CNX:.04,COSS:65,CPAY:5.487,CSNO:16,CTR:15,CTX:146,CVC:8.46,DATA:12.949,DBIX:.0168,DCN:1280,DCT:.02,DDF:342,DENT:1e3,DGB:.4,DGD:.01,DICE:.32,DLT:.26,DNT:.21,DOGE:2,DOV:34,DRPU:24,DRT:240,DSH:.017,EBET:84,EBTC:20,EBTCOLD:6.6,ECAT:14,EDG:2,EDO:2.9,EKO:1136.36,ELE:.00172,ELM:.004,EMC:.03,MGO:14,ENJ:163,EOS:1.5,ERO:34,ETBS:15,ETC:.002,ETP:.004,EVX:5.4,EXN:456,FCN:5e-6,FRD:65,FUEL:123.00105,FUN:202.9598309,FYN:1.849,FYP:66.13,GAME:.004,GNO:.0034,GUP:4,GVT:1.2,HSR:.04,HAC:144,HDG:7,HGT:1082,HPC:.4,HVN:120,ICN:.55,ICO:34,ICOS:.35,IND:76,INDI:790,ITS:15.0012,IXT:11,KBR:143,KICK:112,KMD:4,LA:41,LEND:388,LAT:1.44,LIFE:13e3,LRC:27,LSK:.3,LOC:11.076,LUN:.34,MAID:5,MANA:143,MCAP:5.44,MIPS:43,MNE:1.33,MSP:121,MCO:.357,MTH:92,MYB:3.9,NDC:165,NEBL:.04,NET:3.96,NTO:998,NGC:2.368,NXC:13.39,NXT:3,OAX:15,ODN:.004,OMG:2,OPT:335,ORME:2.8,OTN:.57,PAY:3.1,PIX:96,PLBT:.33,PLR:114,PLU:.87,POE:784,POLL:3.5,PPT:2,PRE:32,PRG:39,PRO:41,PRS:60,PTOY:.5,QAU:63,QCN:.03,QTUM:.04,QVT:64,REP:.02,RKC:15,RLC:1.21,RVT:14,SC:30,SAN:2.24,SBD:.03,SCL:2.6,SISA:1640,SKIN:407,SWFTC:352.94,SMART:.4,SMS:.0375,SNC:36,SNGLS:4,SNM:48,SNT:233,STAR:.144,STORM:153.19,STEEM:.01,STRAT:.01,SPF:14.4,STU:14,STX:11,SUB:17,SUR:3,SWT:.51,TAAS:.91,TBT:2.37,TFL:15,TIME:.03,TIX:7.1,TKN:1,TGT:173,TKR:84,TNT:90,TRST:1.6,TRX:270,UET:480,UGT:15,UTT:3,VEN:14,VERI:.037,VIB:50,VIBE:145,VOISE:618,WEALTH:.0168,WINGS:2.4,WTC:.75,WRC:48,XAUR:3.23,XDN:.01,XEM:15,XUC:.9,YOYOW:140,ZAP:24,ZRX:23,ZSC:191},deposit:{BTC:0,ETH:0,BCH:0,USDT:0,BTG:0,LTC:0,ZEC:0,XMR:0,"1ST":0,ADX:0,AE:0,AEON:0,AIR:0,AMP:0,ANT:0,ARDR:0,ARN:0,ART:0,ATB:0,ATL:0,ATM:0,ATS:0,AVT:0,BAS:0,BCN:0,BET:0,BKB:0,BMC:0,BMT:0,BNT:0,BQX:0,BTM:0,BTX:0,BUS:0,CCT:0,CDT:0,CDX:0,CFI:0,CLD:0,CND:0,CNX:0,COSS:0,CSNO:0,CTR:0,CTX:0,CVC:0,DBIX:0,DCN:0,DCT:0,DDF:0,DENT:0,DGB:0,DGD:0,DICE:0,DLT:0,DNT:0,DOGE:0,DOV:0,DRPU:0,DRT:0,DSH:0,EBET:0,EBTC:0,EBTCOLD:0,ECAT:0,EDG:0,EDO:0,ELE:0,ELM:0,EMC:0,EMGO:0,ENJ:0,EOS:0,ERO:0,ETBS:0,ETC:0,ETP:0,EVX:0,EXN:0,FRD:0,FUEL:0,FUN:0,FYN:0,FYP:0,GNO:0,GUP:0,GVT:0,HAC:0,HDG:0,HGT:0,HPC:0,HVN:0,ICN:0,ICO:0,ICOS:0,IND:0,INDI:0,ITS:0,IXT:0,KBR:0,KICK:0,LA:0,LAT:0,LIFE:0,LRC:0,LSK:0,LUN:0,MAID:0,MANA:0,MCAP:0,MIPS:0,MNE:0,MSP:0,MTH:0,MYB:0,NDC:0,NEBL:0,NET:0,NTO:0,NXC:0,NXT:0,OAX:0,ODN:0,OMG:0,OPT:0,ORME:0,OTN:0,PAY:0,PIX:0,PLBT:0,PLR:0,PLU:0,POE:0,POLL:0,PPT:0,PRE:0,PRG:0,PRO:0,PRS:0,PTOY:0,QAU:0,QCN:0,QTUM:0,QVT:0,REP:0,RKC:0,RVT:0,SAN:0,SBD:0,SCL:0,SISA:0,SKIN:0,SMART:0,SMS:0,SNC:0,SNGLS:0,SNM:0,SNT:0,STEEM:0,STRAT:0,STU:0,STX:0,SUB:0,SUR:0,SWT:0,TAAS:0,TBT:0,TFL:0,TIME:0,TIX:0,TKN:0,TKR:0,TNT:0,TRST:0,TRX:0,UET:0,UGT:0,VEN:0,VERI:0,VIB:0,VIBE:0,VOISE:0,WEALTH:0,WINGS:0,WTC:0,XAUR:0,XDN:0,XEM:0,XUC:0,YOYOW:0,ZAP:0,ZRX:0,ZSC:0}}},options:{defaultTimeInForce:"FOK"},exceptions:{1003:r,2010:c,2011:c,2020:c,20002:n,20001:d}})}feeToPrecision(e,t){return this.decimalToPrecision(t,h,8,l)}async fetchMarkets(e={}){let t=await this.publicGetSymbol(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.id,a=s.baseCurrency,o=s.quoteCurrency,n=this.commonCurrencyCode(a),d=this.commonCurrencyCode(o),c=n+"/"+d,h=this.safeFloat(s,"quantityIncrement"),l=this.safeFloat(s,"tickSize"),u={price:this.precisionFromString(s.tickSize),amount:-1*parseInt(Math.log10(h))},p=this.safeFloat(s,"takeLiquidityRate"),m=this.safeFloat(s,"provideLiquidityRate");i.push(this.extend(this.fees.trading,{info:s,id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:!0,taker:p,maker:m,precision:u,limits:{amount:{min:h,max:void 0},price:{min:l,max:void 0},cost:{min:h*l,max:void 0}}}))}return i}async fetchCurrencies(e={}){let t=await this.publicGetCurrency(e),i={};for(let e=0;e<t.length;e++){let s=t[e],r=s.id,a=8,o=this.commonCurrencyCode(r),n=this.safeValue(s,"payinEnabled"),d=this.safeValue(s,"payoutEnabled"),c=this.safeValue(s,"transferEnabled"),h=n&&d&&c;"disabled"in s&&s.disabled&&(h=!1);let l="fiat";"crypto"in s&&s.crypto&&(l="crypto"),i[o]={id:r,code:o,type:l,payin:n,payout:d,transfer:c,info:s,name:s.fullName,active:h,fee:this.safeFloat(s,"payoutFee"),precision:a,limits:{amount:{min:Math.pow(10,-a),max:Math.pow(10,a)},price:{min:Math.pow(10,-a),max:Math.pow(10,a)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,a)}}}}return i}async fetchTradingFee(e,t={}){await this.loadMarkets();const i=this.market(e),s=this.extend({symbol:i.id},this.omit(t,"symbol")),r=await this.privateGetTradingFeeSymbol(s);return{info:r,maker:this.safeFloat(r,"provideLiquidityRate"),taker:this.safeFloat(r,"takeLiquidityRate")}}async fetchBalance(e={}){await this.loadMarkets();let t=this.safeString(e,"type","trading"),i="privateGet"+this.capitalize(t)+"Balance",s=this.omit(e,"type"),r=await this[i](s),a={info:r};for(let e=0;e<r.length;e++){let t=r[e],i=t.currency,s=this.commonCurrencyCode(i),o={free:parseFloat(t.available),used:parseFloat(t.reserved),total:0};o.total=this.sum(o.free,o.used),a[s]=o}return this.parseBalance(a)}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.timestamp),parseFloat(e.open),parseFloat(e.max),parseFloat(e.min),parseFloat(e.close),parseFloat(e.volume)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={symbol:a.id,period:this.timeframes[t]};void 0!==i&&(o.from=this.iso8601(i)),void 0!==s&&(o.limit=s);let n=await this.publicGetCandlesSymbol(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={symbol:this.marketId(e)};void 0!==t&&(s.limit=t);let r=await this.publicGetOrderbookSymbol(this.extend(s,i));return this.parseOrderBook(r,void 0,"bid","ask","price","size")}parseTicker(e,t){let i=this.parse8601(e.timestamp),s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"volume"),a=this.safeFloat(e,"volumeQuote"),o=this.safeFloat(e,"open"),n=this.safeFloat(e,"last"),d=void 0,c=void 0,h=void 0;void 0!==n&&void 0!==o&&(d=n-o,h=this.sum(n,o)/2,o>0&&(c=d/o*100));let l=void 0;return void 0!==a&&void 0!==r&&r>0&&(l=a/r),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:l,open:o,close:n,last:n,previousClose:void 0,change:d,percentage:c,average:h,baseVolume:r,quoteVolume:a,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t),s={};for(let e=0;e<i.length;e++){let t=i[e],r=t.symbol,a=this.markets_by_id[r];s[a.symbol]=this.parseTicker(t,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerSymbol(this.extend({symbol:i.id},t));if("message"in s)throw new a(this.id+" "+s.message);return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.timestamp),s=void 0;const r=this.safeString(e,"symbol");void 0!==r&&(s=r in this.markets_by_id?(t=this.markets_by_id[r]).symbol:r),void 0===s&&void 0!==t&&(s=t.symbol);let a=void 0,o=this.safeFloat(e,"fee");if(void 0!==o){a={cost:o,currency:t?t.quote:void 0}}let n=void 0;"clientOrderId"in e&&(n=e.clientOrderId);let d=this.safeFloat(e,"price"),c=this.safeFloat(e,"quantity"),h=d*c,l=this.safeString(e,"side");return{info:e,id:e.id.toString(),order:n,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:l,price:d,amount:c,cost:h,fee:a}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.currency(e),a.asset=r.id),void 0!==t&&(a.startTime=t);let o=await this.privateGetAccountTransactions(this.extend(a,s));return this.parseTransactions(o,r,t,i)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"createdAt")),r=this.parse8601(this.safeString(e,"updatedAt"));let a=void 0;const o=this.safeString(e,"currency");a=o in this.currencies_by_id?this.currencies_by_id[o].code:this.commonCurrencyCode(o);const n=this.parseTransactionStatus(this.safeString(e,"status")),d=this.safeFloat(e,"amount");let c=this.safeString(e,"type");"payin"===c?c="deposit":"payout"===c&&(c="withdrawal");const h=this.safeString(e,"address");return{info:e,id:i,txid:this.safeString(e,"hash"),timestamp:s,datetime:this.iso8601(s),address:h,tag:void 0,type:c,amount:d,currency:a,status:n,updated:r,fee:void 0}}parseTransactionStatus(e){let t={pending:"pending",failed:"failed",success:"ok"};return e in t?t[e]:e}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e);const a={symbol:r.id};void 0!==i&&(a.limit=i),void 0!==t&&(a.sort="ASC",a.from=this.iso8601(t));let o=await this.publicGetTradesSymbol(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n=this.uuid().split("-").join("");n=n.slice(0,32),s=parseFloat(s);let d={clientOrderId:n,symbol:o.id,side:i,quantity:this.amountToPrecision(e,s),type:t};"limit"===t?d.price=this.priceToPrecision(e,r):d.timeInForce=this.options.defaultTimeInForce;let h=await this.privatePostOrder(this.extend(d,a)),l=this.parseOrder(h);if("rejected"===l.status)throw new c(this.id+" order was rejected by the exchange "+this.json(l));let u=l.id;return this.orders[u]=l,l}async editOrder(e,t,i,s,r,a,o={}){await this.loadMarkets();let n=this.uuid().split("-").join(""),d={clientOrderId:e,requestClientId:n=n.slice(0,32)};void 0!==r&&(d.quantity=this.amountToPrecision(t,r)),void 0!==a&&(d.price=this.priceToPrecision(t,a));let c=await this.privatePatchOrderClientOrderId(this.extend(d,o)),h=this.parseOrder(c);return this.orders[h.id]=h,h}async cancelOrder(e,t,i={}){await this.loadMarkets();const s=await this.privateDeleteOrderClientOrderId(this.extend({clientOrderId:e},i));return this.parseOrder(s)}parseOrderStatus(e){return this.safeString({new:"open",suspended:"open",partiallyFilled:"open",filled:"closed",canceled:"canceled",expired:"failed"},e,e)}parseOrder(e,t){let i=this.parse8601(this.safeString(e,"createdAt")),s=this.parse8601(this.safeString(e,"updatedAt"));const r=this.safeString(e,"symbol");let a=void 0;void 0!==r&&(a=r in this.markets_by_id?(t=this.markets_by_id[r]).symbol:r),void 0===a&&void 0!==t&&(a=t.id);let o=this.safeFloat(e,"quantity"),n=this.safeFloat(e,"cumQuantity"),d=this.parseOrderStatus(this.safeString(e,"status")),c=e.clientOrderId.toString(),h=this.safeFloat(e,"price");void 0===h&&c in this.orders&&(h=this.orders[c].price);let l=void 0,u=void 0;void 0!==o&&void 0!==n&&(l=o-n,void 0!==h&&(u=n*h));const p=this.safeString(e,"type"),m=this.safeString(e,"side");let f=this.safeValue(e,"tradesReport"),y=void 0,b=void 0;if(void 0!==f){let e=void 0,i=void 0,s=(f=this.parseTrades(f,t)).length;for(let t=0;t<s;t++)void 0===e&&(e=0),void 0===i&&(i=0),void 0===u&&(u=0),u+=f[t].cost,e+=f[t].fee.cost,i+=f[t].price;void 0!==i&&s>0&&(b=i/s,"market"===p&&void 0===h&&(h=b)),void 0!==e&&(y={cost:e,currency:t.quote})}return{id:c,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:s,status:d,symbol:a,type:p,side:m,price:h,average:b,amount:o,cost:u,filled:n,remaining:l,fee:y,trades:f,info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetHistoryOrder(this.extend({clientOrderId:e},i));if(s.length>0)return this.parseOrder(s[0]);throw new n(this.id+" order "+e+" not found")}async fetchOpenOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetOrderClientOrderId(this.extend({clientOrderId:e},i));return this.parseOrder(s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.symbol=r.id);let o=await this.privateGetOrder(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==i&&(a.limit=i),void 0!==t&&(a.from=this.iso8601(t));let o=await this.privateGetHistoryOrder(this.extend(a,s)),n=this.parseOrders(o,r),d=[];for(let e=0;e<n.length;e++){let t=n[e],i=t.status;"closed"!==i&&"canceled"!==i||d.push(t)}return this.filterBySinceLimit(d,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==t&&(r.from=this.iso8601(t)),void 0!==i&&(r.limit=i);const o=await this.privateGetHistoryTrades(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();let a=void 0;void 0!==t&&(a=this.market(t));let o=await this.privateGetHistoryOrderIdTrades(this.extend({id:e},r));if(o.length>0)return this.parseTrades(o,a,i,s);throw new n(this.id+" order "+e+" not found, "+this.id+'.fetchOrderTrades() requires an exchange-specific order id, you need to grab it from order["info"]["id"]')}async createDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privatePostAccountCryptoAddressCurrency({currency:i.id}),r=s.address;return this.checkAddress(r),{currency:i,address:r,tag:this.safeString(s,"paymentId"),info:s}}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privateGetAccountCryptoAddressCurrency({currency:i.id}),r=s.address;this.checkAddress(r);let a=this.safeString(s,"paymentId");return{currency:i.code,address:r,tag:a,info:s}}async withdraw(e,t,i,s,r={}){await this.loadMarkets(),this.checkAddress(i);let a={currency:this.currency(e).id,amount:parseFloat(t),address:i};s&&(a.paymentId=s);let o=await this.privatePostAccountCryptoWithdraw(this.extend(a,r));return{info:o,id:o.id}}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/",n=this.omit(s,this.extractParams(e));if("public"===t)o+=t+"/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),o+=this.implodeParams(e,s),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(a=this.json(n));let t=this.encode(this.apiKey+":"+this.secret),d=this.stringToBase64(t);r={Authorization:"Basic "+this.decode(d),"Content-Type":"application/json"}}return{url:o=this.urls.api+o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,n,d){if("string"==typeof n&&e>=400){const t=this.id+" "+n;if(503===e||504===e)throw new o(t);if("{"===n[0]&&"error"in d){const e=this.safeString(d.error,"code"),i=this.exceptions;if(e in i)throw new i[e](t);if("Duplicate clientOrderId"===this.safeString(d.error,"message"))throw new c(t)}throw new a(t)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,InsufficientFunds:a,OrderNotFound:o,InvalidOrder:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hitbtc",name:"HitBTC",countries:["HK"],rateLimit:1500,version:"1",has:{CORS:!1,fetchTrades:!0,fetchTickers:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrderTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766555-8eaec20e-5edc-11e7-9c5b-6dc69fc42f5e.jpg",api:"https://api.hitbtc.com",www:"https://hitbtc.com",referral:"https://hitbtc.com/?ref_id=5a5d39a65d466",doc:"https://github.com/hitbtc-com/hitbtc-api/blob/master/APIv1.md",fees:["https://hitbtc.com/fees-and-limits","https://support.hitbtc.com/hc/en-us/articles/115005148605-Fees-and-limits"]},api:{public:{get:["{symbol}/orderbook","{symbol}/ticker","{symbol}/trades","{symbol}/trades/recent","symbols","ticker","time"]},trading:{get:["balance","orders/active","orders/recent","order","trades/by/order","trades"],post:["new_order","cancel_order","cancel_orders"]},payment:{get:["balance","address/{currency}","transactions","transactions/{transaction}"],post:["transfer_to_trading","transfer_to_main","address/{currency}","payout"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:-1e-4,taker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,BCC:.0018,ETH:.00215,BCH:.0018,USDT:100,DASH:.03,BTG:5e-4,LTC:.003,ZEC:1e-4,XMR:.09,"1ST":.84,ADX:5.7,AE:6.7,AEON:.01006,AIR:565,AMP:9,ANT:6.7,ARDR:1,ARN:18.5,ART:26,ATB:4e-4,ATL:27,ATM:504,ATS:860,AVT:1.9,BAS:113,BCN:.1,"DAO.Casino":124,BKB:46,BMC:32,BMT:100,BNT:2.57,BQX:4.7,BTM:40,BTX:.04,BUS:.004,CCT:115,CDT:100,CDX:30,CFI:61,CLD:.88,CND:574,CNX:.04,COSS:65,CSNO:16,CTR:15,CTX:146,CVC:8.46,DBIX:.0168,DCN:12e4,DCT:.02,DDF:342,DENT:6240,DGB:.4,DGD:.01,DICE:.32,DLT:.26,DNT:.21,DOGE:2,DOV:34,DRPU:24,DRT:240,DSH:.017,EBET:84,EBTC:20,EBTCOLD:6.6,ECAT:14,EDG:2,EDO:2.9,ELE:.00172,ELM:.004,EMC:.03,EMGO:14,ENJ:163,EOS:1.5,ERO:34,ETBS:15,ETC:.002,ETP:.004,EVX:5.4,EXN:456,FRD:65,FUEL:123.00105,FUN:202.9598309,FYN:1.849,FYP:66.13,GNO:.0034,GUP:4,GVT:1.2,HAC:144,HDG:7,HGT:1082,HPC:.4,HVN:120,ICN:.55,ICO:34,ICOS:.35,IND:76,INDI:5913,ITS:15.0012,IXT:11,KBR:143,KICK:112,LA:41,LAT:1.44,LIFE:13e3,LRC:27,LSK:.3,LUN:.34,MAID:5,MANA:143,MCAP:5.44,MIPS:43,MNE:1.33,MSP:121,MTH:92,MYB:3.9,NDC:165,NEBL:.04,NET:3.96,NTO:998,NXC:13.39,NXT:3,OAX:15,ODN:.004,OMG:2,OPT:335,ORME:2.8,OTN:.57,PAY:3.1,PIX:96,PLBT:.33,PLR:114,PLU:.87,POE:784,POLL:3.5,PPT:2,PRE:32,PRG:39,PRO:41,PRS:60,PTOY:.5,QAU:63,QCN:.03,QTUM:.04,QVT:64,REP:.02,RKC:15,RVT:14,SAN:2.24,SBD:.03,SCL:2.6,SISA:1640,SKIN:407,SMART:.4,SMS:.0375,SNC:36,SNGLS:4,SNM:48,SNT:233,STEEM:.01,STRAT:.01,STU:14,STX:11,SUB:17,SUR:3,SWT:.51,TAAS:.91,TBT:2.37,TFL:15,TIME:.03,TIX:7.1,TKN:1,TKR:84,TNT:90,TRST:1.6,TRX:1395,UET:480,UGT:15,VEN:14,VERI:.037,VIB:50,VIBE:145,VOISE:618,WEALTH:.0168,WINGS:2.4,WTC:.75,XAUR:3.23,XDN:.01,XEM:15,XUC:.9,YOYOW:140,ZAP:24,ZRX:23,ZSC:191},deposit:{BTC:6e-4,ETH:.003,BCH:0,USDT:0,BTG:0,LTC:0,ZEC:0,XMR:0,"1ST":0,ADX:0,AE:0,AEON:0,AIR:0,AMP:0,ANT:0,ARDR:0,ARN:0,ART:0,ATB:0,ATL:0,ATM:0,ATS:0,AVT:0,BAS:0,BCN:0,"DAO.Casino":0,BKB:0,BMC:0,BMT:0,BNT:0,BQX:0,BTM:0,BTX:0,BUS:0,CCT:0,CDT:0,CDX:0,CFI:0,CLD:0,CND:0,CNX:0,COSS:0,CSNO:0,CTR:0,CTX:0,CVC:0,DBIX:0,DCN:0,DCT:0,DDF:0,DENT:0,DGB:0,DGD:0,DICE:0,DLT:0,DNT:0,DOGE:0,DOV:0,DRPU:0,DRT:0,DSH:0,EBET:0,EBTC:0,EBTCOLD:0,ECAT:0,EDG:0,EDO:0,ELE:0,ELM:0,EMC:0,EMGO:0,ENJ:0,EOS:0,ERO:0,ETBS:0,ETC:0,ETP:0,EVX:0,EXN:0,FRD:0,FUEL:0,FUN:0,FYN:0,FYP:0,GNO:0,GUP:0,GVT:0,HAC:0,HDG:0,HGT:0,HPC:0,HVN:0,ICN:0,ICO:0,ICOS:0,IND:0,INDI:0,ITS:0,IXT:0,KBR:0,KICK:0,LA:0,LAT:0,LIFE:0,LRC:0,LSK:0,LUN:0,MAID:0,MANA:0,MCAP:0,MIPS:0,MNE:0,MSP:0,MTH:0,MYB:0,NDC:0,NEBL:0,NET:0,NTO:0,NXC:0,NXT:0,OAX:0,ODN:0,OMG:0,OPT:0,ORME:0,OTN:0,PAY:0,PIX:0,PLBT:0,PLR:0,PLU:0,POE:0,POLL:0,PPT:0,PRE:0,PRG:0,PRO:0,PRS:0,PTOY:0,QAU:0,QCN:0,QTUM:0,QVT:0,REP:0,RKC:0,RVT:0,SAN:0,SBD:0,SCL:0,SISA:0,SKIN:0,SMART:0,SMS:0,SNC:0,SNGLS:0,SNM:0,SNT:0,STEEM:0,STRAT:0,STU:0,STX:0,SUB:0,SUR:0,SWT:0,TAAS:0,TBT:0,TFL:0,TIME:0,TIX:0,TKN:0,TKR:0,TNT:0,TRST:0,TRX:0,UET:0,UGT:0,VEN:0,VERI:0,VIB:0,VIBE:0,VOISE:0,WEALTH:0,WINGS:0,WTC:0,XAUR:0,XDN:0,XEM:0,XUC:0,YOYOW:0,ZAP:0,ZRX:0,ZSC:0}}},commonCurrencies:{BCH:"Bitcoin Cash",BET:"DAO.Casino",CAT:"BitClave",DRK:"DASH",EMGO:"MGO",GET:"Themis",HSR:"HC",LNC:"LinkerCoin",UNC:"Unigame",USD:"USDT",XBT:"BTC"},options:{defaultTimeInForce:"FOK"}})}async fetchMarkets(e={}){let t=await this.publicGetSymbols(),i=[];for(let e=0;e<t.symbols.length;e++){let s=t.symbols[e],r=s.symbol,a=s.commodity,o=s.currency,n=this.safeFloat(s,"lot"),d=this.safeFloat(s,"step"),c=this.commonCurrencyCode(a),h=this.commonCurrencyCode(o),l=c+"/"+h;i.push({info:s,id:r,symbol:l,base:c,quote:h,baseId:a,quoteId:o,lot:n,step:d,active:!0,maker:this.safeFloat(s,"provideLiquidityRate"),taker:this.safeFloat(s,"takeLiquidityRate"),precision:{amount:this.precisionFromString(s.lot),price:this.precisionFromString(s.step)},limits:{amount:{min:n,max:void 0},price:{min:d,max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=this.safeString(e,"type","trading");t+="GetBalance";let i=this.omit(e,"type"),s=(await this[t](i)).balance,r={info:s};for(let e=0;e<s.length;e++){let t=s[e],i=t.currency_code,a=this.commonCurrencyCode(i),o=this.safeFloat(t,"cash",0);o=this.safeFloat(t,"balance",o);let n=this.safeFloat(t,"reserved",0),d={free:o,used:n,total:this.sum(o,n)};r[a]=d}return this.parseBalance(r)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetSymbolOrderbook(this.extend({symbol:this.marketId(e)},i));return this.parseOrderBook(s)}parseTicker(e,t){let i=e.timestamp,s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"volume_quote"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){let t=s[e],a=this.markets_by_id[t],o=a.symbol,n=i[t];r[o]=this.parseTicker(n,a)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetSymbolTicker(this.extend({symbol:i.id},t));if("message"in s)throw new r(this.id+" "+s.message);return this.parseTicker(s,i)}parseTrade(e,t){return Array.isArray(e)?this.parsePublicTrade(e,t):this.parseOrderTrade(e,t)}parsePublicTrade(e,t){let i=void 0;t&&(i=t.symbol);let s=void 0;return e.length>3&&(s=e[4]),{info:e,id:e[0].toString(),timestamp:e[3],datetime:this.iso8601(e[3]),symbol:i,type:void 0,side:s,price:parseFloat(e[1]),amount:parseFloat(e[2])}}parseOrderTrade(e,t){let i=void 0;t&&(i=t.symbol);let s=this.safeFloat(e,"execQuantity");t&&(s*=t.lot);let r=this.safeFloat(e,"execPrice"),a=r*s,o={cost:this.safeFloat(e,"fee"),currency:void 0,rate:void 0},n=e.timestamp;return{info:e,id:e.tradeId,order:e.clientOrderId,timestamp:n,datetime:this.iso8601(n),symbol:i,type:void 0,side:e.side,price:r,amount:s,cost:a,fee:o}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e);const a={symbol:r.id};void 0!==t&&(a.by="ts",a.from=t),void 0!==i&&(a.max_results=i);let o=await this.publicGetSymbolTrades(this.extend(a,s));return this.parseTrades(o.trades,r,t,i)}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();let d=this.market(e),c=parseFloat(s)/d.lot,h=Math.round(c),l=c-h;if(Math.abs(l)>d.step)throw new r(this.id+" order amount should be evenly divisible by lot unit size of "+d.lot.toString());let u={clientOrderId:this.milliseconds().toString(),symbol:d.id,side:i,quantity:h.toString(),type:t};"limit"===t?u.price=this.priceToPrecision(e,a):u.timeInForce=this.options.defaultTimeInForce;let p=await this.tradingPostNewOrder(this.extend(u,o)),m=this.parseOrder(p.ExecutionReport,d);if("rejected"===m.status)throw new n(this.id+" order was rejected by the exchange "+this.json(m));return m}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.tradingPostCancelOrder(this.extend({clientOrderId:e},i))}parseOrderStatus(e){return this.safeString({new:"open",partiallyFilled:"open",filled:"closed",canceled:"canceled",rejected:"rejected",expired:"expired"},e)}parseOrder(e,t){let i=this.safeInteger(e,"lastTimestamp");void 0===i&&(i=this.safeInteger(e,"timestamp"));let s=void 0;t||(t=this.markets_by_id[e.symbol]);let r=this.parseOrderStatus(this.safeString(e,"orderStatus")),a=this.safeFloat(e,"orderPrice");a=this.safeFloat(e,"price",a),a=this.safeFloat(e,"avgPrice",a);let o=this.safeFloat(e,"orderQuantity");o=this.safeFloat(e,"quantity",o);let n=this.safeFloat(e,"quantityLeaves"),d=void 0,c=void 0,h=void 0!==o,l=void 0!==(n=this.safeFloat(e,"leavesQuantity",n));if(void 0!==t)s=t.symbol,h&&(o*=t.lot),l&&(n*=t.lot);else{let i=this.safeString(e,"symbol");i in this.markets_by_id&&(t=this.markets_by_id[i])}h&&l&&(d=o-n,void 0!==a&&(c=a*d));let u=this.safeFloat(e,"fee"),p=void 0;void 0!==t&&(s=t.symbol,p=t.quote);let m={cost:u,currency:p,rate:void 0};return{id:e.clientOrderId.toString(),info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:r,symbol:s,type:e.type,side:e.side,price:a,cost:c,amount:o,filled:d,remaining:n,fee:m}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.tradingGetOrder(this.extend({clientOrderId:e},i));if(s.orders[0])return this.parseOrder(s.orders[0]);throw new o(this.id+" fetchOrder() error: "+this.response)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={sort:"desc",statuses:["new","partiallyFiiled"].join(",")};void 0!==e&&(r=this.market(e),a.symbols=r.id);let o=await this.tradingGetOrdersActive(this.extend(a,s));return this.parseOrders(o.orders,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={sort:"desc",statuses:["filled","canceled","rejected","expired"].join(","),max_results:1e3};void 0!==e&&(r=this.market(e),a.symbols=r.id);let o=await this.tradingGetOrdersRecent(this.extend(a,s));return this.parseOrders(o.orders,r,t,i)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();let a=void 0;void 0!==t&&(a=this.market(t));let o=await this.tradingGetTradesByOrder(this.extend({clientOrderId:e},r));return this.parseTrades(o.trades,a,i,s)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a={currency_code:this.currency(e).id,amount:t,address:i};void 0!==s&&(a.extra_id=s);let o=await this.paymentPostPayout(this.extend(a,r));return{info:o,id:o.transaction}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+t+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e={nonce:this.nonce(),apikey:this.apiKey};n=this.extend(e,n);let t=o+="GET"===i?"?"+this.urlencode(n):"?"+this.urlencode(e);"POST"===i&&Object.keys(n).length&&(t+=a=this.urlencode(n)),r={"Content-Type":"application/x-www-form-urlencoded","X-Signature":this.hmac(this.encode(t),this.encode(this.secret),"sha512").toLowerCase()}}return{url:o=this.urls.api+o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},o,n){let d=await this.fetch2(e,t,i,s,o,n);if("code"in d){if("ExecutionReport"in d&&"orderExceedsLimit"===d.ExecutionReport.orderRejectReason)throw new a(this.id+" "+this.json(d));throw new r(this.id+" "+this.json(d))}return d}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:o,InsufficientFunds:n,OrderNotFound:d,InvalidOrder:c,DDoSProtection:h,InvalidNonce:l,AuthenticationError:u,InvalidAddress:p}=i(0),{ROUND:m}=i(4);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"binance",name:"Binance",countries:["JP","MT"],rateLimit:500,certified:!0,has:{fetchDepositAddress:!0,CORS:!1,fetchBidsAsks:!0,fetchTickers:!0,fetchOHLCV:!0,fetchMyTrades:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,withdraw:!0,fetchFundingFees:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/29604020-d5483cdc-87ee-11e7-94c7-d1a8d9169293.jpg",api:{web:"https://www.binance.com",wapi:"https://api.binance.com/wapi/v3",public:"https://api.binance.com/api/v1",private:"https://api.binance.com/api/v3",v3:"https://api.binance.com/api/v3",v1:"https://api.binance.com/api/v1"},www:"https://www.binance.com",referral:"https://www.binance.com/?ref=10205187",doc:"https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md",fees:"https://www.binance.com/en/fee/schedule"},api:{web:{get:["exchange/public/product","assetWithdraw/getAllAsset.html"]},wapi:{post:["withdraw","sub-account/transfer"],get:["depositHistory","withdrawHistory","depositAddress","accountStatus","systemStatus","apiTradingStatus","userAssetDribbletLog","tradeFee","assetDetail","sub-account/list","sub-account/transfer/history","sub-account/assets"]},v3:{get:["ticker/price","ticker/bookTicker"]},public:{get:["ping","time","depth","trades","aggTrades","klines","ticker/24hr","ticker/allPrices","ticker/allBookTickers","ticker/price","ticker/bookTicker","exchangeInfo"],put:["userDataStream"],post:["userDataStream"],delete:["userDataStream"]},private:{get:["order","openOrders","allOrders","account","myTrades"],post:["order","order/test"],delete:["order"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{ADA:1,ADX:4.7,AION:1.9,AMB:11.4,APPC:6.5,ARK:.1,ARN:3.1,AST:10,BAT:18,BCD:1,BCH:.001,BCPT:10.2,BCX:1,BNB:.7,BNT:1.5,BQX:1.6,BRD:6.4,BTC:.001,BTG:.001,BTM:5,BTS:1,CDT:67,CMT:37,CND:47,CTR:5.4,DASH:.002,DGD:.06,DLT:11.7,DNT:51,EDO:2.5,ELF:6.5,ENG:2.1,ENJ:42,EOS:1,ETC:.01,ETF:1,ETH:.01,EVX:2.5,FUEL:45,FUN:85,GAS:0,GTO:20,GVT:.53,GXS:.3,HCC:5e-4,HSR:1e-4,ICN:3.5,ICX:1.3,INS:1.5,IOTA:.5,KMD:.002,KNC:2.6,LEND:54,LINK:12.8,LLT:54,LRC:9.1,LSK:.1,LTC:.01,LUN:.29,MANA:74,MCO:.86,MDA:4.7,MOD:2,MTH:34,MTL:1.9,NAV:.2,NEBL:.01,NEO:0,NULS:2.1,OAX:8.3,OMG:.57,OST:17,POE:88,POWR:8.6,PPT:.25,QSP:21,QTUM:.01,RCN:35,RDN:2.2,REQ:18.1,RLC:4.1,SALT:1.3,SBTC:1,SNGLS:42,SNM:29,SNT:32,STORJ:5.9,STRAT:.1,SUB:7.4,TNB:82,TNT:47,TRIG:6.7,TRX:129,USDT:23,VEN:1.8,VIB:28,VIBE:7.2,WABI:3.5,WAVES:.002,WINGS:9.3,WTC:.5,XLM:.01,XMR:.04,XRP:.25,XVG:.1,XZC:.02,YOYOW:39,ZEC:.005,ZRX:5.7},deposit:{}}},commonCurrencies:{BCC:"BCC",YOYO:"YOYOW"},options:{fetchTradesMethod:"publicGetAggTrades",fetchTickersMethod:"publicGetTicker24hr",defaultTimeInForce:"GTC",defaultLimitOrderType:"limit",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,parseOrderToPrecision:!1,newOrderRespType:{market:"FULL",limit:"RESULT"}},exceptions:{"API key does not exist":u,"Order would trigger immediately.":c,"Account has insufficient balance for requested action.":n,"Rest API trading is not enabled.":o,"-1000":o,"-1013":c,"-1021":l,"-1022":u,"-1100":c,"-1104":r,"-1128":r,"-2010":r,"-2011":d,"-2013":d,"-2014":u,"-2015":u}})}nonce(){return this.milliseconds()-this.options.timeDifference}async loadTimeDifference(){const e=await this.publicGetTime(),t=this.milliseconds();return this.options.timeDifference=parseInt(t-e.serverTime),this.options.timeDifference}async fetchMarkets(e={}){let t=await this.publicGetExchangeInfo();this.options.adjustForTimeDifference&&await this.loadTimeDifference();let i=t.symbols,s=[];for(let e=0;e<i.length;e++){let t=i[e],r=t.symbol;if("123456"===r)continue;let a=t.baseAsset,o=t.quoteAsset,n=this.commonCurrencyCode(a),d=this.commonCurrencyCode(o),c=n+"/"+d,h=this.indexBy(t.filters,"filterType"),l={base:t.baseAssetPrecision,quote:t.quotePrecision,amount:t.baseAssetPrecision,price:t.quotePrecision},u={id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,info:t,active:"TRADING"===t.status,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:void 0},price:{min:void 0,max:void 0},cost:{min:-1*Math.log10(l.amount),max:void 0}}};if("PRICE_FILTER"in h){let e=h.PRICE_FILTER;u.limits.price={min:this.safeFloat(e,"minPrice"),max:void 0};const t=this.safeFloat(e,"maxPrice");void 0!==t&&t>0&&(u.limits.price.max=t),u.precision.price=this.precisionFromString(e.tickSize)}if("LOT_SIZE"in h){let e=h.LOT_SIZE;u.precision.amount=this.precisionFromString(e.stepSize),u.limits.amount={min:this.safeFloat(e,"minQty"),max:this.safeFloat(e,"maxQty")}}"MIN_NOTIONAL"in h&&(u.limits.cost.min=parseFloat(h.MIN_NOTIONAL.minNotional)),s.push(u)}return s}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d="quote",c=n[a],h=s*c,l=n.precision.price;return"sell"===i?h*=r:(d="base",l=n.precision.amount),h=this.decimalToPrecision(h,m,l,this.precisionMode),{type:a,currency:n[d],rate:c,cost:parseFloat(h)}}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetAccount(e),i={info:t},s=t.balances;for(let e=0;e<s.length;e++){let t=s[e],r=t.asset;r in this.currencies_by_id&&(r=this.currencies_by_id[r].code);let a={free:parseFloat(t.free),used:parseFloat(t.locked),total:0};a.total=this.sum(a.free,a.used),i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={symbol:this.market(e).id};void 0!==t&&(s.limit=t);let r=await this.publicGetDepth(this.extend(s,i)),a=this.parseOrderBook(r);return a.nonce=this.safeInteger(r,"lastUpdateId"),a}parseTicker(e,t){let i=this.safeInteger(e,"closeTime"),s=this.findSymbol(this.safeString(e,"symbol"),t),r=this.safeFloat(e,"lastPrice");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat(e,"askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:this.safeFloat(e,"weightedAvgPrice"),open:this.safeFloat(e,"openPrice"),close:r,last:r,previousClose:this.safeFloat(e,"prevClosePrice"),change:this.safeFloat(e,"priceChange"),percentage:this.safeFloat(e,"priceChangePercent"),average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTicker24hr(this.extend({symbol:i.id},t));return this.parseTicker(s,i)}parseTickers(e,t){let i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}async fetchBidsAsks(e,t={}){await this.loadMarkets();let i=await this.publicGetTickerBookTicker(t);return this.parseTickers(i,e)}async fetchTickers(e,t={}){await this.loadMarkets();let i=this.options.fetchTickersMethod,s=await this[i](t);return this.parseTickers(s,e)}parseOHLCV(e,t,i="1m",s,r){return[e[0],parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5])]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,interval:this.timeframes[t]};void 0!==i&&(o.startTime=i),void 0!==s&&(o.limit=s);const n=await this.publicGetKlines(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}parseTrade(e,t){let i=this.safeInteger2(e,"T","time"),s=this.safeFloat2(e,"p","price"),r=this.safeFloat2(e,"q","qty"),a=this.safeString2(e,"a","id"),o=void 0,n=this.safeString(e,"orderId");"m"in e?o=e.m?"sell":"buy":"isBuyerMaker"in e?o=e.isBuyerMaker?"sell":"buy":"isBuyer"in e&&(o=e.isBuyer?"buy":"sell");let d=void 0;"commission"in e&&(d={cost:this.safeFloat(e,"commission"),currency:this.commonCurrencyCode(e.commissionAsset)});let c=void 0;"isMaker"in e&&(c=e.isMaker?"maker":"taker");let h=void 0;if(void 0===t){let i=this.safeString(e,"symbol");t=this.safeValue(this.markets_by_id,i)}return void 0!==t&&(h=t.symbol),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:h,id:a,order:n,type:void 0,takerOrMaker:c,side:o,price:s,amount:r,cost:s*r,fee:d}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:r.id};"publicGetAggTrades"===this.options.fetchTradesMethod&&void 0!==t&&(a.startTime=t,a.endTime=this.sum(t,36e5)),void 0!==i&&(a.limit=i);const o=this.safeValue(this.options,"fetchTradesMethod","publicGetTrades");let n=await this[o](this.extend(a,s));return this.parseTrades(n,r,t,i)}parseOrderStatus(e){let t={NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"expired"};return e in t?t[e]:e}parseOrder(e,t){let i=this.parseOrderStatus(this.safeString(e,"status")),s=this.findSymbol(this.safeString(e,"symbol"),t),r=void 0;"time"in e?r=e.time:"transactTime"in e&&(r=e.transactTime);let a=this.safeFloat(e,"price"),o=this.safeFloat(e,"origQty"),n=this.safeFloat(e,"executedQty"),d=void 0,c=this.safeFloat(e,"cummulativeQuoteQty");void 0!==n&&(void 0!==o&&(d=o-n,this.options.parseOrderToPrecision&&(d=parseFloat(this.amountToPrecision(s,d))),d=Math.max(d,0)),void 0!==a&&void 0===c&&(c=a*n));let h=this.safeString(e,"orderId"),l=this.safeString(e,"type");void 0!==l&&"market"===(l=l.toLowerCase())&&0===a&&void 0!==c&&void 0!==n&&c>0&&n>0&&(a=c/n);let u=this.safeString(e,"side");void 0!==u&&(u=u.toLowerCase());let p=void 0,m=void 0;const f=this.safeValue(e,"fills");if(void 0!==f){if((m=this.parseTrades(f,t)).length>0){c=m[0].cost,p={cost:m[0].fee.cost,currency:m[0].fee.currency};for(let e=1;e<m.length;e++)c=this.sum(c,m[e].cost),p.cost=this.sum(p.cost,m[e].fee.cost)}}let y=void 0;return void 0!==c&&(n&&(y=c/n),this.options.parseOrderToPrecision&&(c=parseFloat(this.costToPrecision(s,c)))),{info:e,id:h,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:s,type:l,side:u,price:a,amount:o,cost:c,average:y,filled:n,remaining:d,status:i,fee:p,trades:m}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n="privatePostOrder";this.safeValue(a,"test",!1)&&(n+="Test",a=this.omit(a,"test"));let d=t.toUpperCase();const h=this.safeValue(this.options.newOrderRespType,t,"RESULT");let l={symbol:o.id,quantity:this.amountToPrecision(e,s),type:d,side:i.toUpperCase(),newOrderRespType:h},u=!1,p=!1,m=!1;if("LIMIT"===d?(p=!0,u=!0):"STOP_LOSS"===d||"TAKE_PROFIT"===d?m=!0:"STOP_LOSS_LIMIT"===d||"TAKE_PROFIT_LIMIT"===d?(m=!0,p=!0,u=!0):"LIMIT_MAKER"===d&&(p=!0),p){if(void 0===r)throw new c(this.id+" createOrder method requires a price argument for a "+t+" order");l.price=this.priceToPrecision(e,r)}if(u&&(l.timeInForce=this.options.defaultTimeInForce),m){let i=this.safeFloat(a,"stopPrice");if(void 0===i)throw new c(this.id+" createOrder method requires a stopPrice extra param for a "+t+" order");a=this.omit(a,"stopPrice"),l.stopPrice=this.priceToPrecision(e,i)}let f=await this[n](this.extend(l,a));return this.parseOrder(f,o)}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();let s=this.market(t),r=this.safeValue(i,"origClientOrderId"),o={symbol:s.id};void 0!==r?o.origClientOrderId=r:o.orderId=parseInt(e);let n=await this.privateGetOrder(this.extend(o,i));return this.parseOrder(n,s)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();let r=this.market(e),o={symbol:r.id};void 0!==t&&(o.startTime=t),void 0!==i&&(o.limit=i);let n=await this.privateGetAllOrders(this.extend(o,s));return this.parseOrders(n,r,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let a=void 0,o={};if(void 0!==e)a=this.market(e),o.symbol=a.id;else if(this.options.warnOnFetchOpenOrdersWithoutSymbol){let e=this.symbols.length,t=parseInt(e/2);throw new r(this.id+" fetchOpenOrders WARNING: fetching open orders without specifying a symbol is rate-limited to one call per "+t.toString()+" seconds. Do not call this method frequently to avoid ban. Set "+this.id+'.options["warnOnFetchOpenOrdersWithoutSymbol"] = false to suppress this warning message.')}let n=await this.privateGetOpenOrders(this.extend(o,s));return this.parseOrders(n,a,t,i)}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();let s=this.market(t),r=await this.privateDeleteOrder(this.extend({symbol:s.id,orderId:parseInt(e)},i));return this.parseOrder(r)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();let r=this.market(e),o={symbol:r.id};void 0!==i&&(o.limit=i);let n=await this.privateGetMyTrades(this.extend(o,s));return this.parseTrades(n,r,t,i)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.currency(e),a.asset=r.id),void 0!==t&&(a.startTime=t);let o=await this.wapiGetDepositHistory(this.extend(a,s));return this.parseTransactions(o.depositList,r,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.currency(e),a.asset=r.id),void 0!==t&&(a.startTime=t);let o=await this.wapiGetWithdrawHistory(this.extend(a,s));return this.parseTransactions(o.withdrawList,r,t,i)}parseTransactionStatusByType(e,t){if(void 0===t)return e;let i={deposit:{0:"pending",1:"ok"},withdrawal:{0:"pending",1:"canceled",2:"pending",3:"failed",4:"pending",5:"failed",6:"ok"}};return e in i[t]?i[t][e]:e}parseTransaction(e,t){let i=this.safeString(e,"id"),s=this.safeString(e,"address"),r=this.safeString(e,"addressTag");void 0!==r&&r.length<1&&(r=void 0);let a=this.safeValue(e,"txId"),o=void 0,n=this.safeString(e,"asset");n in this.currencies_by_id?t=this.currencies_by_id[n]:o=this.commonCurrencyCode(n),void 0!==t&&(o=t.code);let d=void 0,c=this.safeInteger(e,"insertTime"),h=this.safeInteger(e,"applyTime"),l=this.safeString(e,"type");void 0===l&&(void 0!==c&&void 0===h?(l="deposit",d=c):void 0===c&&void 0!==h&&(l="withdrawal",d=h));let u=this.parseTransactionStatusByType(this.safeString(e,"status"),l),p=this.safeFloat(e,"amount");let m={cost:void 0,currency:o};return{info:e,id:i,txid:a,timestamp:d,datetime:this.iso8601(d),address:s,tag:r,type:l,amount:p,currency:o,status:u,updated:void 0,fee:m}}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.wapiGetDepositAddress(this.extend({asset:i.id},t));const r=this.safeValue(s,"success");if(void 0===r||!r)throw new p(this.id+" fetchDepositAddress returned an empty response  create the deposit address in the user settings first.");const a=this.safeString(s,"address"),o=this.safeString(s,"addressTag");return this.checkAddress(a),{currency:e,address:this.checkAddress(a),tag:o,info:s}}async fetchFundingFees(e,t={}){let i=await this.wapiGetAssetDetail(),s=this.safeValue(i,"assetDetail"),r=Object.keys(s),a={};for(let e=0;e<r.length;e++){let t=r[e];a[this.commonCurrencyCode(t)]=this.safeFloat(s[t],"withdrawFee")}return{withdraw:a,deposit:{},info:i}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a=this.currency(e),o=i.slice(0,20),n={asset:a.id,address:i,amount:parseFloat(t),name:o};s&&(n.addressTag=s);let d=await this.wapiPostWithdraw(this.extend(n,r));return{info:d,id:this.safeString(d,"id")}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];if(o+="/"+e,"wapi"===t&&(o+=".html"),"userDataStream"===e)a=this.urlencode(s),r={"X-MBX-APIKEY":this.apiKey,"Content-Type":"application/x-www-form-urlencoded"};else if("private"===t||"wapi"===t){this.checkRequiredCredentials();let e=this.urlencode(this.extend({timestamp:this.nonce(),recvWindow:this.options.recvWindow},s));e+="&signature="+this.hmac(this.encode(e),this.encode(this.secret)),r={"X-MBX-APIKEY":this.apiKey},"GET"===i||"DELETE"===i||"wapi"===t?o+="?"+e:(a=e,r["Content-Type"]="application/x-www-form-urlencoded")}else Object.keys(s).length&&(o+="?"+this.urlencode(s));return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if(418===e||429===e)throw new h(this.id+" "+e.toString()+" "+t+" "+o);if(e>=400){if(o.indexOf("Price * QTY is zero or less")>=0)throw new c(this.id+" order cost = amount * price is zero or less "+o);if(o.indexOf("LOT_SIZE")>=0)throw new c(this.id+" order amount should be evenly divisible by lot size "+o);if(o.indexOf("PRICE_FILTER")>=0)throw new c(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid float value in general, use this.priceToPrecision (symbol, amount) "+o)}if(o.length>0&&"{"===o[0]){let e=this.safeValue(n,"success",!0);if(!e){let e=this.safeString(n,"msg"),t=void 0;if(void 0!==e){try{t=JSON.parse(e)}catch(e){t=void 0}void 0!==t&&(n=t)}}const t=this.exceptions,i=this.safeString(n,"msg");if(i in t){throw new(0,t[i])(this.id+" "+i)}let s=this.safeString(n,"code");if(void 0!==s){if(s in t){if("-2015"===s&&this.options.hasAlreadyAuthenticatedSuccessfully)throw new h(this.id+" temporary banned: "+o);throw new t[s](this.id+" "+o)}throw new r(this.id+" "+o)}if(!e)throw new r(this.id+" "+o)}}async request(e,t="public",i="GET",s={},r,a){let o=await this.fetch2(e,t,i,s,r,a);return"private"!==t&&"wapi"!==t||(this.options.hasAlreadyAuthenticatedSuccessfully=!0),o}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ExchangeNotAvailable:a,AuthenticationError:o,InvalidOrder:n,InsufficientFunds:d,OrderNotFound:c,DDoSProtection:h,PermissionDenied:l,AddressPending:u}=i(0),{TRUNCATE:p,DECIMAL_PLACES:m}=i(4);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bittrex",name:"Bittrex",countries:["US"],version:"v1.1",rateLimit:1500,certified:!0,has:{CORS:!0,createMarketOrder:!1,fetchDepositAddress:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:"emulated",fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchTickers:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1},timeframes:{"1m":"oneMin","5m":"fiveMin","30m":"thirtyMin","1h":"hour","1d":"day"},hostname:"bittrex.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/27766352-cf0b3c26-5ed5-11e7-82b7-f3826b7a97d8.jpg",api:{public:"https://{hostname}/api",account:"https://{hostname}/api",market:"https://{hostname}/api",v2:"https://{hostname}/api/v2.0/pub"},www:"https://bittrex.com",doc:["https://bittrex.github.io/api/","https://www.npmjs.com/package/bittrex-node"],fees:["https://bittrex.zendesk.com/hc/en-us/articles/115003684371-BITTREX-SERVICE-FEES-AND-WITHDRAWAL-LIMITATIONS","https://bittrex.zendesk.com/hc/en-us/articles/115000199651-What-fees-does-Bittrex-charge-"]},api:{v2:{get:["currencies/GetBTCPrice","market/GetTicks","market/GetLatestTick","Markets/GetMarketSummaries","market/GetLatestTick"]},public:{get:["currencies","markethistory","markets","marketsummaries","marketsummary","orderbook","ticker"]},account:{get:["balance","balances","depositaddress","deposithistory","order","orders","orderhistory","withdrawalhistory","withdraw"]},market:{get:["buylimit","buymarket","cancel","openorders","selllimit","sellmarket"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.0025},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,LTC:.01,DOGE:2,VTC:.02,PPC:.02,FTC:.2,RDD:2,NXT:2,DASH:.05,POT:.002,BLK:.02,EMC2:.2,XMY:.2,GLD:2e-4,SLR:.2,GRS:.2},deposit:{BTC:0,LTC:0,DOGE:0,VTC:0,PPC:0,FTC:0,RDD:0,NXT:0,DASH:0,POT:0,BLK:0,EMC2:0,XMY:0,GLD:0,SLR:0,GRS:0}}},exceptions:{APISIGN_NOT_PROVIDED:o,INVALID_SIGNATURE:o,INVALID_CURRENCY:r,INVALID_PERMISSION:o,INSUFFICIENT_FUNDS:d,QUANTITY_NOT_PROVIDED:n,MIN_TRADE_REQUIREMENT_NOT_MET:n,ORDER_NOT_OPEN:c,INVALID_ORDER:n,UUID_INVALID:c,RATE_NOT_PROVIDED:n,WHITELIST_VIOLATION_IP:l},options:{pricePrecisionByCode:{USD:3},parseOrderStatus:!1,hasAlreadyAuthenticatedSuccessfully:!1,symbolSeparator:"-",tag:{NXT:!0,CRYPTO_NOTE_PAYMENTID:!0,BITSHAREX:!0,RIPPLE:!0,NEM:!0,STELLAR:!0,STEEM:!0}},commonCurrencies:{BITS:"SWIFT",CPC:"CapriCoin"}})}costToPrecision(e,t){return this.decimalToPrecision(t,p,this.markets[e].precision.price,m)}feeToPrecision(e,t){return this.decimalToPrecision(t,p,this.markets[e].precision.price,m)}async fetchMarkets(e={}){const t=await this.publicGetMarkets(),i=[],s=this.safeValue(t,"result");for(let e=0;e<s.length;e++){const t=s[e];let r=t.MarketName,a=t.MarketCurrency,o=t.BaseCurrency,n=this.commonCurrencyCode(a),d=this.commonCurrencyCode(o),c=n+"/"+d,h=8;d in this.options.pricePrecisionByCode&&(h=this.options.pricePrecisionByCode[d]);let l={amount:8,price:h},u=this.safeValue(t,"IsActive",!1);("false"!==u||u)&&(u=!0),i.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:u,info:t,precision:l,limits:{amount:{min:t.MinTradeSize,max:void 0},price:{min:Math.pow(10,-l.price),max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.accountGetBalances(e)).result,i={info:t},s=this.indexBy(t,"Currency"),r=Object.keys(s);for(let e=0;e<r.length;e++){let t=r[e],a=this.commonCurrencyCode(t),o=this.account(),n=s[t],d=this.safeFloat(n,"Available",0),c=this.safeFloat(n,"Balance",0),h=void 0;void 0!==c&&void 0!==d&&(h=c-d),o.free=d,o.used=h,o.total=c,i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetOrderbook(this.extend({market:this.marketId(e),type:"both"},i)),r=s.result;return"type"in i&&("buy"===i.type?r={buy:s.result,sell:[]}:"sell"===i.type&&(r={buy:[],sell:s.result})),this.parseOrderBook(r,void 0,"buy","sell","Rate","Quantity")}parseTicker(e,t){let i=this.safeString(e,"TimeStamp");"string"==typeof i&&i.length>0&&(i=this.parse8601(i));let s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"PrevDay"),a=this.safeFloat(e,"Last"),o=void 0,n=void 0;return void 0!==a&&void 0!==r&&(o=a-r,r>0&&(n=o/r*100)),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"High"),low:this.safeFloat(e,"Low"),bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:r,close:a,last:a,previousClose:void 0,change:o,percentage:n,average:void 0,baseVolume:this.safeFloat(e,"Volume"),quoteVolume:this.safeFloat(e,"BaseVolume"),info:e}}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i=this.safeValue(t,"result",[]),s={};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"Currency"),a=this.commonCurrencyCode(r),o=8,n=this.safeValue(t,"BaseAddress"),d=this.safeFloat(t,"TxFee");s[a]={id:r,code:a,address:n,info:t,type:t.CoinType,name:t.CurrencyLong,active:t.IsActive,fee:d,precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},withdraw:{min:d,max:Math.pow(10,o)}}}}return s}async fetchTickers(e,t={}){await this.loadMarkets();let i=(await this.publicGetMarketsummaries(t)).result,s={};for(let e=0;e<i.length;e++){let t=i[e],r=t.MarketName,a=void 0,o=r;s[o=r in this.markets_by_id?(a=this.markets_by_id[r]).symbol:this.parseSymbol(r)]=this.parseTicker(t,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetMarketsummary(this.extend({market:i.id},t))).result[0];return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.TimeStamp+"+00:00"),s=void 0;"BUY"===e.OrderType?s="buy":"SELL"===e.OrderType&&(s="sell");let r=this.safeString2(e,"Id","ID"),a=void 0;void 0!==t&&(a=t.symbol);let o=void 0,n=this.safeFloat(e,"Price"),d=this.safeFloat(e,"Quantity");return void 0!==d&&void 0!==n&&(o=n*d),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,id:r,order:void 0,type:"limit",takerOrMaker:void 0,side:s,price:n,amount:d,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let a=this.market(e),o=await this.publicGetMarkethistory(this.extend({market:a.id},s));if("result"in o&&void 0!==o.result)return this.parseTrades(o.result,a,t,i);throw new r(this.id+" fetchTrades() returned undefined response")}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.T+"+00:00"),e.O,e.H,e.L,e.C,e.V]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={tickInterval:this.timeframes[t],marketName:a.id},n=await this.v2GetMarketGetTicks(this.extend(o,r));if("result"in n&&n.result)return this.parseOHLCVs(n.result,a,t,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r={},a=void 0;void 0!==e&&(a=this.market(e),r.market=a.id);let o=await this.marketGetOpenorders(this.extend(r,s)),n=this.parseOrders(o.result,a,t,i);return this.filterBySymbol(n,e)}async createOrder(e,t,i,s,a,o={}){if("limit"!==t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();let n=this.market(e),d="marketGet"+this.capitalize(i)+t,c={market:n.id,quantity:this.amountToPrecision(e,s),rate:this.priceToPrecision(e,a)},h=await this[d](this.extend(c,o)),l=this.getOrderIdField();return{info:h,id:h.result[l],symbol:e,type:t,side:i,status:"open"}}getOrderIdField(){return"uuid"}async cancelOrder(e,t,i={}){await this.loadMarkets();let s={};s[this.getOrderIdField()]=e;let r=await this.marketGetCancel(this.extend(s,i));return this.extend(this.parseOrder(r),{status:"canceled"})}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id);const o=await this.accountGetDeposithistory(this.extend(r,s));return this.parseTransactions(o.result,a,void 0,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id);const o=await this.accountGetWithdrawalhistory(this.extend(r,s));return this.parseTransactions(o.result,a,t,i)}parseTransaction(e,t){const i=this.safeString2(e,"Id","PaymentUuid"),s=this.safeFloat(e,"Amount"),a=this.safeString2(e,"CryptoAddress","Address"),o=this.safeString(e,"TxId"),n=this.parse8601(this.safeValue(e,"LastUpdated")),d=this.parse8601(this.safeString(e,"Opened",n)),c=void 0!==d?"withdrawal":"deposit";let h=void 0,l=this.safeString(e,"Currency");h=void 0!==(t=this.safeValue(this.currencies_by_id,l))?t.code:this.commonCurrencyCode(l);let u="pending";if("deposit"===c)void 0!==t&&(u="ok");else{const t=this.safeValue(e,"Authorized",!1),i=this.safeValue(e,"PendingPayment",!1),s=this.safeValue(e,"Canceled",!1);this.safeValue(e,"InvalidAddress",!1)?u="failed":s?u="canceled":i?u="pending":t&&void 0!==o&&(u="ok")}let p=this.safeFloat(e,"TxCost");if(void 0===p)if("deposit"===c)p=0;else if("withdrawal"===c)throw new r("Withdrawal without fee detected!");return{info:e,id:i,currency:h,amount:s,address:a,tag:void 0,status:u,type:c,updated:n,txid:o,timestamp:d,datetime:this.iso8601(d),fee:{currency:h,cost:p}}}parseSymbol(e){let[t,i]=e.split(this.options.symbolSeparator);return(i=this.commonCurrencyCode(i))+"/"+(t=this.commonCurrencyCode(t))}parseOrder(e,t){let i=this.safeString2(e,"OrderType","Type");const s="LIMIT_SELL"===i||"SELL"===i;("LIMIT_BUY"===i||"BUY"===i)&&(i="buy"),s&&(i="sell");let r=void 0;"Opened"in e&&e.Opened&&(r="open"),"Closed"in e&&e.Closed&&(r="closed"),"CancelInitiated"in e&&e.CancelInitiated&&(r="canceled"),"Status"in e&&this.options.parseOrderStatus&&(r=this.parseOrderStatus(this.safeString(e,"Status")));let a=void 0;if("Exchange"in e){let i=e.Exchange;a=i in this.markets_by_id?(t=this.markets_by_id[i]).symbol:this.parseSymbol(i)}else void 0!==t&&(a=t.symbol);let o=void 0;"Opened"in e&&(o=this.parse8601(e.Opened+"+00:00")),"Created"in e&&(o=this.parse8601(e.Created+"+00:00"));let n=void 0;"TimeStamp"in e&&void 0!==e.TimeStamp&&(n=this.parse8601(e.TimeStamp+"+00:00")),"Closed"in e&&void 0!==e.Closed&&(n=this.parse8601(e.Closed+"+00:00")),void 0===o&&(o=n);let d=void 0,c=void 0;if("Commission"in e?c="Commission":"CommissionPaid"in e&&(c="CommissionPaid"),c)if(d={cost:parseFloat(e[c])},void 0!==t)d.currency=t.quote;else if(void 0!==a){let e=a.split("/")[1];e in this.currencies_by_id?d.currency=this.currencies_by_id[e].code:d.currency=this.commonCurrencyCode(e)}let h=this.safeFloat(e,"Limit"),l=this.safeFloat(e,"Price");const u=this.safeFloat(e,"Quantity"),p=this.safeFloat(e,"QuantityRemaining");let m=void 0;void 0!==u&&void 0!==p&&(m=u-p),l||h&&m&&(l=h*m),h||l&&m&&(h=l/m);const f=this.safeFloat(e,"PricePerUnit");return{info:e,id:this.safeString2(e,"OrderUuid","OrderId"),timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:n,symbol:a,type:"limit",side:i,price:h,cost:l,average:f,amount:u,filled:m,remaining:p,status:r,fee:d}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{let t=this.getOrderIdField(),r={};r[t]=e,s=await this.accountGetOrder(this.extend(r,i))}catch(e){if(this.last_json_response){if("UUID_INVALID"===this.safeString(this.last_json_response,"message"))throw new c(this.id+" fetchOrder() error: "+this.last_http_response)}throw e}if(!s.result)throw new c(this.id+" order "+e+" not found");return this.parseOrder(s.result)}orderToTrade(e){const t=this.safeInteger2(e,"lastTradeTimestamp","timestamp");return{id:this.safeString(e,"id"),side:this.safeString(e,"side"),order:this.safeString(e,"id"),price:this.safeFloat(e,"average"),amount:this.safeFloat(e,"filled"),cost:this.safeFloat(e,"cost"),symbol:this.safeString(e,"symbol"),timestamp:t,datetime:this.iso8601(t),fee:this.safeValue(e,"fee"),info:e}}ordersToTrades(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.orderToTrade(e[i]));return t}async fetchMyTrades(e,t,i,s={}){const r=await this.fetchClosedOrders(e,t,i,s);return this.ordersToTrades(r)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r={},a=void 0;void 0!==e&&(a=this.market(e),r.market=a.id);let o=await this.accountGetOrderhistory(this.extend(r,s)),n=this.parseOrders(o.result,a,t,i);return void 0!==e?this.filterBySymbol(n,e):n}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s={currency:i.id},r=await this.accountGetDepositaddress(this.extend(s,t));let a=this.safeString(r.result,"Address");const o=this.safeString(r,"message");if(!a||"ADDRESS_GENERATING"===o)throw new u(this.id+" the address for "+e+" is being generated (pending, not ready yet, retry again later)");let n=void 0;return i.type in this.options.tag&&(n=a,a=i.address),this.checkAddress(a),{currency:e,address:a,tag:n,info:r}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a={currency:this.currency(e).id,quantity:t,address:i};s&&(a.paymentid=s);let o=await this.accountGetWithdraw(this.extend(a,r)),n=void 0;return"result"in o&&"uuid"in o.result&&(n=o.result.uuid),{info:o,id:n}}sign(e,t="public",i="GET",s={},r,a){let o=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/";if("v2"!==t&&(o+=this.version+"/"),"public"===t)o+=t+"/"+i.toLowerCase()+e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else if("v2"===t)o+=e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials(),o+=t+"/",("account"===t&&"withdraw"!==e||"openorders"===e)&&(o+=i.toLowerCase());const a={apikey:this.apiKey},n=this.safeValue(this.options,"disableNonce");void 0!==n&&n||(a.nonce=this.nonce()),o+=e+"?"+this.urlencode(this.extend(a,s)),r={apisign:this.hmac(this.encode(o),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,d,l,u){if("{"===l[0]){let e=this.safeValue(u,"success");if(void 0===e)throw new r(this.id+": malformed response: "+this.json(u));if("string"==typeof e&&(e="true"===e),!e){const e=this.safeString(u,"message"),t=this.id+" "+this.json(u),s=this.exceptions;if("APIKEY_INVALID"===e)throw this.options.hasAlreadyAuthenticatedSuccessfully?new h(t):new o(t);if("DUST_TRADE_DISALLOWED_MIN_VALUE_50K_SAT"===e)throw new n(this.id+" order cost should be over 50k satoshi "+this.json(u));if("INVALID_ORDER"===e){let e="cancel";if(i.indexOf(e)>=0){let e=i.split("&"),t=void 0;for(let i=0;i<e.length;i++){let s=e[i].split("=");if("uuid"===s[0]){t=s[1];break}}throw new c(void 0!==t?this.id+" cancelOrder "+t+" "+this.json(u):this.id+" cancelOrder "+this.json(u))}}if(e in s)throw new s[e](t);if(void 0!==e){if(e.indexOf("throttled. Try again")>=0)throw new h(t);if(e.indexOf("problem")>=0)throw new a(t)}throw new r(t)}}}appendTimezoneParse8601(e){return"Z"===e[e.length-1]||e.indexOf("+")>=0?this.parse8601(e):this.parse8601(e+"Z")}async request(e,t="public",i="GET",s={},r,a){let o=await this.fetch2(e,t,i,s,r,a);return"account"!==t&&"market"!==t||(this.options.hasAlreadyAuthenticatedSuccessfully=!0),o}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,InsufficientFunds:a,InvalidOrder:o,AuthenticationError:n,PermissionDenied:d,InvalidNonce:c,OrderNotFound:h,DDoSProtection:l}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcbox",name:"BtcBox",countries:["JP"],rateLimit:1e3,version:"v1",has:{CORS:!1,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchTickers:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/31275803-4df755a8-aaa1-11e7-9abb-11ec2fad9f2d.jpg",api:"https://www.btcbox.co.jp/api",www:"https://www.btcbox.co.jp/",doc:"https://www.btcbox.co.jp/help/asm",fees:"https://support.btcbox.co.jp/hc/en-us/articles/360001235694-Fees-introduction"},api:{public:{get:["depth","orders","ticker"]},private:{post:["balance","trade_add","trade_cancel","trade_list","trade_view","wallet"]}},markets:{"BTC/JPY":{id:"btc",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy",taker:5e-4,maker:5e-4},"ETH/JPY":{id:"eth",symbol:"ETH/JPY",base:"ETH",quote:"JPY",baseId:"eth",quoteId:"jpy",taker:.001,maker:.001},"LTC/JPY":{id:"ltc",symbol:"LTC/JPY",base:"LTC",quote:"JPY",baseId:"ltc",quoteId:"jpy",taker:.001,maker:.001},"BCH/JPY":{id:"bch",symbol:"BCH/JPY",base:"BCH",quote:"JPY",baseId:"bch",quoteId:"jpy",taker:.001,maker:.001}},exceptions:{104:n,105:d,106:c,107:o,200:a,201:o,202:o,203:h,401:h,402:l}})}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalance(),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=r.toLowerCase();"dash"===a&&(a="drk");let o=this.account(),n=a+"_balance",d=a+"_lock";n in t&&(o.free=parseFloat(t[n])),d in t&&(o.used=parseFloat(t[d])),o.total=this.sum(o.free,o.used),i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r={};this.symbols.length>1&&(r.coin=s.baseId);let a=await this.publicGetDepth(this.extend(r,i));return this.parseOrderBook(a)}parseTicker(e,t){let i=this.milliseconds(),s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s={};this.symbols.length>1&&(s.coin=i.baseId);let r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){let i=1e3*parseInt(e.date);return{info:e,id:e.tid,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.type,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={};this.symbols.length>1&&(a.coin=r.baseId);let o=await this.publicGetOrders(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={amount:s,price:r,type:i,coin:o.baseId},d=await this.privatePostTradeAdd(this.extend(n,a));return this.parseOrder(d,o)}async cancelOrder(e,t,i={}){await this.loadMarkets(),void 0===t&&(t="BTC/JPY");const s=this.market(t),r={id:e,coin:s.baseId},a=await this.privatePostTradeCancel(this.extend(r,i));return this.parseOrder(a,s)}parseOrderStatus(e){return this.safeString({part:"open",all:"closed",cancelled:"canceled",closed:"closed",no:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"id");let s=void 0;void 0!==this.safeString(e,"datetime")&&(s=this.parse8601(e.datetime+"+09:00"));const r=this.safeFloat(e,"amount_original"),a=this.safeFloat(e,"amount_outstanding");let o=void 0;void 0!==r&&void 0!==a&&(o=r-a);const n=this.safeFloat(e,"price");let d=void 0;void 0!==n&&void 0!==o&&(d=o*n);let c=this.parseOrderStatus(this.safeString(e,"status"));void 0===c&&void 0!==a&&0===a&&(c="closed");let h=void 0;void 0!==t&&(h=t.symbol);const l=this.safeString(e,"type");return{id:i,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,amount:r,remaining:a,filled:o,side:l,type:void 0,status:c,symbol:h,price:n,cost:d,trades:void 0,fee:void 0,info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets(),void 0===t&&(t="BTC/JPY");const s=this.market(t),r=this.extend({id:e,coin:s.baseId},i),a=await this.privatePostTradeView(this.extend(r,i));return this.parseOrder(a,s)}async fetchOrdersByType(e,t,i,s,r={}){await this.loadMarkets(),void 0===t&&(t="BTC/JPY");const a=this.market(t),o={type:e,coin:a.baseId},n=await this.privatePostTradeList(this.extend(o,r)),d=this.parseOrders(n,a,i,s);if("open"===e)for(let e=0;e<d.length;e++)d[e].status="open";return d}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByType("all",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByType("open",e,t,i,s)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=this.extend({key:this.apiKey,nonce:e},s),i=this.urlencode(t),o=this.hash(this.encode(this.secret));t.signature=this.hmac(this.encode(i),this.encode(o)),a=this.urlencode(t),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if(e>=400)return;if("{"!==o[0])return;const d=this.safeValue(n,"result");if(void 0===d||!0===d)return;const c=this.safeValue(n,"code"),h=this.id+" "+this.json(n),l=this.exceptions;if(c in l)throw new l[c](h);throw new r(h)}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcturk",name:"BTCTurk",countries:["TR"],rateLimit:1e3,has:{CORS:!0,fetchTickers:!0,fetchOHLCV:!0},timeframes:{"1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27992709-18e15646-64a3-11e7-9fa2-b0950ec7712f.jpg",api:"https://www.btcturk.com/api",www:"https://www.btcturk.com",doc:"https://github.com/BTCTrader/broker-api-docs"},api:{public:{get:["ohlcdata","orderbook","ticker","trades"]},private:{get:["balance","openOrders","userTransactions"],post:["exchange","cancelOrder"]}},fees:{trading:{maker:.00236,taker:.00413}}})}async fetchMarkets(e={}){let t=await this.publicGetTicker(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.pair,a=r.slice(0,3),o=r.slice(3,6),n=this.commonCurrencyCode(a),d=this.commonCurrencyCode(o);a=a.toLowerCase(),o=o.toLowerCase();let c=n+"/"+d,h={amount:8,price:8},l=!0;i.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:l,info:s,precision:h,limits:{amount:{min:Math.pow(10,-h.amount),max:void 0},price:{min:Math.pow(10,-h.price),max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchBalance(e={}){let t=await this.privateGetBalance(),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=this.currencies[r],o=this.account(),n=a.id+"_available",d=a.id+"_balance",c=a.id+"_reserved";n in t&&(o.free=this.safeFloat(t,n),o.total=this.safeFloat(t,d),o.used=this.safeFloat(t,c)),i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){let s=this.market(e),r=await this.publicGetOrderbook(this.extend({pairSymbol:s.id},i)),a=parseInt(1e3*r.timestamp);return this.parseOrderBook(r,a)}parseTicker(e,t){let i=void 0;t&&(i=t.symbol);let s=1e3*parseInt(e.timestamp),r=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"average"),baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t),s={};for(let e=0;e<i.length;e++){let t=i[e],r=t.pair,a=void 0;r in this.markets_by_id&&(r=(a=this.markets_by_id[r]).symbol),s[r]=this.parseTicker(t,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.fetchTickers(),s=void 0;return e in i&&(s=i[e]),s}parseTrade(e,t){let i=1e3*e.date;return{id:e.tid,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTrades(this.extend({pairSymbol:r.id},s));return this.parseTrades(a,r,t,i)}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.Time),e.Open,e.High,e.Low,e.Close,e.Volume]}async fetchOHLCV(e,t="1d",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={};void 0!==s&&(o.last=s);let n=await this.publicGetOhlcdata(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();let n={PairSymbol:this.marketId(e),OrderType:"buy"===i?0:1,OrderMethod:"market"===t?1:0};if("market"===t){if(!("Total"in o))throw new r(this.id+' createOrder requires the "Total" extra parameter for market orders (amount and price are both ignored)')}else n.Price=a,n.Amount=s;let d=await this.privatePostExchange(this.extend(n,o));return{info:d,id:d.id}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder({id:e})}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,o){if("btctrader"===this.id)throw new r(this.id+" is an abstract base API for BTCExchange, BTCTurk");let n=this.urls.api+"/"+e;if("public"===t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce().toString();o=this.urlencode(s);let t=this.base64ToBinary(this.secret),i=this.apiKey+e;a={"X-PCK":this.apiKey,"X-Stamp":e,"X-Signature":this.stringToBase64(this.hmac(this.encode(i),t,"sha256","binary")),"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:o,headers:a}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ExchangeNotAvailable:a,InsufficientFunds:o,InvalidOrder:n,DDoSProtection:d,InvalidNonce:c,AuthenticationError:h,NotSupported:l}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"fcoin",name:"FCoin",countries:["CN"],rateLimit:2e3,userAgent:this.userAgents.chrome39,version:"v2",accounts:void 0,accountsById:void 0,hostname:"fcoin.com",has:{CORS:!1,fetchDepositAddress:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchOrderBooks:!1,fetchTradingLimits:!1,withdraw:!1,fetchCurrencies:!1},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","1d":"D1","1w":"W1","1M":"MN"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42244210-c8c42e1e-7f1c-11e8-8710-a5fb63b165c4.jpg",api:"https://api.{hostname}",www:"https://www.fcoin.com",referral:"https://www.fcoin.com/i/Z5P7V",doc:"https://developer.fcoin.com",fees:"https://fcoinjp.zendesk.com/hc/en-us/articles/360018727371"},api:{market:{get:["ticker/{symbol}","depth/{level}/{symbol}","trades/{symbol}","candles/{timeframe}/{symbol}"]},public:{get:["symbols","currencies","server-time"]},private:{get:["accounts/balance","orders","orders/{order_id}","orders/{order_id}/match-results"],post:["orders","orders/{order_id}/submit-cancel"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},limits:{amount:{min:.01,max:1e5}},options:{createMarketBuyOrderRequiresPrice:!0,limits:{"BTM/USDT":{amount:{min:.1,max:1e7}},"ETC/USDT":{amount:{min:.001,max:4e5}},"ETH/USDT":{amount:{min:.001,max:1e4}},"LTC/USDT":{amount:{min:.001,max:4e4}},"BCH/USDT":{amount:{min:.001,max:5e3}},"BTC/USDT":{amount:{min:.001,max:1e3}},"ICX/ETH":{amount:{min:.01,max:3e6}},"OMG/ETH":{amount:{min:.01,max:5e5}},"FT/USDT":{amount:{min:1,max:1e7}},"ZIL/ETH":{amount:{min:1,max:1e7}},"ZIP/ETH":{amount:{min:1,max:1e7}},"FT/BTC":{amount:{min:1,max:1e7}},"FT/ETH":{amount:{min:1,max:1e7}}}},exceptions:{400:l,401:h,405:l,429:d,1002:a,1016:o,3008:n,6004:c,6005:h},commonCurrencies:{DAG:"DAGX",PAI:"PCHAIN"}})}async fetchMarkets(e={}){let t=[],i=(await this.publicGetSymbols()).data;for(let e=0;e<i.length;e++){let s=i[e],r=s.name,a=s.base_currency,o=s.quote_currency,n=a.toUpperCase();n=this.commonCurrencyCode(n);let d=o.toUpperCase(),c=n+"/"+(d=this.commonCurrencyCode(d)),h={price:s.price_decimal,amount:s.amount_decimal},l={price:{min:Math.pow(10,-h.price),max:Math.pow(10,h.price)}};const u=this.safeValue(s,"tradable",!1);c in this.options.limits&&(l=this.extend(this.options.limits[c],l)),t.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:u,precision:h,limits:l,info:s})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetAccountsBalance(e),i={info:t},s=t.data;for(let e=0;e<s.length;e++){let t=s[e],r=t.currency,a=r.toUpperCase();a=r in this.currencies_by_id?this.currencies_by_id[r].code:this.commonCurrencyCode(a);let o=this.account();o.free=parseFloat(t.available),o.total=parseFloat(t.balance),o.used=parseFloat(t.frozen),i[a]=o}return this.parseBalance(i)}parseBidsAsks(e,t=0,i=1){let s=[],r=e.length,a=parseInt(r/2);for(let r=0;r<a;r++){let a=2*r,o=this.sum(a,t),n=this.sum(a,i);s.push([this.safeFloat(e,o),this.safeFloat(e,n)])}return s}async fetchOrderBook(e,t,i={}){if(await this.loadMarkets(),void 0!==t){if(20!==t&&100!==t)throw new r(this.id+" fetchOrderBook supports limit of 20, 100 or no limit. Other values are not accepted");t="L"+t.toString()}else t="full";let s=this.extend({symbol:this.marketId(e),level:t},i),a=(await this.marketGetDepthLevelSymbol(s)).data;return this.parseOrderBook(a,a.ts,"bids","asks",0,1)}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.marketGetTickerSymbol(this.extend({symbol:i.id},t));return this.parseTicker(s.data,i)}parseTicker(e,t){let i=void 0;if(void 0===t){let i=this.safeString(e,"type");if(void 0!==i){let e=i.split(".")[1];e in this.markets_by_id&&(t=this.markets_by_id[e])}}let s=e.ticker,r=s[0];return void 0!==t&&(i=t.symbol),{symbol:i,timestamp:void 0,datetime:this.iso8601(void 0),high:s[7],low:s[8],bid:s[2],bidVolume:s[3],ask:s[4],askVolume:s[5],vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:s[9],quoteVolume:s[10],info:e}}parseTrade(e,t){let i=void 0;void 0!==t&&(i=t.symbol);let s=parseInt(e.ts),r=e.side.toLowerCase(),a=this.safeString(e,"id"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),d=o*n;return{id:a,info:e,timestamp:s,datetime:this.iso8601(s),symbol:i,type:void 0,order:a,side:r,price:o,amount:n,cost:d,fee:void 0}}async fetchTrades(e,t,i=50,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:r.id,limit:i};void 0!==t&&(a.timestamp=parseInt(t/1e3));let o=await this.marketGetTradesSymbol(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}async createOrder(e,t,i,s,r,a={}){if("market"===t&&"buy"===i&&this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new n(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");s*=r}await this.loadMarkets();let o=t,d={symbol:this.marketId(e),amount:this.amountToPrecision(e,s),side:i,type:o};"limit"===t&&(d.price=this.priceToPrecision(e,r));let c=await this.privatePostOrders(this.extend(d,a));return{info:c,id:c.data}}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostOrdersOrderIdSubmitCancel(this.extend({order_id:e},i)),r=this.parseOrder(s);return this.extend(r,{id:e,status:"canceled"})}parseOrderStatus(e){const t={submitted:"open",canceled:"canceled",partial_filled:"open",partial_canceled:"canceled",filled:"closed",pending_cancel:"canceled"};return e in t?t[e]:e}parseOrder(e,t){let i=this.safeString(e,"id"),s=this.safeString(e,"side"),r=this.parseOrderStatus(this.safeString(e,"state")),a=void 0;if(void 0===t){let i=this.safeString(e,"symbol");i in this.markets_by_id&&(t=this.markets_by_id[i])}let o=this.safeString(e,"type"),n=this.safeInteger(e,"created_at"),d=this.safeFloat(e,"amount"),c=this.safeFloat(e,"filled_amount"),h=void 0,l=this.safeFloat(e,"price"),u=this.safeFloat(e,"executed_value");void 0!==c&&(void 0!==d&&(h=d-c),void 0===u?void 0!==l&&(u=l*c):u>0&&c>0&&(l=u/c));let p=void 0;void 0!==t&&(a=t.symbol,p="buy"===s?t.base:t.quote);let m=this.safeFloat(e,"fill_fees");return{info:e,id:i,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:a,type:o,side:s,price:l,cost:u,amount:d,remaining:h,filled:c,average:void 0,status:r,fee:{cost:m,currency:p},trades:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=this.extend({order_id:e},i),r=await this.privateGetOrdersOrderId(s);return this.parseOrder(r.data)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,{states:"submitted,partial_filled"})}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,{states:"filled"})}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:r.id,states:"submitted,partial_filled,partial_canceled,filled,canceled"};void 0!==i&&(a.limit=i);let o=await this.privateGetOrders(this.extend(a,s));return this.parseOrders(o.data,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e.id,e.open,e.high,e.low,e.close,e.base_vol]}async fetchOHLCV(e,t="1m",i,s=100,a={}){if(await this.loadMarkets(),void 0===s)throw new r(this.id+" fetchOHLCV requires a limit argument");let o=this.market(e),n=this.extend({symbol:o.id,timeframe:this.timeframes[t],limit:s},a),d=await this.marketGetCandlesTimeframeSymbol(n);return this.parseOHLCVs(d.data,o,t,i,s)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/";o+="private"===t?"":t+"/",o+=this.implodeParams(e,s);let n=this.omit(s,this.extractParams(e)),d=this.implodeParams(this.urls.api,{hostname:this.hostname});if(d+=o,"public"===t||"market"===t)Object.keys(n).length&&(d+="?"+this.urlencode(n));else if("private"===t){this.checkRequiredCredentials();let e=this.nonce().toString();n=this.keysort(n),"GET"===i&&Object.keys(n).length&&(d+="?"+this.rawencode(n));let t=i+d+e;"POST"===i&&Object.keys(n).length&&(a=this.json(n),t+=this.urlencode(n));let s=this.stringToBase64(this.encode(t)),o=this.hmac(s,this.encode(this.secret),"sha1","binary");o=this.decode(this.stringToBase64(o)),r={"FC-ACCESS-KEY":this.apiKey,"FC-ACCESS-SIGNATURE":o,"FC-ACCESS-TIMESTAMP":e,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&!(o.length<2||"{"!==o[0]&&"["!==o[0])){let e=this.safeString(n,"status");if("0"!==e){const t=this.id+" "+o;if(e in this.exceptions){throw new this.exceptions[e](t)}throw new r(t)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"fybse",name:"FYB-SE",countries:["SE"],has:{CORS:!1},rateLimit:1500,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766512-31019772-5edb-11e7-8241-2e675e6797f1.jpg",api:"https://www.fybse.se/api/SEK",www:"https://www.fybse.se",doc:"https://fyb.docs.apiary.io"},api:{public:{get:["ticker","tickerdetailed","orderbook","trades"]},private:{post:["test","getaccinfo","getpendingorders","getorderhistory","cancelpendingorder","placeorder","withdraw"]}},markets:{"BTC/SEK":{id:"SEK",symbol:"BTC/SEK",base:"BTC",quote:"SEK"}}})}async fetchBalance(e={}){let t=await this.privatePostGetaccinfo(),i=parseFloat(t.btcBal),s=this.symbols[0],r=this.markets[s].quote,a=r.toLowerCase()+"Bal",o=parseFloat(t[a]),n={BTC:{free:i,used:0,total:i}};return n[r]={free:o,used:0,total:o},n.info=t,this.parseBalance(n)}async fetchOrderBook(e,t,i={}){let s=await this.publicGetOrderbook(i);return this.parseOrderBook(s)}async fetchTicker(e,t={}){let i=await this.publicGetTickerdetailed(t),s=this.milliseconds(),r=void 0,a=void 0;return"last"in i&&(r=this.safeFloat(i,"last")),"vol"in i&&(a=this.safeFloat(i,"vol")),{symbol:e,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:void 0,info:i}}parseTrade(e,t){let i=1e3*parseInt(e.date);return{info:e,id:e.tid.toString(),order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTrades(s);return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o=await this.privatePostPlaceorder(this.extend({qty:s,price:r,type:i[0].toUpperCase()},a));return{info:o,id:o.pending_oid}}async cancelOrder(e,t,i={}){return await this.privatePostCancelpendingorder({orderNo:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+e;if("public"===t)o+=".json";else{this.checkRequiredCredentials();let e=this.nonce();a=this.urlencode(this.extend({timestamp:e},s)),r={"Content-Type":"application/x-www-form-urlencoded",key:this.apiKey,sig:this.hmac(this.encode(a),this.encode(this.secret),"sha1")}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("private"===t&&"error"in n&&n.error)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:o,InsufficientFunds:n,OrderNotFound:d,InvalidOrder:c,AccountSuspended:h,InvalidNonce:l,DDoSProtection:u,NotSupported:p,BadRequest:m,AuthenticationError:f}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kucoin",name:"KuCoin",countries:["SC"],rateLimit:334,version:"v2",certified:!0,comment:"Platform 2.0",has:{fetchMarkets:!0,fetchCurrencies:!0,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrder:!0,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchDepositAddress:!0,createDepositAddress:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchBalance:!0,fetchTrades:!0,fetchMyTrades:!0,createOrder:!0,cancelOrder:!0,fetchAccounts:!0,fetchFundingFee:!0,fetchOHLCV:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/51909432-b0a72780-23dd-11e9-99ba-73d23c8d4eed.jpg",referral:"https://www.kucoin.com/ucenter/signup?rcode=E5wkqe",api:{public:"https://openapi-v2.kucoin.com",private:"https://openapi-v2.kucoin.com"},test:{public:"https://openapi-sandbox.kucoin.com",private:"https://openapi-sandbox.kucoin.com"},www:"https://www.kucoin.com",doc:["https://docs.kucoin.com"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["timestamp","symbols","market/allTickers","market/orderbook/level{level}","market/histories","market/candles","market/stats","currencies","currencies/{currency}"],post:["bullet-public"]},private:{get:["accounts","accounts/{accountId}","accounts/{accountId}/ledgers","accounts/{accountId}/holds","deposit-addresses","deposits","hist-deposits","hist-orders","hist-withdrawals","withdrawals","withdrawals/quotas","orders","orders/{orderId}","fills","limit/fills"],post:["accounts","accounts/inner-transfer","deposit-addresses","withdrawals","orders","bullet-private"],delete:["withdrawals/{withdrawalId}","orders/{orderId}"]}},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},exceptions:{400:m,401:f,403:p,404:p,405:p,429:u,500:r,503:o,200004:n,300000:c,400001:f,400002:l,400003:f,400004:f,400005:f,400006:f,400007:f,400008:p,400100:a,411100:h,500000:r,order_not_exist:d,order_not_exist_or_not_allow_to_cancel:c,"Order size below the minimum requirement.":c},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{HOT:"HOTNOW"},options:{version:"v1",symbolSeparator:"-"}})}nonce(){return this.milliseconds()}async loadTimeDifference(){const e=await this.publicGetTimestamp(),t=this.milliseconds(),i=this.safeInteger(e,"data");return this.options.timeDifference=parseInt(t-i),this.options.timeDifference}async fetchMarkets(e={}){const t=(await this.publicGetSymbols(e)).data,i=[];for(let e=0;e<t.length;e++){const s=t[e],r=s.name,a=s.baseCurrency,o=s.quoteCurrency,n=this.commonCurrencyCode(a),d=this.commonCurrencyCode(o),c=n+"/"+d,h=s.enableTrading,l=this.safeFloat(s,"baseMaxSize"),u=this.safeFloat(s,"baseMinSize"),p=this.safeFloat(s,"quoteMaxSize"),m=this.safeFloat(s,"quoteMinSize"),f={amount:this.precisionFromString(this.safeString(s,"baseIncrement")),price:this.precisionFromString(this.safeString(s,"priceIncrement"))},y={amount:{min:u,max:l},price:{min:this.safeFloat(s,"priceIncrement"),max:p/u},cost:{min:m,max:p}};i.push({id:r,symbol:c,baseId:a,quoteId:o,base:n,quote:d,active:h,precision:f,limits:y,info:s})}return i}async fetchCurrencies(e={}){const t=(await this.publicGetCurrencies(e)).data,i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"name"),a=s.fullName,o=this.commonCurrencyCode(r),n=this.safeInteger(s,"precision");i[o]={id:r,name:a,code:o,precision:n,info:s}}return i}async fetchAccounts(e={}){const t=await this.privateGetAccounts(e),i=this.safeValue(t,"data"),s=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"id"),a=this.safeString(t,"currency"),o=this.commonCurrencyCode(a),n=this.safeString(t,"type");s.push({id:r,type:n,currency:o,info:t})}return s}async fetchFundingFee(e,t={}){const i={currency:this.currencyId(e)},s=await this.privateGetWithdrawalsQuotas(this.extend(i,t)),r=s.data;let a={};return a[e]=this.safeFloat(r,"withdrawMinFee"),{info:s,withdraw:a,deposit:{}}}parseTicker(e,t){let i=this.safeFloat(e,"changeRate");void 0!==i&&(i*=100);const s=this.safeFloat(e,"last");let r=void 0;const a=this.safeString(e,"symbol");if(void 0!==a)if(a in this.markets_by_id)r=(t=this.markets_by_id[a]).symbol;else{const[e,t]=a.split("-");r=this.commonCurrencyCode(e)+"/"+this.commonCurrencyCode(t)}return void 0===r&&void 0!==t&&(r=t.symbol),{symbol:r,timestamp:void 0,datetime:void 0,high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:s,last:s,previousClose:void 0,change:this.safeFloat(e,"changePrice"),percentage:i,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"volValue"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketAllTickers(t),s=this.safeValue(i,"data",{}),r=this.safeValue(s,"ticker",[]),a={};for(let e=0;e<r.length;e++){const t=this.parseTicker(r[e]),i=this.safeString(t,"symbol");void 0!==i&&(a[i]=t)}return a}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),s={symbol:i.id},r=await this.publicGetMarketStats(this.extend(s,t));return this.parseTicker(r.data,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*parseInt(e[0]),parseFloat(e[1]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[2]),parseFloat(e[5])]}async fetchOHLCV(e,t="15m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={symbol:a.id,endAt:this.seconds(),type:this.timeframes[t]};void 0!==i&&(o.startAt=Math.floor(i/1e3));const n=(await this.publicGetMarketCandles(this.extend(o,r))).data;return this.parseOHLCVs(n,a,t,i,s)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currencyId(e)},s=await this.privatePostDepositAddresses(this.extend(i,t)),r=this.safeValue(s,"data",{});let a=this.safeString(r,"address");a=a.replace("bitcoincash:","");const o=this.safeString(r,"memo");return this.checkAddress(a),{info:s,currency:e,address:a,tag:o}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currencyId(e)},s=await this.privateGetDepositAddresses(this.extend(i,t)),r=this.safeValue(s,"data",{});let a=this.safeString(r,"address");void 0!==a&&(a=a.replace("bitcoincash:",""));const o=this.safeString(r,"memo");return this.checkAddress(a),{info:s,currency:e,address:a,tag:o}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s=this.marketId(e),r=this.extend({symbol:s,level:2},i),a=(await this.publicGetMarketOrderbookLevelLevel(r)).data,o=this.safeInteger(a,"sequence"),n=this.safeString(r,"level").split("_"),d=parseInt(n[0]);return this.parseOrderBook(a,o,"bids","asks",d-2,d-1)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.marketId(e),n=this.uuid(),d={clientOid:n,side:i,size:this.amountToPrecision(e,s),symbol:o,type:t};"market"!==t&&(d.price=this.priceToPrecision(e,r));const c=(await this.privatePostOrders(this.extend(d,a))).data;return{id:c.orderId,symbol:e,type:t,side:i,status:"open",clientOid:n,info:c}}async cancelOrder(e,t,i={}){const s={orderId:e};return this.privateDeleteOrdersOrderId(this.extend(s,i))}async fetchOrdersByStatus(e,t,i,s,r={}){await this.loadMarkets();const a={status:e};let o=void 0;void 0!==t&&(o=this.market(t),a.symbol=o.id),void 0!==i&&(a.startAt=i),void 0!==s&&(a.pageSize=s);const n=await this.privateGetOrders(this.extend(a,r)),d=this.safeValue(n,"data",{}),c=this.safeValue(d,"items",[]);return this.parseOrders(c,o,i,s)}async fetchClosedOrders(e,t,i,s={}){return this.fetchOrdersByStatus("done",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return this.fetchOrdersByStatus("active",e,t,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:e};let r=void 0;void 0!==t&&(r=this.market(t));const a=(await this.privateGetOrdersOrderId(this.extend(s,i))).data;return this.parseOrder(a,r)}parseOrder(e,t){let i=void 0;const s=this.safeString(e,"symbol");if(void 0!==s){if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol;else{const[e,t]=s.split("-");i=this.commonCurrencyCode(e)+"/"+this.commonCurrencyCode(t)}t=this.safeValue(this.markets_by_id,s)}void 0===i&&void 0!==t&&(i=t.symbol);const r=this.safeString(e,"id"),a=this.safeString(e,"type"),o=this.safeInteger(e,"createdAt"),n=this.iso8601(o),d=this.safeFloat(e,"price"),c=this.safeString(e,"side"),h=this.safeString(e,"feeCurrency"),l=this.commonCurrencyCode(h),u=this.safeFloat(e,"fee"),p=this.safeFloat(e,"size"),m=this.safeFloat(e,"dealSize");return{id:r,symbol:i,type:a,side:c,amount:p,price:d,cost:this.safeFloat(e,"dealFunds"),filled:m,remaining:p-m,timestamp:o,datetime:n,fee:{currency:l,cost:u},status:e.isActive?"open":"closed",info:e}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.symbol=a.id),void 0!==i&&(r.pageSize=i);let o="privateGetFills";void 0!==t&&(t<1550448e6?(r.startAt=parseInt(t/1e3),o="privateGetHistOrders"):r.startAt=t);const n=await this[o](this.extend(r,s)),d=this.safeValue(n,"data",{}),c=this.safeValue(d,"items",[]);return this.parseTrades(c,a,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id};void 0!==t&&(a.startAt=Math.floor(t/1e3)),void 0!==i&&(a.pageSize=i);const o=await this.publicGetMarketHistories(this.extend(a,s)),n=this.safeValue(o,"data",[]);return this.parseTrades(n,r,t,i)}parseTrade(e,t){let i=void 0;const s=this.safeString(e,"symbol");if(void 0!==s)if(s in this.markets_by_id)i=(t=this.markets_by_id[s]).symbol;else{const[e,t]=s.split("-");i=this.commonCurrencyCode(e)+"/"+this.commonCurrencyCode(t)}void 0===i&&void 0!==t&&(i=t.symbol);let r=this.safeString2(e,"tradeId","id");void 0!==r&&(r=r.toString());const a=this.safeString(e,"orderId"),o=this.safeString(e,"liquidity"),n=this.safeFloat2(e,"size","amount");let d=this.safeInteger(e,"time");void 0!==d?d=parseInt(d/1e6):(d=this.safeInteger(e,"createdAt"),void 0===o&&void 0!==d&&(d*=1e3));const c=this.safeFloat2(e,"price","dealPrice"),h=this.safeString(e,"side");let l=void 0;const u=this.safeFloat(e,"fee");if(void 0!==u){const i=this.safeString(e,"feeCurrency");let s=this.commonCurrencyCode(i);void 0===s&&void 0!==t&&(s="sell"===h?t.quote:t.base),l={cost:u,currency:s,rate:this.safeFloat(e,"feeRate")}}const p=this.safeString(e,"type");let m=this.safeFloat2(e,"funds","dealValue");return void 0===m&&void 0!==n&&void 0!==c&&(m=n*c),{info:e,id:r,order:a,timestamp:d,datetime:this.iso8601(d),symbol:i,type:p,takerOrMaker:o,side:h,price:c,amount:n,cost:m,fee:l}}async withdraw(e,t,i,s,r={}){await this.loadMarkets(),this.checkAddress(i);const a={currency:this.currencyId(e),address:i,amount:t};void 0!==s&&(a.memo=s);const o=(await this.privatePostWithdrawals(this.extend(a,r))).data;return{id:this.safeString(o,"withdrawalId"),info:o}}parseTransactionStatus(e){return this.safeString({SUCCESS:"ok",PROCESSING:"ok",FAILURE:"failed"},e)}parseTransaction(e,t){let i=void 0,s=this.safeString(e,"currency");i=void 0!==(t=this.safeValue(this.currencies_by_id,s))?t.code:this.commonCurrencyCode(s);let r=this.safeString(e,"address");const a=this.safeFloat(e,"amount");let o=this.safeString(e,"walletTxId");if(void 0!==o){const e=o.split("@");e.length>1&&void 0===r&&e[1].length>1&&(r=e[1]),o=e[0]}let n=void 0===o?"withdrawal":"deposit";const d=this.safeString(e,"status"),c=this.parseTransactionStatus(d);let h=void 0;const l=this.safeFloat(e,"fee");if(void 0!==l){let e=void 0;void 0!==a&&(e=l/a),h={cost:l,rate:e,currency:i}}const u=this.safeString(e,"memo");let p=this.safeInteger2(e,"createdAt","createAt");const m=this.safeString(e,"id");let f=this.safeInteger(e,"updatedAt");return!("createdAt"in e)&&(n="address"in e?"withdrawal":"deposit",void 0!==p&&(p*=1e3),void 0!==f&&(f*=1e3)),{id:m,address:r,tag:u,currency:i,amount:a,txid:o,type:n,status:c,fee:h,timestamp:p,datetime:this.iso8601(p),updated:f,info:e}}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.pageSize=i);let o="privateGetDeposits";void 0!==t&&(t<1550448e6?(r.startAt=parseInt(t/1e3),o="privateGetHistDeposits"):r.startAt=t);const n=(await this[o](this.extend(r,s))).data.items;return this.parseTransactions(n,a,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.pageSize=i);let o="privateGetWithdrawals";void 0!==t&&(t<1550448e6?(r.startAt=parseInt(t/1e3),o="privateGetHistWithdrawals"):r.startAt=t);const n=(await this[o](this.extend(r,s))).data.items;return this.parseTransactions(n,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=(await this.privateGetAccounts(this.extend({type:"trade"},e))).data,i={info:t};for(let e=0;e<t.length;e++){const s=t[e],r=s.currency,a=this.commonCurrencyCode(r);let o={};o.total=this.safeFloat(s,"balance",0),o.free=this.safeFloat(s,"available",0),o.used=this.safeFloat(s,"holds",0),i[a]=o}return this.parseBalance(i)}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.options.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e)),d="";r=void 0!==r?r:{},Object.keys(n).length&&("GET"!==i?(d=a=this.json(n),r["Content-Type"]="application/json"):o+="?"+this.urlencode(n));let c=this.urls.api[t]+o;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();r=this.extend({"KC-API-KEY":this.apiKey,"KC-API-TIMESTAMP":e,"KC-API-PASSPHRASE":this.password},r);const t=e+i+o+d,s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");r["KC-API-SIGN"]=this.decode(s)}return{url:c,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o){if(!o)return;const n=this.safeString(o,"code"),d=this.safeString(o,"msg"),c=this.safeValue2(this.exceptions,d,n);if(void 0!==c)throw new c(this.id+" "+d)}}},function(e,t,i){const s=i(53);e.exports={fetchTrades:async function({exchange:e,base:t,quote:i,since:r}){const a=`${t}/${i}`,o=new Date(r).getTime();return await new s[e].fetchTrades(a,o)},exchanges:async()=>s.exchanges,fetchMarketsForExchange:async function(e){const t=new s[e];return await t.loadMarkets()},fetchOhlcvs:async function({exchange:e,base:t,quote:i,timeframe:r,since:a,limit:o}){const n=`${t}/${i}`,d=new s[e];return await d.fetchOHLCV(n,r,a,o)},fetchTicker:async function({exchange:e,symbol:t}){const i=new s[e];return await i.fetchTicker(t)},fetchTickers:async function(e,t,i){const r=new s[e];return await r.fetchTickers(t,i)},fetchTickersAll:async function(e){const t=new s[e];return await t.fetchTickers()},fetchMarkets:async function(e){const t=new s[e];return await t.fetchMarkets()}}},function(e,t,i){"use strict";const s=i(1),r=i(29),a=i(0);s.ccxtVersion="1.18.420";const o={_1btcxe:i(41),acx:i(24),allcoin:i(116),anxpro:i(117),anybits:i(118),bcex:i(119),bequant:i(120),bibox:i(121),bigone:i(122),binance:i(45),binanceje:i(123),bit2c:i(124),bitbank:i(125),bitbay:i(126),bitfinex:i(25),bitfinex2:i(127),bitflyer:i(128),bitforex:i(129),bithumb:i(130),bitibu:i(131),bitkk:i(132),bitlish:i(133),bitmarket:i(134),bitmex:i(135),bitsane:i(42),bitso:i(136),bitstamp:i(137),bitstamp1:i(138),bittrex:i(46),bitz:i(139),bl3p:i(140),bleutrade:i(141),braziliex:i(142),btcalpha:i(143),btcbox:i(47),btcchina:i(144),btcexchange:i(145),btcmarkets:i(146),btctradeim:i(147),btctradeua:i(148),btcturk:i(48),buda:i(149),bxinth:i(150),ccex:i(151),cex:i(152),chbtc:i(153),chilebit:i(154),cobinhood:i(155),coinbase:i(156),coinbaseprime:i(157),coinbasepro:i(158),coincheck:i(159),coinegg:i(27),coinex:i(160),coinexchange:i(161),coinfalcon:i(162),coinfloor:i(163),coingi:i(164),coinmarketcap:i(165),coinmate:i(166),coinnest:i(167),coinone:i(168),coinspot:i(169),cointiger:i(170),coolcoin:i(171),coss:i(172),crex24:i(173),crypton:i(174),cryptopia:i(175),deribit:i(176),dsx:i(177),ethfinex:i(178),exmo:i(179),exx:i(180),fcoin:i(49),fcoinjp:i(181),flowbtc:i(182),foxbit:i(11),fybse:i(50),fybsg:i(183),gateio:i(184),gdax:i(28),gemini:i(185),getbtc:i(186),hadax:i(187),hitbtc:i(44),hitbtc2:i(43),huobipro:i(14),huobiru:i(188),ice3x:i(189),independentreserve:i(190),indodax:i(191),itbit:i(192),jubi:i(193),kkex:i(194),kraken:i(195),kucoin:i(51),kucoin2:i(196),kuna:i(197),lakebtc:i(198),lbank:i(199),liqui:i(15),liquid:i(200),livecoin:i(201),luno:i(202),lykke:i(203),mercado:i(204),mixcoins:i(205),negociecoins:i(206),nova:i(207),okcoincny:i(208),okcoinusd:i(13),okex:i(209),paymium:i(210),poloniex:i(211),quadrigacx:i(212),rightbtc:i(213),southxchange:i(214),stronghold:i(215),surbitcoin:i(216),theocean:i(217),therock:i(218),tidebit:i(219),tidex:i(220),uex:i(221),upbit:i(222),urdubit:i(223),vaultoro:i(224),vbtc:i(225),virwox:i(226),xbtce:i(227),yobit:i(228),zaif:i(229),zb:i(26)};e.exports=Object.assign({version:"1.18.420",Exchange:s,exchanges:Object.keys(o)},o,r,a)},function(e,t,i){"use strict";const s="undefined"!=typeof window,r="undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.electron,a="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,o="undefined"!=typeof process&&"win32"===process.platform,n=!(s||a);e.exports={isBrowser:s,isElectron:r,isWebWorker:a,isNode:n,isWindows:o}},function(e,t,i){"use strict";const{isObject:s,isNumber:r,isDictionary:a,isArray:o}=i(17),n=Object.keys,d=e=>o(e)?e:Object.values(e),c=e=>new Set(d(e)),h=(...e)=>Object.assign({},...e),l=e=>o(e)?Array.from(e):h(e);e.exports={keys:n,values:d,extend:h,clone:l,index:c,ordered:e=>e,unique:e=>Array.from(c(e)),inArray:(e,t)=>t.includes(e),toArray:e=>Object.values(e),isEmpty:e=>!e||(Array.isArray(e)?e:Object.keys(e)).length<1,keysort(e,t={}){for(const i of n(e).sort())t[i]=e[i];return t},indexBy(e,t,i={}){for(const s of d(e))t in s&&(i[s[t]]=s);return i},groupBy(e,t,i={}){for(const s of d(e))if(t in s){const e=s[t];i[e]=i[e]||[],i[e].push(s)}return i},filterBy(e,t,i,s=[]){for(const r of d(e))r[t]===i&&s.push(r);return s},sortBy:(e,t,i=!1,s=(i?-1:1))=>e.sort((e,i)=>e[t]<i[t]?-s:e[t]>i[t]?s:0),flatten:function e(t,i=[]){for(const s of t)o(s)?e(s,i):i.push(s);return i},pluck:(e,t)=>d(e).filter(e=>t in e).map(e=>e[t]),omit(e,...t){const i=l(e);for(const e of t)if(o(e))for(const t of e)delete i[t];else delete i[e];return i},sum(...e){const t=e.filter(r);return t.length>0?t.reduce((e,t)=>e+t,0):void 0},deepExtend:function e(...t){let i=void 0;for(const r of t)if(a(r)){s(i)||(i={});for(const t in r)i[t]=e(i[t],r[t])}else i=r;return i}}},function(e,t,i){var s;e.exports=(s=i(2),function(){if("function"==typeof ArrayBuffer){var e=s.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var i=e.byteLength,s=[],r=0;r<i;r++)s[r>>>2]|=e[r]<<24-r%4*8;t.call(this,s,i)}else t.apply(this,arguments)}).prototype=e}}(),s.lib.WordArray)},function(e,t,i){var s;e.exports=(s=i(2),function(){var e=s,t=e.lib.WordArray,i=e.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],r=0;r<i;r+=2){var a=t[r>>>2]>>>16-r%4*8&65535;s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var i=e.length,s=[],r=0;r<i;r++)s[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return t.create(s,2*i)}},i.Utf16LE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],a=0;a<i;a+=2){var o=r(t[a>>>2]>>>16-a%4*8&65535);s.push(String.fromCharCode(o))}return s.join("")},parse:function(e){for(var i=e.length,s=[],a=0;a<i;a++)s[a>>>1]|=r(e.charCodeAt(a)<<16-a%2*16);return t.create(s,2*i)}}}(),s.enc.Utf16)},function(e,t,i){var s,r,a,o,n,d;e.exports=(s=i(2),i(32),a=(r=s).lib.WordArray,o=r.algo,n=o.SHA256,d=o.SHA224=n.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}}),r.SHA224=n._createHelper(d),r.HmacSHA224=n._createHmacHelper(d),s.SHA224)},function(e,t,i){var s,r,a,o,n,d,c,h;e.exports=(s=i(2),i(12),i(33),a=(r=s).x64,o=a.Word,n=a.WordArray,d=r.algo,c=d.SHA512,h=d.SHA384=c.extend({_doReset:function(){this._hash=new n.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),r.SHA384=c._createHelper(h),r.HmacSHA384=c._createHmacHelper(h),s.SHA384)},function(e,t,i){var s;e.exports=(s=i(2),i(12),function(e){var t=s,i=t.lib,r=i.WordArray,a=i.Hasher,o=t.x64.Word,n=t.algo,d=[],c=[],h=[];!function(){for(var e=1,t=0,i=0;i<24;i++){d[e+5*t]=(i+1)*(i+2)/2%64;var s=(2*e+3*t)%5;e=t%5,t=s}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,a=0;a<24;a++){for(var n=0,l=0,u=0;u<7;u++){if(1&r){var p=(1<<u)-1;p<32?l^=1<<p:n^=1<<p-32}128&r?r=r<<1^113:r<<=1}h[a]=o.create(n,l)}}();var l=[];!function(){for(var e=0;e<25;e++)l[e]=o.create()}();var u=n.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,s=this.blockSize/2,r=0;r<s;r++){var a=e[t+2*r],o=e[t+2*r+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(B=i[r]).high^=o,B.low^=a}for(var n=0;n<24;n++){for(var u=0;u<5;u++){for(var p=0,m=0,f=0;f<5;f++)p^=(B=i[u+5*f]).high,m^=B.low;var y=l[u];y.high=p,y.low=m}for(u=0;u<5;u++){var b=l[(u+4)%5],w=l[(u+1)%5],v=w.high,g=w.low;for(p=b.high^(v<<1|g>>>31),m=b.low^(g<<1|v>>>31),f=0;f<5;f++)(B=i[u+5*f]).high^=p,B.low^=m}for(var k=1;k<25;k++){var T=(B=i[k]).high,C=B.low,_=d[k];_<32?(p=T<<_|C>>>32-_,m=C<<_|T>>>32-_):(p=C<<_-32|T>>>64-_,m=T<<_-32|C>>>64-_);var O=l[c[k]];O.high=p,O.low=m}var x=l[0],S=i[0];for(x.high=S.high,x.low=S.low,u=0;u<5;u++)for(f=0;f<5;f++){var B=i[k=u+5*f],I=l[k],M=l[(u+1)%5+5*f],F=l[(u+2)%5+5*f];B.high=I.high^~M.high&F.high,B.low=I.low^~M.low&F.low}B=i[0];var E=h[n];B.high^=E.high,B.low^=E.low}},_doFinalize:function(){var t=this._data,i=t.words,s=(this._nDataBytes,8*t.sigBytes),a=32*this.blockSize;i[s>>>5]|=1<<24-s%32,i[(e.ceil((s+1)/a)*a>>>5)-1]|=128,t.sigBytes=4*i.length,this._process();for(var o=this._state,n=this.cfg.outputLength/8,d=n/8,c=[],h=0;h<d;h++){var l=o[h],u=l.high,p=l.low;u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),c.push(p),c.push(u)}return new r.init(c,n)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}});t.SHA3=a._createHelper(u),t.HmacSHA3=a._createHmacHelper(u)}(Math),s.SHA3)},function(e,t,i){var s;e.exports=(s=i(2),
/** @preserve
	(c) 2012 by Cdric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
function(e){var t=s,i=t.lib,r=i.WordArray,a=i.Hasher,o=t.algo,n=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),d=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),l=r.create([0,1518500249,1859775393,2400959708,2840853838]),u=r.create([1352829926,1548603684,1836072691,2053994217,0]),p=o.RIPEMD160=a.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var s=t+i,r=e[s];e[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var a,o,p,g,k,T,C,_,O,x,S,B=this._hash.words,I=l.words,M=u.words,F=n.words,E=d.words,A=c.words,P=h.words;for(T=a=B[0],C=o=B[1],_=p=B[2],O=g=B[3],x=k=B[4],i=0;i<80;i+=1)S=a+e[t+F[i]]|0,S+=i<16?m(o,p,g)+I[0]:i<32?f(o,p,g)+I[1]:i<48?y(o,p,g)+I[2]:i<64?b(o,p,g)+I[3]:w(o,p,g)+I[4],S=(S=v(S|=0,A[i]))+k|0,a=k,k=g,g=v(p,10),p=o,o=S,S=T+e[t+E[i]]|0,S+=i<16?w(C,_,O)+M[0]:i<32?b(C,_,O)+M[1]:i<48?y(C,_,O)+M[2]:i<64?f(C,_,O)+M[3]:m(C,_,O)+M[4],S=(S=v(S|=0,P[i]))+x|0,T=x,x=O,O=v(_,10),_=C,C=S;S=B[1]+p+O|0,B[1]=B[2]+g+x|0,B[2]=B[3]+k+T|0,B[3]=B[4]+a+C|0,B[4]=B[0]+o+_|0,B[0]=S},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;t[s>>>5]|=128<<24-s%32,t[14+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,a=r.words,o=0;o<5;o++){var n=a[o];a[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}return r},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function m(e,t,i){return e^t^i}function f(e,t,i){return e&t|~e&i}function y(e,t,i){return(e|~t)^i}function b(e,t,i){return e&i|t&~i}function w(e,t,i){return e^(t|~i)}function v(e,t){return e<<t|e>>>32-t}t.RIPEMD160=a._createHelper(p),t.HmacRIPEMD160=a._createHmacHelper(p)}(Math),s.RIPEMD160)},function(e,t,i){var s,r,a,o,n,d,c,h,l;e.exports=(s=i(2),i(18),i(19),a=(r=s).lib,o=a.Base,n=a.WordArray,d=r.algo,c=d.SHA1,h=d.HMAC,l=d.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=h.create(i.hasher,e),r=n.create(),a=n.create([1]),o=r.words,d=a.words,c=i.keySize,l=i.iterations;o.length<c;){var u=s.update(t).finalize(a);s.reset();for(var p=u.words,m=p.length,f=u,y=1;y<l;y++){f=s.finalize(f),s.reset();for(var b=f.words,w=0;w<m;w++)p[w]^=b[w]}r.concat(u),d[0]++}return r.sigBytes=4*c,r}}),r.PBKDF2=function(e,t,i){return l.create(i).compute(e,t)},s.PBKDF2)},function(e,t,i){var s;e.exports=(s=i(2),i(3),s.mode.CFB=function(){var e=s.lib.BlockCipherMode.extend();function t(e,t,i,s){var r=this._iv;if(r){var a=r.slice(0);this._iv=void 0}else a=this._prevBlock;s.encryptBlock(a,0);for(var o=0;o<i;o++)e[t+o]^=a[o]}return e.Encryptor=e.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize;t.call(this,e,i,r,s),this._prevBlock=e.slice(i,i+r)}}),e.Decryptor=e.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize,a=e.slice(i,i+r);t.call(this,e,i,r,s),this._prevBlock=a}}),e}(),s.mode.CFB)},function(e,t,i){var s,r,a;e.exports=(s=i(2),i(3),s.mode.CTR=(r=s.lib.BlockCipherMode.extend(),a=r.Encryptor=r.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0);var o=a.slice(0);i.encryptBlock(o,0),a[s-1]=a[s-1]+1|0;for(var n=0;n<s;n++)e[t+n]^=o[n]}}),r.Decryptor=a,r),s.mode.CTR)},function(e,t,i){var s;e.exports=(s=i(2),i(3),
/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
s.mode.CTRGladman=function(){var e=s.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,i=e>>8&255,s=255&e;255===t?(t=0,255===i?(i=0,255===s?s=0:++s):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=s}else e+=1<<24;return e}var i=e.Encryptor=e.extend({processBlock:function(e,i){var s=this._cipher,r=s.blockSize,a=this._iv,o=this._counter;a&&(o=this._counter=a.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(o);var n=o.slice(0);s.encryptBlock(n,0);for(var d=0;d<r;d++)e[i+d]^=n[d]}});return e.Decryptor=i,e}(),s.mode.CTRGladman)},function(e,t,i){var s,r,a;e.exports=(s=i(2),i(3),s.mode.OFB=(r=s.lib.BlockCipherMode.extend(),a=r.Encryptor=r.extend({processBlock:function(e,t){var i=this._cipher,s=i.blockSize,r=this._iv,a=this._keystream;r&&(a=this._keystream=r.slice(0),this._iv=void 0),i.encryptBlock(a,0);for(var o=0;o<s;o++)e[t+o]^=a[o]}}),r.Decryptor=a,r),s.mode.OFB)},function(e,t,i){var s,r;e.exports=(s=i(2),i(3),s.mode.ECB=((r=s.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),r.Decryptor=r.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),r),s.mode.ECB)},function(e,t,i){var s;e.exports=(s=i(2),i(3),s.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,s=4*t,r=s-i%s,a=i+r-1;e.clamp(),e.words[a>>>2]|=r<<24-a%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},s.pad.Ansix923)},function(e,t,i){var s;e.exports=(s=i(2),i(3),s.pad.Iso10126={pad:function(e,t){var i=4*t,r=i-e.sigBytes%i;e.concat(s.lib.WordArray.random(r-1)).concat(s.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},s.pad.Iso10126)},function(e,t,i){var s;e.exports=(s=i(2),i(3),s.pad.Iso97971={pad:function(e,t){e.concat(s.lib.WordArray.create([2147483648],1)),s.pad.ZeroPadding.pad(e,t)},unpad:function(e){s.pad.ZeroPadding.unpad(e),e.sigBytes--}},s.pad.Iso97971)},function(e,t,i){var s;e.exports=(s=i(2),i(3),s.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},s.pad.ZeroPadding)},function(e,t,i){var s;e.exports=(s=i(2),i(3),s.pad.NoPadding={pad:function(){},unpad:function(){}},s.pad.NoPadding)},function(e,t,i){var s,r,a,o;e.exports=(s=i(2),i(3),a=(r=s).lib.CipherParams,o=r.enc.Hex,r.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return a.create({ciphertext:t})}},s.format.Hex)},function(e,t,i){var s;e.exports=(s=i(2),i(6),i(7),i(5),i(3),function(){var e=s,t=e.lib.BlockCipher,i=e.algo,r=[],a=[],o=[],n=[],d=[],c=[],h=[],l=[],u=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,s=0;for(t=0;t<256;t++){var m=s^s<<1^s<<2^s<<3^s<<4;m=m>>>8^255&m^99,r[i]=m,a[m]=i;var f=e[i],y=e[f],b=e[y],w=257*e[m]^16843008*m;o[i]=w<<24|w>>>8,n[i]=w<<16|w>>>16,d[i]=w<<8|w>>>24,c[i]=w,w=16843009*b^65537*y^257*f^16843008*i,h[m]=w<<24|w>>>8,l[m]=w<<16|w>>>16,u[m]=w<<8|w>>>24,p[m]=w,i?(i=f^e[e[e[b^f]]],s^=e[e[s]]):i=s=1}}();var m=[0,1,2,4,8,16,32,64,128,27,54],f=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,s=4*((this._nRounds=i+6)+1),a=this._keySchedule=[],o=0;o<s;o++)if(o<i)a[o]=t[o];else{var n=a[o-1];o%i?i>6&&o%i==4&&(n=r[n>>>24]<<24|r[n>>>16&255]<<16|r[n>>>8&255]<<8|r[255&n]):(n=r[(n=n<<8|n>>>24)>>>24]<<24|r[n>>>16&255]<<16|r[n>>>8&255]<<8|r[255&n],n^=m[o/i|0]<<24),a[o]=a[o-i]^n}for(var d=this._invKeySchedule=[],c=0;c<s;c++)o=s-c,n=c%4?a[o]:a[o-4],d[c]=c<4||o<=4?n:h[r[n>>>24]]^l[r[n>>>16&255]]^u[r[n>>>8&255]]^p[r[255&n]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,n,d,c,r)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,h,l,u,p,a),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,s,r,a,o,n){for(var d=this._nRounds,c=e[t]^i[0],h=e[t+1]^i[1],l=e[t+2]^i[2],u=e[t+3]^i[3],p=4,m=1;m<d;m++){var f=s[c>>>24]^r[h>>>16&255]^a[l>>>8&255]^o[255&u]^i[p++],y=s[h>>>24]^r[l>>>16&255]^a[u>>>8&255]^o[255&c]^i[p++],b=s[l>>>24]^r[u>>>16&255]^a[c>>>8&255]^o[255&h]^i[p++],w=s[u>>>24]^r[c>>>16&255]^a[h>>>8&255]^o[255&l]^i[p++];c=f,h=y,l=b,u=w}f=(n[c>>>24]<<24|n[h>>>16&255]<<16|n[l>>>8&255]<<8|n[255&u])^i[p++],y=(n[h>>>24]<<24|n[l>>>16&255]<<16|n[u>>>8&255]<<8|n[255&c])^i[p++],b=(n[l>>>24]<<24|n[u>>>16&255]<<16|n[c>>>8&255]<<8|n[255&h])^i[p++],w=(n[u>>>24]<<24|n[c>>>16&255]<<16|n[h>>>8&255]<<8|n[255&l])^i[p++],e[t]=f,e[t+1]=y,e[t+2]=b,e[t+3]=w},keySize:8});e.AES=t._createHelper(f)}(),s.AES)},function(e,t,i){var s;e.exports=(s=i(2),i(6),i(7),i(5),i(3),function(){var e=s,t=e.lib,i=t.WordArray,r=t.BlockCipher,a=e.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],n=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],l=a.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var s=o[i]-1;t[i]=e[s>>>5]>>>31-s%32&1}for(var r=this._subKeys=[],a=0;a<16;a++){var c=r[a]=[],h=d[a];for(i=0;i<24;i++)c[i/6|0]|=t[(n[i]-1+h)%28]<<31-i%6,c[4+(i/6|0)]|=t[28+(n[i+24]-1+h)%28]<<31-i%6;for(c[0]=c[0]<<1|c[0]>>>31,i=1;i<7;i++)c[i]=c[i]>>>4*(i-1)+3;c[7]=c[7]<<5|c[7]>>>27}var l=this._invSubKeys=[];for(i=0;i<16;i++)l[i]=r[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],u.call(this,4,252645135),u.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),u.call(this,1,1431655765);for(var s=0;s<16;s++){for(var r=i[s],a=this._lBlock,o=this._rBlock,n=0,d=0;d<8;d++)n|=c[d][((o^r[d])&h[d])>>>0];this._lBlock=o,this._rBlock=a^n}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,u.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),u.call(this,16,65535),u.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function u(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function p(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}e.DES=r._createHelper(l);var m=a.TripleDES=r.extend({_doReset:function(){var e=this._key.words;this._des1=l.createEncryptor(i.create(e.slice(0,2))),this._des2=l.createEncryptor(i.create(e.slice(2,4))),this._des3=l.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=r._createHelper(m)}(),s.TripleDES)},function(e,t,i){var s;e.exports=(s=i(2),i(6),i(7),i(5),i(3),function(){var e=s,t=e.lib.StreamCipher,i=e.algo,r=i.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,s=this._S=[],r=0;r<256;r++)s[r]=r;r=0;for(var a=0;r<256;r++){var o=r%i,n=t[o>>>2]>>>24-o%4*8&255;a=(a+s[r]+n)%256;var d=s[r];s[r]=s[a],s[a]=d}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=a.call(this)},keySize:8,ivSize:0});function a(){for(var e=this._S,t=this._i,i=this._j,s=0,r=0;r<4;r++){i=(i+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[i],e[i]=a,s|=e[(e[t]+e[i])%256]<<24-8*r}return this._i=t,this._j=i,s}e.RC4=t._createHelper(r);var o=i.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)a.call(this)}});e.RC4Drop=t._createHelper(o)}(),s.RC4)},function(e,t,i){var s;e.exports=(s=i(2),i(6),i(7),i(5),i(3),function(){var e=s,t=e.lib.StreamCipher,i=e.algo,r=[],a=[],o=[],n=i.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=0;i<4;i++)e[i]=16711935&(e[i]<<8|e[i]>>>24)|4278255360&(e[i]<<24|e[i]>>>8);var s=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,i=0;i<4;i++)d.call(this);for(i=0;i<8;i++)r[i]^=s[i+4&7];if(t){var a=t.words,o=a[0],n=a[1],c=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),h=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),l=c>>>16|4294901760&h,u=h<<16|65535&c;for(r[0]^=c,r[1]^=l,r[2]^=h,r[3]^=u,r[4]^=c,r[5]^=l,r[6]^=h,r[7]^=u,i=0;i<4;i++)d.call(this)}},_doProcessBlock:function(e,t){var i=this._X;d.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var s=0;s<4;s++)r[s]=16711935&(r[s]<<8|r[s]>>>24)|4278255360&(r[s]<<24|r[s]>>>8),e[t+s]^=r[s]},blockSize:4,ivSize:2});function d(){for(var e=this._X,t=this._C,i=0;i<8;i++)a[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,i=0;i<8;i++){var s=e[i]+t[i],r=65535&s,n=s>>>16,d=((r*r>>>17)+r*n>>>15)+n*n,c=((4294901760&s)*s|0)+((65535&s)*s|0);o[i]=d^c}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=t._createHelper(n)}(),s.Rabbit)},function(e,t,i){var s;e.exports=(s=i(2),i(6),i(7),i(5),i(3),function(){var e=s,t=e.lib.StreamCipher,i=e.algo,r=[],a=[],o=[],n=i.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],s=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)d.call(this);for(r=0;r<8;r++)s[r]^=i[r+4&7];if(t){var a=t.words,o=a[0],n=a[1],c=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),h=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),l=c>>>16|4294901760&h,u=h<<16|65535&c;for(s[0]^=c,s[1]^=l,s[2]^=h,s[3]^=u,s[4]^=c,s[5]^=l,s[6]^=h,s[7]^=u,r=0;r<4;r++)d.call(this)}},_doProcessBlock:function(e,t){var i=this._X;d.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var s=0;s<4;s++)r[s]=16711935&(r[s]<<8|r[s]>>>24)|4278255360&(r[s]<<24|r[s]>>>8),e[t+s]^=r[s]},blockSize:4,ivSize:2});function d(){for(var e=this._X,t=this._C,i=0;i<8;i++)a[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,i=0;i<8;i++){var s=e[i]+t[i],r=65535&s,n=s>>>16,d=((r*r>>>17)+r*n>>>15)+n*n,c=((4294901760&s)*s|0)+((65535&s)*s|0);o[i]=d^c}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=t._createHelper(n)}(),s.RabbitLegacy)},function(e,t,i){"use strict";var s=i(80),r=i(81),a=i(35);e.exports={formats:a,parse:r,stringify:s}},function(e,t,i){"use strict";var s=i(34),r=i(35),a=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},n=Array.isArray,d=Array.prototype.push,c=function(e,t){d.apply(e,n(t)?t:[t])},h=Date.prototype.toISOString,l={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:s.encode,encodeValuesOnly:!1,formatter:r.formatters[r.default],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1},u=function e(t,i,r,a,o,d,h,u,p,m,f,y,b){var w=t;if("function"==typeof h?w=h(i,w):w instanceof Date?w=m(w):"comma"===r&&n(w)&&(w=w.join(",")),null===w){if(a)return d&&!y?d(i,l.encoder,b):i;w=""}if("string"==typeof w||"number"==typeof w||"boolean"==typeof w||s.isBuffer(w))return d?[f(y?i:d(i,l.encoder,b))+"="+f(d(w,l.encoder,b))]:[f(i)+"="+f(String(w))];var v,g=[];if(void 0===w)return g;if(n(h))v=h;else{var k=Object.keys(w);v=u?k.sort(u):k}for(var T=0;T<v.length;++T){var C=v[T];o&&null===w[C]||(n(w)?c(g,e(w[C],"function"==typeof r?r(i,C):i,r,a,o,d,h,u,p,m,f,y,b)):c(g,e(w[C],i+(p?"."+C:"["+C+"]"),r,a,o,d,h,u,p,m,f,y,b)))}return g};e.exports=function(e,t){var i,s=e,d=function(e){if(!e)return l;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||l.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=r.default;if(void 0!==e.format){if(!a.call(r.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var s=r.formatters[i],o=l.filter;return("function"==typeof e.filter||n(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:l.addQueryPrefix,allowDots:void 0===e.allowDots?l.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:l.charsetSentinel,delimiter:void 0===e.delimiter?l.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:l.encode,encoder:"function"==typeof e.encoder?e.encoder:l.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:l.encodeValuesOnly,filter:o,formatter:s,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:l.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:l.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:l.strictNullHandling}}(t);"function"==typeof d.filter?s=(0,d.filter)("",s):n(d.filter)&&(i=d.filter);var h,p=[];if("object"!=typeof s||null===s)return"";h=t&&t.arrayFormat in o?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var m=o[h];i||(i=Object.keys(s)),d.sort&&i.sort(d.sort);for(var f=0;f<i.length;++f){var y=i[f];d.skipNulls&&null===s[y]||c(p,u(s[y],y,m,d.strictNullHandling,d.skipNulls,d.encode?d.encoder:null,d.filter,d.sort,d.allowDots,d.serializeDate,d.formatter,d.encodeValuesOnly,d.charset))}var b=p.join(d.delimiter),w=!0===d.addQueryPrefix?"?":"";return d.charsetSentinel&&("iso-8859-1"===d.charset?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),b.length>0?w+b:""}},function(e,t,i){"use strict";var s=i(34),r=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:s.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},n=function(e,t,i){if(e){var s=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(s),n=o?s.slice(0,o.index):s,d=[];if(n){if(!i.plainObjects&&r.call(Object.prototype,n)&&!i.allowPrototypes)return;d.push(n)}for(var c=0;null!==(o=a.exec(s))&&c<i.depth;){if(c+=1,!i.plainObjects&&r.call(Object.prototype,o[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(o[1])}return o&&d.push("["+s.slice(o.index)+"]"),function(e,t,i){for(var s=t,r=e.length-1;r>=0;--r){var a,o=e[r];if("[]"===o&&i.parseArrays)a=[].concat(s);else{a=i.plainObjects?Object.create(null):{};var n="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,d=parseInt(n,10);i.parseArrays||""!==n?!isNaN(d)&&o!==n&&String(d)===n&&d>=0&&i.parseArrays&&d<=i.arrayLimit?(a=[])[d]=s:a[n]=s:a={0:s}}s=a}return s}(d,t,i)}};e.exports=function(e,t){var i=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||s.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth?e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return i.plainObjects?Object.create(null):{};for(var d="string"==typeof e?function(e,t){var i,n={},d=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,h=d.split(t.delimiter,c),l=-1,u=t.charset;if(t.charsetSentinel)for(i=0;i<h.length;++i)0===h[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[i]?u="utf-8":"utf8=%26%2310003%3B"===h[i]&&(u="iso-8859-1"),l=i,i=h.length);for(i=0;i<h.length;++i)if(i!==l){var p,m,f=h[i],y=f.indexOf("]="),b=-1===y?f.indexOf("="):y+1;-1===b?(p=t.decoder(f,a.decoder,u),m=t.strictNullHandling?null:""):(p=t.decoder(f.slice(0,b),a.decoder,u),m=t.decoder(f.slice(b+1),a.decoder,u)),m&&t.interpretNumericEntities&&"iso-8859-1"===u&&(m=o(m)),m&&t.comma&&m.indexOf(",")>-1&&(m=m.split(",")),r.call(n,p)?n[p]=s.combine(n[p],m):n[p]=m}return n}(e,i):e,c=i.plainObjects?Object.create(null):{},h=Object.keys(d),l=0;l<h.length;++l){var u=h[l],p=n(u,d[u],i);c=s.merge(c,p,i)}return s.compact(c)}},function(e,t,i){"use strict";const s=i(31),{capitalize:r}=i(16),{stringToBase64:a,utf16ToBase64:o,urlencodeBase64:n}=i(30),d=(e,t,i="sha256",a="hex")=>{const o=s["Hmac"+i.toUpperCase()](e,t);if(a){const e="binary"===a?"Latin1":r(a);return o.toString(s.enc[r(e)])}return o};e.exports={hash:(e,t="md5",i="hex")=>{const a=s[t.toUpperCase()](e);return"binary"===i?a:a.toString(s.enc[r(i)])},hmac:d,jwt:function(e,t,i="HS256",s="sha256"){const r=[n(a(JSON.stringify({alg:i,typ:"JWT"}))),n(a(JSON.stringify(e)))].join(".");return[r,n(o(d(r,t,s,"utf16")))].join(".")},totp:e=>{const t=e=>parseInt(e,16),i=(e,t)=>(t+e).slice(-t.length);return(e=>{e=e.replace(" ","");let r=Math.round((new Date).getTime()/1e3),a=i((e=>(e<15.5?"0":"")+Math.round(e).toString(16))(Math.floor(r/30)),"0000000000000000"),o=d(s.enc.Hex.parse(a),s.enc.Hex.parse((e=>{let t="",s="";for(let s=0;s<e.length;s++){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(e.charAt(s).toUpperCase());t+=i(r.toString(2),"00000")}for(let e=0;e+4<=t.length;e+=4){let i=t.substr(e,4);s+=parseInt(i,2).toString(16)}return s})(e)),"sha1","hex"),n=t(o.substring(o.length-1)),c=(t(o.substr(2*n,8))&t("7fffffff"))+"";return c=c.substr(c.length-6,6)})(e)}}},function(e,t,i){"use strict";const{sleep:s,now:r}=i(36);e.exports={throttle:function e(t){let i=r(),a=void 0!==t.numTokens?t.numTokens:t.capacity,o=!1;const n=[];return Object.assign(e=>{if(n.length>t.maxCapacity)throw new Error("Backlog is over max capacity of "+t.maxCapacity);return new Promise(async(d,c)=>{try{if(n.push({cost:e,resolve:d,reject:c}),!o){for(o=!0;n.length>0;){if((t.capacity?a>0:a>=0)&&n.length>0){let{cost:e,resolve:i,reject:s}=n[0];e=e||t.defaultCost,a>=Math.min(e,t.capacity)&&(a-=e,n.shift(),i())}const e=r(),o=e-i;i=e,a=Math.min(t.capacity,a+o*t.refillRate),await s(t.delay)}o=!1}}catch(e){c(e)}})},t,{configure:i=>e(Object.assign({},t,i))})}}},function(e,t,i){"use strict";const s=e=>{let t=e.slice(0,-1),i=e.slice(-1),s=60;return"y"===i?s=31536e3:"M"===i?s=2592e3:"w"===i?s=604800:"d"===i?s=86400:"h"===i&&(s=3600),t*s};e.exports={aggregate(e){let t={};for(const[i,s]of e)s>0&&(t[i]=(t[i]||0)+s);return Object.keys(t).map(e=>[parseFloat(e),parseFloat(t[e])])},parseTimeframe:s,buildOHLCVC:(e,t="1m",i=-1/0,r=1/0)=>{let a=1e3*s(t),o=[];const[n,,d,c,h,l,u]=[0,1,2,3,4,5,6];let p=Math.min(e.length-1,r);for(let t=0;t<=p;t++){let s=e[t];if(s.timestamp<i)continue;let r=Math.floor(s.timestamp/a)*a,p=o.length-1;-1===p||r>=o[p][n]+a?o.push([r,s.price,s.price,s.price,s.price,s.amount,1]):(o[p][d]=Math.max(o[p][d],s.price),o[p][c]=Math.min(o[p][c],s.price),o[p][h]=s.price,o[p][l]+=s.amount,o[p][u]++)}return o}}},function(e,t,i){"use strict";e.exports=class{constructor(e,t){this.exchange=e,this.symbol=t,this.market=e.markets[t]}amountToPrecision(e){return this.exchange.amountToPrecision(this.symbol,e)}createLimitBuyOrder(e,t){return this.exchange.createLimitBuyOrder(this.symbol,e,t)}createLimitSellOrder(e,t){return this.exchange.createLimitSellOrder(this.symbol,e,t)}}},function(e,t,i){"use strict";var s=i(87);function r(e){return function(t,i){if(t instanceof e.Request)return e(t,i);var s="//"===t.slice(0,2)?"https:"+t:t;return e(s,i)}}e.exports=function(e){return e&&e.Promise&&(s.Promise=e.Promise),{fetch:r(s),Headers:s.Headers,Request:s.Request,Response:s.Response}}},function(e,t,i){i(20).parse;var s=i(20).resolve,r=i(37),a=i(88),o=i(89),n=i(9),d=i(21),c=i(114),h=i(23),l=i(115),u=i(40);function p(e,t){if(!(this instanceof p))return new p(e,t);if(!p.Promise)throw new Error("native promise missing, set Fetch.Promise to your favorite alternative");d.Promise=p.Promise;var i=this;return new p.Promise(function(d,m){var f,y=new l(e,t);if(!y.protocol||!y.hostname)throw new Error("only absolute urls are supported");if("http:"!==y.protocol&&"https:"!==y.protocol)throw new Error("only http(s) protocols are supported");f="https:"===y.protocol?a.request:r.request;var b=new h(y.headers);y.compress&&b.set("accept-encoding","gzip,deflate"),b.has("user-agent")||b.set("user-agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),b.has("connection")||y.agent||b.set("connection","close"),b.has("accept")||b.set("accept","*/*"),!b.has("content-type")&&y.body&&"function"==typeof y.body.getBoundary&&b.set("content-type","multipart/form-data; boundary="+y.body.getBoundary()),!b.has("content-length")&&/post|put|patch|delete/i.test(y.method)&&("string"==typeof y.body?b.set("content-length",Buffer.byteLength(y.body)):y.body&&"function"==typeof y.body.getLengthSync?y.body._lengthRetrievers&&0==y.body._lengthRetrievers.length?b.set("content-length",y.body.getLengthSync().toString()):y.body.hasKnownLength&&y.body.hasKnownLength()&&b.set("content-length",y.body.getLengthSync().toString()):void 0!==y.body&&null!==y.body||b.set("content-length","0")),y.headers=b.raw(),y.headers.host&&(y.headers.host=y.headers.host[0]);var w,v=f(y);y.timeout&&v.once("socket",function(e){w=setTimeout(function(){v.abort(),m(new u("network timeout at: "+y.url,"request-timeout"))},y.timeout)}),v.on("error",function(e){clearTimeout(w),m(new u("request to "+y.url+" failed, reason: "+e.message,"system",e))}),v.on("response",function(e){if(clearTimeout(w),i.isRedirect(e.statusCode)&&"manual"!==y.redirect)return"error"===y.redirect?void m(new u("redirect mode is set to error: "+y.url,"no-redirect")):y.counter>=y.follow?void m(new u("maximum redirect reached at: "+y.url,"max-redirect")):e.headers.location?(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==y.method)||(y.method="GET",delete y.body,delete y.headers["content-length"]),y.counter++,void d(p(s(y.url,e.headers.location),y))):void m(new u("redirect location header missing at: "+y.url,"invalid-redirect"));var t=new h(e.headers);"manual"===y.redirect&&t.has("location")&&t.set("location",s(y.url,t.get("location")));var r,a=e.pipe(new n.PassThrough),l={url:y.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:y.size,timeout:y.timeout};if(!y.compress||"HEAD"===y.method||!t.has("content-encoding")||204===e.statusCode||304===e.statusCode)return r=new c(a,l),void d(r);var f=t.get("content-encoding");if("gzip"==f||"x-gzip"==f)return a=a.pipe(o.createGunzip()),r=new c(a,l),void d(r);"deflate"!=f&&"x-deflate"!=f?(r=new c(a,l),d(r)):e.pipe(new n.PassThrough).once("data",function(e){a=8==(15&e[0])?a.pipe(o.createInflate()):a.pipe(o.createInflateRaw()),r=new c(a,l),d(r)})}),"string"==typeof y.body?(v.write(y.body),v.end()):y.body instanceof Buffer?(v.write(y.body),v.end()):"object"==typeof y.body&&y.body.pipe?y.body.pipe(v):"object"==typeof y.body?(v.write(y.body.toString()),v.end()):v.end()})}e.exports=p,e.exports.default=e.exports,p.prototype.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},p.Promise=global.Promise,p.Response=c,p.Headers=h,p.Request=l},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("zlib")},function(e,t,i){"use strict";var s=i(91),r=i(110);function a(e,t,i){return"UTF-8"===t?s.decode(e,i):"UTF-8"===i?s.encode(e,t):s.encode(s.decode(e,i),t)}function o(e){return(e||"").toString().trim().replace(/^latin[\-_]?(\d+)$/i,"ISO-8859-$1").replace(/^win(?:dows)?[\-_]?(\d+)$/i,"WINDOWS-$1").replace(/^utf[\-_]?(\d+)$/i,"UTF-$1").replace(/^ks_c_5601\-1987$/i,"CP949").replace(/^us[\-_]?ascii$/i,"ASCII").toUpperCase()}e.exports.convert=function(e,t,i,s){var n;i=o(i||"UTF-8"),t=o(t||"UTF-8"),e=e||"","UTF-8"!==i&&"string"==typeof e&&(e=new Buffer(e,"binary"));if(i===t)n="string"==typeof e?new Buffer(e):e;else if(r&&!s)try{n=function(e,t,i){var s,a;return a=new r(i,t+"//TRANSLIT//IGNORE"),(s=a.convert(e)).slice(0,s.length)}(e,t,i)}catch(s){console.error(s);try{n=a(e,t,i)}catch(t){console.error(t),n=e}}else try{n=a(e,t,i)}catch(t){console.error(t),n=e}"string"==typeof n&&(n=new Buffer(n,"utf-8"));return n}},function(e,t,i){"use strict";var s=i(8).Buffer,r=i(92),a=e.exports;a.encodings=null,a.defaultCharUnicode="",a.defaultCharSingleByte="?",a.encode=function(e,t,i){e=""+(e||"");var r=a.getEncoder(t,i),o=r.write(e),n=r.end();return n&&n.length>0?s.concat([o,n]):o},a.decode=function(e,t,i){"string"==typeof e&&(a.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),a.skipDecodeWarning=!0),e=s.from(""+(e||""),"binary"));var r=a.getDecoder(t,i),o=r.write(e),n=r.end();return n?o+n:o},a.encodingExists=function(e){try{return a.getCodec(e),!0}catch(e){return!1}},a.toEncoding=a.encode,a.fromEncoding=a.decode,a._codecDataCache={},a.getCodec=function(e){a.encodings||(a.encodings=i(93));for(var t=a._canonicalizeEncoding(e),s={};;){var r=a._codecDataCache[t];if(r)return r;var o=a.encodings[t];switch(typeof o){case"string":t=o;break;case"object":for(var n in o)s[n]=o[n];s.encodingName||(s.encodingName=t),t=o.type;break;case"function":return s.encodingName||(s.encodingName=t),r=new o(s,a),a._codecDataCache[s.encodingName]=r,r;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+t+"')")}}},a._canonicalizeEncoding=function(e){return(""+e).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},a.getEncoder=function(e,t){var i=a.getCodec(e),s=new i.encoder(t,i);return i.bomAware&&t&&t.addBOM&&(s=new r.PrependBOM(s,t)),s},a.getDecoder=function(e,t){var i=a.getCodec(e),s=new i.decoder(t,i);return!i.bomAware||t&&!1===t.stripBOM||(s=new r.StripBOM(s,t)),s};var o="undefined"!=typeof process&&process.versions&&process.versions.node;if(o){var n=o.split(".").map(Number);(n[0]>0||n[1]>=10)&&i(108)(a),i(109)(a)}},function(e,t,i){"use strict";function s(e,t){this.encoder=e,this.addBOM=!0}function r(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}t.PrependBOM=s,s.prototype.write=function(e){return this.addBOM&&(e="\ufeff"+e,this.addBOM=!1),this.encoder.write(e)},s.prototype.end=function(){return this.encoder.end()},t.StripBOM=r,r.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t?t:("\ufeff"===t[0]&&(t=t.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0,t)},r.prototype.end=function(){return this.decoder.end()}},function(e,t,i){"use strict";for(var s=[i(94),i(96),i(97),i(98),i(99),i(100),i(101),i(102)],r=0;r<s.length;r++){e=s[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}},function(e,t,i){"use strict";var s=i(8).Buffer;function r(e,t){this.enc=e.encodingName,this.bomAware=e.bomAware,"base64"===this.enc?this.encoder=d:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=c,""!==s.from("eda0bdedb2a9","hex").toString()&&(this.decoder=h,this.defaultCharUnicode=t.defaultCharUnicode))}e.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:r},r.prototype.encoder=n,r.prototype.decoder=o;var a=i(95).StringDecoder;function o(e,t){a.call(this,t.enc)}function n(e,t){this.enc=t.enc}function d(e,t){this.prevStr=""}function c(e,t){}function h(e,t){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=t.defaultCharUnicode}a.prototype.end||(a.prototype.end=function(){}),o.prototype=a.prototype,n.prototype.write=function(e){return s.from(e,this.enc)},n.prototype.end=function(){},d.prototype.write=function(e){var t=(e=this.prevStr+e).length-e.length%4;return this.prevStr=e.slice(t),e=e.slice(0,t),s.from(e,"base64")},d.prototype.end=function(){return s.from(this.prevStr,"base64")},c.prototype.write=function(e){for(var t=s.alloc(3*e.length),i=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);a<128?t[i++]=a:a<2048?(t[i++]=192+(a>>>6),t[i++]=128+(63&a)):(t[i++]=224+(a>>>12),t[i++]=128+(a>>>6&63),t[i++]=128+(63&a))}return t.slice(0,i)},c.prototype.end=function(){},h.prototype.write=function(e){for(var t=this.acc,i=this.contBytes,s=this.accBytes,r="",a=0;a<e.length;a++){var o=e[a];128!=(192&o)?(i>0&&(r+=this.defaultCharUnicode,i=0),o<128?r+=String.fromCharCode(o):o<224?(t=31&o,i=1,s=1):o<240?(t=15&o,i=2,s=1):r+=this.defaultCharUnicode):i>0?(t=t<<6|63&o,s++,0===--i&&(r+=2===s&&t<128&&t>0?this.defaultCharUnicode:3===s&&t<2048?this.defaultCharUnicode:String.fromCharCode(t))):r+=this.defaultCharUnicode}return this.acc=t,this.contBytes=i,this.accBytes=s,r},h.prototype.end=function(){var e=0;return this.contBytes>0&&(e+=this.defaultCharUnicode),e}},function(e,t){e.exports=require("string_decoder")},function(e,t,i){"use strict";var s=i(8).Buffer;function r(){}function a(){}function o(){this.overflowByte=-1}function n(e,t){this.iconv=t}function d(e,t){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder("utf-16le",e)}function c(e,t){this.decoder=null,this.initialBytes=[],this.initialBytesLen=0,this.options=e||{},this.iconv=t.iconv}function h(e,t){var i=t||"utf-16le";if(e.length>=2)if(254==e[0]&&255==e[1])i="utf-16be";else if(255==e[0]&&254==e[1])i="utf-16le";else{for(var s=0,r=0,a=Math.min(e.length-e.length%2,64),o=0;o<a;o+=2)0===e[o]&&0!==e[o+1]&&r++,0!==e[o]&&0===e[o+1]&&s++;r>s?i="utf-16be":r<s&&(i="utf-16le")}return i}t.utf16be=r,r.prototype.encoder=a,r.prototype.decoder=o,r.prototype.bomAware=!0,a.prototype.write=function(e){for(var t=s.from(e,"ucs2"),i=0;i<t.length;i+=2){var r=t[i];t[i]=t[i+1],t[i+1]=r}return t},a.prototype.end=function(){},o.prototype.write=function(e){if(0==e.length)return"";var t=s.alloc(e.length+1),i=0,r=0;for(-1!==this.overflowByte&&(t[0]=e[0],t[1]=this.overflowByte,i=1,r=2);i<e.length-1;i+=2,r+=2)t[r]=e[i+1],t[r+1]=e[i];return this.overflowByte=i==e.length-1?e[e.length-1]:-1,t.slice(0,r).toString("ucs2")},o.prototype.end=function(){},t.utf16=n,n.prototype.encoder=d,n.prototype.decoder=c,d.prototype.write=function(e){return this.encoder.write(e)},d.prototype.end=function(){return this.encoder.end()},c.prototype.write=function(e){if(!this.decoder){if(this.initialBytes.push(e),this.initialBytesLen+=e.length,this.initialBytesLen<16)return"";var t=h(e=s.concat(this.initialBytes),this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options),this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(e)},c.prototype.end=function(){if(!this.decoder){var e=s.concat(this.initialBytes),t=h(e,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);var i=this.decoder.write(e),r=this.decoder.end();return r?i+r:i}return this.decoder.end()}},function(e,t,i){"use strict";var s=i(8).Buffer;function r(e,t){this.iconv=t}t.utf7=r,t.unicode11utf7="utf7",r.prototype.encoder=o,r.prototype.decoder=n,r.prototype.bomAware=!0;var a=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function o(e,t){this.iconv=t.iconv}function n(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}o.prototype.write=function(e){return s.from(e.replace(a,function(e){return"+"+("+"===e?"":this.iconv.encode(e,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},o.prototype.end=function(){};for(var d=/[A-Za-z0-9\/+]/,c=[],h=0;h<256;h++)c[h]=d.test(String.fromCharCode(h));var l="+".charCodeAt(0),u="-".charCodeAt(0),p="&".charCodeAt(0);function m(e,t){this.iconv=t}function f(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=s.alloc(6),this.base64AccumIdx=0}function y(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}n.prototype.write=function(e){for(var t="",i=0,r=this.inBase64,a=this.base64Accum,o=0;o<e.length;o++)if(r){if(!c[e[o]]){if(o==i&&e[o]==u)t+="+";else{var n=a+e.slice(i,o).toString();t+=this.iconv.decode(s.from(n,"base64"),"utf16-be")}e[o]!=u&&o--,i=o+1,r=!1,a=""}}else e[o]==l&&(t+=this.iconv.decode(e.slice(i,o),"ascii"),i=o+1,r=!0);if(r){var d=(n=a+e.slice(i).toString()).length-n.length%8;a=n.slice(d),n=n.slice(0,d),t+=this.iconv.decode(s.from(n,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(i),"ascii");return this.inBase64=r,this.base64Accum=a,t},n.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(s.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e},t.utf7imap=m,m.prototype.encoder=f,m.prototype.decoder=y,m.prototype.bomAware=!0,f.prototype.write=function(e){for(var t=this.inBase64,i=this.base64Accum,r=this.base64AccumIdx,a=s.alloc(5*e.length+10),o=0,n=0;n<e.length;n++){var d=e.charCodeAt(n);32<=d&&d<=126?(t&&(r>0&&(o+=a.write(i.slice(0,r).toString("base64").replace(/\//g,",").replace(/=+$/,""),o),r=0),a[o++]=u,t=!1),t||(a[o++]=d,d===p&&(a[o++]=u))):(t||(a[o++]=p,t=!0),t&&(i[r++]=d>>8,i[r++]=255&d,r==i.length&&(o+=a.write(i.toString("base64").replace(/\//g,","),o),r=0)))}return this.inBase64=t,this.base64AccumIdx=r,a.slice(0,o)},f.prototype.end=function(){var e=s.alloc(10),t=0;return this.inBase64&&(this.base64AccumIdx>0&&(t+=e.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),t),this.base64AccumIdx=0),e[t++]=u,this.inBase64=!1),e.slice(0,t)};var b=c.slice();b[",".charCodeAt(0)]=!0,y.prototype.write=function(e){for(var t="",i=0,r=this.inBase64,a=this.base64Accum,o=0;o<e.length;o++)if(r){if(!b[e[o]]){if(o==i&&e[o]==u)t+="&";else{var n=a+e.slice(i,o).toString().replace(/,/g,"/");t+=this.iconv.decode(s.from(n,"base64"),"utf16-be")}e[o]!=u&&o--,i=o+1,r=!1,a=""}}else e[o]==p&&(t+=this.iconv.decode(e.slice(i,o),"ascii"),i=o+1,r=!0);if(r){var d=(n=a+e.slice(i).toString().replace(/,/g,"/")).length-n.length%8;a=n.slice(d),n=n.slice(0,d),t+=this.iconv.decode(s.from(n,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(i),"ascii");return this.inBase64=r,this.base64Accum=a,t},y.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(s.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e}},function(e,t,i){"use strict";var s=i(8).Buffer;function r(e,t){if(!e)throw new Error("SBCS codec is called without the data.");if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw new Error("Encoding '"+e.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===e.chars.length){for(var i="",r=0;r<128;r++)i+=String.fromCharCode(r);e.chars=i+e.chars}this.decodeBuf=s.from(e.chars,"ucs2");var a=s.alloc(65536,t.defaultCharSingleByte.charCodeAt(0));for(r=0;r<e.chars.length;r++)a[e.chars.charCodeAt(r)]=r;this.encodeBuf=a}function a(e,t){this.encodeBuf=t.encodeBuf}function o(e,t){this.decodeBuf=t.decodeBuf}t._sbcs=r,r.prototype.encoder=a,r.prototype.decoder=o,a.prototype.write=function(e){for(var t=s.alloc(e.length),i=0;i<e.length;i++)t[i]=this.encodeBuf[e.charCodeAt(i)];return t},a.prototype.end=function(){},o.prototype.write=function(e){for(var t=this.decodeBuf,i=s.alloc(2*e.length),r=0,a=0,o=0;o<e.length;o++)r=2*e[o],i[a=2*o]=t[r],i[a+1]=t[r+1];return i.toString("ucs2")},o.prototype.end=function(){}},function(e,t,i){"use strict";e.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",10000:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},function(e,t,i){"use strict";e.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},function(e,t,i){"use strict";var s=i(8).Buffer;t._dbcs=c;for(var r=-1,a=-2,o=-1e3,n=new Array(256),d=0;d<256;d++)n[d]=r;function c(e,t){if(this.encodingName=e.encodingName,!e)throw new Error("DBCS codec is called without the data.");if(!e.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var i=e.table();this.decodeTables=[],this.decodeTables[0]=n.slice(0),this.decodeTableSeq=[];for(var s=0;s<i.length;s++)this._addDecodeChunk(i[s]);this.defaultCharUnicode=t.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var d={};if(e.encodeSkipVals)for(s=0;s<e.encodeSkipVals.length;s++){var c=e.encodeSkipVals[s];if("number"==typeof c)d[c]=!0;else for(var h=c.from;h<=c.to;h++)d[h]=!0}if(this._fillEncodeTable(0,0,d),e.encodeAdd)for(var l in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,l)&&this._setEncodeChar(l.charCodeAt(0),e.encodeAdd[l]);if(this.defCharSB=this.encodeTable[0][t.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===r&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===r&&(this.defCharSB="?".charCodeAt(0)),"function"==typeof e.gb18030){this.gb18030=e.gb18030();var u=this.decodeTables.length,p=this.decodeTables[u]=n.slice(0),m=this.decodeTables.length,f=this.decodeTables[m]=n.slice(0);for(s=129;s<=254;s++){var y=o-this.decodeTables[0][s],b=this.decodeTables[y];for(h=48;h<=57;h++)b[h]=o-u}for(s=129;s<=254;s++)p[s]=o-m;for(s=48;s<=57;s++)f[s]=a}}function h(e,t){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=t.encodeTable,this.encodeTableSeq=t.encodeTableSeq,this.defaultCharSingleByte=t.defCharSB,this.gb18030=t.gb18030}function l(e,t){this.nodeIdx=0,this.prevBuf=s.alloc(0),this.decodeTables=t.decodeTables,this.decodeTableSeq=t.decodeTableSeq,this.defaultCharUnicode=t.defaultCharUnicode,this.gb18030=t.gb18030}function u(e,t){if(e[0]>t)return-1;for(var i=0,s=e.length;i<s-1;){var r=i+Math.floor((s-i+1)/2);e[r]<=t?i=r:s=r}return i}c.prototype.encoder=h,c.prototype.decoder=l,c.prototype._getDecodeTrieNode=function(e){for(var t=[];e>0;e>>=8)t.push(255&e);0==t.length&&t.push(0);for(var i=this.decodeTables[0],s=t.length-1;s>0;s--){var a=i[t[s]];if(a==r)i[t[s]]=o-this.decodeTables.length,this.decodeTables.push(i=n.slice(0));else{if(!(a<=o))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+e.toString(16));i=this.decodeTables[o-a]}}return i},c.prototype._addDecodeChunk=function(e){var t=parseInt(e[0],16),i=this._getDecodeTrieNode(t);t&=255;for(var s=1;s<e.length;s++){var r=e[s];if("string"==typeof r)for(var a=0;a<r.length;){var o=r.charCodeAt(a++);if(55296<=o&&o<56320){var n=r.charCodeAt(a++);if(!(56320<=n&&n<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+e[0]);i[t++]=65536+1024*(o-55296)+(n-56320)}else if(4080<o&&o<=4095){for(var d=4095-o+2,c=[],h=0;h<d;h++)c.push(r.charCodeAt(a++));i[t++]=-10-this.decodeTableSeq.length,this.decodeTableSeq.push(c)}else i[t++]=o}else{if("number"!=typeof r)throw new Error("Incorrect type '"+typeof r+"' given in "+this.encodingName+" at chunk "+e[0]);var l=i[t-1]+1;for(a=0;a<r;a++)i[t++]=l++}}if(t>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+e[0]+": too long"+t)},c.prototype._getEncodeBucket=function(e){var t=e>>8;return void 0===this.encodeTable[t]&&(this.encodeTable[t]=n.slice(0)),this.encodeTable[t]},c.prototype._setEncodeChar=function(e,t){var i=this._getEncodeBucket(e),s=255&e;i[s]<=-10?this.encodeTableSeq[-10-i[s]][-1]=t:i[s]==r&&(i[s]=t)},c.prototype._setEncodeSequence=function(e,t){var i,s=e[0],a=this._getEncodeBucket(s),o=255&s;a[o]<=-10?i=this.encodeTableSeq[-10-a[o]]:(i={},a[o]!==r&&(i[-1]=a[o]),a[o]=-10-this.encodeTableSeq.length,this.encodeTableSeq.push(i));for(var n=1;n<e.length-1;n++){var d=i[s];"object"==typeof d?i=d:(i=i[s]={},void 0!==d&&(i[-1]=d))}i[s=e[e.length-1]]=t},c.prototype._fillEncodeTable=function(e,t,i){for(var s=this.decodeTables[e],r=0;r<256;r++){var a=s[r],n=t+r;i[n]||(a>=0?this._setEncodeChar(a,n):a<=o?this._fillEncodeTable(o-a,n<<8,i):a<=-10&&this._setEncodeSequence(this.decodeTableSeq[-10-a],n))}},h.prototype.write=function(e){for(var t=s.alloc(e.length*(this.gb18030?4:3)),i=this.leadSurrogate,a=this.seqObj,o=-1,n=0,d=0;;){if(-1===o){if(n==e.length)break;var c=e.charCodeAt(n++)}else{c=o;o=-1}if(55296<=c&&c<57344)if(c<56320){if(-1===i){i=c;continue}i=c,c=r}else-1!==i?(c=65536+1024*(i-55296)+(c-56320),i=-1):c=r;else-1!==i&&(o=c,c=r,i=-1);var h=r;if(void 0!==a&&c!=r){var l=a[c];if("object"==typeof l){a=l;continue}"number"==typeof l?h=l:null==l&&void 0!==(l=a[-1])&&(h=l,o=c),a=void 0}else if(c>=0){var p=this.encodeTable[c>>8];if(void 0!==p&&(h=p[255&c]),h<=-10){a=this.encodeTableSeq[-10-h];continue}if(h==r&&this.gb18030){var m=u(this.gb18030.uChars,c);if(-1!=m){h=this.gb18030.gbChars[m]+(c-this.gb18030.uChars[m]);t[d++]=129+Math.floor(h/12600),h%=12600,t[d++]=48+Math.floor(h/1260),h%=1260,t[d++]=129+Math.floor(h/10),h%=10,t[d++]=48+h;continue}}}h===r&&(h=this.defaultCharSingleByte),h<256?t[d++]=h:h<65536?(t[d++]=h>>8,t[d++]=255&h):(t[d++]=h>>16,t[d++]=h>>8&255,t[d++]=255&h)}return this.seqObj=a,this.leadSurrogate=i,t.slice(0,d)},h.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var e=s.alloc(10),t=0;if(this.seqObj){var i=this.seqObj[-1];void 0!==i&&(i<256?e[t++]=i:(e[t++]=i>>8,e[t++]=255&i)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(e[t++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,t)}},h.prototype.findIdx=u,l.prototype.write=function(e){var t=s.alloc(2*e.length),i=this.nodeIdx,n=this.prevBuf,d=this.prevBuf.length,c=-this.prevBuf.length;d>0&&(n=s.concat([n,e.slice(0,10)]));for(var h=0,l=0;h<e.length;h++){var p,m=h>=0?e[h]:n[h+d];if((p=this.decodeTables[i][m])>=0);else if(p===r)h=c,p=this.defaultCharUnicode.charCodeAt(0);else if(p===a){var f=c>=0?e.slice(c,h+1):n.slice(c+d,h+1+d),y=12600*(f[0]-129)+1260*(f[1]-48)+10*(f[2]-129)+(f[3]-48),b=u(this.gb18030.gbChars,y);p=this.gb18030.uChars[b]+y-this.gb18030.gbChars[b]}else{if(p<=o){i=o-p;continue}if(!(p<=-10))throw new Error("iconv-lite internal error: invalid decoding table value "+p+" at "+i+"/"+m);for(var w=this.decodeTableSeq[-10-p],v=0;v<w.length-1;v++)p=w[v],t[l++]=255&p,t[l++]=p>>8;p=w[w.length-1]}if(p>65535){p-=65536;var g=55296+Math.floor(p/1024);t[l++]=255&g,t[l++]=g>>8,p=56320+p%1024}t[l++]=255&p,t[l++]=p>>8,i=0,c=h+1}return this.nodeIdx=i,this.prevBuf=c>=0?e.slice(c):n.slice(c+d),t.slice(0,l).toString("ucs2")},l.prototype.end=function(){for(var e="";this.prevBuf.length>0;){e+=this.defaultCharUnicode;var t=this.prevBuf.slice(1);this.prevBuf=s.alloc(0),this.nodeIdx=0,t.length>0&&(e+=this.write(t))}return this.nodeIdx=0,e}},function(e,t,i){"use strict";e.exports={shiftjis:{type:"_dbcs",table:function(){return i(103)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return i(104)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return i(22)}},gbk:{type:"_dbcs",table:function(){return i(22).concat(i(38))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return i(22).concat(i(38))},gb18030:function(){return i(105)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return i(106)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return i(39)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return i(39).concat(i(107))},encodeSkipVals:[41676]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},function(e){e.exports=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]},function(e){e.exports=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]},function(e){e.exports={uChars:[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],gbChars:[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3]}},function(e){e.exports=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]},function(e){e.exports=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]},function(e,t,i){"use strict";var s=i(10).Buffer,r=i(9).Transform;function a(e,t){this.conv=e,(t=t||{}).decodeStrings=!1,r.call(this,t)}function o(e,t){this.conv=e,(t=t||{}).encoding=this.encoding="utf8",r.call(this,t)}e.exports=function(e){e.encodeStream=function(t,i){return new a(e.getEncoder(t,i),i)},e.decodeStream=function(t,i){return new o(e.getDecoder(t,i),i)},e.supportsStreams=!0,e.IconvLiteEncoderStream=a,e.IconvLiteDecoderStream=o,e._collect=o.prototype.collect},a.prototype=Object.create(r.prototype,{constructor:{value:a}}),a.prototype._transform=function(e,t,i){if("string"!=typeof e)return i(new Error("Iconv encoding stream needs strings as its input."));try{var s=this.conv.write(e);s&&s.length&&this.push(s),i()}catch(e){i(e)}},a.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t),e()}catch(t){e(t)}},a.prototype.collect=function(e){var t=[];return this.on("error",e),this.on("data",function(e){t.push(e)}),this.on("end",function(){e(null,s.concat(t))}),this},o.prototype=Object.create(r.prototype,{constructor:{value:o}}),o.prototype._transform=function(e,t,i){if(!s.isBuffer(e))return i(new Error("Iconv decoding stream needs buffers as its input."));try{var r=this.conv.write(e);r&&r.length&&this.push(r,this.encoding),i()}catch(e){i(e)}},o.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t,this.encoding),e()}catch(t){e(t)}},o.prototype.collect=function(e){var t="";return this.on("error",e),this.on("data",function(e){t+=e}),this.on("end",function(){e(null,t)}),this}},function(e,t,i){"use strict";var s=i(10).Buffer;e.exports=function(e){var t=void 0;e.supportsNodeEncodingsExtension=!(s.from||new s(0)instanceof Uint8Array),e.extendNodeEncodings=function(){if(!t){if(t={},!e.supportsNodeEncodingsExtension)return console.error("ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node"),void console.error("See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility");var r={hex:!0,utf8:!0,"utf-8":!0,ascii:!0,binary:!0,base64:!0,ucs2:!0,"ucs-2":!0,utf16le:!0,"utf-16le":!0};s.isNativeEncoding=function(e){return e&&r[e.toLowerCase()]};var a=i(10).SlowBuffer;if(t.SlowBufferToString=a.prototype.toString,a.prototype.toString=function(i,r,a){return i=String(i||"utf8").toLowerCase(),s.isNativeEncoding(i)?t.SlowBufferToString.call(this,i,r,a):(void 0===r&&(r=0),void 0===a&&(a=this.length),e.decode(this.slice(r,a),i))},t.SlowBufferWrite=a.prototype.write,a.prototype.write=function(i,r,a,o){if(isFinite(r))isFinite(a)||(o=a,a=void 0);else{var n=o;o=r,r=a,a=n}r=+r||0;var d=this.length-r;if(a?(a=+a)>d&&(a=d):a=d,o=String(o||"utf8").toLowerCase(),s.isNativeEncoding(o))return t.SlowBufferWrite.call(this,i,r,a,o);if(i.length>0&&(a<0||r<0))throw new RangeError("attempt to write beyond buffer bounds");var c=e.encode(i,o);return c.length<a&&(a=c.length),c.copy(this,r,0,a),a},t.BufferIsEncoding=s.isEncoding,s.isEncoding=function(t){return s.isNativeEncoding(t)||e.encodingExists(t)},t.BufferByteLength=s.byteLength,s.byteLength=a.byteLength=function(i,r){return r=String(r||"utf8").toLowerCase(),s.isNativeEncoding(r)?t.BufferByteLength.call(this,i,r):e.encode(i,r).length},t.BufferToString=s.prototype.toString,s.prototype.toString=function(i,r,a){return i=String(i||"utf8").toLowerCase(),s.isNativeEncoding(i)?t.BufferToString.call(this,i,r,a):(void 0===r&&(r=0),void 0===a&&(a=this.length),e.decode(this.slice(r,a),i))},t.BufferWrite=s.prototype.write,s.prototype.write=function(i,r,a,o){var n=r,d=a,c=o;if(isFinite(r))isFinite(a)||(o=a,a=void 0);else{var h=o;o=r,r=a,a=h}if(o=String(o||"utf8").toLowerCase(),s.isNativeEncoding(o))return t.BufferWrite.call(this,i,n,d,c);r=+r||0;var l=this.length-r;if(a?(a=+a)>l&&(a=l):a=l,i.length>0&&(a<0||r<0))throw new RangeError("attempt to write beyond buffer bounds");var u=e.encode(i,o);return u.length<a&&(a=u.length),u.copy(this,r,0,a),a},e.supportsStreams){var o=i(9).Readable;t.ReadableSetEncoding=o.prototype.setEncoding,o.prototype.setEncoding=function(t,i){this._readableState.decoder=e.getDecoder(t,i),this._readableState.encoding=t},o.prototype.collect=e._collect}}},e.undoExtendNodeEncodings=function(){if(e.supportsNodeEncodingsExtension){if(!t)throw new Error("require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.");delete s.isNativeEncoding;var r=i(10).SlowBuffer;if(r.prototype.toString=t.SlowBufferToString,r.prototype.write=t.SlowBufferWrite,s.isEncoding=t.BufferIsEncoding,s.byteLength=t.BufferByteLength,s.prototype.toString=t.BufferToString,s.prototype.write=t.BufferWrite,e.supportsStreams){var a=i(9).Readable;a.prototype.setEncoding=t.ReadableSetEncoding,delete a.prototype.collect}t=void 0}}}},function(e,t,i){"use strict";var s;try{"iconv",s=i(111)("iconv").Iconv}catch(e){}e.exports=s},function(e,t){function i(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id=111},function(e,t,i){"use strict";var s=e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe};s.writable=function(e){return s(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState},s.readable=function(e){return s(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState},s.duplex=function(e){return s.writable(e)&&s.readable(e)},s.transform=function(e){return s.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState}},function(e,t){e.exports=require("util")},function(e,t,i){var s=i(37),r=i(23),a=i(21);function o(e,t){t=t||{},this.url=t.url,this.status=t.status||200,this.statusText=t.statusText||s.STATUS_CODES[this.status],this.headers=new r(t.headers),this.ok=this.status>=200&&this.status<300,a.call(this,e,t)}e.exports=o,o.prototype=Object.create(a.prototype),o.prototype.clone=function(){return new o(this._clone(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}},function(e,t,i){var s=i(20).parse,r=i(23),a=i(21);function o(e,t){var i,n;e instanceof o?(i=e.url,n=s(i)):(n=s(i=e),e={}),t=t||{},this.method=t.method||e.method||"GET",this.redirect=t.redirect||e.redirect||"follow",this.headers=new r(t.headers||e.headers||{}),this.url=i,this.follow=void 0!==t.follow?t.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==t.compress?t.compress:void 0===e.compress||e.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,a.call(this,t.body||this._clone(e),{timeout:t.timeout||e.timeout||0,size:t.size||e.size||0}),this.protocol=n.protocol,this.hostname=n.hostname,this.port=n.port,this.path=n.path,this.auth=n.auth}e.exports=o,o.prototype=Object.create(a.prototype),o.prototype.clone=function(){return new o(this)}},function(e,t,i){"use strict";const s=i(13);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"allcoin",name:"Allcoin",countries:["CA"],has:{CORS:!1},extension:"",urls:{logo:"https://user-images.githubusercontent.com/1294454/31561809-c316b37c-b061-11e7-8d5a-b547b4d730eb.jpg",api:{web:"https://www.allcoin.com",public:"https://api.allcoin.com/api",private:"https://api.allcoin.com/api"},www:"https://www.allcoin.com",doc:"https://www.allcoin.com/api_market/market"},api:{web:{get:["Home/MarketOverViewDetail/"]},public:{get:["depth","kline","ticker","trades"]},private:{post:["batch_trade","cancel_order","order_history","order_info","orders_info","repayment","trade","trade_history","userinfo"]}}})}async fetchMarkets(e={}){let t=[],i=(await this.webGetHomeMarketOverViewDetail()).marketCoins;for(let e=0;e<i.length;e++){let s=i[e].Markets;for(let e=0;e<s.length;e++){let i=s[e].Market,r=i.Primary,a=i.Secondary,o=r.toLowerCase(),n=a.toLowerCase(),d=o+"_"+n,c=r+"/"+a,h=i.TradeEnabled&&i.BuyEnabled&&i.SellEnabled;t.push({id:d,symbol:c,base:r,quote:a,baseId:o,quoteId:n,active:h,type:"spot",spot:!0,future:!1,maker:i.AskFeeRate,taker:i.AskFeeRate,precision:{amount:i.PrimaryDigits,price:i.SecondaryDigits},limits:{amount:{min:i.MinTradeAmount,max:i.MaxTradeAmount},price:{min:i.MinOrderPrice,max:i.MaxOrderPrice},cost:{min:void 0,max:void 0}},info:i})}}return t}parseOrderStatus(e){return this.safeString({"-1":"canceled",0:"open",1:"open",2:"closed",10:"canceled"},e,e)}getCreateDateField(){return"create_data"}getOrdersField(){return"order"}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,AuthenticationError:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"anxpro",name:"ANXPro",countries:["JP","SG","HK","NZ"],rateLimit:1500,has:{CORS:!1,fetchCurrencies:!0,fetchOHLCV:!1,fetchTrades:!1,fetchOpenOrders:!0,fetchDepositAddress:!0,createDepositAddress:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27765983-fd8595da-5ec9-11e7-82e3-adb3ab8c2612.jpg",api:{public:"https://anxpro.com/api/2",private:"https://anxpro.com/api/2",v3public:"https://anxpro.com/api/3"},www:"https://anxpro.com",doc:["https://anxv2.docs.apiary.io","https://anxv3.docs.apiary.io","https://anxpro.com/pages/api"]},api:{v3public:{get:["currencyStatic"]},public:{get:["{currency_pair}/money/ticker","{currency_pair}/money/depth/full","{currency_pair}/money/trade/fetch"]},private:{post:["{currency_pair}/money/order/add","{currency_pair}/money/order/cancel","{currency_pair}/money/order/quote","{currency_pair}/money/order/result","{currency_pair}/money/orders","money/{currency}/address","money/{currency}/send_simple","money/info","money/trade/list","money/wallet/history"]}},httpExceptions:{403:a},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.002}}})}async fetchCurrencies(e={}){const t={},i=(await this.v3publicGetCurrencyStatic(e)).currencyStatic.currencies,s=Object.keys(i);for(let e=0;e<s.length;e++){const r=s[e],a=i[r],o=this.commonCurrencyCode(r),n=this.safeValue(a,"engineSettings"),d=this.safeValue(n,"depositsEnabled"),c=this.safeValue(n,"withdrawalsEnabled"),h=this.safeValue(n,"displayEnabled"),l=d&&c&&h,u=this.safeInteger(a,"decimals"),p=this.safeFloat(a,"networkFee");let m=this.safeString(a,"type");"undefined"!==m&&(m=m.toLowerCase()),t[o]={id:r,code:o,info:a,name:o,type:m,active:l,precision:u,fee:p,limits:{amount:{min:this.safeFloat(a,"minOrderSize"),max:this.safeFloat(a,"maxOrderSize")},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(a,"minOrderValue"),max:this.safeFloat(a,"maxOrderValue")},withdraw:{min:void 0,max:void 0}}}}return t}async fetchMarkets(e={}){const t=await this.v3publicGetCurrencyStatic(e),i=this.safeValue(t,"currencyStatic",{}),s=this.safeValue(i,"currencies",{}),r=this.safeValue(i,"currencyPairs",{}),a=[],o=Object.keys(r);for(let e=0;e<o.length;e++){const t=o[e],i=r[t],n=this.safeString(i,"tradedCcy"),d=this.safeString(i,"settlementCcy"),c=this.commonCurrencyCode(n),h=this.commonCurrencyCode(d),l=c+"/"+h,u=this.safeValue(s,n,{}),p=this.safeValue(s,d,{}),m={price:this.safeInteger(i,"priceDecimals"),amount:this.safeInteger(u,"decimals")},f=this.safeValue(i,"engineSettings"),y=this.safeValue(f,"displayEnabled"),b=this.safeValue(f,"tradingEnabled"),w=y&&b;a.push({id:t,symbol:l,base:c,quote:h,baseId:n,quoteId:d,precision:m,active:w,limits:{price:{min:this.safeFloat(i,"minOrderRate"),max:this.safeFloat(i,"maxOrderRate")},amount:{min:this.safeFloat(u,"minOrderSize"),max:this.safeFloat(u,"maxOrderSize")},cost:{min:this.safeFloat(p,"minOrderValue"),max:this.safeFloat(p,"maxOrderValue")}},info:i})}return a}async fetchBalance(e={}){let t=(await this.privatePostMoneyInfo()).data,i=Object.keys(t.Wallets),s={info:t};for(let e=0;e<i.length;e++){let r=i[e],a=this.account();if(r in t.Wallets){let e=t.Wallets[r];a.free=parseFloat(e.Available_Balance.value),a.total=parseFloat(e.Balance.value),a.used=a.total-a.free}s[r]=a}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){let s=(await this.publicGetCurrencyPairMoneyDepthFull(this.extend({currency_pair:this.marketId(e)},i))).data,r=parseInt(s.dataUpdateTime),a=parseInt(r/1e3);return this.parseOrderBook(s,a,"bids","asks","price","amount")}async fetchTicker(e,t={}){let i=(await this.publicGetCurrencyPairMoneyTicker(this.extend({currency_pair:this.marketId(e)},t))).data,s=parseInt(i.dataUpdateTime),r=parseInt(s/1e3),a=this.safeFloat(i.buy,"value"),o=this.safeFloat(i.sell,"value"),n=parseFloat(i.vol.value),d=parseFloat(i.last.value);return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:parseFloat(i.high.value),low:parseFloat(i.low.value),bid:a,bidVolume:void 0,ask:o,askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:parseFloat(i.avg.value),baseVolume:n,quoteVolume:void 0,info:i}}async fetchTrades(e,t,i,s={}){throw new r(this.id+" switched off the trades endpoint, see their docs at https://docs.anxv2.apiary.io")}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={currency_pair:this.market(e).id},a=await this.privatePostCurrencyPairMoneyOrders(this.extend(r,s));return this.parseOrders(this.safeValue(a,"data",{}),e,t,i)}parseOrder(e,t){let i=this.safeString(e,"oid"),s=this.safeString(e,"status"),r=this.safeInteger(e,"date");const a=this.safeString(e,"item")+"/"+this.safeString(e,"currency");let o=void 0;void 0!==(t=this.safeValue(this.markets_by_id,a))&&(o=t.symbol);let n=this.safeValue(e,"amount",{}),d=this.safeValue(e,"effective_amount",{}),c=this.safeValue(e,"price",{}),h=this.safeFloat(d,"value"),l=this.safeFloat(n,"volume"),u=this.safeFloat(c,"value"),p=void 0,m=void 0;void 0!==l&&void 0!==h&&(m=u*(p=l-h));let f=this.safeString(e,"type");f="offer"===f?"sell":"buy";return{info:e,id:i,symbol:o,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,type:"limit",side:f,price:u,cost:m,amount:l,remaining:h,filled:p,status:s,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,r,a={}){let o=this.market(e),n={currency_pair:o.id,amount_int:parseInt(1e8*s)};"limit"===t&&(n.price_int=parseInt(r*o.multiplier)),n.type="buy"===i?"bid":"ask";let d=await this.privatePostCurrencyPairMoneyOrderAdd(this.extend(n,a));return{info:d,id:d.data}}async cancelOrder(e,t,i={}){return await this.privatePostCurrencyPairMoneyOrderCancel({oid:e})}getAmountMultiplier(e){return this.safeInteger({BTC:1e8,LTC:1e8,STR:1e8,XRP:1e8,DOGE:1e8},e,100)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a=this.currency(e),o=this.getAmountMultiplier(e),n={currency:a,amount_int:parseInt(t*o),address:i};void 0!==s&&(n.destinationTag=s);let d=await this.privatePostMoneyCurrencySendSimple(this.extend(n,r));return{info:d,id:d.data.transactionId}}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i={currency:this.currency(e).id},s=await this.privatePostMoneyCurrencyAddress(this.extend(i,t)),r=s.data,a=this.safeString(r,"addr");return this.checkAddress(a),{currency:e,address:a,info:s}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.implodeParams(e,s),n=this.omit(s,this.extractParams(e)),d=this.urls.api[t]+"/"+o;if("public"===t||"v3public"===t)Object.keys(n).length&&(d+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce();a=this.urlencode(this.extend({nonce:e},n));let t=this.base64ToBinary(this.secret),i=o+"\0"+a,s=this.hmac(this.encode(i),t,"sha512","base64");r={"Content-Type":"application/x-www-form-urlencoded","Rest-Key":this.apiKey,"Rest-Sign":this.decode(s)}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if(void 0===n||""===n)return;const d=this.safeString(n,"result");if(void 0!==d&&"success"!==d)throw new r(this.id+" "+o);{const e=this.safeString(n,"resultCode");if(void 0!==e&&"OK"!==e)throw new r(this.id+" "+o)}}}},function(e,t,i){"use strict";const s=i(42);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"anybits",name:"Anybits",countries:["IE"],has:{fetchCurrencies:!0,fetchTickers:!0,fetchOpenOrders:!0,fetchDepositAddress:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/41388454-ae227544-6f94-11e8-82a4-127d51d34903.jpg",api:"https://anybits.com/api",www:"https://anybits.com",doc:"https://anybits.com/help/api",fees:"https://anybits.com/help/fees"},api:{public:{get:["assets/currencies","assets/pairs","ticker","orderbook","trades"]},private:{post:["balances","order/cancel","order/new","order/status","orders","orders/history","deposit/address","withdraw","withdrawal/status","transactions/history","vouchers","vouchers/create","vouchers/redeem"]}},fees:{trading:{maker:.0015,taker:.0025}}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:o,InsufficientFunds:n,InvalidOrder:d,OrderNotFound:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bcex",name:"BCEX",countries:["CN","CA"],version:"1",has:{fetchBalance:!0,fetchMarkets:!0,createOrder:!0,cancelOrder:!0,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0,fetchOrder:!0,fetchOrders:!0,fetchClosedOrders:"emulated",fetchOpenOrders:!0,fetchTradingLimits:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/43362240-21c26622-92ee-11e8-9464-5801ec526d77.jpg",api:"https://www.bcex.top",www:"https://www.bcex.top",doc:"https://github.com/BCEX-TECHNOLOGY-LIMITED/API_Docs/wiki/Interface",fees:"https://bcex.udesk.cn/hc/articles/57085",referral:"https://www.bcex.top/user/reg/type/2/pid/758978"},api:{public:{get:["Api_Market/getPriceList","Api_Order/ticker","Api_Order/depth","Api_Market/getCoinTrade","Api_Order/marketOrder"],post:["Api_Market/getPriceList","Api_Order/ticker","Api_Order/depth","Api_Market/getCoinTrade","Api_Order/marketOrder"]},private:{post:["Api_Order/cancel","Api_Order/coinTrust","Api_Order/orderList","Api_Order/orderInfo","Api_Order/tradeList","Api_Order/trustList","Api_User/userBalance"]}},fees:{trading:{tierBased:!1,percentage:!0,buy:0,sell:.002},funding:{tierBased:!1,percentage:!1,withdraw:{ckusd:0,other:5e-4},deposit:{}}},exceptions:{",":r,"":o,"":n,"btc":n,"":d,"":c},options:{limits:{"AFC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:6,max:12e4}}},"AFC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:6,max:12e4}}},"AFT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:15,max:3e5}}},"AICC/CNET":{precision:{amount:2,price:2},limits:{amount:{min:5,max:5e4}}},"AIDOC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:5,max:1e5}}},"AISI/ETH":{precision:{amount:4,price:2},limits:{amount:{min:.001,max:500}}},"AIT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:20,max:4e5}}},"ANS/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.1,max:500}}},"ANS/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.1,max:1e3}}},"ARC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:60,max:6e5}}},"AXF/CNET":{precision:{amount:2,price:4},limits:{amount:{min:100,max:1e6}}},"BASH/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:250,max:3e6}}},"BATT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:60,max:15e5}}},"BCD/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.3,max:7e3}}},"BHPC/BTC":{precision:{amount:2,price:8},limits:{amount:{min:2,max:7e4}}},"BHPC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:2,max:6e4}}},"BOPO/BTC":{precision:{amount:2,price:8},limits:{amount:{min:100,max:2e6}}},"BOPO/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:100,max:1e7}}},"BTC/CKUSD":{precision:{amount:4,price:2},limits:{amount:{min:.001,max:10}}},"BTC/CNET":{precision:{amount:4,price:2},limits:{amount:{min:5e-4,max:5}}},"BTC/USDT":{precision:{amount:4,price:2},limits:{amount:{min:2e-4,max:4}}},"BTE/CNET":{precision:{amount:2,price:4},limits:{amount:{min:25,max:25e4}}},"BU/ETH":{precision:{amount:2,price:8},limits:{amount:{min:20,max:4e5}}},"CIC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:3e3,max:3e7}}},"CIT/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:4,max:4e4}}},"CIT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:4,max:4e4}}},"CMT/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:5,max:25e5}}},"CNET/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:12,max:12e4}}},"CNMC/BTC":{precision:{amount:2,price:8},limits:{amount:{min:4,max:5e4}}},"CTC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:5,max:55e4}}},"CZR/ETH":{precision:{amount:2,price:8},limits:{amount:{min:12,max:5e5}}},"DCON/ETH":{precision:{amount:2,price:8},limits:{amount:{min:8,max:3e5}}},"DCT/BTC":{precision:{amount:4,price:8},limits:{amount:{min:2,max:4e4}}},"DCT/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:2,max:2e3}}},"DOGE/BTC":{precision:{amount:4,price:8},limits:{amount:{min:3e3,max:14e6}}},"DOGE/CKUSD":{precision:{amount:2,price:6},limits:{amount:{min:500,max:2e6}}},"DRCT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:16,max:19e4}}},"ELA/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.02,max:500}}},"ELF/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.1,max:1e5}}},"ELF/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:.01,max:1e5}}},"EOS/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.5,max:5e3}}},"EOS/CNET":{precision:{amount:2,price:2},limits:{amount:{min:2.5,max:3e4}}},"EOS/ETH":{precision:{amount:2,price:8},limits:{amount:{min:.18,max:1800}}},"ETC/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.2,max:2500}}},"ETC/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.2,max:2500}}},"ETF/ETH":{precision:{amount:2,price:8},limits:{amount:{min:7,max:15e4}}},"ETH/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.015,max:100}}},"ETH/CKUSD":{precision:{amount:4,price:4},limits:{amount:{min:.005,max:100}}},"ETH/USDT":{precision:{amount:4,price:2},limits:{amount:{min:.005,max:100}}},"FCT/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.24,max:1e3}}},"FCT/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.24,max:1e3}}},"GAME/CNET":{precision:{amount:2,price:2},limits:{amount:{min:1,max:1e4}}},"GOOC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:200,max:2e6}}},"GP/CNET":{precision:{amount:2,price:4},limits:{amount:{min:600,max:6e6}}},"HSC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:1e3,max:2e7}}},"IFISH/ETH":{precision:{amount:2,price:8},limits:{amount:{min:300,max:8e6}}},"IIC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:50,max:4e6}}},"IMOS/ETH":{precision:{amount:2,price:8},limits:{amount:{min:15,max:3e5}}},"JC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:300,max:3e6}}},"LBTC/BTC":{precision:{amount:2,price:8},limits:{amount:{min:.1,max:3e3}}},"LEC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:500,max:5e6}}},"LKY/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:10,max:7e4}}},"LKY/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:1e5}}},"LMC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:25,max:25e4}}},"LSK/CNET":{precision:{amount:2,price:2},limits:{amount:{min:.3,max:3e3}}},"LTC/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.01,max:500}}},"LTC/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.01,max:500}}},"LTC/USDT":{precision:{amount:4,price:2},limits:{amount:{min:.02,max:450}}},"MC/CNET":{precision:{amount:2,price:6},limits:{amount:{min:1e4,max:1e8}}},"MCC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:30,max:35e4}}},"MOC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:25,max:6e5}}},"MRYC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:300,max:3e6}}},"MT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:200,max:6e6}}},"MXI/CNET":{precision:{amount:2,price:6},limits:{amount:{min:5e3,max:6e7}}},"NAI/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:1e5}}},"NAS/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.2,max:15e3}}},"NAS/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.5,max:5e3}}},"NEWOS/ETH":{precision:{amount:2,price:8},limits:{amount:{min:65,max:7e5}}},"NKN/ETH":{precision:{amount:2,price:8},limits:{amount:{min:3,max:35e4}}},"NTK/ETH":{precision:{amount:2,price:8},limits:{amount:{min:2,max:3e4}}},"ONT/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:.2,max:2e3}}},"ONT/ETH":{precision:{amount:3,price:8},limits:{amount:{min:.01,max:1e3}}},"PNT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:80,max:8e5}}},"PST/ETH":{precision:{amount:2,price:8},limits:{amount:{min:5,max:1e5}}},"PTT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:450,max:1e7}}},"QTUM/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.4,max:2800}}},"QTUM/CKUSD":{precision:{amount:2,price:2},limits:{amount:{min:.1,max:1e3}}},"RATING/ETH":{precision:{amount:2,price:8},limits:{amount:{min:500,max:1e7}}},"RHC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:1e3,max:1e7}}},"SDA/ETH":{precision:{amount:2,price:8},limits:{amount:{min:20,max:5e5}}},"SDD/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:10,max:1e5}}},"SHC/CNET":{precision:{amount:2,price:4},limits:{amount:{min:250,max:25e5}}},"SHE/ETH":{precision:{amount:2,price:8},limits:{amount:{min:100,max:5e6}}},"SMC/CNET":{precision:{amount:2,price:6},limits:{amount:{min:1e3,max:1e7}}},"SOP/ETH":{precision:{amount:2,price:8},limits:{amount:{min:50,max:1e6}}},"TAC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:35,max:8e5}}},"TIP/ETH":{precision:{amount:2,price:8},limits:{amount:{min:7,max:2e5}}},"TKT/ETH":{precision:{amount:2,price:8},limits:{amount:{min:40,max:4e5}}},"TLC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:500,max:1e7}}},"TNC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:11e4}}},"TUB/ETH":{precision:{amount:2,price:8},limits:{amount:{min:200,max:8e6}}},"UC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:100,max:3e6}}},"UDB/CNET":{precision:{amount:2,price:6},limits:{amount:{min:2e3,max:4e7}}},"UIC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:5,max:15e4}}},"VAAC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:10,max:25e4}}},"VPN/CNET":{precision:{amount:2,price:4},limits:{amount:{min:200,max:2e6}}},"VSC/ETH":{precision:{amount:2,price:8},limits:{amount:{min:30,max:65e4}}},"WAVES/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:.15,max:1500}}},"WDNA/ETH":{precision:{amount:2,price:8},limits:{amount:{min:100,max:25e4}}},"WIC/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:3,max:3e4}}},"XAS/CNET":{precision:{amount:2,price:2},limits:{amount:{min:2.5,max:25e3}}},"XLM/BTC":{precision:{amount:4,price:8},limits:{amount:{min:10,max:3e5}}},"XLM/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:1,max:3e5}}},"XLM/USDT":{precision:{amount:2,price:4},limits:{amount:{min:5,max:15e4}}},"XRP/BTC":{precision:{amount:4,price:8},limits:{amount:{min:24,max:1e5}}},"XRP/CKUSD":{precision:{amount:2,price:3},limits:{amount:{min:5,max:5e4}}},"YBCT/BTC":{precision:{amount:4,price:8},limits:{amount:{min:15,max:2e5}}},"YBCT/CKUSD":{precision:{amount:2,price:4},limits:{amount:{min:10,max:2e5}}},"YBY/CNET":{precision:{amount:2,price:6},limits:{amount:{min:25e3,max:25e7}}},"ZEC/BTC":{precision:{amount:4,price:8},limits:{amount:{min:.02,max:100}}},"ZEC/CKUSD":{precision:{amount:4,price:2},limits:{amount:{min:.02,max:100}}}}}})}async fetchTradingLimits(e,t={}){await this.loadMarkets(),void 0===e&&(e=this.symbols);let i={};for(let s=0;s<e.length;s++){let r=e[s];i[r]=await this.fetchTradingLimitsById(this.marketId(r),t)}return i}async fetchTradingLimitsById(e,t={}){let i={symbol:e},s=await this.publicPostApiOrderTicker(this.extend(i,t));return this.parseTradingLimits(this.safeValue(s,"data",{}))}parseTradingLimits(e,t,i={}){return{info:e,precision:{amount:this.safeInteger(e,"number_float"),price:this.safeInteger(e,"price_float")},limits:{amount:{min:this.safeFloat(e,"min_trade"),max:this.safeFloat(e,"max_trade")}}}}async fetchMarkets(e={}){let t=await this.publicGetApiMarketGetPriceList(),i=[],s=Object.keys(t);for(let e=0;e<s.length;e++){let r=t[s[e]];for(let e=0;e<r.length;e++){let t=r[e],s=t.coin_from,a=t.coin_to,o=s.toUpperCase(),n=a.toUpperCase(),d=s+"2"+a,c=(o=this.commonCurrencyCode(o))+"/"+(n=this.commonCurrencyCode(n)),h=!0,l=this.safeValue(this.options.limits,c,{});i.push(this.extend({id:d,symbol:c,base:o,quote:n,baseId:s,quoteId:a,active:h,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:t},l))}}return i}parseTrade(e,t){let i=void 0;void 0!==t&&(i=t.symbol);let s=this.safeInteger2(e,"date","created");void 0!==s&&(s*=1e3);let r=this.safeString(e,"tid"),a=this.safeString(e,"order_id"),o=this.safeFloat2(e,"number","amount"),n=this.safeFloat(e,"price"),d=void 0;void 0!==n&&void 0!==o&&(d=o*n);let c=this.safeString(e,"side");return"sale"===c&&(c="sell"),{info:e,id:r,timestamp:s,datetime:this.iso8601(s),symbol:i,type:void 0,side:c,price:n,amount:o,cost:d,order:a,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r={symbol:this.marketId(e)};void 0!==i&&(r.limit=i);let a=this.market(e),o=await this.publicPostApiOrderMarketOrder(this.extend(r,s));return this.parseTrades(o.data,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostApiUserUserBalance(e)).data,i=Object.keys(t),s={};for(let e=0;e<i.length;e++){let r=i[e],a=this.safeFloat(t,r),o=r.split("_"),n=o[0],d=o[1],c=n.toUpperCase();if(!((c=n in this.currencies_by_id?this.currencies_by_id[n].code:this.commonCurrencyCode(c))in s)){let e=this.account();s[c]=e}"lock"===d?s[c].used=parseFloat(a):s[c].free=parseFloat(a)}i=Object.keys(s);for(let e=0;e<i.length;e++){let t=i[e],r=this.sum(s[t].used,s[t].free);s[t].total=r}return s.info=t,this.parseBalance(s)}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.markets[e],s={part:i.quoteId,coin:i.baseId},r=await this.publicPostApiMarketGetCoinTrade(this.extend(s,t)),a=this.milliseconds();return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(r,"max"),low:this.safeFloat(r,"min"),bid:this.safeFloat(r,"buy"),bidVolume:void 0,ask:this.safeFloat(r,"sale"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeFloat(r,"price"),last:this.safeFloat(r,"price"),previousClose:void 0,change:void 0,percentage:this.safeFloat(r,"change_24h"),average:void 0,baseVolume:this.safeFloat(r,"volume_24h"),quoteVolume:void 0,info:r}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={symbol:this.marketId(e)},r=(await this.publicPostApiOrderDepth(this.extend(s,i))).data;return this.parseOrderBook(r,1e3*r.date)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:r.id},o=await this.privatePostApiOrderOrderList(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}parseOrderStatus(e){let t={0:"open",1:"open",2:"closed",3:"canceled"};return e in t?t[e]:e}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();let s={symbol:this.marketId(t),trust_id:e},r=(await this.privatePostApiOrderOrderInfo(this.extend(s,i))).data,o=1e3*this.safeInteger(r,"created"),n=this.parseOrderStatus(this.safeString(r,"status")),d=this.safeString(r,"flag");return"sale"===d&&(d="sell"),{info:r,id:e,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:t,type:void 0,side:d,price:this.safeFloat(r,"price"),cost:void 0,average:this.safeFloat(r,"avg_price"),amount:this.safeFloat(r,"number"),filled:this.safeFloat(r,"numberdeal"),remaining:this.safeFloat(r,"numberover"),status:n,fee:void 0}}parseOrder(e,t){let i=this.safeString(e,"id"),s=1e3*this.safeInteger(e,"datetime"),r=t.symbol,a=this.safeString(e,"type");"sale"===a&&(a="sell");let o=this.safeFloat(e,"price"),n=this.safeFloat(e,"avg_price"),d=this.safeFloat(e,"amount"),c=this.safeFloat(e,"amount_outstanding"),h=d-c,l=this.parseOrderStatus(this.safeString(e,"status")),u=h*o;return{info:e,id:i,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:r,type:void 0,side:a,price:o,cost:u,average:n,amount:d,filled:h,remaining:c,status:l,fee:void 0}}async fetchOrdersByType(e,t,i,s,r={}){await this.loadMarkets();let a={type:e},o=void 0;void 0!==t&&(o=this.market(t),a.symbol=o.id);let n=await this.privatePostApiOrderTradeList(this.extend(a,r));return"data"in n?this.parseOrders(n.data,o,i,s):[]}async fetchOpenOrders(e,t,i,s={}){return this.fetchOrdersByType("open",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async fetchOrders(e,t,i,s={}){return this.fetchOrdersByType("all",e,t,i,s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={symbol:this.marketId(e),type:i,price:this.priceToPrecision(e,r),number:this.amountToPrecision(e,s)},n=await this.privatePostApiOrderCoinTrust(this.extend(o,a)),d=n.data;return{info:n,id:this.safeString(d,"order_id")}}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();let s={};return void 0!==t&&(s.symbol=this.marketId(t)),void 0!==e&&(s.order_id=e),await this.privatePostApiOrderCancel(this.extend(s,i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.urlencode({api_key:this.apiKey});Object.keys(n).length&&(e+="&"+this.urlencode(this.keysort(n)));let t=e+"&secret_key="+this.secret;a=e+"&sign="+this.hash(this.encode(t)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&!(o.length<2||"{"!==o[0]&&"["!==o[0])){let e=this.safeValue(n,"code");if(void 0!==e&&0!==e){let e=this.safeString(n,"msg"),t=this.id+" msg: "+e+" "+o,i=this.exceptions;throw e in i?new i[e](t):e.indexOf("")>=0?new d(t):new r(t)}}}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d=n[i],c=parseFloat(this.costToPrecision(e,s*r));return{type:a,currency:n.quote,rate:d,cost:parseFloat(this.feeToPrecision(e,d*c))}}}},function(e,t,i){"use strict";const s=i(43);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bequant",name:"Bequant",countries:["MT"],urls:{logo:"https://user-images.githubusercontent.com/1294454/55248342-a75dfe00-525a-11e9-8aa2-05e9dca943c6.jpg",api:"https://api.bequant.io",www:"https://bequant.io",doc:["https://api.bequant.io/"],fees:["https://bequant.io/fees-and-limits"]}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:o,DDoSProtection:n,ExchangeNotAvailable:d,InvalidOrder:c,OrderNotFound:h,PermissionDenied:l,InsufficientFunds:u}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bibox",name:"Bibox",countries:["CN","US","KR"],version:"v1",has:{CORS:!1,publicAPI:!1,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchFundingFees:!0,fetchTickers:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchOHLCV:!0,createMarketOrder:!1,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","12h":"12hour","1d":"day","1w":"week"},urls:{logo:"https://user-images.githubusercontent.com/1294454/34902611-2be8bf1a-f830-11e7-91a2-11b2f292e750.jpg",api:"https://api.bibox.com",www:"https://www.bibox.com",doc:["https://github.com/Biboxcom/api_reference/wiki/home_en","https://github.com/Biboxcom/api_reference/wiki/api_reference"],fees:"https://bibox.zendesk.com/hc/en-us/articles/115004417013-Fee-Structure-on-Bibox",referral:"https://www.bibox.com/signPage?id=11114745&lang=en"},api:{public:{post:["mdata"],get:["mdata"]},private:{post:["user","orderpending","transfer"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{2021:u,2015:o,2027:u,2033:h,2067:c,2068:c,2085:c,3012:o,3024:l,3025:o,4000:d,4003:n},commonCurrencies:{KEY:"Bihu",PAI:"PCHAIN"}})}async fetchMarkets(e={}){let t=(await this.publicGetMdata(this.extend({cmd:"marketAll"},e))).result,i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.coin_symbol,a=s.currency_symbol,o=this.commonCurrencyCode(r),n=this.commonCurrencyCode(a),d=o+"/"+n,c=r+"_"+a,h={amount:4,price:8};i.push({id:c,symbol:d,base:o,quote:n,baseId:o,quoteId:n,active:!0,info:s,precision:h,limits:{amount:{min:Math.pow(10,-h.amount),max:void 0},price:{min:void 0,max:void 0}}})}return i}parseTicker(e,t){let i=this.safeInteger(e,"timestamp"),s=void 0;if(void 0!==t)s=t.symbol;else{let t=e.coin_symbol,i=e.currency_symbol;s=this.commonCurrencyCode(t)+"/"+this.commonCurrencyCode(i)}let r=this.safeFloat(e,"last"),a=this.safeFloat(e,"change"),o=void 0;o="vol"in e?this.safeFloat(e,"vol"):this.safeFloat(e,"vol24H");let n=void 0;void 0!==r&&void 0!==a&&(n=r-a);let d=this.safeString(e,"percent");return void 0!==d&&(d=d.replace("%",""),d=parseFloat(d)),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:n,close:r,last:r,previousClose:void 0,change:a,percentage:d,average:void 0,baseVolume:o,quoteVolume:this.safeFloat(e,"amount"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetMdata(this.extend({cmd:"ticker",pair:i.id},t));return this.parseTicker(s.result,i)}parseTickers(e,t){let i=[];for(let s=0;s<e.length;s++){let r=this.parseTicker(e[s]);(void 0===t||this.inArray(r.symbol,t))&&i.push(r)}return i}async fetchTickers(e,t={}){let i=await this.publicGetMdata(this.extend({cmd:"marketAll"},t)),s=this.parseTickers(i.result,e);return this.indexBy(s,"symbol")}parseTrade(e,t){let i=this.safeInteger(e,"time");i=this.safeInteger(e,"createdAt",i);let s=this.safeInteger(e,"side");s=1===(s=this.safeInteger(e,"order_side",s))?"buy":"sell";let r=void 0;if(void 0===t){let i=this.safeString(e,"pair");if(void 0===i){let t=this.safeString(e,"coin_symbol"),s=this.safeString(e,"currency_symbol");void 0!==t&&void 0!==s&&(i=t+"_"+s)}i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(r=t.symbol);let a=void 0,o=this.safeFloat(e,"fee"),n=this.safeString(e,"fee_symbol");void 0!==n&&(n=n in this.currencies_by_id?this.currencies_by_id[n].code:this.commonCurrencyCode(n));let d=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),h=d*c;return void 0!==o&&(a={cost:o,currency:n,rate:void 0}),{info:e,id:this.safeString(e,"id"),order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:r,type:"limit",takerOrMaker:void 0,side:s,price:d,amount:c,cost:h,fee:a}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=i||200,o=await this.publicGetMdata(this.extend({cmd:"deals",pair:r.id,size:a},s));return this.parseTrades(o.result,r,t,i)}async fetchOrderBook(e,t=200,i={}){await this.loadMarkets();let s={cmd:"depth",pair:this.market(e).id};s.size=t;let r=await this.publicGetMdata(this.extend(s,i));return this.parseOrderBook(r.result,this.safeFloat(r.result,"update_time"),"bids","asks","price","volume")}parseOHLCV(e,t,i="1m",s,r){return[e.time,this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"vol")]}async fetchOHLCV(e,t="1m",i,s=1e3,r={}){await this.loadMarkets();let a=this.market(e),o=await this.publicGetMdata(this.extend({cmd:"kline",pair:a.id,period:this.timeframes[t],size:s},r));return this.parseOHLCVs(o.result,a,t,i,s)}async fetchCurrencies(e={}){let t=(await this.privatePostTransfer({cmd:"transfer/coinList",body:{}})).result,i={};for(let e=0;e<t.length;e++){let s=t[e],r=s.symbol,a=this.commonCurrencyCode(r),o=8,n=s.enable_deposit,d=s.enable_withdraw,c=!(!n||!d);i[a]={id:r,code:a,info:s,name:s.name,active:c,fee:void 0,precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,o)}}}}return i}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostTransfer({cmd:"transfer/assets",body:this.extend({select:1},e)})).result,i={info:t},s=void 0;s="assets_list"in t?this.indexBy(t.assets_list,"coin_symbol"):t;let r=Object.keys(s);for(let e=0;e<r.length;e++){let t=r[e],a=t.toUpperCase();a.indexOf("TOTAL_")>=0&&(a=a.slice(6)),a in this.currencies_by_id&&(a=this.currencies_by_id[a].code);let o=this.account(),n=s[t];"string"==typeof n?(n=parseFloat(n),o.free=n,o.used=0,o.total=n):(o.free=parseFloat(n.balance),o.used=parseFloat(n.freeze),o.total=this.sum(o.free,o.used)),i[a]=o}return this.parseBalance(i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n="limit"===t?2:1,d="buy"===i?1:2,c=await this.privatePostOrderpending({cmd:"orderpending/trade",body:this.extend({pair:o.id,account_type:0,order_type:n,order_side:d,pay_bix:0,amount:s,price:r},a)});return{info:c,id:this.safeString(c,"result")}}async cancelOrder(e,t,i={}){return await this.privatePostOrderpending({cmd:"orderpending/cancelTrade",body:this.extend({orders_id:e},i)})}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostOrderpending({cmd:"orderpending/order",body:this.extend({id:e},i)}),r=this.safeValue(s,"result");if(this.isEmpty(r))throw new h(this.id+" order "+e+" not found");return this.parseOrder(r)}parseOrder(e,t){let i=void 0;if(void 0===t){let i=void 0,s=this.safeString(e,"coin_symbol"),r=this.safeString(e,"currency_symbol");void 0!==s&&void 0!==r&&(i=s+"_"+r),i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(i=t.symbol);let s=1===e.order_type?"market":"limit",r=e.createdAt,a=this.safeFloat(e,"price"),o=this.safeFloat(e,"deal_price"),n=this.safeFloat(e,"deal_amount"),d=this.safeFloat(e,"amount"),c=this.safeFloat2(e,"deal_money","money"),h=void 0;void 0!==n&&(void 0!==d&&(h=d-n),void 0===c&&(c=a*n));let l=1===e.order_side?"buy":"sell",u=this.parseOrderStatus(this.safeString(e,"status"));return{info:e,id:this.safeString(e,"id"),timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:i,type:s,side:l,price:a,amount:d,cost:c||parseFloat(a)*n,average:o,filled:n,remaining:h,status:u,fee:this.safeFloat(e,"fee")}}parseOrderStatus(e){return this.safeString({1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"canceled"},e,e)}async fetchOpenOrders(e,t,i,s={}){let r=void 0,a=void 0;void 0!==e&&(await this.loadMarkets(),a=(r=this.market(e)).id);let o=i||200,n=await this.privatePostOrderpending({cmd:"orderpending/orderPendingList",body:this.extend({pair:a,account_type:0,page:1,size:o},s)}),d=this.safeValue(n.result,"items",[]);return this.parseOrders(d,r,t,i)}async fetchClosedOrders(e,t,i=200,s={}){if(void 0===e)throw new a(this.id+" fetchClosedOrders requires a symbol argument");await this.loadMarkets();let r=this.market(e),o=await this.privatePostOrderpending({cmd:"orderpending/pendingHistoryList",body:this.extend({pair:r.id,account_type:0,page:1,size:i},s)}),n=this.safeValue(o.result,"items",[]);return this.parseOrders(n,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();let r=this.market(e),o=i||200,n=await this.privatePostOrderpending({cmd:"orderpending/orderHistoryList",body:this.extend({pair:r.id,account_type:0,page:1,size:o,coin_symbol:r.baseId,currency_symbol:r.quoteId},s)}),d=this.safeValue(n.result,"items",[]);return this.parseTrades(d,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privatePostTransfer({cmd:"transfer/transferIn",body:this.extend({coin_symbol:i.id},t)});return{currency:e,address:this.safeString(s,"result"),tag:void 0,info:s}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();let o=this.currency(e);if(void 0===this.password&&!("trade_pwd"in a))throw new r(this.id+" withdraw() requires this.password set on the exchange instance or a trade_pwd parameter");if(!("totp_code"in a))throw new r(this.id+" withdraw() requires a totp_code parameter for 2FA authentication");let n={trade_pwd:this.password,coin_symbol:o.id,amount:t,addr:i};return void 0!==s&&(n.address_remark=s),{info:await this.privatePostTransfer({cmd:"transfer/transferOut",body:this.extend(n,a)}),id:void 0}}async fetchFundingFees(e,t={}){await this.loadMarkets();let i={},s={};void 0===e&&(e=Object.keys(this.currencies));for(let r=0;r<e.length;r++){let a=e[r],o=this.currency(a),n=await this.privatePostTransfer({cmd:"transfer/transferOutInfo",body:this.extend({coin_symbol:o.id},t)});s[a]=n,i[a]=n.result.withdraw_fee}return{info:s,withdraw:i,deposit:{}}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e,n=this.json([s]);return"public"===t?"GET"!==i?a={cmds:n}:Object.keys(s).length&&(o+="?"+this.urlencode(s)):(this.checkRequiredCredentials(),a={cmds:n,apikey:this.apiKey,sign:this.hmac(this.encode(n),this.encode(this.secret),"md5")}),void 0!==a&&(a=this.json(a,{convertArraysToObjects:!0})),{url:o,method:i,body:a,headers:{"Content-Type":"application/json"}}}handleErrors(e,t,i,s,a,o,n){if(o.length>0&&"{"===o[0]){if("error"in n){if("code"in n.error){let e=this.safeString(n.error,"code"),t=this.id+" "+o;const i=this.exceptions;throw e in i?new i[e](t):new r(t)}throw new r(this.id+': "error" in response: '+o)}if(!("result"in n))throw new r(this.id+" "+o)}}async request(e,t="public",i="GET",s={},r,a){let o=await this.fetch2(e,t,i,s,r,a);return"GET"===i?o:o.result[0]}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:o,ExchangeNotAvailable:n,InvalidNonce:d}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bigone",name:"BigONE",countries:["GB"],version:"v2",has:{cancelAllOrders:!0,createMarketOrder:!1,fetchDepositAddress:!0,fetchMyTrades:!0,fetchOHLCV:!1,fetchOpenOrders:!0,fetchTickers:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/42803606-27c2b5ec-89af-11e8-8d15-9c8c245e8b2c.jpg",api:{public:"https://big.one/api/v2",private:"https://big.one/api/v2/viewer"},www:"https://big.one",doc:"https://open.big.one/docs/api.html",fees:"https://help.big.one/hc/en-us/articles/115001933374-BigONE-Fee-Policy",referral:"https://b1.run/users/new?code=D3LLBVFT"},api:{public:{get:["ping","markets","markets/{symbol}/depth","markets/{symbol}/trades","markets/{symbol}/ticker","orders","orders/{id}","tickers","trades"]},private:{get:["accounts","orders","orders/{order_id}","trades","withdrawals","deposits"],post:["orders","orders/{order_id}/cancel","orders/cancel_all"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.002,ETH:.01,EOS:.01,ZEC:.002,LTC:.01,QTUM:.01,ETC:.01,GAS:0,BTS:1,GXS:.1,BITCNY:1}}},exceptions:{codes:{401:o,10030:d},detail:{"Internal server error":n}}})}async fetchMarkets(e={}){let t=(await this.publicGetMarkets()).data,i=[];this.options.marketsByUuid={};for(let e=0;e<t.length;e++){let s=t[e],r=s.name,a=s.uuid,o=s.baseAsset.symbol,n=s.quoteAsset.symbol,d=this.commonCurrencyCode(o),c=this.commonCurrencyCode(n),h=d+"/"+c,l={amount:s.baseScale,price:s.quoteScale};const u={id:r,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:!0,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:Math.pow(10,l.amount)},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)},cost:{min:void 0,max:void 0}},info:s};this.options.marketsByUuid[a]=u,i.push(u)}return i}parseTicker(e,t){if(void 0===t){let i=this.safeString(e,"market_id");i in this.markets_by_id&&(t=this.markets_by_id[i])}let i=void 0;void 0!==t&&(i=t.symbol);let s=this.milliseconds(),r=this.safeFloat(e,"close");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e.bid,"price"),bidVolume:this.safeFloat(e.bid,"amount"),ask:this.safeFloat(e.ask,"price"),askVolume:this.safeFloat(e.ask,"amount"),vwap:void 0,open:this.safeFloat(e,"open"),close:r,last:r,previousClose:void 0,change:this.safeFloat(e,"daily_change"),percentage:this.safeFloat(e,"daily_change_perc"),average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetMarketsSymbolTicker(this.extend({symbol:i.id},t));return this.parseTicker(s.data,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=(await this.publicGetTickers(t)).data,s={};for(let e=0;e<i.length;e++){let t=this.parseTicker(i[e]);s[t.symbol]=t}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetMarketsSymbolDepth(this.extend({symbol:this.marketId(e)},i));return this.parseOrderBook(s.data,void 0,"bids","asks","price","amount")}parseTrade(e,t){let i=e.node,s=this.parse8601(i.inserted_at),r=this.safeFloat(i,"price"),a=this.safeFloat(i,"amount");if(void 0===t){let e=this.safeString(i,"market_id");e in this.markets_by_id&&(t=this.markets_by_id[e])}let o=void 0;void 0!==t&&(o=t.symbol);let n=this.costToPrecision(o,r*a),d=void 0;return d="ASK"===i.taker_side?"sell":"buy",{timestamp:s,datetime:this.iso8601(s),symbol:o,id:this.safeString(i,"id"),order:void 0,type:"limit",side:d,price:r,amount:a,cost:parseFloat(n),fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:r.id};void 0!==i&&(a.first=i);let o=await this.publicGetMarketsSymbolTrades(this.extend(a,s));return this.parseTrades(o.data.edges,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetAccounts(e),i={info:t},s=t.data;for(let e=0;e<s.length;e++){let t=s[e],r=t.asset_id,a=this.commonCurrencyCode(r);r in this.currencies_by_id&&(a=this.currencies_by_id[r].code);let o=this.safeFloat(t,"balance"),n=this.safeFloat(t,"locked_balance"),d=void 0;void 0!==o&&void 0!==n&&(d=o-n);let c={free:d,used:n,total:o};i[a]=c}return this.parseBalance(i)}parseOrder(e,t){let i=this.safeString(e,"id");if(void 0===t){let i=this.safeString(e,"market_id");if(i in this.markets_by_id)t=this.markets_by_id[i];else{let i=this.safeString(e,"market_uuid");i in this.options.marketsByUuid&&(t=this.options.marketsByUuid[i])}}let s=void 0;void 0!==t&&(s=t.symbol);let r=this.parse8601(this.safeString(e,"inserted_at")),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),n=this.safeFloat(e,"filled_amount"),d=Math.max(0,o-n),c=this.parseOrderStatus(this.safeString(e,"state")),h=this.safeString(e,"side");return h="BID"===h?"buy":"sell",{id:i,datetime:this.iso8601(r),timestamp:r,status:c,symbol:s,type:void 0,side:h,price:a,cost:void 0,amount:o,filled:n,remaining:d,trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e);i="buy"===i?"BID":"ASK";let n={market_id:o.id,side:i,amount:this.amountToPrecision(e,s),price:this.priceToPrecision(e,r)},d=await this.privatePostOrders(this.extend(n,a)),c=this.safeValue(d,"data");return this.parseOrder(c,o)}async cancelOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privatePostOrdersOrderIdCancel(this.extend(s,i)),a=this.safeValue(r,"data");return this.parseOrder(a)}async cancelAllOrders(e,t={}){await this.loadMarkets();const i=await this.privatePostOrdersOrderIdCancel(t);return this.parseOrders(i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={order_id:e},r=await this.privateGetOrdersOrderId(this.extend(s,i)),a=this.safeValue(r,"data");return this.parseOrder(a)}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();let r=this.market(e),o={market_id:r.id};void 0!==i&&(o.first=i);let n=await this.privateGetOrders(this.extend(o,s)),d=this.safeValue(n,"data",{}),c=this.safeValue(d,"edges",[]),h=[];for(let e=0;e<c.length;e++)h.push(this.parseOrder(c[e].node,r));return this.filterBySymbolSinceLimit(h,e,t,i)}parseOrderStatus(e){return this.safeString({PENDING:"open",FILLED:"closed",CANCELED:"canceled"},e)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"PENDING"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"FILLED"},s))}nonce(){return 1e3*this.microseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.omit(s,this.extractParams(e)),n=this.urls.api[t]+"/"+this.implodeParams(e,s);if("public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();let e=this.nonce(),t={type:"OpenAPI",sub:this.apiKey,nonce:e};r={Authorization:"Bearer "+this.jwt(t,this.secret)},"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):"POST"===i&&(r["Content-Type"]="application/json",a=this.json(o))}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&!(o.length<2||"{"!==o[0]&&"["!==o[0])){const e=this.safeValue(n,"error"),t=this.safeValue(n,"errors"),i=this.safeValue(n,"data");if(void 0!==e||void 0!==t||void 0===i){const i=this.id+" "+this.json(n);let s=void 0;void 0!==e&&(s=this.safeInteger(e,"code"));let a=this.exceptions.codes;throw void 0!==t&&(Array.isArray(t)?s=this.safeString(t[0],"code"):(s=this.safeString(t,"detail"),a=this.exceptions.detail)),s in a?new a[s](i):new r(i)}}}}},function(e,t,i){"use strict";const s=i(45);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"binanceje",name:"Binance Jersey",countries:["JE"],certified:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/54874009-d526eb00-4df3-11e9-928c-ce6a2b914cd1.jpg",api:{web:"https://www.binance.je",wapi:"https://api.binance.je/wapi/v3",public:"https://api.binance.je/api/v1",private:"https://api.binance.je/api/v3",v3:"https://api.binance.je/api/v3",v1:"https://api.binance.je/api/v1"},www:"https://www.binance.je",referral:"https://www.binance.je/?ref=35047921",doc:"https://github.com/binance-exchange/binance-official-api-docs/blob/master/rest-api.md",fees:"https://www.binance.je/fees.html"},fees:{trading:{tierBased:!1,percentage:!0,taker:.005,maker:.005},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,ETH:.01},deposit:{}}}})}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:r,ExchangeError:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bit2c",name:"Bit2C",countries:["IL"],rateLimit:3e3,has:{CORS:!1,fetchOpenOrders:!0,fetchMyTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766119-3593220e-5ece-11e7-8b3a-5a041f6bcc3f.jpg",api:"https://bit2c.co.il",www:"https://www.bit2c.co.il",doc:["https://www.bit2c.co.il/home/api","https://github.com/OferE/bit2c"]},api:{public:{get:["Exchanges/{pair}/Ticker","Exchanges/{pair}/orderbook","Exchanges/{pair}/trades","Exchanges/{pair}/lasttrades"]},private:{post:["Merchant/CreateCheckout","Order/AddCoinFundsRequest","Order/AddFund","Order/AddOrder","Order/AddOrderMarketPriceBuy","Order/AddOrderMarketPriceSell","Order/CancelOrder","Order/AddCoinFundsRequest","Order/AddStopOrder","Payment/GetMyId","Payment/Send","Payment/Pay"],get:["Account/Balance","Account/Balance/v2","Order/MyOrders","Order/GetById","Order/AccountHistory","Order/OrderHistory"]}},markets:{"BTC/NIS":{id:"BtcNis",symbol:"BTC/NIS",base:"BTC",quote:"NIS"},"ETH/NIS":{id:"EthNis",symbol:"ETH/NIS",base:"ETH",quote:"NIS"},"BCH/NIS":{id:"BchAbcNis",symbol:"BCH/NIS",base:"BCH",quote:"NIS"},"LTC/NIS":{id:"LtcNis",symbol:"LTC/NIS",base:"LTC",quote:"NIS"},"ETC/NIS":{id:"EtcNis",symbol:"ETC/NIS",base:"ETC",quote:"NIS"},"BTG/NIS":{id:"BtgNis",symbol:"BTG/NIS",base:"BTG",quote:"NIS"},"BSV/NIS":{id:"BchSvNis",symbol:"BSV/NIS",base:"BSV",quote:"NIS"}},fees:{trading:{maker:.005,taker:.005}},options:{fetchTradesMethod:"public_get_exchanges_pair_lasttrades"}})}async fetchBalance(e={}){let t=await this.privateGetAccountBalanceV2(),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=this.account();if(r in t){let e="AVAILABLE_"+r;a.free=t[e],a.total=t[r],a.used=a.total-a.free}i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){let s=await this.publicGetExchangesPairOrderbook(this.extend({pair:this.marketId(e)},i));return this.parseOrderBook(s)}async fetchTicker(e,t={}){let i=await this.publicGetExchangesPairTicker(this.extend({pair:this.marketId(e)},t)),s=this.milliseconds(),r=this.safeFloat(i,"av"),a=this.safeFloat(i,"a"),o=void 0;void 0!==a&&void 0!==r&&(o=a*r);let n=this.safeFloat(i,"ll");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:this.safeFloat(i,"h"),bidVolume:void 0,ask:this.safeFloat(i,"l"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:r,baseVolume:a,quoteVolume:o,info:i}}async fetchTrades(e,t,i,s={}){let r=this.market(e),o=this.options.fetchTradesMethod,n=await this[o](this.extend({pair:r.id},s));if("string"==typeof n)throw new a(n);return this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o="privatePostOrderAddOrder",n={Amount:s,Pair:this.marketId(e)};"market"===t?o+="MarketPrice"+this.capitalize(i):(n.Price=r,n.Total=s*r,n.IsBid="buy"===i);let d=await this[o](this.extend(n,a));return{info:d,id:d.NewOrder.id}}async cancelOrder(e,t,i={}){return await this.privatePostOrderCancelOrder({id:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s);if("public"===t)e.indexOf("lasttrades")<0&&(o+=".json");else{this.checkRequiredCredentials();let e=this.nonce(),t=this.extend({nonce:e},s);a=this.urlencode(t);let i=this.hmac(this.encode(a),this.encode(this.secret),"sha512","base64");r={"Content-Type":"application/x-www-form-urlencoded",key:this.apiKey,sign:this.decode(i)}}return{url:o,method:i,body:a,headers:r}}async fetchOpenOrders(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new r(this.id+" fetchOpenOrders() requires a symbol argument");let a=this.market(e),o=await this.privateGetOrderMyOrders(this.extend({pair:a.id},s)),n=this.safeValue(o,a.id,{}),d=this.safeValue(n,"ask"),c=this.safeValue(n,"bid");return this.parseOrders(this.arrayConcat(d,c),a,t,i)}parseOrder(e,t){let i=e.created,s=e.price,r=e.amount,a=s*r,o=void 0;void 0!==t&&(o=t.symbol);let n=this.safeValue(e,"type");0===n?n="buy":1===n&&(n="sell");let d=this.safeString(e,"id"),c=this.safeString(e,"status");return{id:d,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:c,symbol:o,type:void 0,side:n,price:s,amount:r,filled:void 0,remaining:void 0,cost:a,trades:void 0,fee:void 0,info:e}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==i&&(a.take=i),a.take=i,void 0!==t&&(a.toTime=this.ymd(this.milliseconds(),"."),a.fromTime=this.ymd(t,".")),void 0!==e&&(r=this.market(e),a.pair=r.id);let o=await this.privateGetOrderOrderhistory(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseTrade(e,t){let i=void 0,s=void 0,r=void 0,a=void 0,o=void 0,n=void 0,d=void 0,c=this.safeString(e,"reference");if(void 0!==c){i=1e3*this.safeInteger(e,"ticks"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"firstAmount");let h=c.split("|");if(void 0===t){let i=this.safeString(e,"pair");i in this.markets_by_id[i]?t=this.markets_by_id[i]:h[0]in this.markets_by_id&&(t=this.markets_by_id[h[0]])}o=h[1],s=h[2],0===(d=this.safeInteger(e,"action"))?d="buy":1===d&&(d="sell"),n=this.safeFloat(e,"feeAmount")}else i=1e3*this.safeInteger(e,"date"),s=this.safeString(e,"tid"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),void 0!==(d=this.safeValue(e,"isBid"))&&(d=d?"buy":"sell");let h=void 0;return void 0!==t&&(h=t.symbol),{info:e,id:s,timestamp:i,datetime:this.iso8601(i),symbol:h,order:o,type:void 0,side:d,takerOrMaker:void 0,price:r,amount:a,cost:r*a,fee:{cost:n,currency:"NIS",rate:void 0}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,AuthenticationError:a,InvalidNonce:o,InsufficientFunds:n,InvalidOrder:d,OrderNotFound:c,PermissionDenied:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitbank",name:"bitbank",countries:["JP"],version:"v1",has:{fetchOHLCV:!0,fetchOpenOrders:!0,fetchMyTrades:!0,fetchDepositAddress:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","4h":"4hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/1294454/37808081-b87f2d9c-2e59-11e8-894d-c1900b7584fe.jpg",api:{public:"https://public.bitbank.cc",private:"https://api.bitbank.cc"},www:"https://bitbank.cc/",doc:"https://docs.bitbank.cc/",fees:"https://bitbank.cc/docs/fees/"},api:{public:{get:["{pair}/ticker","{pair}/depth","{pair}/transactions","{pair}/transactions/{yyyymmdd}","{pair}/candlestick/{candletype}/{yyyymmdd}"]},private:{get:["user/assets","user/spot/order","user/spot/active_orders","user/spot/trade_history","user/withdrawal_account"],post:["user/spot/order","user/spot/cancel_order","user/spot/cancel_orders","user/spot/orders_info","user/request_withdrawal"]}},markets:{"BCH/BTC":{id:"bcc_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"bcc",quoteId:"btc"},"BCH/JPY":{id:"bcc_jpy",symbol:"BCH/JPY",base:"BCH",quote:"JPY",baseId:"bcc",quoteId:"jpy"},"MONA/BTC":{id:"mona_btc",symbol:"MONA/BTC",base:"MONA",quote:"BTC",baseId:"mona",quoteId:"btc"},"MONA/JPY":{id:"mona_jpy",symbol:"MONA/JPY",base:"MONA",quote:"JPY",baseId:"mona",quoteId:"jpy"},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc"},"XRP/JPY":{id:"xrp_jpy",symbol:"XRP/JPY",base:"XRP",quote:"JPY",baseId:"xrp",quoteId:"jpy"},"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy"}},fees:{trading:{maker:0,taker:0},funding:{withdraw:{BTC:.001,LTC:.001,XRP:.15,ETH:5e-4,MONA:.001,BCC:.001}}},precision:{price:8,amount:8},exceptions:{20001:a,20002:a,20003:a,20005:a,20004:o,40020:d,40021:d,40025:r,40013:c,40014:c,50008:h,50009:c,50010:c,60001:n,60005:d}})}parseTicker(e,t){let i=t.symbol,s=e.timestamp,r=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetPairTicker(this.extend({pair:i.id},t));return this.parseTicker(s.data,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=(await this.publicGetPairDepth(this.extend({pair:this.marketId(e)},i))).data;return this.parseOrderBook(s,s.timestamp)}parseTrade(e,t){let i=e.executed_at,s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount"),a=t.symbol,o=parseFloat(this.costToPrecision(a,s*r)),n=this.safeString(e,"transaction_id"),d=this.safeString(e,"maker_taker");n||(n=this.safeString(e,"trade_id"));let c=void 0;return"fee_amount_quote"in e&&(c={currency:t.quote,cost:this.safeFloat(e,"fee_amount_quote")}),{timestamp:i,datetime:this.iso8601(i),symbol:a,id:n,order:this.safeString(e,"order_id"),type:this.safeString(e,"type"),side:e.side,takerOrMaker:d,price:s,amount:r,cost:o,fee:c,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetPairTransactions(this.extend({pair:r.id},s));return this.parseTrades(a.data.transactions,r,t,i)}parseOHLCV(e,t,i="5m",s,r){return[e[5],parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o=this.milliseconds();o=(o=this.ymd(o)).split("-");let n=(await this.publicGetPairCandlestickCandletypeYyyymmdd(this.extend({pair:a.id,candletype:this.timeframes[t],yyyymmdd:o.join("")},r))).data.candlestick[0].ohlcv;return this.parseOHLCVs(n,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetUserAssets(e),i={info:t},s=t.data.assets;for(let e=0;e<s.length;e++){let t=s[e],r=t.asset,a=r;r in this.currencies_by_id&&(a=this.currencies_by_id[r].code);let o={free:parseFloat(t.free_amount),used:parseFloat(t.locked_amount),total:parseFloat(t.onhand_amount)};i[a]=o}return this.parseBalance(i)}parseOrder(e,t){let i=this.safeString(e,"pair"),s=void 0;i&&!t&&i in this.marketsById&&(t=this.marketsById[i]),t&&(s=t.symbol);let r=this.safeInteger(e,"ordered_at"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"start_amount"),n=this.safeFloat(e,"executed_amount"),d=this.safeFloat(e,"remaining_amount"),c=n*this.safeFloat(e,"average_price"),h=this.safeString(e,"status");h="FULLY_FILLED"===h?"closed":"CANCELED_UNFILLED"===h||"CANCELED_PARTIALLY_FILLED"===h?"canceled":"open";let l=this.safeString(e,"type");void 0!==l&&(l=l.toLowerCase());let u=this.safeString(e,"side");return void 0!==u&&(u=u.toLowerCase()),{id:this.safeString(e,"order_id"),datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:h,symbol:s,type:l,side:u,price:a,cost:c,amount:o,filled:n,remaining:d,trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e);if(void 0===r)throw new d(this.id+" createOrder requires a price argument for both market and limit orders");let n={pair:o.id,amount:this.amountToPrecision(e,s),price:this.priceToPrecision(e,r),side:i,type:t},c=await this.privatePostUserSpotOrder(this.extend(n,a)),h=c.data.order_id,l=this.parseOrder(c.data,o);return this.orders[h]=l,l}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t);return(await this.privatePostUserSpotCancelOrder(this.extend({order_id:e,pair:s.id},i))).data}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t),r=await this.privateGetUserSpotOrder(this.extend({order_id:e,pair:s.id},i));return this.parseOrder(r.data)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={pair:r.id};void 0!==i&&(a.count=i),void 0!==t&&(a.since=parseInt(t/1e3));let o=await this.privateGetUserSpotActiveOrders(this.extend(a,s));return this.parseOrders(o.data.orders,r,t,i)}async fetchMyTrades(e,t,i,s={}){let r=void 0;void 0!==e&&(await this.loadMarkets(),r=this.market(e));let a={};void 0!==r&&(a.pair=r.id),void 0!==i&&(a.count=i),void 0!==t&&(a.since=parseInt(t/1e3));let o=await this.privateGetUserSpotTradeHistory(this.extend(a,s));return this.parseTrades(o.data.trades,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privateGetUserWithdrawalAccount(this.extend({asset:i.id},t)),r=s.data.accounts;return{currency:i,address:this.safeString(r[0],"address"),tag:void 0,info:s}}async withdraw(e,t,i,s,a={}){if(!("uuid"in a))throw new r(this.id+" uuid is required for withdrawal");await this.loadMarkets();let o=this.currency(e),n=await this.privatePostUserRequestWithdrawal(this.extend({asset:o.id,amount:t},a));return{info:n,id:n.data.txid}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.omit(s,this.extractParams(e)),n=this.urls.api[t]+"/";if("public"===t)n+=this.implodeParams(e,s),Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();let t=this.nonce().toString(),d=t;n+=this.version+"/"+this.implodeParams(e,s),"POST"===i?d+=a=this.json(o):(d+="/"+this.version+"/"+e,Object.keys(o).length&&(n+="?"+(o=this.urlencode(o)),d+="?"+o)),r={"Content-Type":"application/json","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":t,"ACCESS-SIGNATURE":this.hmac(this.encode(d),this.encode(this.secret))}}return{url:n,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o),d=this.safeInteger(n,"success"),c=this.safeValue(n,"data");if(!d||!c){let e={10000:"URL does not exist",10001:"A system error occurred. Please contact support",10002:"Invalid JSON format. Please check the contents of transmission",10003:"A system error occurred. Please contact support",10005:"A timeout error occurred. Please wait for a while and try again",20001:"API authentication failed",20002:"Illegal API key",20003:"API key does not exist",20004:"API Nonce does not exist",20005:"API signature does not exist",20011:"Two-step verification failed",20014:"SMS authentication failed",30001:"Please specify the order quantity",30006:"Please specify the order ID",30007:"Please specify the order ID array",30009:"Please specify the stock",30012:"Please specify the order price",30013:"Trade Please specify either",30015:"Please specify the order type",30016:"Please specify asset name",30019:"Please specify uuid",30039:"Please specify the amount to be withdrawn",40001:"The order quantity is invalid",40006:"Count value is invalid",40007:"End time is invalid",40008:"end_id Value is invalid",40009:"The from_id value is invalid",40013:"The order ID is invalid",40014:"The order ID array is invalid",40015:"Too many specified orders",40017:"Incorrect issue name",40020:"The order price is invalid",40021:"The trading classification is invalid",40022:"Start date is invalid",40024:"The order type is invalid",40025:"Incorrect asset name",40028:"uuid is invalid",40048:"The amount of withdrawal is illegal",50003:"Currently, this account is in a state where you can not perform the operation you specified. Please contact support",50004:"Currently, this account is temporarily registered. Please try again after registering your account",50005:"Currently, this account is locked. Please contact support",50006:"Currently, this account is locked. Please contact support",50008:"User identification has not been completed",50009:"Your order does not exist",50010:"Can not cancel specified order",50011:"API not found",60001:"The number of possessions is insufficient",60002:"It exceeds the quantity upper limit of the tender buying order",60003:"The specified quantity exceeds the limit",60004:"The specified quantity is below the threshold",60005:"The specified price is above the limit",60006:"The specified price is below the lower limit",70001:"A system error occurred. Please contact support",70002:"A system error occurred. Please contact support",70003:"A system error occurred. Please contact support",70004:"We are unable to accept orders as the transaction is currently suspended",70005:"Order can not be accepted because purchase order is currently suspended",70006:"We can not accept orders because we are currently unsubscribed ",70009:"We are currently temporarily restricting orders to be carried out. Please use the limit order.",70010:"We are temporarily raising the minimum order quantity as the system load is now rising."},t=this.exceptions,i=this.safeString(c,"code"),s=this.safeString(e,i,"Error"),a=this.safeValue(t,i);throw void 0!==a?new a(s):new r(this.id+" "+this.json(n))}return n}}},function(e,t,i){"use strict";const s=i(1),{InvalidNonce:r,InsufficientFunds:a,AuthenticationError:o,InvalidOrder:n,ExchangeError:d}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitbay",name:"BitBay",countries:["MT","EU"],rateLimit:1e3,has:{CORS:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766132-978a7bd8-5ece-11e7-9540-bc96d1e9bbb8.jpg",www:"https://bitbay.net",api:{public:"https://bitbay.net/API/Public",private:"https://bitbay.net/API/Trading/tradingApi.php"},doc:["https://bitbay.net/public-api","https://bitbay.net/account/tab-api","https://github.com/BitBayNet/API"],fees:"https://bitbay.net/en/fees"},api:{public:{get:["{id}/all","{id}/market","{id}/orderbook","{id}/ticker","{id}/trades"]},private:{post:["info","trade","cancel","orderbook","orders","transfer","withdraw","history","transactions"]}},markets:{"BTC/USD":{id:"BTCUSD",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"BTC",quoteId:"USD"},"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"BTC",quoteId:"EUR"},"BTC/PLN":{id:"BTCPLN",symbol:"BTC/PLN",base:"BTC",quote:"PLN",baseId:"BTC",quoteId:"PLN"},"LTC/USD":{id:"LTCUSD",symbol:"LTC/USD",base:"LTC",quote:"USD",baseId:"LTC",quoteId:"USD"},"LTC/EUR":{id:"LTCEUR",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"LTC",quoteId:"EUR"},"LTC/PLN":{id:"LTCPLN",symbol:"LTC/PLN",base:"LTC",quote:"PLN",baseId:"LTC",quoteId:"PLN"},"LTC/BTC":{id:"LTCBTC",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"LTC",quoteId:"BTC"},"ETH/USD":{id:"ETHUSD",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"ETH",quoteId:"USD"},"ETH/EUR":{id:"ETHEUR",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"ETH",quoteId:"EUR"},"ETH/PLN":{id:"ETHPLN",symbol:"ETH/PLN",base:"ETH",quote:"PLN",baseId:"ETH",quoteId:"PLN"},"ETH/BTC":{id:"ETHBTC",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"ETH",quoteId:"BTC"},"LSK/USD":{id:"LSKUSD",symbol:"LSK/USD",base:"LSK",quote:"USD",baseId:"LSK",quoteId:"USD"},"LSK/EUR":{id:"LSKEUR",symbol:"LSK/EUR",base:"LSK",quote:"EUR",baseId:"LSK",quoteId:"EUR"},"LSK/PLN":{id:"LSKPLN",symbol:"LSK/PLN",base:"LSK",quote:"PLN",baseId:"LSK",quoteId:"PLN"},"LSK/BTC":{id:"LSKBTC",symbol:"LSK/BTC",base:"LSK",quote:"BTC",baseId:"LSK",quoteId:"BTC"},"BCH/USD":{id:"BCCUSD",symbol:"BCH/USD",base:"BCH",quote:"USD",baseId:"BCC",quoteId:"USD"},"BCH/EUR":{id:"BCCEUR",symbol:"BCH/EUR",base:"BCH",quote:"EUR",baseId:"BCC",quoteId:"EUR"},"BCH/PLN":{id:"BCCPLN",symbol:"BCH/PLN",base:"BCH",quote:"PLN",baseId:"BCC",quoteId:"PLN"},"BCH/BTC":{id:"BCCBTC",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"BCC",quoteId:"BTC"},"BTG/USD":{id:"BTGUSD",symbol:"BTG/USD",base:"BTG",quote:"USD",baseId:"BTG",quoteId:"USD"},"BTG/EUR":{id:"BTGEUR",symbol:"BTG/EUR",base:"BTG",quote:"EUR",baseId:"BTG",quoteId:"EUR"},"BTG/PLN":{id:"BTGPLN",symbol:"BTG/PLN",base:"BTG",quote:"PLN",baseId:"BTG",quoteId:"PLN"},"BTG/BTC":{id:"BTGBTC",symbol:"BTG/BTC",base:"BTG",quote:"BTC",baseId:"BTG",quoteId:"BTC"},"DASH/USD":{id:"DASHUSD",symbol:"DASH/USD",base:"DASH",quote:"USD",baseId:"DASH",quoteId:"USD"},"DASH/EUR":{id:"DASHEUR",symbol:"DASH/EUR",base:"DASH",quote:"EUR",baseId:"DASH",quoteId:"EUR"},"DASH/PLN":{id:"DASHPLN",symbol:"DASH/PLN",base:"DASH",quote:"PLN",baseId:"DASH",quoteId:"PLN"},"DASH/BTC":{id:"DASHBTC",symbol:"DASH/BTC",base:"DASH",quote:"BTC",baseId:"DASH",quoteId:"BTC"},"GAME/USD":{id:"GAMEUSD",symbol:"GAME/USD",base:"GAME",quote:"USD",baseId:"GAME",quoteId:"USD"},"GAME/EUR":{id:"GAMEEUR",symbol:"GAME/EUR",base:"GAME",quote:"EUR",baseId:"GAME",quoteId:"EUR"},"GAME/PLN":{id:"GAMEPLN",symbol:"GAME/PLN",base:"GAME",quote:"PLN",baseId:"GAME",quoteId:"PLN"},"GAME/BTC":{id:"GAMEBTC",symbol:"GAME/BTC",base:"GAME",quote:"BTC",baseId:"GAME",quoteId:"BTC"},"XRP/USD":{id:"XRPUSD",symbol:"XRP/USD",base:"XRP",quote:"USD",baseId:"XRP",quoteId:"USD"},"XRP/EUR":{id:"XRPEUR",symbol:"XRP/EUR",base:"XRP",quote:"EUR",baseId:"XRP",quoteId:"EUR"},"XRP/PLN":{id:"XRPPLN",symbol:"XRP/PLN",base:"XRP",quote:"PLN",baseId:"XRP",quoteId:"PLN"},"XRP/BTC":{id:"XRPBTC",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"XRP",quoteId:"BTC"},"XIN/BTC":{id:"XINBTC",symbol:"XIN/BTC",base:"XIN",quote:"BTC",baseId:"XIN",quoteId:"BTC"}},fees:{trading:{maker:.003,taker:.0043},funding:{withdraw:{BTC:9e-4,LTC:.005,ETH:.00126,LSK:.2,BCH:6e-4,GAME:.005,DASH:.001,BTG:8e-4,PLN:4,EUR:1.5}}},exceptions:{400:d,401:n,402:n,403:n,404:n,405:n,406:a,408:n,501:o,502:o,503:r,504:d,505:o,506:o,509:d,510:d}})}async fetchBalance(e={}){let t=await this.privatePostInfo();if("balances"in t){let e=t.balances,i={info:e},s=Object.keys(this.currencies);for(let t=0;t<s.length;t++){let r=s[t],a=this.currencies[r].id,o=this.account();a in e&&(o.free=parseFloat(e[a].available),o.used=parseFloat(e[a].locked),o.total=this.sum(o.free,o.used)),i[r]=o}return this.parseBalance(i)}throw new d(this.id+" empty balance response "+this.json(t))}async fetchOrderBook(e,t,i={}){let s=await this.publicGetIdOrderbook(this.extend({id:this.marketId(e)},i));return this.parseOrderBook(s)}async fetchTicker(e,t={}){let i=await this.publicGetIdTicker(this.extend({id:this.marketId(e)},t)),s=this.milliseconds(),r=this.safeFloat(i,"volume"),a=this.safeFloat(i,"vwap"),o=void 0;void 0!==r&&void 0!==a&&(o=r*a);let n=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"max"),low:this.safeFloat(i,"min"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:a,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(i,"average"),baseVolume:r,quoteVolume:o,info:i}}parseTrade(e,t){let i=1e3*e.date;return{id:e.tid,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.type,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetIdTrades(this.extend({id:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){if("limit"!==t)throw new d(this.id+" allows limit orders only");let o=this.market(e);return this.privatePostTrade(this.extend({type:i,currency:o.baseId,amount:s,payment_currency:o.quoteId,rate:r},a))}async cancelOrder(e,t,i={}){return await this.privatePostCancel({id:e})}isFiat(e){return e in{USD:!0,EUR:!0,PLN:!0}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a=void 0,o={currency:this.currency(e).id,quantity:t};return this.isFiat(e)?a="privatePostWithdraw":(a="privatePostTransfer",void 0!==s&&(i+="?dt="+s.toString()),o.address=i),{info:await this[a](this.extend(o,r)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];if("public"===t){let t=this.omit(s,this.extractParams(e));o+="/"+this.implodeParams(e,s)+".json",o+="?"+this.urlencode(t)}else this.checkRequiredCredentials(),a=this.urlencode(this.extend({method:e,moment:this.nonce()},s)),r={"Content-Type":"application/x-www-form-urlencoded","API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(a),this.encode(this.secret),"sha512")};return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o){if("string"==typeof a&&!(a.length<2)&&("{"===a[0]||"["===a[0])&&"code"in o){let e=o.code;const t=this.id+" "+this.json(o),i=this.exceptions;throw e in this.exceptions?new i[e](t):new d(t)}}}},function(e,t,i){"use strict";const s=i(25),{ExchangeError:r,NotSupported:a,InsufficientFunds:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitfinex2",name:"Bitfinex",countries:["VG"],version:"v2",certified:!1,has:{CORS:!0,createLimitOrder:!1,createMarketOrder:!1,createOrder:!1,deposit:!1,editOrder:!1,fetchDepositAddress:!1,fetchClosedOrders:!1,fetchFundingFees:!1,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!1,fetchOrder:!0,fetchTickers:!0,fetchTradingFee:!1,fetchTradingFees:!1,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},rateLimit:1500,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:"https://api.bitfinex.com",www:"https://www.bitfinex.com",doc:["https://docs.bitfinex.com/v2/docs/","https://github.com/bitfinexcom/bitfinex-api-node"],fees:"https://www.bitfinex.com/fees"},api:{v1:{get:["symbols","symbols_details"]},public:{get:["platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","stats1/{key}:{size}:{symbol}:{side}/{section}","stats1/{key}:{size}:{symbol}/{section}","stats1/{key}:{size}:{symbol}:long/last","stats1/{key}:{size}:{symbol}:long/hist","stats1/{key}:{size}:{symbol}:short/last","stats1/{key}:{size}:{symbol}:short/hist","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist"],post:["calc/trade/avg","calc/fx"]},private:{post:["auth/r/wallets","auth/r/orders/{symbol}","auth/r/orders/{symbol}/new","auth/r/orders/{symbol}/hist","auth/r/order/{symbol}:{id}/trades","auth/r/trades/hist","auth/r/trades/{symbol}/hist","auth/r/positions","auth/r/positions/hist","auth/r/funding/offers/{symbol}","auth/r/funding/offers/{symbol}/hist","auth/r/funding/loans/{symbol}","auth/r/funding/loans/{symbol}/hist","auth/r/funding/credits/{symbol}","auth/r/funding/credits/{symbol}/hist","auth/r/funding/trades/{symbol}/hist","auth/r/info/margin/{key}","auth/r/info/funding/{key}","auth/r/movements/hist","auth/r/movements/{currency}/hist","auth/r/stats/perf:{timeframe}/hist","auth/r/alerts","auth/w/alert/set","auth/w/alert/{type}:{symbol}:{price}/del","auth/calc/order/avail","auth/r/ledgers/{symbol}/hist","auth/r/settings","auth/w/settings/set","auth/w/settings/del","auth/r/info/user"]}},fees:{trading:{maker:.001,taker:.002},funding:{withdraw:{BTC:4e-4,BCH:1e-4,ETH:.00135,EOS:0,LTC:.001,OMG:.15097,IOT:0,NEO:0,ETC:.01,XRP:.02,ETP:.01,ZEC:.001,BTG:0,DASH:.01,XMR:1e-4,QTM:.01,EDO:.23687,DAT:9.8858,AVT:1.1251,SAN:.35977,USDT:5,SPK:16.971,BAT:1.1209,GNT:2.8789,SNT:9.0848,QASH:1.726,YYW:7.9464}}},options:{orderTypes:{MARKET:void 0,"EXCHANGE MARKET":"market",LIMIT:void 0,"EXCHANGE LIMIT":"limit",STOP:void 0,"EXCHANGE STOP":"stopOrLoss","TRAILING STOP":void 0,"EXCHANGE TRAILING STOP":void 0,FOK:void 0,"EXCHANGE FOK":"limit FOK","STOP LIMIT":void 0,"EXCHANGE STOP LIMIT":"limit stop",IOC:void 0,"EXCHANGE IOC":"limit ioc"},fiat:{USD:"USD",EUR:"EUR",JPY:"JPY",GBP:"GBP"}}})}isFiat(e){return e in this.options.fiat}getCurrencyId(e){return"f"+e}async fetchMarkets(e={}){let t=await this.v1GetSymbolsDetails(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.pair.toUpperCase(),a=r.slice(0,3),o=r.slice(3,6),n=this.commonCurrencyCode(a),d=this.commonCurrencyCode(o),c=n+"/"+d;r="t"+r,a=this.getCurrencyId(a),o=this.getCurrencyId(o);let h={price:s.price_precision,amount:s.price_precision},l={amount:{min:this.safeFloat(s,"minimum_order_size"),max:this.safeFloat(s,"maximum_order_size")},price:{min:Math.pow(10,-h.price),max:Math.pow(10,h.price)}};l.cost={min:l.amount.min*l.price.min,max:void 0},i.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:!0,precision:h,limits:l,info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostAuthRWallets(),i=this.safeString(e,"type","exchange"),s={info:t};for(let e=0;e<t.length;e++){let r=t[e],a=r[0],o=r[1],n=r[2],d=r[4];if(a===i){let e=o;o in this.currencies_by_id?e=this.currencies_by_id[o].code:"t"===o[0]?(e=(o=o.slice(1)).toUpperCase(),e=this.commonCurrencyCode(e)):e=this.commonCurrencyCode(e);let t=this.account();t.total=n,d?(t.free=d,t.used=t.total-t.free):0===d?(t.free=0,t.used=n):t.free=n,s[e]=t}}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetBookSymbolPrecision(this.extend({symbol:this.marketId(e),precision:"R0"},i)),r=this.milliseconds(),a={bids:[],asks:[],timestamp:r,datetime:this.iso8601(r),nonce:void 0};for(let e=0;e<s.length;e++){let t=s[e],i=t[1],r=t[2],o=r>0?"bids":"asks";r=Math.abs(r),a[o].push([i,r])}return a.bids=this.sortBy(a.bids,0,!0),a.asks=this.sortBy(a.asks,0),a}parseTicker(e,t){let i=this.milliseconds(),s=void 0;t&&(s=t.symbol);let r=e.length,a=e[r-4];return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:e[r-2],low:e[r-1],bid:e[r-10],bidVolume:void 0,ask:e[r-8],askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:e[r-6],percentage:100*e[r-5],average:void 0,baseVolume:e[r-3],quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i={};if(void 0!==e){let t=this.marketIds(e);i.symbols=t.join(",")}else i.symbols="ALL";let s=await this.publicGetTickers(this.extend(i,t)),r={};for(let e=0;e<s.length;e++){let t=s[e],i=t[0];if(i in this.markets_by_id){let e=this.markets_by_id[i];r[e.symbol]=this.parseTicker(t,e)}}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerSymbol(this.extend({symbol:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){const i=e.length>5,s=e[0].toString();let r=e[i?4:2],a=void 0;const o=e[i?5:3];let n=void 0,d=void 0,c=void 0,h=void 0,l=void 0,u=void 0;const p=e[i?2:1];if(i){const i=e[1];void 0!==i&&(u=i in this.markets_by_id?(t=this.markets_by_id[i]).symbol:i),d=e[3],c=1===e[8]?"maker":"taker";const s=e[9],r=this.commonCurrencyCode(e[10]);void 0!==s&&(l={cost:Math.abs(s),currency:r});const a=e[6];h=this.safeString(this.options.orderTypes,a)}return void 0===u&&void 0!==t&&(u=t.symbol),void 0!==r&&(n=r<0?"sell":"buy",r=Math.abs(r),void 0===a&&void 0!==o&&(a=r*o)),{id:s,timestamp:p,datetime:this.iso8601(p),symbol:u,order:d,side:n,type:h,takerOrMaker:c,price:o,amount:r,cost:a,fee:l,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a="-1",o={symbol:r.id};void 0!==t&&(o.start=t,a="1"),void 0!==i&&(o.limit=i),o.sort=a;let n=await this.publicGetTradesSymbolHist(this.extend(o,s)),d=this.sortBy(n,1);return this.parseTrades(d,r,void 0,i)}async fetchOHLCV(e,t="1m",i,s=100,r={}){await this.loadMarkets();let a=this.market(e);void 0===s&&(s=100),void 0===i&&(i=this.milliseconds()-this.parseTimeframe(t)*s*1e3);let o={symbol:a.id,timeframe:this.timeframes[t],sort:1,start:i,limit:s},n=await this.publicGetCandlesTradeTimeframeSymbolHist(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}async createOrder(e,t,i,s,r,o={}){throw new a(this.id+" createOrder not implemented yet")}cancelOrder(e,t,i={}){throw new a(this.id+" cancelOrder not implemented yet")}async fetchOrder(e,t,i={}){throw new a(this.id+" fetchOrder not implemented yet")}async fetchDepositAddress(e,t={}){throw new a(this.id+" fetchDepositAddress() not implemented yet.")}async withdraw(e,t,i,s,r={}){throw new a(this.id+" withdraw not implemented yet")}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={end:this.milliseconds(),_bfx:1};void 0!==t&&(a.start=t),void 0!==i&&(a.limit=i);let o="privatePostAuthRTradesHist";void 0!==e&&(r=this.market(e),a.symbol=r.id,o="privatePostAuthRTradesSymbolHist");const n=await this[o](this.extend(a,s));return this.parseTrades(n,r,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));o="v1"===t?t+o:this.version+o;let d=this.urls.api+"/"+o;if("public"===t&&Object.keys(n).length&&(d+="?"+this.urlencode(n)),"private"===t){this.checkRequiredCredentials();let e=this.nonce().toString(),t="/api/"+o+e+(a=this.json(n)),i=this.hmac(this.encode(t),this.encode(this.secret),"sha384");r={"bfx-nonce":e,"bfx-apikey":this.apiKey,"bfx-signature":i,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,n){let d=await this.fetch2(e,t,i,s,a,n);if(d){if("message"in d){if(d.message.indexOf("not enough exchange balance")>=0)throw new o(this.id+" "+this.json(d));throw new r(this.id+" "+this.json(d))}return d}if(""===d)throw new r(this.id+" returned empty response");return d}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,OrderNotFound:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitflyer",name:"bitFlyer",countries:["JP"],version:"v1",rateLimit:1e3,has:{CORS:!1,withdraw:!0,fetchMyTrades:!0,fetchOrders:!0,fetchOrder:!0,fetchOpenOrders:"emulated",fetchClosedOrders:"emulated"},urls:{logo:"https://user-images.githubusercontent.com/1294454/28051642-56154182-660e-11e7-9b0d-6042d1e6edd8.jpg",api:"https://api.bitflyer.jp",www:"https://bitflyer.jp",doc:"https://lightning.bitflyer.com/docs?lang=en"},api:{public:{get:["getmarkets/usa","getmarkets/eu","getmarkets","getboard","getticker","getexecutions","gethealth","getboardstate","getchats"]},private:{get:["getpermissions","getbalance","getbalancehistory","getcollateral","getcollateralhistory","getcollateralaccounts","getaddresses","getcoinins","getcoinouts","getbankaccounts","getdeposits","getwithdrawals","getchildorders","getparentorders","getparentorder","getexecutions","getpositions","gettradingcommission"],post:["sendcoin","withdraw","sendchildorder","cancelchildorder","sendparentorder","cancelparentorder","cancelallchildorders"]}},fees:{trading:{maker:.0025,taker:.0025}}})}async fetchMarkets(e={}){let t=await this.publicGetGetmarkets(),i=await this.publicGetGetmarketsUsa(),s=await this.publicGetGetmarketsEu(),r=this.arrayConcat(t,i);r=this.arrayConcat(r,s);let a=[];for(let e=0;e<r.length;e++){let t=r[e],i=t.product_code,s=!0,o=!1,n="spot";"alias"in t&&(n="future",o=!0,s=!1);let d=i.split("_"),c=void 0,h=void 0,l=void 0,u=void 0,p=d.length;1===p?(c=i.slice(0,3),h=i.slice(3,6)):2===p?(c=d[0],h=d[1]):(c=d[1],h=d[2]),l=this.commonCurrencyCode(c),u=this.commonCurrencyCode(h);let m=2===p?l+"/"+u:i;a.push({id:i,symbol:m,base:l,quote:u,baseId:c,quoteId:h,type:n,spot:s,future:o,info:t})}return a}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetGetbalance(),i={};for(let e=0;e<t.length;e++){let s=t[e];i[s.currency_code]=s}let s={info:t},r=Object.keys(this.currencies);for(let e=0;e<r.length;e++){let t=r[e],a=this.account();t in i&&(a.total=i[t].amount,a.free=i[t].available,a.used=a.total-a.free),s[t]=a}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetGetboard(this.extend({product_code:this.marketId(e)},i));return this.parseOrderBook(s,void 0,"bids","asks","price","size")}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.publicGetGetticker(this.extend({product_code:this.marketId(e)},t)),s=this.parse8601(i.timestamp),r=this.safeFloat(i,"ltp");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:this.safeFloat(i,"best_bid"),bidVolume:void 0,ask:this.safeFloat(i,"best_ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(i,"volume_by_product"),quoteVolume:void 0,info:i}}parseTrade(e,t){let i=void 0,s=void 0;if("side"in e&&e.side){let t=(i=e.side.toLowerCase())+"_child_order_acceptance_id";t in e&&(s=e[t])}void 0===s&&(s=this.safeString(e,"child_order_acceptance_id"));let r=this.parse8601(e.exec_date);const a=this.safeFloat(e,"price"),o=this.safeFloat(e,"size");return{id:e.id.toString(),info:e,timestamp:r,datetime:this.iso8601(r),symbol:t.symbol,order:s,type:void 0,side:i,price:a,amount:o}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetGetexecutions(this.extend({product_code:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={product_code:this.marketId(e),child_order_type:t.toUpperCase(),side:i.toUpperCase(),price:r,size:s},n=await this.privatePostSendchildorder(this.extend(o,a));return{info:n,id:n.child_order_acceptance_id}}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a symbol argument");return await this.loadMarkets(),await this.privatePostCancelchildorder(this.extend({product_code:this.marketId(t),child_order_acceptance_id:e},i))}parseOrderStatus(e){let t={ACTIVE:"open",COMPLETED:"closed",CANCELED:"canceled",EXPIRED:"canceled",REJECTED:"canceled"};return e in t?t[e]:e}parseOrder(e,t){let i=this.parse8601(e.child_order_date),s=this.safeFloat(e,"size"),r=this.safeFloat(e,"outstanding_size"),a=this.safeFloat(e,"executed_size"),o=this.safeFloat(e,"price"),n=o*a,d=this.parseOrderStatus(this.safeString(e,"child_order_state")),c=e.child_order_type.toLowerCase(),h=e.side.toLowerCase(),l=void 0;if(void 0===t){let i=this.safeString(e,"product_code");void 0!==i&&i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(l=t.symbol);let u=void 0,p=this.safeFloat(e,"total_commission");return void 0!==p&&(u={cost:p,currency:void 0,rate:void 0}),{id:e.child_order_acceptance_id,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:d,symbol:l,type:c,side:h,price:o,cost:n,amount:s,filled:a,remaining:r,fee:u}}async fetchOrders(e,t,i=100,s={}){if(void 0===e)throw new a(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();let r=this.market(e),o={product_code:r.id,count:i},n=await this.privateGetGetchildorders(this.extend(o,s)),d=this.parseOrders(n,r,t,i);return void 0!==e&&(d=this.filterBy(d,"symbol",e)),d}async fetchOpenOrders(e,t,i=100,s={}){return await this.fetchOrders(e,t,i,this.extend({child_order_state:"ACTIVE"},s))}async fetchClosedOrders(e,t,i=100,s={}){return await this.fetchOrders(e,t,i,this.extend({child_order_state:"COMPLETED"},s))}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder() requires a symbol argument");let s=await this.fetchOrders(t),r=this.indexBy(s,"id");if(e in r)return r[e];throw new o(this.id+" No order found with id "+e)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();let r=this.market(e),o={product_code:r.id};void 0!==i&&(o.count=i);let n=await this.privateGetGetexecutions(this.extend(o,s));return this.parseTrades(n,r,t,i)}async withdraw(e,t,i,s,a={}){if(this.checkAddress(i),await this.loadMarkets(),"JPY"!==e&&"USD"!==e&&"EUR"!==e)throw new r(this.id+" allows withdrawing JPY, USD, EUR only, "+e+" is not supported");let o=this.currency(e),n=await this.privatePostWithdraw(this.extend({currency_code:o.id,amount:t},a));return{info:n,id:n.message_id}}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/";"private"===t&&(o+="me/"),o+=e,"GET"===i&&Object.keys(s).length&&(o+="?"+this.urlencode(s));let n=this.urls.api+o;if("private"===t){this.checkRequiredCredentials();let e=this.nonce().toString(),t=[e,i,o].join("");Object.keys(s).length&&"GET"!==i&&(t+=a=this.json(s)),r={"ACCESS-KEY":this.apiKey,"ACCESS-TIMESTAMP":e,"ACCESS-SIGN":this.hmac(this.encode(t),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:n,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,AuthenticationError:a,OrderNotFound:o,InsufficientFunds:n,DDoSProtection:d}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitforex",name:"Bitforex",countries:["CN"],version:"v1",has:{fetchBalance:!0,fetchMarkets:!0,createOrder:!0,cancelOrder:!0,fetchTicker:!0,fetchTickers:!1,fetchMyTrades:!1,fetchTrades:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/44310033-69e9e600-a3d8-11e8-873d-54d74d1bc4e4.jpg",api:"https://api.bitforex.com",www:"https://www.bitforex.com",doc:"https://github.com/bitforexapi/API_Docs/wiki",fees:"https://help.bitforex.com/en_us/?cat=13",referral:"https://www.bitforex.com/registered?inviterId=1867438"},api:{public:{get:["api/v1/market/symbols","api/v1/market/ticker","api/v1/market/depth","api/v1/market/trades","api/v1/market/kline"]},private:{post:["api/v1/fund/mainAccount","api/v1/fund/allAccount","api/v1/trade/placeOrder","api/v1/trade/cancelOrder","api/v1/trade/orderInfo","api/v1/trade/orderInfos"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:5e-4},funding:{tierBased:!1,percentage:!0,deposit:{},withdraw:{BTC:5e-4,ETH:.01,BCH:1e-4,LTC:.001,ETC:.005,USDT:5,CMCT:30,AION:3,LVT:0,DATA:40,RHP:50,NEO:0,AIDOC:10,BQT:2,R:2,DPY:.8,GTC:40,AGI:30,DENT:100,SAN:1,SPANK:8,AID:5,OMG:.1,BFT:5,SHOW:150,TRX:20,ABYSS:10,THM:25,ZIL:20,PPT:.2,WTC:.4,LRC:7,BNT:1,CTXC:1,MITH:20,TRUE:4,LYM:10,VEE:100,AUTO:200,REN:50,TIO:2.5,NGC:1.5,PST:10,CRE:200,IPC:5,PTT:1e3,XMCT:20,ATMI:40,TERN:40,XLM:.01,ODE:15,FTM:100,RTE:100,DCC:100,IMT:500,GOT:3,EGT:500,DACC:1e3,UBEX:500,ABL:100,OLT:100,DAV:40,THRT:10,RMESH:3,UPP:20,SDT:0,SHR:10,MTV:3,ESS:100,MET:3,TTC:20,LXT:10,XCLP:100,LUK:100,UBC:100,DTX:10,BEAT:20,DEED:2,BGX:3e3,PRL:20,ELY:50,CARD:300,SQR:15,VRA:400,BWX:3500,MAS:75,FLP:.6,UNC:300,CRNC:15,MFG:70,ZXC:70,TRT:30,ZIX:35,XRA:10,AMO:1600,IPG:3,uDoo:50,URB:30,ARCONA:3,CRAD:5,NOBS:1e3,ADF:2,ELF:5,LX:20,PATH:15,SILK:120,SKYFT:50,EDN:50,ADE:50,EDR:10,TIME:.25,SPRK:20,QTUM:.01,BF:5,ZPR:100,HYB:10,CAN:30,CEL:10,ATS:50,KCASH:1,ACT:.01,MT:300,DXT:30,WAB:4e3,HYDRO:400,LQD:5,OPTC:200,EQUAD:80,LATX:50,LEDU:100,RIT:70,ACDC:500,FSN:2}}},exceptions:{4004:o,1013:a,1016:a,3002:n,10204:d}})}async fetchMarkets(e={}){let t=(await this.publicGetApiV1MarketSymbols()).data,i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.symbol,a=r.split("-"),o=a[2],n=a[1],d=o.toUpperCase(),c=n.toUpperCase(),h=(d=this.commonCurrencyCode(d))+"/"+(c=this.commonCurrencyCode(c)),l=!0,u={amount:s.amountPrecision,price:s.pricePrecision},p={amount:{min:s.minOrderAmount,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}};i.push({id:r,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:l,precision:u,limits:p,info:s})}return i}parseTrade(e,t){let i=void 0;void 0!==t&&(i=t.symbol);let s=this.safeInteger(e,"time"),r=this.safeString(e,"tid"),a=this.safeFloat(e,"amount"),o=this.safeFloat(e,"price"),n=void 0;void 0!==o&&void 0!==a&&(n=a*o);let d=this.safeInteger(e,"direction"),c=this.parseSide(d);return{info:e,id:r,timestamp:s,datetime:this.iso8601(s),symbol:i,type:void 0,side:c,price:o,amount:a,cost:n,order:void 0,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r={symbol:this.marketId(e)};void 0!==i&&(r.size=i);let a=this.market(e),o=await this.publicGetApiV1MarketTrades(this.extend(r,s));return this.parseTrades(o.data,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostApiV1FundAllAccount(e),i=t.data,s={info:t};for(let e=0;e<i.length;e++){let t=i[e],r=t.currency,a=r.toUpperCase();a=r in this.currencies_by_id?this.currencies_by_id[r].code:this.commonCurrencyCode(a);let o=this.account();s[a]=o,s[a].used=this.safeFloat(t,"frozen"),s[a].free=this.safeFloat(t,"active"),s[a].total=this.safeFloat(t,"fix")}return this.parseBalance(s)}async fetchTicker(e,t={}){await this.loadMarkets();let i={symbol:this.markets[e].id},s=await this.publicGetApiV1MarketTicker(this.extend(i,t)),r=s.data,a=this.safeInteger(r,"date");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(r,"high"),low:this.safeFloat(r,"low"),bid:this.safeFloat(r,"buy"),bidVolume:void 0,ask:this.safeFloat(r,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeFloat(r,"last"),last:this.safeFloat(r,"last"),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(r,"vol"),quoteVolume:void 0,info:s}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={symbol:this.marketId(e)};void 0!==t&&(s.size=t);let r=await this.publicGetApiV1MarketDepth(this.extend(s,i)),a=r.data,o=r.time;return this.parseOrderBook(a,o,"bids","asks","price","amount")}parseOrderStatus(e){let t={0:"open",1:"open",2:"closed",3:"canceled",4:"canceled"};return e in t?t[e]:e}parseSide(e){return 1===e?"buy":2===e?"sell":void 0}parseOrder(e,t){let i=this.safeString(e,"orderId"),s=this.safeFloat(e,"createTime"),r=this.safeFloat(e,"lastTime"),a=t.symbol,o=this.safeInteger(e,"tradeType"),n=this.parseSide(o),d=this.safeFloat(e,"orderPrice"),c=this.safeFloat(e,"avgPrice"),h=this.safeFloat(e,"orderAmount"),l=this.safeFloat(e,"dealAmount"),u=h-l,p=this.parseOrderStatus(this.safeString(e,"orderState")),m=l*d;const f=t["buy"===n?"base":"quote"];let y={cost:this.safeFloat(e,"tradeFee"),currency:f};return{info:e,id:i,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:r,symbol:a,type:void 0,side:n,price:d,cost:m,average:c,amount:h,filled:l,remaining:u,status:p,fee:y}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t),r={symbol:this.marketId(t),orderId:e},a=await this.privatePostApiV1TradeOrderInfo(this.extend(r,i));return this.parseOrder(a.data,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:this.marketId(e),state:0},o=await this.privatePostApiV1TradeOrderInfos(this.extend(a,s));return this.parseOrders(o.data,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:this.marketId(e),state:1},o=await this.privatePostApiV1TradeOrderInfos(this.extend(a,s));return this.parseOrders(o.data,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=void 0;"buy"===i?o=1:"sell"===i&&(o=2);let n={symbol:this.marketId(e),price:r,amount:s,tradeType:o},d=await this.privatePostApiV1TradePlaceOrder(this.extend(n,a)),c=d.data;return{info:d,id:this.safeString(c,"orderId")}}async cancelOrder(e,t,i={}){await this.loadMarkets();let s={orderId:e};void 0!==t&&(s.symbol=this.marketId(t));let r=await this.privatePostApiV1TradeCancelOrder(this.extend(s,i));return{info:r,success:r.success}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let t=this.urlencode({accessKey:this.apiKey});n.nonce=this.milliseconds(),Object.keys(n).length&&(t+="&"+this.urlencode(this.keysort(n)));let i="/"+e+"?"+t;a=t+"&signData="+this.hmac(this.encode(i),this.encode(this.secret)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&("{"===o[0]||"["===o[0])){let e=this.id+" "+o,t=this.safeValue(n,"success");if(void 0!==t&&!t){let t=this.safeString(n,"code");throw t in this.exceptions?new this.exceptions[t](e):new r(e)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ExchangeNotAvailable:a,AuthenticationError:o,BadRequest:n,PermissionDenied:d,InvalidAddress:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bithumb",name:"Bithumb",countries:["KR"],rateLimit:500,has:{CORS:!0,fetchTickers:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30597177-ea800172-9d5e-11e7-804c-b9d4fa9b56b0.jpg",api:{public:"https://api.bithumb.com/public",private:"https://api.bithumb.com"},www:"https://www.bithumb.com",doc:"https://apidocs.bithumb.com"},api:{public:{get:["ticker/{currency}","ticker/all","orderbook/{currency}","orderbook/all","transaction_history/{currency}","transaction_history/all"]},private:{post:["info/account","info/balance","info/wallet_address","info/ticker","info/orders","info/user_transactions","trade/place","info/order_detail","trade/cancel","trade/btc_withdrawal","trade/krw_deposit","trade/krw_withdrawal","trade/market_buy","trade/market_sell"]}},fees:{trading:{maker:.0015,taker:.0015}},exceptions:{"Bad Request(SSL)":n,"Bad Request(Bad Method)":n,"Bad Request.(Auth Data)":o,"Not Member":o,"Invalid Apikey":o,"Method Not Allowed.(Access IP)":d,"Method Not Allowed.(BTC Adress)":c,"Method Not Allowed.(Access)":d,"Database Fail":a,"Invalid Parameter":n,5600:r,"Unknown Error":r,"After May 23th, recent_transactions is no longer, hence users will not be able to connect to recent_transactions":r}})}async fetchMarkets(e={}){let t=await this.publicGetTickerAll(),i=Object.keys(t.data),s=[];for(let e=0;e<i.length;e++){let r=i[e];if("date"!==r){let e=t.data[r],i=r,a="KRW",o=r+"/"+a,n=!0;if(Array.isArray(e)){0===e.length&&(n=!1)}s.push({id:r,symbol:o,base:i,quote:a,info:e,active:n,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}})}}return s}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostInfoBalance(this.extend({currency:"ALL"},e)),i={info:t},s=t.data,r=Object.keys(this.currencies);for(let e=0;e<r.length;e++){let t=r[e],a=this.account(),o=t.toLowerCase();a.total=this.safeFloat(s,"total_"+o),a.used=this.safeFloat(s,"in_use_"+o),a.free=this.safeFloat(s,"available_"+o),i[t]=a}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={currency:this.market(e).base};void 0!==t&&(s.count=t);let r=(await this.publicGetOrderbookCurrency(this.extend(s,i))).data,a=parseInt(r.timestamp);return this.parseOrderBook(r,a,"bids","asks","price","quantity")}parseTicker(e,t){let i=parseInt(e.date),s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"opening_price"),a=this.safeFloat(e,"closing_price"),o=void 0,n=void 0,d=void 0;void 0!==a&&void 0!==r&&(o=a-r,r>0&&(n=o/r*100),d=this.sum(r,a)/2);let c=this.safeFloat(e,"average_price"),h=this.safeFloat(e,"volume_1day");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"max_price"),low:this.safeFloat(e,"min_price"),bid:this.safeFloat(e,"buy_price"),bidVolume:void 0,ask:this.safeFloat(e,"sell_price"),askVolume:void 0,vwap:c,open:r,close:a,last:a,previousClose:void 0,change:o,percentage:n,average:d,baseVolume:h,quoteVolume:h*c,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickerAll(t),s={},r=i.data.date,a=this.omit(i.data,"date"),o=Object.keys(a);for(let e=0;e<o.length;e++){let t=o[e],i=t,n=void 0;t in this.markets_by_id&&(i=(n=this.markets_by_id[t]).symbol);let d=a[t];Array.isArray(d)||(d.date=r,s[i]=this.parseTicker(d,n))}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerCurrency(this.extend({currency:i.base},t));return this.parseTicker(s.data,i)}parseTrade(e,t){let[i,s]=e.transaction_date.split(" ");s.length<8&&(s="0"+s);let r=this.parse8601(i+" "+s);r-=324e5;let a="ask"===e.type?"sell":"buy";return{id:this.safeString(e,"cont_no"),info:e,timestamp:r,datetime:this.iso8601(r),symbol:t.symbol,order:void 0,type:void 0,side:a,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"units_traded")}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTransactionHistoryCurrency(this.extend({currency:r.base,count:100},s));return this.parseTrades(a.data,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n=void 0,d="privatePostTrade";"limit"===t?(n={order_currency:o.id,Payment_currency:o.quote,units:s,price:r,type:"buy"===i?"bid":"ask"},d+="Place"):"market"===t&&(n={currency:o.id,units:s},d+="Market"+this.capitalize(i));let c=await this[d](this.extend(n,a)),h=void 0;return"order_id"in c&&c.order_id&&(h=c.order_id.toString()),{info:c,id:h}}async cancelOrder(e,t,i={}){if(!("side"in i))throw new r(this.id+" cancelOrder requires a side parameter (sell or buy) and a currency parameter");if(!("currency"in i))throw new r(this.id+" cancelOrder requires a currency parameter");let s="buy"===i.side?"bid":"ask";return await this.privatePostTradeCancel({order_id:e,type:s,currency:i.currency})}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();let o=this.currency(e),n={units:t,address:i,currency:o.id};if("XRP"===o||"XMR"===o){const t=this.safeString(a,"destination");if(void 0===s&&void 0===t)throw new r(this.id+" "+e+" withdraw() requires a tag argument or an extra destination param");void 0!==s&&(n.destination=s)}return{info:await this.privatePostTradeBtcWithdrawal(this.extend(n,a)),id:void 0}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s),n=this.urls.api[t]+o,d=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials(),a=this.urlencode(this.extend({endpoint:o},d));let e=this.nonce().toString(),t=o+"\0"+a+"\0"+e,i=this.hmac(this.encode(t),this.encode(this.secret),"sha512"),s=this.decode(this.stringToBase64(this.encode(i)));r={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","Api-Key":this.apiKey,"Api-Sign":s.toString(),"Api-Nonce":e}}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&!(o.length<2)&&("{"===o[0]||"["===o[0])&&"status"in n){const e=this.safeString(n,"status"),t=this.safeString(n,"message");if(void 0!==e){if("0000"===e)return;const i=this.id+" "+this.json(n),s=this.exceptions;throw e in s?new s[e](i):t in s?new s[t](i):new r(i)}}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("status"in n){if("0000"===n.status)return n;throw new r(this.id+" "+this.json(n))}return n}}},function(e,t,i){"use strict";const s=i(24);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitibu",name:"Bitibu",countries:["CY"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/45444675-c9ce6680-b6d0-11e8-95ab-3e749a940de1.jpg",extension:".json",api:"https://bitibu.com",www:"https://bitibu.com",doc:"https://bitibu.com/documents/api_v2"}})}}},function(e,t,i){"use strict";const s=i(26);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitkk",name:"bitkk",comment:"a Chinese ZB clone",urls:{api:{public:"http://api.bitkk.com/data",private:"https://trade.bitkk.com/api"},www:"https://www.bitkk.com",doc:"https://www.bitkk.com/i/developer",fees:"https://www.bitkk.com/i/rate"}})}}},function(e,t,i){"use strict";const s=i(1),{NotSupported:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitlish",name:"Bitlish",countries:["GB","EU","RU"],rateLimit:1500,version:"v1",has:{CORS:!1,fetchTickers:!0,fetchOHLCV:!0,withdraw:!0},timeframes:{"1h":3600},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766275-dcfc6c30-5ed3-11e7-839d-00a846385d0b.jpg",api:"https://bitlish.com/api",www:"https://bitlish.com",doc:"https://bitlish.com/api"},requiredCredentials:{apiKey:!0,secret:!1},fees:{trading:{tierBased:!1,percentage:!0,taker:.003,maker:0},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,LTC:.001,DOGE:.001,ETH:.001,XMR:0,ZEC:.001,DASH:1e-4,EUR:50},deposit:{BTC:0,LTC:0,DOGE:0,ETH:0,XMR:0,ZEC:0,DASH:0,EUR:0}}},api:{public:{get:["instruments","ohlcv","pairs","tickers","trades_depth","trades_history"],post:["instruments","ohlcv","pairs","tickers","trades_depth","trades_history"]},private:{post:["accounts_operations","balance","cancel_trade","cancel_trades_by_ids","cancel_all_trades","create_bcode","create_template_wallet","create_trade","deposit","list_accounts_operations_from_ts","list_active_trades","list_bcodes","list_my_matches_from_ts","list_my_trades","list_my_trads_from_ts","list_payment_methods","list_payments","redeem_code","resign","signin","signout","trade_details","trade_options","withdraw","withdraw_by_id"]}},commonCurrencies:{DSH:"DASH",XDG:"DOGE"}})}async fetchMarkets(e={}){let t=await this.publicGetPairs(),i=[],s=Object.keys(t);for(let e=0;e<s.length;e++){let r=t[s[e]],a=r.id,o=r.name,[n,d]=o.split("/");o=(n=this.commonCurrencyCode(n))+"/"+(d=this.commonCurrencyCode(d)),i.push({id:a,symbol:o,base:n,quote:d,info:r})}return i}parseTicker(e,t){let i=this.milliseconds(),s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"last");return{timestamp:i,datetime:this.iso8601(i),symbol:s,high:this.safeFloat(e,"max"),low:this.safeFloat(e,"min"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"first"),close:r,last:r,previousClose:void 0,change:void 0,percentage:100*this.safeFloat(e,"prc"),average:void 0,baseVolume:this.safeFloat(e,"sum"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){let t=s[e],a=this.safeValue(this.markets_by_id,t),o=void 0;if(void 0!==a)o=a.symbol;else{let e=t.slice(0,3),i=t.slice(3,6),s=e.toUpperCase(),r=i.toUpperCase();o=(s=this.commonCurrencyCode(s))+"/"+(r=this.commonCurrencyCode(r))}let n=i[t];r[o]=this.parseTicker(n,a)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetTickers(t))[i.id];return this.parseTicker(s,i)}async fetchOHLCV(e,t="1h",i,s,r={}){await this.loadMarkets();let a=this.seconds()-2592e3;void 0!==i&&(a=parseInt(i/1e3));let o=[a.toString(),void 0];return await this.publicPostOhlcv(this.extend({time_range:o},r))}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetTradesDepth(this.extend({pair_id:this.marketId(e)},i)),r=void 0,a=this.safeInteger(s,"last");return a&&(r=parseInt(a/1e3)),this.parseOrderBook(s,r,"bid","ask","price","volume")}parseTrade(e,t){let i="bid"===e.dir?"buy":"sell",s=void 0;t&&(s=t.symbol);let r=parseInt(e.created/1e3);return{id:void 0,info:e,timestamp:r,datetime:this.iso8601(r),symbol:s,order:void 0,type:void 0,side:i,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradesHistory(this.extend({pair_id:r.id},s));return this.parseTrades(a.list,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalance(),i={info:t},s=Object.keys(t),r={};for(let e=0;e<s.length;e++){let i=s[e],a=t[i];"DSH"===(i=i.toUpperCase())&&(i="DASH"),"XDG"===i&&(i="DOGE"),r[i]=a}s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let t=s[e],a=this.account();t in r&&(a.free=parseFloat(r[t].funds),a.used=parseFloat(r[t].holded),a.total=this.sum(a.free,a.used)),i[t]=a}return this.parseBalance(i)}async signIn(e={}){return await this.privatePostSignin(this.extend({login:this.login,passwd:this.password},e))}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={pair_id:this.marketId(e),dir:"buy"===i?"bid":"ask",amount:s};"limit"===t&&(o.price=r);let n=await this.privatePostCreateTrade(this.extend(o,a));return{info:n,id:n.id}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelTrade({id:e})}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();let o=this.currency(e);if("BTC"!==e)throw new r(this.id+" currently supports BTC withdrawals only, until they document other currencies...");let n=await this.privatePostWithdraw(this.extend({currency:o.toLowerCase(),amount:parseFloat(t),account:i,payment_method:"bitcoin"},a));return{info:n,id:n.message_id}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;return"public"===t?"GET"===i?Object.keys(s).length&&(o+="?"+this.urlencode(s)):(a=this.json(s),r={"Content-Type":"application/json"}):(this.checkRequiredCredentials(),a=this.json(this.extend({token:this.apiKey},s)),r={"Content-Type":"application/json"}),{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitmarket",name:"BitMarket",countries:["PL","EU"],rateLimit:1500,has:{CORS:!1,fetchOHLCV:!0,withdraw:!0},timeframes:{"90m":"90m","6h":"6h","1d":"1d","1w":"7d","1M":"1m","3M":"3m","6M":"6m","1y":"1y"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27767256-a8555200-5ef9-11e7-96fd-469a65e2b0bd.jpg",api:{public:"https://www.bitmarket.net",private:"https://www.bitmarket.pl/api2/"},www:["https://www.bitmarket.pl","https://www.bitmarket.net"],doc:["https://www.bitmarket.net/docs.php?file=api_public.html","https://www.bitmarket.net/docs.php?file=api_private.html","https://github.com/bitmarket-net/api"],referral:"https://www.bitmarket.net/?ref=23323"},api:{public:{get:["json/{market}/ticker","json/{market}/orderbook","json/{market}/trades","json/ctransfer","graphs/{market}/90m","graphs/{market}/6h","graphs/{market}/1d","graphs/{market}/7d","graphs/{market}/1m","graphs/{market}/3m","graphs/{market}/6m","graphs/{market}/1y"]},private:{post:["info","trade","cancel","orders","trades","history","withdrawals","tradingdesk","tradingdeskStatus","tradingdeskConfirm","cryptotradingdesk","cryptotradingdeskStatus","cryptotradingdeskConfirm","withdraw","withdrawFiat","withdrawPLNPP","withdrawFiatFast","deposit","transfer","transfers","marginList","marginOpen","marginClose","marginCancel","marginModify","marginBalanceAdd","marginBalanceRemove","swapList","swapOpen","swapClose"]}},markets:{"BCH/PLN":{id:"BCCPLN",symbol:"BCH/PLN",base:"BCH",quote:"PLN"},"BTG/PLN":{id:"BTGPLN",symbol:"BTG/PLN",base:"BTG",quote:"PLN"},"BTC/PLN":{id:"BTCPLN",symbol:"BTC/PLN",base:"BTC",quote:"PLN"},"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR"},"LTC/PLN":{id:"LTCPLN",symbol:"LTC/PLN",base:"LTC",quote:"PLN"},"LTC/BTC":{id:"LTCBTC",symbol:"LTC/BTC",base:"LTC",quote:"BTC"},"LiteMineX/BTC":{id:"LiteMineXBTC",symbol:"LiteMineX/BTC",base:"LiteMineX",quote:"BTC"}},fees:{trading:{tierBased:!0,percentage:!0,taker:.45/100,maker:.0015,tiers:{taker:[[0,.45/100],[99.99,.0044],[299.99,.0043],[499.99,.0042],[999.99,.41/100],[1999.99,.004],[2999.99,.39/100],[4999.99,.0038],[9999.99,.0037],[19999.99,.0036],[29999.99,.35/100],[49999.99,.34/100],[99999.99,.0033],[199999.99,.0032],[299999.99,.0031],[499999.99,0]],maker:[[0,.0015],[99.99,.14/100],[299.99,.0013],[499.99,.0012],[999.99,.0011],[1999.99,.001],[2999.99,.9/100],[4999.99,.008],[9999.99,.7/100],[19999.99,.006],[29999.99,.005],[49999.99,.004],[99999.99,.003],[199999.99,.002],[299999.99,.001],[499999.99,0]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:8e-4,LTC:.005,BCH:8e-4,BTG:8e-4,DOGE:1,EUR:2,PLN:2},deposit:{BTC:0,LTC:0,BCH:0,BTG:0,DOGE:25,EUR:2,PLN:0}}}})}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostInfo()).data,i=t.balances,s={info:t},r=Object.keys(this.currencies);for(let e=0;e<r.length;e++){let t=r[e],a=this.account();t in i.available&&(a.free=i.available[t]),t in i.blocked&&(a.used=i.blocked[t]),a.total=this.sum(a.free,a.used),s[t]=a}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){let s=await this.publicGetJsonMarketOrderbook(this.extend({market:this.marketId(e)},i));return this.parseOrderBook(s)}async fetchTicker(e,t={}){let i=await this.publicGetJsonMarketTicker(this.extend({market:this.marketId(e)},t)),s=this.milliseconds(),r=this.safeFloat(i,"vwap"),a=this.safeFloat(i,"volume"),o=void 0;void 0!==a&&void 0!==r&&(o=a*r);let n=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:r,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:i}}parseTrade(e,t){let i="bid"===e.type?"buy":"sell",s=1e3*e.date;return{id:e.tid.toString(),info:e,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,order:void 0,type:void 0,side:i,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetJsonMarketTrades(this.extend({market:r.id},s));return this.parseTrades(a,r,t,i)}parseOHLCV(e,t,i="90m",s,r){return[1e3*e.time,parseFloat(e.open),parseFloat(e.high),parseFloat(e.low),parseFloat(e.close),parseFloat(e.vol)]}async fetchOHLCV(e,t="90m",i,s,r={}){await this.loadMarkets();let a="publicGetGraphsMarket"+this.timeframes[t],o=this.market(e),n=await this[a](this.extend({market:o.id},r));return this.parseOHLCVs(n,o,t,i,s)}async createOrder(e,t,i,s,r,a={}){let o=await this.privatePostTrade(this.extend({market:this.marketId(e),type:i,amount:s,rate:r},a)),n={info:o};return"id"in o.data&&(n.id=o.id),n}async cancelOrder(e,t,i={}){return await this.privatePostCancel({id:e})}isFiat(e){return"EUR"===e||"PLN"===e}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();let o=this.currency(e),n=void 0,d={currency:o.id,quantity:t};if(this.isFiat(e)){if(n="privatePostWithdrawFiat",!("account"in a))throw new r(this.id+" requires account parameter to withdraw fiat currency");if(d.account=a.account,"account2"in a)d.account2=a.account2;else if("EUR"===o)throw new r(this.id+" requires account2 parameter to withdraw EUR");if("withdrawal_note"in a)d.withdrawal_note=a.withdrawal_note;else if("PLN"===o)throw new r(this.id+" requires withdrawal_note parameter to withdraw PLN")}else n="privatePostWithdraw",d.address=i;let c=await this[n](this.extend(d,a));return{info:c,id:c}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];if("public"===t)o+="/"+this.implodeParams(e+".json",s);else{this.checkRequiredCredentials();let t=this.nonce(),i=this.extend({tonce:t,method:e},s);a=this.urlencode(i),r={"API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{AuthenticationError:r,BadRequest:a,DDoSProtection:o,ExchangeError:n,ExchangeNotAvailable:d,InsufficientFunds:c,InvalidOrder:h,OrderNotFound:l,PermissionDenied:u}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitmex",name:"BitMEX",countries:["SC"],version:"v1",userAgent:void 0,rateLimit:2e3,has:{CORS:!1,fetchOHLCV:!0,withdraw:!0,editOrder:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0},timeframes:{"1m":"1m","5m":"5m","1h":"1h","1d":"1d"},urls:{test:"https://testnet.bitmex.com",logo:"https://user-images.githubusercontent.com/1294454/27766319-f653c6e6-5ed4-11e7-933d-f0bc3699ae8f.jpg",api:"https://www.bitmex.com",www:"https://www.bitmex.com",doc:["https://www.bitmex.com/app/apiOverview","https://github.com/BitMEX/api-connectors/tree/master/official-http"],fees:"https://www.bitmex.com/app/fees",referral:"https://www.bitmex.com/register/rm3C16"},api:{public:{get:["announcement","announcement/urgent","funding","instrument","instrument/active","instrument/activeAndIndices","instrument/activeIntervals","instrument/compositeIndex","instrument/indices","insurance","leaderboard","liquidation","orderBook","orderBook/L2","quote","quote/bucketed","schema","schema/websocketHelp","settlement","stats","stats/history","trade","trade/bucketed"]},private:{get:["apiKey","chat","chat/channels","chat/connected","execution","execution/tradeHistory","notification","order","position","user","user/affiliateStatus","user/checkReferralCode","user/commission","user/depositAddress","user/margin","user/minWithdrawalFee","user/wallet","user/walletHistory","user/walletSummary"],post:["apiKey","apiKey/disable","apiKey/enable","chat","order","order/bulk","order/cancelAllAfter","order/closePosition","position/isolate","position/leverage","position/riskLimit","position/transferMargin","user/cancelWithdrawal","user/confirmEmail","user/confirmEnableTFA","user/confirmWithdrawal","user/disableTFA","user/logout","user/logoutAll","user/preferences","user/requestEnableTFA","user/requestWithdrawal"],put:["order","order/bulk","user"],delete:["apiKey","order","order/all"]}},exceptions:{exact:{"Invalid API Key.":r,"Access Denied":u,"Duplicate clOrdID":h,"Signature not valid":r},broad:{overloaded:d,"Account has insufficient Available Balance":c}},options:{"api-expires":5}})}async fetchMarkets(e={}){const t=await this.publicGetInstrumentActiveAndIndices(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r="Unlisted"!==s.state,a=s.symbol,o=s.underlying,n=s.quoteCurrency,d=o+n,c=this.commonCurrencyCode(o),h=this.commonCurrencyCode(n),l=a===d,u=this.safeString2(s,"positionCurrency","quoteCurrency");let p=void 0,m=!1,f=!1,y=this.commonCurrencyCode(u),b=a;l?(p="swap",b=c+"/"+h):a.indexOf("B_")>=0?(f=!0,p="prediction"):(m=!0,p="future");const w={amount:void 0,price:void 0},v=this.safeFloat(s,"lotSize"),g=this.safeFloat(s,"tickSize");void 0!==v&&(w.amount=this.precisionFromString(this.truncate_to_string(v,16))),void 0!==g&&(w.price=this.precisionFromString(this.truncate_to_string(g,16)));const k={amount:{min:void 0,max:void 0},price:{min:g,max:this.safeFloat(s,"maxPrice")},cost:{min:void 0,max:void 0}};k[y===h?"cost":"amount"]={min:v,max:this.safeFloat(s,"maxOrderQty")},i.push({id:a,symbol:b,base:c,quote:h,baseId:o,quoteId:n,active:r,precision:w,limits:k,taker:s.takerFee,maker:s.makerFee,type:p,spot:!1,swap:l,future:m,prediction:f,info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserMargin(this.extend({currency:"all"},e)),i={info:t};for(let e=0;e<t.length;e++){const s=t[e];let r=this.safeString(s,"currency");r=r.toUpperCase();const a=this.commonCurrencyCode(r),o={free:s.availableMargin,used:0,total:s.marginBalance};"BTC"===a&&(o.free=1e-8*o.free,o.total=1e-8*o.total),o.used=o.total-o.free,i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={symbol:this.market(e).id};void 0!==t&&(s.depth=t);let r=await this.publicGetOrderBookL2(this.extend(s,i)),a={bids:[],asks:[],timestamp:void 0,datetime:void 0,nonce:void 0};for(let e=0;e<r.length;e++){let t=r[e],i="Sell"===t.side?"asks":"bids",s=t.size,o=t.price;a[i].push([o,s])}return a.bids=this.sortBy(a.bids,0,!0),a.asks=this.sortBy(a.asks,0),a}async fetchOrder(e,t,i={}){let s={filter:{orderID:e}},r=await this.fetchOrders(t,void 0,void 0,this.deepExtend(s,i));if(1===r.length)return r[0];throw new l(this.id+": The order "+e+" not found.")}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==t&&(a.startTime=this.iso8601(t)),void 0!==i&&(a.count=i),"filter"in(a=this.deepExtend(a,s))&&(a.filter=this.json(a.filter));let o=await this.privateGetOrder(a);return this.parseOrders(o,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.deepExtend({filter:{open:!0}},s))}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.symbol=r.id),void 0!==t&&(a.startTime=this.iso8601(t)),void 0!==i&&(a.count=i),"filter"in(a=this.deepExtend(a,s))&&(a.filter=this.json(a.filter));let o=await this.privateGetExecutionTradeHistory(a);return this.parseTrades(o,r,t,i)}async fetchTicker(e,t={}){if(await this.loadMarkets(),!this.market(e).active)throw new n(this.id+": symbol "+e+" is delisted");const i=await this.fetchTickers([e],t),s=this.safeValue(i,e);if(void 0===s)throw new n(this.id+" ticker symbol "+e+" not found");return s}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetInstrumentActiveAndIndices(t),s={};for(let e=0;e<i.length;e++){const t=this.parseTicker(i[e]),r=this.safeString(t,"symbol");void 0!==r&&(s[r]=t)}return s}parseTicker(e,t){let i=void 0;const s=this.safeString(e,"symbol");void 0!==(t=this.safeValue(this.markets_by_id,s,t))&&(i=t.symbol);const r=this.parse8601(this.safeString(e,"timestamp")),a=this.safeFloat(e,"prevPrice24h"),o=this.safeFloat(e,"lastPrice");let n=void 0,d=void 0;return void 0!==o&&void 0!==a&&(n=o-a,a>0&&(d=n/a*100)),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),bidVolume:void 0,ask:this.safeFloat(e,"askPrice"),askVolume:void 0,vwap:this.safeFloat(e,"vwap"),open:a,close:o,last:o,previousClose:void 0,change:n,percentage:d,average:this.sum(a,o)/2,baseVolume:this.safeFloat(e,"homeNotional24h"),quoteVolume:this.safeFloat(e,"foreignNotional24h"),info:e}}parseOHLCV(e,t,i="1m",s,r){return[this.parse8601(e.timestamp),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={symbol:a.id,binSize:this.timeframes[t],partial:!0};if(void 0!==s&&(o.count=s),void 0!==i){let e=this.ymdhms(i);o.startTime=e}let n=await this.publicGetTradeBucketed(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}parseTrade(e,t){let i=this.parse8601(this.safeString(e,"timestamp")),s=this.safeFloat(e,"price"),r=this.safeFloat2(e,"size","lastQty"),a=this.safeString(e,"trdMatchID"),o=this.safeString(e,"orderID"),n=this.safeString(e,"side").toLowerCase(),d=this.safeFloat(e,"execCost");void 0!==d&&(d=Math.abs(d)/1e8);let c=void 0;if("execComm"in e){let t=this.safeFloat(e,"execComm");t/=1e8;let i=this.safeString(e,"currency");i=i.toUpperCase(),c={cost:t,currency:this.commonCurrencyCode(i),rate:this.safeFloat(e,"commission")}}let h=void 0;void 0!==c&&(h=c.cost<0?"maker":"taker");let l=void 0;const u=this.safeString(e,"symbol");return void 0!==u&&(l=u in this.markets_by_id?this.markets_by_id[u].symbol:u),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:l,id:a,order:o,type:void 0,takerOrMaker:h,side:n,price:s,cost:d,amount:r,fee:c}}parseOrderStatus(e){return this.safeString({New:"open",PartiallyFilled:"open",Filled:"closed",DoneForDay:"open",Canceled:"canceled",PendingCancel:"open",PendingNew:"open",Rejected:"rejected",Expired:"expired",Stopped:"open",Untriggered:"open",Triggered:"open"},e,e)}parseOrder(e,t){let i=this.parseOrderStatus(this.safeString(e,"ordStatus")),s=void 0;if(void 0!==t)s=t.symbol;else{let i=e.symbol;i in this.markets_by_id&&(s=(t=this.markets_by_id[i]).symbol)}let r=this.parse8601(this.safeString(e,"timestamp")),a=this.parse8601(this.safeString(e,"transactTime")),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"orderQty"),d=this.safeFloat(e,"cumQty",0),c=void 0;void 0!==n&&void 0!==d&&(c=Math.max(n-d,0));const h=this.safeFloat(e,"avgPx");let l=void 0;return void 0!==d&&(void 0!==h?l=h*d:void 0!==o&&(l=o*d)),{info:e,id:e.orderID.toString(),timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:a,symbol:s,type:e.ordType.toLowerCase(),side:e.side.toLowerCase(),price:o,amount:n,cost:l,average:h,filled:d,remaining:c,status:i,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:r.id};void 0!==t&&(a.startTime=this.iso8601(t)),void 0!==i&&(a.count=i);let o=await this.publicGetTrade(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={symbol:this.marketId(e),side:this.capitalize(i),orderQty:s,ordType:this.capitalize(t)};void 0!==r&&(o.price=r);let n=await this.privatePostOrder(this.extend(o,a)),d=this.parseOrder(n),c=d.id;return this.orders[c]=d,this.extend({info:n},d)}async editOrder(e,t,i,s,r,a,o={}){await this.loadMarkets();let n={orderID:e};void 0!==r&&(n.orderQty=r),void 0!==a&&(n.price=a);let d=await this.privatePutOrder(this.extend(n,o)),c=this.parseOrder(d);return this.orders[c.id]=c,this.extend({info:d},c)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateDeleteOrder(this.extend({orderID:e},i)),r=s[0],a=this.safeString(r,"error");if(void 0!==a&&a.indexOf("Unable to cancel order due to existing state")>=0)throw new l(this.id+" cancelOrder() failed: "+a);return r=this.parseOrder(r),this.orders[r.id]=r,this.extend({info:s},r)}isFiat(e){return"EUR"===e||"PLN"===e}async withdraw(e,t,i,s,r={}){if(this.checkAddress(i),await this.loadMarkets(),"BTC"!==e)throw new n(this.id+" supoprts BTC withdrawals only, other currencies coming soon...");let a={currency:"XBt",amount:t,address:i},o=await this.privatePostUserRequestWithdrawal(this.extend(a,r));return{info:o,id:o.transactID}}handleErrors(e,t,i,s,r,d,c){if(429===e)throw new o(this.id+" "+d);if(e>=400&&d&&"{"===d[0]){const t=this.safeValue(c,"error",{}),i=this.safeString(t,"message"),s=this.id+" "+d,r=this.exceptions.exact;if(i in r)throw new r[i](s);const o=this.exceptions.broad,h=this.findBroadlyMatchedKey(o,i);if(void 0!==h)throw new o[h](s);if(400===e)throw new a(s);throw new n(s)}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+e;"PUT"!==i&&Object.keys(s).length&&(o+="?"+this.urlencode(s));let n=this.urls.api+o;if("private"===t){this.checkRequiredCredentials();let e=i+o,t=this.safeInteger(this.options,"api-expires");r={"Content-Type":"application/json","api-key":this.apiKey},e+=t=(t=this.sum(this.seconds(),t)).toString(),r["api-expires"]=t,"POST"!==i&&"PUT"!==i||Object.keys(s).length&&(e+=a=this.json(s)),r["api-signature"]=this.hmac(this.encode(e),this.encode(this.secret))}return{url:n,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,InvalidNonce:a,AuthenticationError:o,OrderNotFound:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitso",name:"Bitso",countries:["MX"],rateLimit:2e3,version:"v3",has:{CORS:!0,fetchMyTrades:!0,fetchOpenOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766335-715ce7aa-5ed5-11e7-88a8-173a27bb30fe.jpg",api:"https://api.bitso.com",www:"https://bitso.com",doc:"https://bitso.com/api_info",fees:"https://bitso.com/fees?l=es",referral:"https://bitso.com/?ref=itej"},api:{public:{get:["available_books","ticker","order_book","trades"]},private:{get:["account_status","balance","fees","fundings","fundings/{fid}","funding_destination","kyc_documents","ledger","ledger/trades","ledger/fees","ledger/fundings","ledger/withdrawals","mx_bank_codes","open_orders","order_trades/{oid}","orders/{oid}","user_trades","user_trades/{tid}","withdrawals/","withdrawals/{wid}"],post:["bitcoin_withdrawal","debit_card_withdrawal","ether_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal","orders","phone_number","phone_verification","phone_withdrawal","spei_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal"],delete:["orders/{oid}","orders/all"]}},exceptions:{"0201":o,104:a}})}async fetchMarkets(e={}){let t=await this.publicGetAvailableBooks(),i=[];for(let e=0;e<t.payload.length;e++){let s=t.payload[e],r=s.book,a=r.toUpperCase().replace("_","/"),[o,n]=a.split("/"),d={amount:{min:this.safeFloat(s,"minimum_amount"),max:this.safeFloat(s,"maximum_amount")},price:{min:this.safeFloat(s,"minimum_price"),max:this.safeFloat(s,"maximum_price")},cost:{min:this.safeFloat(s,"minimum_value"),max:this.safeFloat(s,"maximum_value")}},c={amount:this.precisionFromString(s.minimum_amount),price:this.precisionFromString(s.minimum_price)};i.push({id:r,symbol:a,base:o,quote:n,info:s,limits:d,precision:c})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetBalance(),i=t.payload.balances,s={info:t};for(let e=0;e<i.length;e++){let t=i[e],r=t.currency.toUpperCase(),a={free:parseFloat(t.available),used:parseFloat(t.locked),total:parseFloat(t.total)};s[r]=a}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=(await this.publicGetOrderBook(this.extend({book:this.marketId(e)},i))).payload,r=this.parse8601(s.updated_at);return this.parseOrderBook(s,r,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();let i=(await this.publicGetTicker(this.extend({book:this.marketId(e)},t))).payload,s=this.parse8601(i.created_at),r=this.safeFloat(i,"vwap"),a=this.safeFloat(i,"volume"),o=void 0;void 0!==a&&void 0!==r&&(o=a*r);let n=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:r,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:i}}parseTrade(e,t){let i=this.parse8601(e.created_at),s=void 0;if(void 0===t){let i=this.safeString(e,"book");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(s=t.symbol);let r=this.safeString(e,"side");void 0===r&&(r=this.safeString(e,"maker_side"));let a=this.safeFloat(e,"amount");void 0===a&&(a=this.safeFloat(e,"major")),void 0!==a&&(a=Math.abs(a));let o=void 0,n=this.safeFloat(e,"fees_amount");if(void 0!==n){let t=this.safeString(e,"fees_currency");void 0!==t&&t in this.currencies_by_id&&(t=this.currencies_by_id[t].code),o={cost:n,currency:t}}let d=this.safeFloat(e,"minor");void 0!==d&&(d=Math.abs(d));let c=this.safeFloat(e,"price"),h=this.safeString(e,"oid");return{id:e.tid.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:h,type:void 0,side:r,price:c,amount:a,cost:d,fee:o}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTrades(this.extend({book:r.id},s));return this.parseTrades(a.payload,r,t,i)}async fetchMyTrades(e,t,i=25,s={}){await this.loadMarkets();let a=this.market(e),o="marker"in s;if(void 0!==t&&!o)throw r(this.id+" fetchMyTrades does not support fetching trades starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");o&&(s=this.extend(s,{marker:parseInt(s.marker)}));let n={book:a.id,limit:i},d=await this.privateGetUserTrades(this.extend(n,s));return this.parseTrades(d.payload,a,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={book:this.marketId(e),side:i,type:t,major:this.amountToPrecision(e,s)};"limit"===t&&(o.price=this.priceToPrecision(e,r));let n=await this.privatePostOrders(this.extend(o,a));return{info:n,id:n.payload.oid}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privateDeleteOrdersOid({oid:e})}parseOrderStatus(e){let t={"partial-fill":"open",completed:"closed"};return e in t?t[e]:e}parseOrder(e,t){let i=e.side,s=this.parseOrderStatus(this.safeString(e,"status")),r=void 0;if(void 0===t){let i=e.book;i in this.markets_by_id&&(t=this.markets_by_id[i])}t&&(r=t.symbol);let a=e.type,o=this.parse8601(e.created_at),n=this.safeFloat(e,"original_amount"),d=this.safeFloat(e,"unfilled_amount"),c=n-d;return{info:e,id:e.oid,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:r,type:a,side:i,price:this.safeFloat(e,"price"),amount:n,cost:void 0,remaining:d,filled:c,status:s,fee:void 0}}async fetchOpenOrders(e,t,i=25,s={}){await this.loadMarkets();let a=this.market(e),o="marker"in s;if(void 0!==t&&!o)throw r(this.id+" fetchOpenOrders does not support fetching orders starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");o&&(s=this.extend(s,{marker:parseInt(s.marker)}));let n={book:a.id,limit:i},d=await this.privateGetOpenOrders(this.extend(n,s));return this.parseOrders(d.payload,a,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t),r=await this.privateGetOrdersOid({oid:e}),a=r.payload.length;if(!Array.isArray(r.payload)||1!==a)throw new n(this.id+": The order "+e+" not found.");return this.parseOrder(r.payload[0],s)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();let a=this.market(t),o=await this.privateGetOrderTradesOid({oid:e});return this.parseTrades(o.payload,a)}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i={fund_currency:this.currency(e).id},s=await this.privateGetFundingDestination(this.extend(i,t)),r=this.safeString(s.payload,"account_identifier"),a=void 0;if("XRP"===e){let e=r.split("?dt=");r=e[0],a=e[1]}return this.checkAddress(r),{currency:e,address:r,tag:a,info:s}}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();let o={BTC:"Bitcoin",ETH:"Ether",XRP:"Ripple",BCH:"Bcash",LTC:"Litecoin"},n=e in o?o[e]:void 0;if(void 0===n)throw new r(this.id+" not valid withdraw coin: "+e);let d={amount:t,address:i,destination_tag:s},c="privatePost"+n+"Withdrawal",h=await this[c](this.extend(d,a));return{info:h,id:this.safeString(h.payload,"wid")}}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));let d=this.urls.api+o;if("private"===t){this.checkRequiredCredentials();let e=this.nonce().toString(),t=[e,i,o].join("");"GET"!==i&&Object.keys(n).length&&(t+=a=this.json(n));let s=this.hmac(this.encode(t),this.encode(this.secret));r={Authorization:"Bitso "+(this.apiKey+":"+e+":"+s),"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&!(o.length<2)&&("{"===o[0]||"["===o[0])&&"success"in n){let e=this.safeValue(n,"success",!1);if("string"==typeof e&&(e="true"===e||"1"===e),!e){const e=this.id+" "+this.json(n),t=this.safeValue(n,"error");if(void 0===t)throw new r(e);const i=this.safeString(t,"code"),s=this.exceptions;throw i in s?new s[i](e):new r(e)}}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("success"in n&&n.success)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(1),{AuthenticationError:r,ExchangeError:a,NotSupported:o,PermissionDenied:n,InvalidNonce:d,OrderNotFound:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitstamp",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v2",has:{CORS:!0,fetchDepositAddress:!0,fetchOrder:"emulated",fetchOpenOrders:!0,fetchMyTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:"https://www.bitstamp.net/api",www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["order_book/{pair}/","ticker_hour/{pair}/","ticker/{pair}/","transactions/{pair}/","trading-pairs-info/"]},private:{post:["balance/","balance/{pair}/","bch_withdrawal/","bch_address/","user_transactions/","user_transactions/{pair}/","open_orders/all/","open_orders/{pair}/","order_status/","cancel_order/","buy/{pair}/","buy/market/{pair}/","buy/instant/{pair}/","sell/{pair}/","sell/market/{pair}/","sell/instant/{pair}/","ltc_withdrawal/","ltc_address/","eth_withdrawal/","eth_address/","xrp_withdrawal/","xrp_address/","transfer-to-main/","transfer-from-main/","withdrawal-requests/","withdrawal/open/","withdrawal/status/","withdrawal/cancel/","liquidation_address/new/","liquidation_address/info/"]},v1:{post:["bitcoin_deposit_address/","unconfirmed_btc/","bitcoin_withdrawal/","ripple_withdrawal/","ripple_address/"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:.0025,tiers:{taker:[[0,.0025],[2e4,.0024],[1e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[20000001,.001]],maker:[[0,.0025],[2e4,.0024],[1e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[20000001,.001]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:0,BCH:0,LTC:0,ETH:0,XRP:0,USD:25,EUR:.9},deposit:{BTC:0,BCH:0,LTC:0,ETH:0,XRP:0,USD:25,EUR:0}}},exceptions:{"No permission found":n,"API key not found":r,"IP address not allowed":n,"Invalid nonce":d,"Invalid signature":r,"Authentication failed":r,"Missing key, signature and nonce parameters":r,"Your account is frozen":n,"Please update your profile with your FATCA information, before using API.":n,"Order not found":c}})}async fetchMarkets(e={}){let t=await this.publicGetTradingPairsInfo(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.name,[a,o]=r.split("/"),n=a.toLowerCase(),d=o.toLowerCase(),c=n+"_"+d,h=s.url_symbol,l={amount:s.base_decimals,price:s.counter_decimals},u=s.minimum_order.split(" ")[0],p="Enabled"===s.trading;i.push({id:h,symbol:r,base:a,quote:o,baseId:n,quoteId:d,symbolId:c,info:s,active:p,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:void 0},price:{min:Math.pow(10,-l.price),max:void 0},cost:{min:parseFloat(u),max:void 0}}})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetOrderBookPair(this.extend({pair:this.marketId(e)},i)),r=1e3*parseInt(s.timestamp);return this.parseOrderBook(s,r)}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.publicGetTickerPair(this.extend({pair:this.marketId(e)},t)),s=1e3*parseInt(i.timestamp),r=this.safeFloat(i,"vwap"),a=this.safeFloat(i,"volume"),o=void 0;void 0!==a&&void 0!==r&&(o=a*r);let n=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:r,open:this.safeFloat(i,"open"),close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:i}}getCurrencyIdFromTransaction(e){if("currency"in e)return e.currency.toLowerCase();e=this.omit(e,["fee","price","datetime","type","status","id"]);let t=Object.keys(e);for(let i=0;i<t.length;i++){let s=t[i];if(s.indexOf("_")<0){let t=this.safeFloat(e,s);if(void 0!==t&&0!==t)return s}}}getMarketFromTrade(e){e=this.omit(e,["fee","price","datetime","tid","type","order_id","side"]);let t=Object.keys(e),i=t.length;if(i>2)throw new a(this.id+" getMarketFromTrade too many keys: "+this.json(t)+" in the trade: "+this.json(e));if(2===i){let e=t[0]+t[1];if(e in this.markets_by_id)return this.markets_by_id[e];if((e=t[1]+t[0])in this.markets_by_id)return this.markets_by_id[e]}}getMarketFromTrades(e){let t=this.indexBy(e,"symbol"),i=Object.keys(t);if(1===i.length)return this.markets[i[0]]}parseTrade(e,t){const i=this.safeString2(e,"id","tid");let s=void 0,r=void 0,a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),n=this.safeString(e,"order_id"),d=this.safeFloat(e,"cost");if(void 0===t){let i=Object.keys(e);for(let e=0;e<i.length;e++)if(i[e].indexOf("_")>=0){let s=i[e].replace("_","");s in this.markets_by_id&&(t=this.markets_by_id[s])}void 0===t&&(t=this.getMarketFromTrade(e))}let c=this.safeFloat(e,"fee"),h=void 0;void 0!==t&&(a=this.safeFloat(e,t.symbolId,a),o=this.safeFloat(e,t.baseId,o),d=this.safeFloat(e,t.quoteId,d),h=t.quote,s=t.symbol);let l=this.safeString2(e,"date","datetime");void 0!==l&&(l.indexOf(" ")>=0?l=this.parse8601(l):(l=parseInt(l),l*=1e3)),"id"in e?void 0!==o&&(o<0?(r="sell",o=-o):r="buy"):"1"===(r=this.safeString(e,"type"))?r="sell":"0"===r&&(r="buy"),void 0===d&&void 0!==a&&void 0!==o&&(d=a*o),void 0!==d&&(d=Math.abs(d));let u=void 0;return void 0!==c&&(u={cost:c,currency:h}),{id:i,info:e,timestamp:l,datetime:this.iso8601(l),symbol:s,order:n,type:void 0,side:r,price:a,amount:o,cost:d,fee:u}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTransactionsPair(this.extend({pair:r.id,time:"hour"},s));return this.parseTrades(a,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalance(),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=r.toLowerCase(),o=a+"_balance",n=a+"_available",d=a+"_reserved",c=this.account();n in t&&(c.free=parseFloat(t[n])),d in t&&(c.used=parseFloat(t[d])),o in t&&(c.total=parseFloat(t[o])),i[r]=c}return this.parseBalance(i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n="privatePost"+this.capitalize(i),d={pair:o.id,amount:this.amountToPrecision(e,s)};"market"===t?n+="Market":d.price=this.priceToPrecision(e,r),n+="Pair";let c=await this[n](this.extend(d,a)),h=this.parseOrder(c,o);return this.extend(h,{type:t})}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelOrder({id:e})}parseOrderStatus(e){let t={"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"};return e in t?t[e]:e}async fetchOrderStatus(e,t,i={}){await this.loadMarkets();const s={id:e},r=await this.privatePostOrderStatus(this.extend(s,i));return this.parseOrderStatus(this.safeString(r,"status"))}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=void 0;void 0!==t&&(s=this.market(t));const r={id:e},a=await this.privatePostOrderStatus(this.extend(r,i));return this.parseOrder(a,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r={},a="privatePostUserTransactions",o=void 0;void 0!==e&&(o=this.market(e),r.pair=o.id,a+="Pair"),void 0!==i&&(r.limit=i);let n=await this[a](this.extend(r,s)),d=this.filterBy(n,"type","2");return this.parseTrades(d,o,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let r={};void 0!==i&&(r.limit=i);let a=await this.privatePostUserTransactions(this.extend(r,s)),o=void 0;void 0!==e&&(o=this.currency(e));let n=this.filterByArray(a,"type",["0","1"],!1);return this.parseTransactions(n,o,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();let r={};void 0!==t&&(r.timedelta=this.milliseconds()-t);let a=await this.privatePostWithdrawalRequests(this.extend(r,s));return this.parseTransactions(a,void 0,t,i)}parseTransaction(e,t){let i=this.parse8601(this.safeString(e,"datetime")),s=void 0,r=this.safeString(e,"id"),a=this.getCurrencyIdFromTransaction(e);a in this.currencies_by_id?t=this.currencies_by_id[a]:void 0!==a&&(s=a.toUpperCase(),s=this.commonCurrencyCode(s));let o=this.safeFloat(e,"fee"),n=void 0,d=void 0;void 0!==t?(d=this.safeFloat(e,t.id,d),n=t.code,s=t.code):void 0!==s&&void 0!==a&&(d=this.safeFloat(e,a,d),n=s),void 0!==d&&(d=Math.abs(d));let c=this.parseTransactionStatusByType(this.safeString(e,"status")),h=this.safeString(e,"type");void 0===c?"0"===h?h="deposit":"1"===h&&(h="withdrawal"):h="withdrawal";let l=this.safeString(e,"transaction_id"),u=this.safeString(e,"address");return{info:e,id:r,txid:l,timestamp:i,datetime:this.iso8601(i),address:u,tag:void 0,type:h,amount:d,currency:s,status:c,updated:void 0,fee:{currency:n,cost:o,rate:void 0}}}parseTransactionStatusByType(e){return this.safeString({0:"pending",1:"pending",2:"ok",3:"canceled",4:"failed"},e,e)}parseOrder(e,t){let i=this.safeString(e,"id"),s=this.safeString(e,"type");void 0!==s&&(s="1"===s?"sell":"buy");let r=this.parse8601(this.safeString(e,"datetime")),a=void 0,o=this.safeString(e,"currency_pair");void 0!==o&&(o=(o=o.replace("/","")).toLowerCase())in this.markets_by_id&&(a=(t=this.markets_by_id[o]).symbol);let n=this.safeFloat(e,"amount"),d=0,c=[],h=this.safeValue(e,"transactions"),l=void 0,u=void 0;if(void 0!==h&&Array.isArray(h)){l=0;for(let e=0;e<h.length;e++){let r=this.parseTrade(this.extend({order_id:i,side:s},h[e]),t);d+=r.amount,l+=r.fee.cost,void 0===u&&(u=0),u+=r.cost,c.push(r)}}let p=this.parseOrderStatus(this.safeString(e,"status"));"closed"===p&&void 0===n&&(n=d);let m=void 0;void 0!==n&&(m=n-d);let f=this.safeFloat(e,"price");void 0===t&&(t=this.getMarketFromTrades(c));let y=void 0;void 0!==t&&(void 0===a&&(a=t.symbol),y=t.quote),void 0===u?void 0!==f&&(u=f*d):void 0===f&&d>0&&(f=u/d);let b=void 0;return void 0!==l&&void 0!==y&&(b={cost:l,currency:y}),{id:i,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:p,symbol:a,type:void 0,side:s,price:f,cost:u,amount:n,filled:d,remaining:m,trades:c,fee:b,info:e}}async fetchOpenOrders(e,t,i,s={}){let r=void 0;await this.loadMarkets(),void 0!==e&&(r=this.market(e));const a=await this.privatePostOpenOrdersAll(s),o=[];for(let e=0;e<a.length;e++){const t=this.parseOrder(a[e],r);o.push(this.extend(t,{status:"open",type:"limit"}))}return void 0===e?this.filterBySinceLimit(o,t,i):this.filterBySymbolSinceLimit(o,e,t,i)}getCurrencyName(e){return"BTC"===e?"bitcoin":e.toLowerCase()}isFiat(e){return"USD"===e||"EUR"===e}async fetchDepositAddress(e,t={}){if(this.isFiat(e))throw new o(this.id+" fiat fetchDepositAddress() for "+e+" is not implemented yet");let i=this.getCurrencyName(e),s="BTC"===e,r=s?"v1":"private";r+="Post"+this.capitalize(i),r+=s?"Deposit":"",r+="Address";let a=await this[r](t),n=s?a:this.safeString(a,"address"),d=s?void 0:this.safeString(a,"destination_tag");return this.checkAddress(n),{currency:e,address:n,tag:d,info:a}}async withdraw(e,t,i,s,r={}){if(this.checkAddress(i),this.isFiat(e))throw new o(this.id+" fiat withdraw() for "+e+" is not implemented yet");let n=this.getCurrencyName(e),d={amount:t,address:i},c="BTC"===e?"v1":"private";c+="Post"+this.capitalize(n)+"Withdrawal";let h=r;if("XRP"===e){if(void 0===s)throw new a(this.id+" withdraw() requires a destination_tag param for "+e);d.destination_tag=s,h=this.omit(r,"destination_tag")}let l=await this[c](this.extend(d,h));return{info:l,id:l.id}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/";"v1"!==t&&(o+=this.version+"/"),o+=this.implodeParams(e,s);let n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.encode(this.hmac(this.encode(t),this.encode(this.secret)));n=this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},n),a=this.urlencode(n),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,o,n,d){if("string"==typeof n&&!(n.length<2||"{"!==n[0]&&"["!==n[0])){let e=this.safeString(d,"error"),t=this.exceptions;if(e in t)throw new t[e](this.id+" "+n);if("error"===this.safeString(d,"status")){let e=this.safeString(d,"code");if(void 0!==e&&"API0005"===e)throw new r(this.id+" invalid signature, use the uid for the main account if you have subaccounts");throw new a(this.id+" "+n)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,NotSupported:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitstamp1",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v1",has:{CORS:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:"https://www.bitstamp.net/api",www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["ticker","ticker_hour","order_book","transactions","eur_usd"]},private:{post:["balance","user_transactions","open_orders","order_status","cancel_order","cancel_all_orders","buy","sell","bitcoin_deposit_address","unconfirmed_btc","ripple_withdrawal","ripple_address","withdrawal_requests","bitcoin_withdrawal"]}},markets:{"BTC/USD":{id:"btcusd",symbol:"BTC/USD",base:"BTC",quote:"USD",maker:.0025,taker:.0025},"BTC/EUR":{id:"btceur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",maker:.0025,taker:.0025},"EUR/USD":{id:"eurusd",symbol:"EUR/USD",base:"EUR",quote:"USD",maker:.0025,taker:.0025},"XRP/USD":{id:"xrpusd",symbol:"XRP/USD",base:"XRP",quote:"USD",maker:.0025,taker:.0025},"XRP/EUR":{id:"xrpeur",symbol:"XRP/EUR",base:"XRP",quote:"EUR",maker:.0025,taker:.0025},"XRP/BTC":{id:"xrpbtc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",maker:.0025,taker:.0025},"LTC/USD":{id:"ltcusd",symbol:"LTC/USD",base:"LTC",quote:"USD",maker:.0025,taker:.0025},"LTC/EUR":{id:"ltceur",symbol:"LTC/EUR",base:"LTC",quote:"EUR",maker:.0025,taker:.0025},"LTC/BTC":{id:"ltcbtc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",maker:.0025,taker:.0025},"ETH/USD":{id:"ethusd",symbol:"ETH/USD",base:"ETH",quote:"USD",maker:.0025,taker:.0025},"ETH/EUR":{id:"etheur",symbol:"ETH/EUR",base:"ETH",quote:"EUR",maker:.0025,taker:.0025},"ETH/BTC":{id:"ethbtc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",maker:.0025,taker:.0025}}})}async fetchOrderBook(e,t,i={}){if("BTC/USD"!==e)throw new r(this.id+" "+this.version+" fetchOrderBook doesn't support "+e+", use it for BTC/USD only");let s=await this.publicGetOrderBook(i),a=1e3*parseInt(s.timestamp);return this.parseOrderBook(s,a)}async fetchTicker(e,t={}){if("BTC/USD"!==e)throw new r(this.id+" "+this.version+" fetchTicker doesn't support "+e+", use it for BTC/USD only");let i=await this.publicGetTicker(t),s=1e3*parseInt(i.timestamp),a=this.safeFloat(i,"vwap"),o=this.safeFloat(i,"volume"),n=void 0;void 0!==o&&void 0!==a&&(n=o*a);let d=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:a,open:this.safeFloat(i,"open"),close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:n,info:i}}parseTrade(e,t){let i=void 0;"date"in e?i=1e3*parseInt(e.date):"datetime"in e&&(i=1e3*parseInt(e.datetime));let s=0===e.type?"buy":"sell",r=void 0;return"order_id"in e&&(r=e.order_id.toString()),"currency_pair"in e&&e.currency_pair in this.markets_by_id&&(t=this.markets_by_id[e.currency_pair]),{id:e.tid.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,order:r,type:void 0,side:s,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,i,s={}){if("BTC/USD"!==e)throw new r(this.id+" "+this.version+" fetchTrades doesn't support "+e+", use it for BTC/USD only");let a=this.market(e),o=await this.publicGetTransactions(this.extend({time:"minute"},s));return this.parseTrades(o,a,t,i)}async fetchBalance(e={}){let t=await this.privatePostBalance(),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=r.toLowerCase(),o=a+"_balance",n=a+"_available",d=a+"_reserved",c=this.account();c.free=this.safeFloat(t,n,0),c.used=this.safeFloat(t,d,0),c.total=this.safeFloat(t,o,0),i[r]=c}return this.parseBalance(i)}async createOrder(e,t,i,s,a,o={}){if("limit"!==t)throw new r(this.id+" "+this.version+" accepts limit orders only");if("BTC/USD"!==e)throw new r(this.id+" v1 supports BTC/USD orders only");let n="privatePost"+this.capitalize(i),d={amount:s,price:a},c=await this[n](this.extend(d,o));return{info:c,id:c.id}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder({id:e})}parseOrderStatus(e){let t={"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"};return e in t?t[e]:e}async fetchOrderStatus(e,t,i={}){await this.loadMarkets();let s={id:e},r=await this.privatePostOrderStatus(this.extend(s,i));return this.parseOrderStatus(r)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));let a=r?r.id:"all",o=this.extend({id:a},s),n=await this.privatePostOpenOrdersId(o);return this.parseTrades(n,r,t,i)}async fetchOrder(e,t,i={}){throw new a(this.id+" fetchOrder is not implemented yet")}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.encode(this.hmac(this.encode(t),this.encode(this.secret)));n=this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},n),a=this.urlencode(n),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("status"in n&&"error"===n.status)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:o,PermissionDenied:n,InvalidOrder:d,AuthenticationError:c,InsufficientFunds:h,OrderNotFound:l,DDoSProtection:u}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bitz",name:"Bit-Z",countries:["HK"],rateLimit:2e3,version:"v2",userAgent:this.userAgents.chrome,has:{fetchTickers:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrders:!0,fetchOrder:!0,createMarketOrder:!1},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","5d":"5day","1w":"1week","1M":"1mon"},urls:{logo:"https://user-images.githubusercontent.com/1294454/35862606-4f554f14-0b5d-11e8-957d-35058c504b6f.jpg",api:{market:"https://apiv2.bitz.com",trade:"https://apiv2.bitz.com",assets:"https://apiv2.bitz.com"},www:"https://www.bit-z.com",doc:"https://apidoc.bit-z.com/en",fees:"https://www.bit-z.com/about/fee",referral:"https://u.bit-z.com/register?invite_code=1429193"},api:{market:{get:["ticker","depth","order","tickerall","kline","symbolList","currencyRate","currencyCoinRate","coinRate"]},trade:{post:["addEntrustSheet","cancelEntrustSheet","cancelAllEntrustSheet","getUserHistoryEntrustSheet","getUserNowEntrustSheet","getEntrustSheetInfo"]},assets:{post:["getUserAssets"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:"0.5%",DKKT:"0.5%",ETH:.01,USDT:"0.5%",LTC:"0.5%",FCT:"0.5%",LSK:"0.5%",HXI:"0.8%",ZEC:"0.5%",DOGE:"0.5%",MZC:"0.5%",ETC:"0.5%",GXS:"0.5%",XPM:"0.5%",PPC:"0.5%",BLK:"0.5%",XAS:"0.5%",HSR:"0.5%",NULS:5,VOISE:350,PAY:1.5,EOS:.6,YBCT:35,OMG:.3,OTN:.4,BTX:"0.5%",QTUM:"0.5%",DASH:"0.5%",GAME:"0.5%",BCH:"0.5%",GNT:9,SSS:1500,ARK:"0.5%",PART:"0.5%",LEO:"0.5%",DGB:"0.5%",ZSC:130,VIU:350,BTG:"0.5%",ARN:10,VTC:"0.5%",BCD:"0.5%",TRX:200,HWC:"0.5%",UNIT:"0.5%",OXY:"0.5%",MCO:.35,SBTC:"0.5%",BCX:"0.5%",ETF:"0.5%",PYLNT:.4,XRB:"0.5%",ETP:"0.5%"}}},precision:{amount:8,price:8},options:{fetchOHLCVVolume:!0,fetchOHLCVWarning:!0,lastNonceTimestamp:0},commonCurrencies:{BOX:"BOX Token",XRB:"NANO",PXC:"Pixiecoin"},exceptions:{"-102":r,"-103":c,"-104":o,"-105":c,"-106":o,"-109":c,"-110":u,"-111":n,"-112":o,"-100015":c,"-100044":r,"-100101":r,"-100201":r,"-100301":r,"-100401":r,"-100302":r,"-100303":r,"-200003":c,"-200005":n,"-200025":o,"-200027":d,"-200028":d,"-200029":d,"-200030":d,"-200031":h,"-200032":r,"-200033":r,"-200034":l,"-200035":l,"-200037":d,"-200038":r,"-200055":l,"-300069":c,"-300101":r,"-300102":d,"-300103":c,"-301001":o}})}async fetchMarkets(e={}){let t=(await this.marketGetSymbolList()).data,i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){let r=i[e],a=t[r],o=this.safeString(a,"id"),n=this.safeString(a,"coinFrom"),d=this.safeString(a,"coinTo"),c=n.toUpperCase(),h=d.toUpperCase(),l=(c=this.commonCurrencyCode(c))+"/"+(h=this.commonCurrencyCode(h)),u={amount:this.safeInteger(a,"numberFloat"),price:this.safeInteger(a,"priceFloat")};s.push({info:a,id:r,numericId:o,symbol:l,base:c,quote:h,baseId:n,quoteId:d,active:!0,precision:u,limits:{amount:{min:this.safeFloat(a,"minTrade"),max:this.safeFloat(a,"maxTrade")},price:{min:Math.pow(10,-u.price),max:void 0},cost:{min:void 0,max:void 0}}})}return s}async fetchBalance(e={}){await this.loadMarkets();let t=await this.assetsPostGetUserAssets(e),i=t.data.info,s={info:t};for(let e=0;e<i.length;e++){let t=i[e],r=this.safeString(t,"name"),a=r.toUpperCase();a=r in this.markets_by_id?this.currencies_by_id[r].code:this.commonCurrencyCode(a);let o=this.account();o.used=this.safeFloat(t,"lock"),o.total=this.safeFloat(t,"num"),o.free=this.safeFloat(t,"over"),s[a]=o}return this.parseBalance(s)}parseTicker(e,t){let i=void 0;if(void 0===t){let i=this.safeString(e,"symbol");t=this.safeValue(this.markets_by_id,i)}void 0!==t&&(i=t.symbol);let s=this.safeFloat(e,"now"),r=this.safeFloat(e,"open"),a=void 0,o=void 0;return void 0!==s&&void 0!==r&&(a=s-r,o=this.sum(s,r)/2),{symbol:i,timestamp:void 0,datetime:this.iso8601(void 0),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat(e,"askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:void 0,open:r,close:s,last:s,previousClose:void 0,change:a,percentage:this.safeFloat(e,"priceChange24h"),average:o,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}parseMicrotime(e){if(void 0===e)return e;let t=e.split(" "),i=parseFloat(t[0]),s=parseInt(t[1]),r=this.sum(s,i);return parseInt(1e3*r)}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.marketGetTicker(this.extend({symbol:i.id},t));const r=this.parseTicker(s.data,i);let a=this.parseMicrotime(this.safeString(s,"microtime"));return this.extend(r,{timestamp:a,datetime:this.iso8601(a)})}async fetchTickers(e,t={}){await this.loadMarkets();let i={};if(void 0!==e){let t=this.marketIds(e);i.symbols=t.join(",")}let s=await this.marketGetTickerall(this.extend(i,t)),r=s.data,a=this.parseMicrotime(this.safeString(s,"microtime")),o={},n=Object.keys(r);for(let e=0;e<n.length;e++){let t=n[e],i=r[t],s=void 0;t in this.markets_by_id&&(s=this.markets_by_id[t]);let d=(i=this.parseTicker(r[t],s)).symbol;if(void 0===d)if(void 0!==s)d=s.symbol;else{let[e,i]=t.split("_"),s=e.toUpperCase(),r=i.toUpperCase();d=(s=this.commonCurrencyCode(e))+"/"+(r=this.commonCurrencyCode(i))}void 0!==d&&(o[d]=this.extend(i,{timestamp:a,datetime:this.iso8601(a)}))}return o}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.marketGetDepth(this.extend({symbol:this.marketId(e)},i)),r=s.data,a=this.parseMicrotime(this.safeString(s,"microtime"));return this.parseOrderBook(r,a)}parseTrade(e,t){let i=this.safeString(e,"id"),s=this.safeInteger(e,"T");void 0!==s&&(s*=1e3);let r=this.safeFloat(e,"p"),a=this.safeFloat(e,"n"),o=void 0;void 0!==t&&(o=t.symbol);let n=this.priceToPrecision(o,a*r),d=this.safeString(e,"s");return{timestamp:s,datetime:this.iso8601(s),symbol:o,id:i,order:void 0,type:"limit",side:d,price:r,amount:a,cost:n,fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.marketGetOrder(this.extend({symbol:r.id},s));return this.parseTrades(a.data,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();let o=1e3*this.parseTimeframe(t),n=this.market(e),d={symbol:n.id,resolution:this.timeframes[t]};if(void 0!==s)d.size=Math.min(s,300),void 0!==i&&(d.to=i+s*o*1e3);else if(void 0!==i)throw new r(this.id+" fetchOHLCV requires a limit argument if the since argument is specified");let c=await this.marketGetKline(this.extend(d,a));return this.parseOHLCVs(c.data.bars,n,t,i,s)}parseOrderStatus(e){const t={0:"open",1:"open",2:"closed",3:"canceled"};return e in t?t[e]:e}parseOrder(e,t){let i=this.safeString(e,"id"),s=void 0;if(void 0===t){let i=this.safeString(e,"coinFrom"),r=this.safeString(e,"coinTo");if(void 0!==i&&void 0!==r){let e=i+"_"+r;if(e in this.markets_by_id)t=this.safeValue(this.markets_by_id,e);else{let e=i.toUpperCase(),t=r.toUpperCase();s=(e=this.commonCurrencyCode(e))+"/"+(t=this.commonCurrencyCode(t))}}}void 0!==t&&(s=t.symbol);let r=this.safeString(e,"flag");void 0!==r&&(r="sale"===r?"sell":"buy");let a=this.safeFloat(e,"price"),o=this.safeFloat(e,"number"),n=this.safeFloat(e,"numberOver"),d=this.safeFloat(e,"numberDeal"),c=this.safeInteger(e,"timestamp");void 0===c&&void 0!==(c=this.safeInteger(e,"created"))&&(c*=1e3);let h=this.safeFloat(e,"orderTotalPrice");void 0!==a&&void 0!==d&&(h=d*a);let l=this.parseOrderStatus(this.safeString(e,"status"));return{id:i,datetime:this.iso8601(c),timestamp:c,lastTradeTimestamp:void 0,status:l,symbol:s,type:"limit",side:r,price:a,cost:h,amount:o,filled:d,remaining:n,trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"limit"!==t)throw new r(this.id+" createOrder allows limit orders only");let n=this.market(e),d="buy"===i?"1":"2";if(!this.password)throw new r(this.id+' createOrder() requires you to set exchange.password = "YOUR_TRADING_PASSWORD" (a trade password is NOT THE SAME as your login password)');let c={symbol:n.id,type:d,price:this.priceToPrecision(e,a),number:this.amountToPrecision(e,s),tradePwd:this.password},h=await this.tradePostAddEntrustSheet(this.extend(c,o)),l=this.parseMicrotime(this.safeString(h,"microtime")),u=this.extend({timestamp:l},h.data);return this.parseOrder(u,n)}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.tradePostCancelEntrustSheet(this.extend({entrustSheetId:e},i))}async cancelOrders(e,t,i={}){return await this.loadMarkets(),await this.tradePostCancelEntrustSheet(this.extend({ids:e.join(",")},i))}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={entrustSheetId:e},r=await this.tradePostGetEntrustSheetInfo(this.extend(s,i));return this.parseOrder(r.data)}async fetchOrdersWithMethod(e,t,i,s,r={}){if(await this.loadMarkets(),void 0===t)throw new a(this.id+" fetchOpenOrders requires a symbol argument");let o=this.market(t),n={coinFrom:o.baseId,coinTo:o.quoteId};void 0!==s&&(n.page=1,n.pageSize=s),void 0!==i&&(n.startTime=parseInt(i/1e3));let d=await this[e](this.extend(n,r));return this.safeValue(d.data,"data")?this.parseOrders(d.data.data,void 0,i,s):[]}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("tradePostGetUserHistoryEntrustSheet",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("tradePostGetUserNowEntrustSheet",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersWithMethod("tradePostGetUserHistoryEntrustSheet",e,t,i,s)}nonce(){let e=this.seconds();return e>this.options.lastNonceTimestamp&&(this.options.lastNonceTimestamp=e,this.options.lastNonce=1e5),this.options.lastNonce=this.sum(this.options.lastNonce,1),this.options.lastNonce}sign(e,t="market",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+this.capitalize(t)+"/"+e,n=void 0;return"market"===t?(n=this.urlencode(s)).length&&(o+="?"+n):(this.checkRequiredCredentials(),a=this.rawencode(this.keysort(this.extend({apiKey:this.apiKey,timeStamp:this.seconds(),nonce:this.nonce()},s))),a+="&sign="+this.hash(this.encode(a+this.secret)),r={"Content-type":"application/x-www-form-urlencoded"}),{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&!(o.length<2||"{"!==o[0]&&"["!==o[0])){let e=this.safeString(n,"status");if(void 0!==e){const t=this.id+" "+o,i=this.exceptions;if("200"===e){const e=this.safeInteger(n,"data");if(void 0!==e)throw e in i?new i[e](t):new r(t);return}throw e in i?new i[e](t):new r(t)}}}}},function(e,t,i){"use strict";const s=i(1);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bl3p",name:"BL3P",countries:["NL","EU"],rateLimit:1e3,version:"1",comment:"An exchange market by BitonicNL",has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/28501752-60c21b82-6feb-11e7-818b-055ee6d0e754.jpg",api:"https://api.bl3p.eu",www:["https://bl3p.eu","https://bitonic.nl"],doc:["https://github.com/BitonicNL/bl3p-api/tree/master/docs","https://bl3p.eu/api","https://bitonic.nl/en/api"]},api:{public:{get:["{market}/ticker","{market}/orderbook","{market}/trades"]},private:{post:["{market}/money/depth/full","{market}/money/order/add","{market}/money/order/cancel","{market}/money/order/result","{market}/money/orders","{market}/money/orders/history","{market}/money/trades/fetch","GENMKT/money/info","GENMKT/money/deposit_address","GENMKT/money/new_deposit_address","GENMKT/money/wallet/history","GENMKT/money/withdraw"]}},markets:{"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",maker:.0025,taker:.0025},"LTC/EUR":{id:"LTCEUR",symbol:"LTC/EUR",base:"LTC",quote:"EUR",maker:.0025,taker:.0025}}})}async fetchBalance(e={}){let t=(await this.privatePostGENMKTMoneyInfo()).data,i=t.wallets,s={info:t},r=Object.keys(this.currencies);for(let e=0;e<r.length;e++){let t=r[e],a=this.account();t in i&&"available"in i[t]&&(a.free=parseFloat(i[t].available.value)),t in i&&"balance"in i[t]&&(a.total=parseFloat(i[t].balance.value)),a.total&&a.free&&(a.used=a.total-a.free),s[t]=a}return this.parseBalance(s)}parseBidAsk(e,t=0,i=0){return[e[t]/1e5,e[i]/1e8]}async fetchOrderBook(e,t,i={}){let s=this.market(e),r=(await this.publicGetMarketOrderbook(this.extend({market:s.id},i))).data;return this.parseOrderBook(r,void 0,"bids","asks","price_int","amount_int")}async fetchTicker(e,t={}){let i=await this.publicGetMarketTicker(this.extend({market:this.marketId(e)},t)),s=1e3*i.timestamp,r=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(i.volume["24h"]),quoteVolume:void 0,info:i}}parseTrade(e,t){return{id:e.trade_id.toString(),timestamp:e.date,datetime:this.iso8601(e.date),symbol:t.symbol,type:void 0,side:void 0,price:e.price_int/1e5,amount:e.amount_int/1e8,info:e}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetMarketTrades(this.extend({market:r.id},s));return this.parseTrades(a.data.trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o=this.market(e),n={market:o.id,amount_int:parseInt(1e8*s),fee_currency:o.quote,type:"buy"===i?"bid":"ask"};"limit"===t&&(n.price_int=parseInt(1e5*r));let d=await this.privatePostMarketMoneyOrderAdd(this.extend(n,a));return{info:d,id:d.data.order_id.toString()}}async cancelOrder(e,t,i={}){return await this.privatePostMarketMoneyOrderCancel({order_id:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.implodeParams(e,s),n=this.urls.api+"/"+this.version+"/"+o,d=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials();let e=this.nonce();a=this.urlencode(this.extend({nonce:e},d));let t=this.base64ToBinary(this.secret),i=o+"\0"+a,s=this.hmac(this.encode(i),t,"sha512","base64");r={"Content-Type":"application/x-www-form-urlencoded","Rest-Key":this.apiKey,"Rest-Sign":this.decode(s)}}return{url:n,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(46),{ExchangeError:r,AuthenticationError:a,InvalidOrder:o,InsufficientFunds:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bleutrade",name:"Bleutrade",countries:["BR"],rateLimit:1e3,version:"v2",certified:!1,has:{CORS:!0,fetchTickers:!0,fetchOrders:!0,fetchClosedOrders:!0,fetchOrderTrades:!0},timeframes:{"15m":"15m","20m":"20m","30m":"30m","1h":"1h","2h":"2h","3h":"3h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d"},hostname:"bleutrade.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/30303000-b602dbe6-976d-11e7-956d-36c5049c01e7.jpg",api:{public:"https://{hostname}/api",account:"https://{hostname}/api",market:"https://{hostname}/api"},www:"https://bleutrade.com",doc:"https://bleutrade.com/help/API",fees:"https://bleutrade.com/help/fees_and_deadlines"},api:{account:{get:["balance","balances","depositaddress","deposithistory","order","orders","orderhistory","withdrawhistory","withdraw"]},public:{get:["candles","currencies","markethistory","markets","marketsummaries","marketsummary","orderbook","ticker"]}},fees:{funding:{withdraw:{ADC:.1,BTA:.1,BITB:.1,BTC:.001,BCC:.001,BTCD:.001,BTG:.001,BLK:.1,CDN:.1,CLAM:.01,DASH:.001,DCR:.05,DGC:.1,DP:.1,DPC:.1,DOGE:10,EFL:.1,ETH:.01,EXP:.1,FJC:.1,BSTY:.001,GB:.1,NLG:.1,HTML:1,LTC:.001,MONA:.01,MOON:1,NMC:.015,NEOS:.1,NVC:.05,OK:.1,PPC:.1,POT:.1,XPM:.001,QTUM:.1,RDD:.1,SLR:.1,START:.1,SLG:.1,TROLL:.1,UNO:.01,VRC:.1,VTC:.1,XVP:.1,WDC:.001,ZET:.1}}},commonCurrencies:{EPC:"Epacoin"},exceptions:{"Insufficient funds!":n,"Invalid Order ID":o,"Invalid apikey or apisecret":a},options:{parseOrderStatus:!0,disableNonce:!1,symbolSeparator:"_"}})}parseOrderStatus(e){let t={OK:"closed",OPEN:"open",CANCELED:"canceled"};return e in t?t[e]:e}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e?(await this.loadMarkets(),r=this.market(e)):r=void 0;let a=await this.accountGetOrders(this.extend({market:"ALL",orderstatus:"ALL"},s));return this.parseOrders(a.result,r,t,i)}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}getOrderIdField(){return"orderid"}parseSymbol(e){let[t,i]=e.split(this.options.symbolSeparator);return(t=this.commonCurrencyCode(t))+"/"+(i=this.commonCurrencyCode(i))}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={market:this.marketId(e),type:"ALL"};void 0!==t&&(s.depth=t);let a=await this.publicGetOrderbook(this.extend(s,i)),o=this.safeValue(a,"result");if(!o)throw new r(this.id+" publicGetOrderbook() returneded no result "+this.json(a));return this.parseOrderBook(o,void 0,"buy","sell","Rate","Quantity")}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();let a=await this.accountGetOrderhistory({orderid:e}),o=this.parseTrades(a.result,void 0,i,s),n=[];for(let t=0;t<o.length;t++){let i=this.extend(o[t],{order:e});n.push(i)}return n}async fetchTransactionsByType(e,t,i,s,r={}){await this.loadMarkets();let a="deposit"===e?"accountGetDeposithistory":"accountGetWithdrawhistory",o=await this[a](r),n=this.parseTransactions(o.result);return this.filterByCurrencySinceLimit(n,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsByType("deposit",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsByType("withdrawal",e,t,i,s)}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(e.TimeStamp+"+00:00"),e.Open,e.High,e.Low,e.Close,e.Volume]}async fetchOHLCV(e,t="15m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={period:this.timeframes[t],market:a.id,count:s},n=await this.publicGetCandles(this.extend(o,r));if("result"in n&&n.result)return this.parseOHLCVs(n.result,a,t,i,s)}parseTrade(e,t){let i=this.parse8601(e.TimeStamp+"+00:00"),s=void 0;"BUY"===e.OrderType?s="buy":"SELL"===e.OrderType&&(s="sell");let r=this.safeString(e,"TradeID"),a=void 0;void 0!==t&&(a=t.symbol);let o=void 0,n=this.safeFloat(e,"Price"),d=this.safeFloat(e,"Quantity");return void 0!==d&&void 0!==n&&(o=n*d),{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,type:"limit",side:s,price:n,amount:d,cost:o,fee:void 0}}parseOrder(e,t){let i=this.safeString2(e,"OrderType","Type");const s="LIMIT_SELL"===i||"SELL"===i;("LIMIT_BUY"===i||"BUY"===i)&&(i="buy"),s&&(i="sell");let r=void 0;"Opened"in e&&e.Opened&&(r="open"),"Closed"in e&&e.Closed&&(r="closed"),"CancelInitiated"in e&&e.CancelInitiated&&(r="canceled"),"Status"in e&&this.options.parseOrderStatus&&(r=this.parseOrderStatus(this.safeString(e,"Status")));let a=void 0;if("Exchange"in e){let i=e.Exchange;a=i in this.markets_by_id?(t=this.markets_by_id[i]).symbol:this.parseSymbol(i)}else void 0!==t&&(a=t.symbol);let o=void 0;"Opened"in e&&(o=this.parse8601(e.Opened+"+00:00")),"Created"in e&&(o=this.parse8601(e.Created+"+00:00"));let n=void 0;"TimeStamp"in e&&void 0!==e.TimeStamp&&(n=this.parse8601(e.TimeStamp+"+00:00")),"Closed"in e&&void 0!==e.Closed&&(n=this.parse8601(e.Closed+"+00:00")),void 0===o&&(o=n);let d=void 0,c=void 0;if("Commission"in e?c="Commission":"CommissionPaid"in e&&(c="CommissionPaid"),c)if(d={cost:this.safeFloat(e,c)},void 0!==t)d.currency=t.quote;else if(void 0!==a){let e=a.split("/")[1];e in this.currencies_by_id?d.currency=this.currencies_by_id[e].code:d.currency=this.commonCurrencyCode(e)}let h=this.safeFloat(e,"Price"),l=void 0;const u=this.safeFloat(e,"Quantity"),p=this.safeFloat(e,"QuantityRemaining");let m=void 0;void 0!==u&&void 0!==p&&(m=u-p),l||h&&m&&(l=h*m),h||l&&m&&(h=l/m);const f=this.safeFloat(e,"PricePerUnit");return{info:e,id:this.safeString2(e,"OrderUuid","OrderId"),timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:n,symbol:a,type:"limit",side:i,price:h,cost:l,average:f,amount:u,filled:m,remaining:p,status:r,fee:d}}parseTransaction(e,t){let i=this.safeString(e,"Id"),s=this.safeFloat(e,"Amount"),r="deposit";s<0&&(s=Math.abs(s),r="withdrawal");let a=this.safeString(e,"Coin"),o=void 0;o=void 0!==(t=this.safeValue(this.currencies_by_id,a))?t.code:this.commonCurrencyCode(a);let n=this.safeString(e,"Label"),d=this.parse8601(this.safeString(e,"TimeStamp")),c=this.safeString(e,"TransactionId"),h=void 0,l=void 0,u=n.split(";");3===u.length?(s=u[0],h=u[1],l=u[2]):h=n;let p=void 0;void 0!==l&&(p={currency:o,cost:l});let m="ok";return"CANCELED"===c&&(c=void 0,m="canceled"),{info:e,timestamp:d,datetime:this.iso8601(d),id:i,currency:o,amount:s,address:h,tag:void 0,status:m,type:r,updated:void 0,txid:c,fee:p}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,InvalidOrder:a,AuthenticationError:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"braziliex",name:"Braziliex",countries:["BR"],rateLimit:1e3,has:{fetchCurrencies:!0,fetchTickers:!0,fetchOpenOrders:!0,fetchMyTrades:!0,fetchDepositAddress:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/34703593-c4498674-f504-11e7-8d14-ff8e44fb78c1.jpg",api:"https://braziliex.com/api/v1",www:"https://braziliex.com/",doc:"https://braziliex.com/exchange/api.php",fees:"https://braziliex.com/exchange/fees.php",referral:"https://braziliex.com/?ref=5FE61AB6F6D67DA885BC98BA27223465"},api:{public:{get:["currencies","ticker","ticker/{market}","orderbook/{market}","tradehistory/{market}"]},private:{post:["balance","complete_balance","open_orders","trade_history","deposit_address","sell","buy","cancel_order"]}},commonCurrencies:{EPC:"Epacoin",ABC:"Anti Bureaucracy Coin"},fees:{trading:{maker:.005,taker:.005}},precision:{amount:8,price:8},options:{fetchCurrencies:{expires:1e3}}})}async fetchCurrenciesFromCache(e={}){const t=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(t,"timestamp"),s=this.safeInteger(t,"expires",1e3),r=this.milliseconds();if(void 0===i||r-i>s){const i=await this.publicGetCurrencies(e);this.options.fetchCurrencies=this.extend(t,{response:i,timestamp:r})}return this.safeValue(this.options.fetchCurrencies,"response")}async fetchCurrencies(e={}){const t=await this.fetchCurrenciesFromCache(e);this.options.currencies={timestamp:this.milliseconds(),response:t};const i=Object.keys(t),s={};for(let e=0;e<i.length;e++){const r=i[e],a=t[r],o=this.safeInteger(a,"decimal"),n=r.toUpperCase(),d=this.commonCurrencyCode(n);let c=1===this.safeInteger(a,"active");0!==this.safeInteger(a,"under_maintenance")&&(c=!1);const h=1===this.safeInteger(a,"is_withdrawal_active"),l=1===this.safeInteger(a,"is_deposit_active");h&&l||(c=!1),s[d]={id:r,code:d,name:a.name,active:c,precision:o,funding:{withdraw:{active:h,fee:this.safeFloat(a,"txWithdrawalFee")},deposit:{active:l,fee:this.safeFloat(a,"txDepositFee")}},limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(a,"MinWithdrawal"),max:Math.pow(10,o)},deposit:{min:this.safeFloat(a,"minDeposit"),max:void 0}},info:a}}return s}async fetchMarkets(e={}){const t=await this.fetchCurrenciesFromCache(e),i=await this.publicGetTicker(),s=Object.keys(i),r=[];for(let e=0;e<s.length;e++){const a=s[e],o=i[a],[n,d]=a.split("_"),c=n.toUpperCase(),h=d.toUpperCase(),l=this.commonCurrencyCode(c),u=this.commonCurrencyCode(h),p=l+"/"+u,m=this.safeValue(t,n,{}),f=this.safeValue(t,d,{});let y=void 0;y=this.safeInteger(f,"is_fiat",0)?this.safeFloat(m,"minAmountTradeFIAT"):this.safeFloat(m,"minAmountTrade"+h);const b=1===this.safeInteger(o,"active"),w={amount:8,price:8};r.push({id:a,symbol:p.toUpperCase(),base:l,quote:u,baseId:n,quoteId:d,active:b,precision:w,limits:{amount:{min:Math.pow(10,-w.amount),max:Math.pow(10,w.amount)},price:{min:Math.pow(10,-w.price),max:Math.pow(10,w.price)},cost:{min:y,max:void 0}},info:o})}return r}parseTicker(e,t){let i=t.symbol,s=e.date;e=e.ticker;let r=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"highestBid24"),low:this.safeFloat(e,"lowestAsk24"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:this.safeFloat(e,"percentChange"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"baseVolume24"),quoteVolume:this.safeFloat(e,"quoteVolume24"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerMarket(this.extend({market:i.id},t));return s={date:this.milliseconds(),ticker:s},this.parseTicker(s,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t),s={},r=this.milliseconds(),a=Object.keys(i);for(let e=0;e<a.length;e++){let t=a[e],o=this.markets_by_id[t],n=o.symbol,d={date:r,ticker:i[t]};s[n]=this.parseTicker(d,o)}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetOrderbookMarket(this.extend({market:this.marketId(e)},i));return this.parseOrderBook(s,void 0,"bids","asks","price","amount")}parseTrade(e,t){let i=void 0;i="date_exec"in e?this.parse8601(e.date_exec):this.parse8601(e.date);let s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount"),a=t.symbol,o=this.safeFloat(e,"total"),n=this.safeString(e,"order_number");return{timestamp:i,datetime:this.iso8601(i),symbol:a,id:this.safeString(e,"_id"),order:n,type:"limit",side:e.type,price:s,amount:r,cost:o,fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradehistoryMarket(this.extend({market:r.id},s));return this.parseTrades(a,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostCompleteBalance(e),i={info:t},s=Object.keys(t);for(let e=0;e<s.length;e++){let r=s[e],a=t[r],o=this.commonCurrencyCode(r),n={free:parseFloat(a.available),used:0,total:parseFloat(a.total)};n.used=n.total-n.free,i[o]=n}return this.parseBalance(i)}parseOrder(e,t){let i=void 0;if(void 0===t){let i=this.safeString(e,"market");i&&i in this.markets_by_id&&(t=this.markets_by_id[i])}t&&(i=t.symbol);let s=this.safeValue(e,"timestamp");s||(s=this.parse8601(e.date));let r=this.safeFloat(e,"price"),a=this.safeFloat(e,"total",0),o=this.safeFloat(e,"amount"),n=o*this.safeFloat(e,"progress"),d=parseFloat(this.amountToPrecision(i,o-n)),c=e;return"info"in c&&(c=e.info),{id:e.order_number,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:"open",symbol:i,type:"limit",side:e.type,price:r,cost:a,amount:o,filled:n,remaining:d,trades:void 0,fee:this.safeValue(e,"fee"),info:c}}async createOrder(e,t,i,s,r,o={}){await this.loadMarkets();let n=this.market(e),d="privatePost"+this.capitalize(i),c=await this[d](this.extend({market:n.id,price:r,amount:s},o));if(1!==this.safeInteger(c,"success"))throw new a(this.id+" "+this.json(c));let h=c.message.split(" / "),l=(h=h.slice(1))[5].split(" "),u=this.parseOrder({timestamp:this.milliseconds(),order_number:c.order_number,type:h[0].toLowerCase(),market:h[0].toLowerCase(),amount:h[2].split(" ")[1],price:h[3].split(" ")[1],total:h[4].split(" ")[1],fee:{cost:parseFloat(l[1]),currency:l[2]},progress:"0.0",info:c},n),p=u.id;return this.orders[p]=u,u}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t);return await this.privatePostCancelOrder(this.extend({order_number:e,market:s.id},i))}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.privatePostOpenOrders(this.extend({market:r.id},s));return this.parseOrders(a.order_open,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.privatePostTradeHistory(this.extend({market:r.id},s));return this.parseTrades(a.trade_history,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privatePostDepositAddress(this.extend({currency:i.id},t)),r=this.safeString(s,"deposit_address");return this.checkAddress(r),{currency:e,address:r,tag:this.safeString(s,"payment_id"),info:s}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+t,n=this.omit(s,this.extractParams(e));if("public"===t)o+="/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),n=this.extend({command:e,nonce:this.nonce()},n),a=this.urlencode(n);let t=this.hmac(this.encode(a),this.encode(this.secret),"sha512");r={"Content-type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.decode(t)}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,n){let d=await this.fetch2(e,t,i,s,a,n);if("success"in d){if(0===this.safeInteger(d,"success")){let e=this.safeString(d,"message");if("Invalid APIKey"===e)throw new o(e);throw new r(e)}}return d}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,AuthenticationError:a,DDoSProtection:o,InvalidOrder:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcalpha",name:"BTC-Alpha",countries:["US"],version:"v1",has:{fetchTicker:!1,fetchOHLCV:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","1d":"D"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42625213-dabaa5da-85cf-11e8-8f99-aa8f8f7699f0.jpg",api:"https://btc-alpha.com/api",www:"https://btc-alpha.com",doc:"https://btc-alpha.github.io/api-docs",fees:"https://btc-alpha.com/fees/",referral:"https://btc-alpha.com/?r=123788"},api:{public:{get:["currencies/","pairs/","orderbook/{pair_name}/","exchanges/","charts/{pair}/{type}/chart/"]},private:{get:["wallets/","orders/own/","order/{id}/","exchanges/own/","deposits/","withdraws/"],post:["order/","order-cancel/"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:.00135,LTC:.0035,XMR:.018,ZEC:.002,ETH:.01,ETC:.01,SIB:1.5,CCRB:4,PZM:.05,ITI:.05,DCY:5,R:5,ATB:.05,BRIA:.05,KZC:.05,HWC:1,SPA:1,SMS:.001,REC:.01,SUP:1,BQ:100,GDS:.1,EVN:300,TRKC:.01,UNI:1,STN:1,BCH:void 0,QBIC:.5}}}})}async fetchMarkets(e={}){let t=await this.publicGetPairs(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.name,a=this.commonCurrencyCode(s.currency1),o=this.commonCurrencyCode(s.currency2),n=a+"/"+o,d={amount:8,price:parseInt(s.price_precision)};i.push({id:r,symbol:n,base:a,quote:o,active:!0,precision:d,limits:{amount:{min:parseFloat(s.minimum_order_size),max:parseFloat(s.maximum_order_size)},price:{min:Math.pow(10,-d.price),max:Math.pow(10,d.price)},cost:{min:void 0,max:void 0}},info:s})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={pair_name:this.marketId(e)};t&&(s.limit_sell=t,s.limit_buy=t);let r=await this.publicGetOrderbookPairName(this.extend(s,i));return this.parseOrderBook(r,void 0,"buy","sell","price","amount")}parseTrade(e,t){let i=void 0;t||(t=this.safeValue(this.marketsById,e.pair)),t&&(i=t.symbol);let s=parseInt(1e3*e.timestamp),r=parseFloat(e.price),a=parseFloat(e.amount),o=this.costToPrecision(i,r*a),n=this.safeString(e,"id"),d=void 0;return d="my_side"in e?this.safeString(e,"my_side"):this.safeString(e,"side"),n||(n=this.safeString(e,"tid")),{timestamp:s,datetime:this.iso8601(s),symbol:i,id:n,order:this.safeString(e,"o_id"),type:"limit",side:d,price:r,amount:a,cost:parseFloat(o),fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.pair=r.id),i&&(a.limit=i);let o=await this.publicGetExchanges(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOHLCV(e,t,i="5m",s,r){return[1e3*e.time,e.open,e.high,e.low,e.close,e.volume]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={pair:a.id,type:this.timeframes[t]};s&&(o.limit=s),i&&(o.since=parseInt(i/1e3));let n=await this.publicGetChartsPairTypeChart(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetWallets(e),i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=this.commonCurrencyCode(s.currency),a=this.safeFloat(s,"reserve"),o=this.safeFloat(s,"balance"),n=void 0;void 0!==a&&void 0!==o&&(n=o-a),i[r]={free:n,used:a,total:o}}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({1:"open",2:"canceled",3:"closed"},e,e)}parseOrder(e,t){let i=void 0;t||(t=this.safeValue(this.marketsById,e.pair)),t&&(i=t.symbol);let s=this.safeInteger(e,"date");void 0!==s&&(s*=1e3);let r=parseFloat(e.price),a=this.safeFloat(e,"amount"),o=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeString(e,"oid");n||(n=this.safeString(e,"id"));let d=this.safeValue(e,"trades");d&&(d=this.parseTrades(d,t));const c=this.safeString2(e,"my_side","type");return{id:n,datetime:this.iso8601(s),timestamp:s,status:o,symbol:i,type:"limit",side:c,price:r,cost:void 0,amount:a,filled:void 0,remaining:void 0,trades:d,fee:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),d=await this.privatePostOrder(this.extend({pair:o.id,type:i,amount:s,price:this.priceToPrecision(e,r)},a));if(!d.success)throw new n(this.id+" "+this.json(d));return this.parseOrder(d,o)}async cancelOrder(e,t,i={}){return await this.privatePostOrderCancel(this.extend({order:e},i))}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetOrderId(this.extend({id:e},i));return this.parseOrder(s)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r={},a=void 0;e&&(a=this.market(e),r.pair=a.id),i&&(r.limit=i);let o=await this.privateGetOrdersOwn(this.extend(r,s));return this.parseOrders(o,a,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"1"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"3"},s))}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r={};if(e){let t=this.market(e);r.pair=t.id}i&&(r.limit=i);let a=await this.privateGetExchangesOwn(this.extend(r,s));return this.parseTrades(a,void 0,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urlencode(this.keysort(this.omit(s,this.extractParams(e)))),n=this.urls.api+"/";if("charts/{pair}/{type}/chart/"!==e&&(n+="v1/"),n+=this.implodeParams(e,s),r={Accept:"application/json"},"public"===t)o.length&&(n+="?"+o);else{this.checkRequiredCredentials();let e=this.apiKey;"POST"===i?(r["Content-Type"]="application/x-www-form-urlencoded",e+=a=o):o.length&&(n+="?"+o),r["X-KEY"]=this.apiKey,r["X-SIGN"]=this.hmac(this.encode(e),this.encode(this.secret)),r["X-NONCE"]=this.nonce().toString()}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,n,d,c){if(!(e<400||"string"!=typeof d||d.length<2||"{"!==d[0]&&"["!==d[0])){let t=this.id+" "+this.safeValue(c,"detail",d);if(401===e||403===e)throw new a(t);if(429===e)throw new o(t);throw new r(t)}}}},function(e,t,i){"use strict";const s=i(1);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcchina",name:"BTCChina",countries:["CN"],rateLimit:1500,version:"v1",has:{CORS:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766368-465b3286-5ed6-11e7-9a11-0f6467e1d82b.jpg",api:{plus:"https://plus-api.btcchina.com/market",public:"https://data.btcchina.com/data",private:"https://api.btcchina.com/api_trade_v1.php"},www:"https://www.btcchina.com",doc:"https://www.btcchina.com/apidocs"},api:{plus:{get:["orderbook","ticker","trade"]},public:{get:["historydata","orderbook","ticker","trades"]},private:{post:["BuyIcebergOrder","BuyOrder","BuyOrder2","BuyStopOrder","CancelIcebergOrder","CancelOrder","CancelStopOrder","GetAccountInfo","getArchivedOrder","getArchivedOrders","GetDeposits","GetIcebergOrder","GetIcebergOrders","GetMarketDepth","GetMarketDepth2","GetOrder","GetOrders","GetStopOrder","GetStopOrders","GetTransactions","GetWithdrawal","GetWithdrawals","RequestWithdrawal","SellIcebergOrder","SellOrder","SellOrder2","SellStopOrder"]}},markets:{"BTC/CNY":{id:"btccny",symbol:"BTC/CNY",base:"BTC",quote:"CNY",api:"public",plus:!1},"LTC/CNY":{id:"ltccny",symbol:"LTC/CNY",base:"LTC",quote:"CNY",api:"public",plus:!1},"LTC/BTC":{id:"ltcbtc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",api:"public",plus:!1},"BCH/CNY":{id:"bcccny",symbol:"BCH/CNY",base:"BCH",quote:"CNY",api:"plus",plus:!0},"ETH/CNY":{id:"ethcny",symbol:"ETH/CNY",base:"ETH",quote:"CNY",api:"plus",plus:!0}}})}async fetchMarkets(e={}){let t=await this.publicGetTicker({market:"all"}),i=[],s=Object.keys(t);for(let e=0;e<s.length;e++){let r=s[e],a=t[r],o=r.split("_")[1],n=o.slice(0,3),d=o.slice(3,6),c=(n=n.toUpperCase())+"/"+(d=d.toUpperCase());i.push({id:o,symbol:c,base:n,quote:d,info:a})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetAccountInfo()).result,i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=r.toLowerCase(),o=this.account();a in t.balance&&(o.total=parseFloat(t.balance[a].amount)),a in t.frozen&&(o.used=parseFloat(t.frozen[a].amount)),o.free=o.total-o.used,i[r]=o}return this.parseBalance(i)}createMarketRequest(e){let t={};return t[e.plus?"symbol":"market"]=e.id,t}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r=s.api+"GetOrderbook",a=this.createMarketRequest(s),o=await this[r](this.extend(a,i)),n=1e3*o.date;return this.parseOrderBook(o,n)}parseTicker(e,t){let i=1e3*e.date,s=this.safeFloat(e,"last");return{timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),ask:this.safeFloat(e,"sell"),vwap:this.safeFloat(e,"vwap"),open:this.safeFloat(e,"open"),close:s,last:s,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}parseTickerPlus(e,t){let i=e.Timestamp,s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"High"),low:this.safeFloat(e,"Low"),bid:this.safeFloat(e,"BidPrice"),ask:this.safeFloat(e,"AskPrice"),vwap:void 0,open:this.safeFloat(e,"Open"),last:this.safeFloat(e,"Last"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"Volume24H"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=i.api+"GetTicker",r=this.createMarketRequest(i),a=(await this[s](this.extend(r,t))).ticker;return i.plus?this.parseTickerPlus(a,i):this.parseTicker(a,i)}parseTrade(e,t){let i=1e3*parseInt(e.date);return{id:e.tid,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:e.price,amount:e.amount}}parseTradePlus(e,t){let i=this.parse8601(e.timestamp);return{id:void 0,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.side.toLowerCase(),price:e.price,amount:e.size}}parseTradesPlus(e,t){let i=[];for(let s=0;s<e.length;s++)i.push(this.parseTradePlus(e[s],t));return i}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=r.api+"GetTrade",o=this.createMarketRequest(r);if(r.plus){let e=this.milliseconds();o.start_time=e-864e5,o.end_time=e}else a+="s";let n=await this[a](this.extend(o,s));return r.plus?this.parseTradesPlus(n.trades,r):this.parseTrades(n,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n="privatePost"+this.capitalize(i)+"Order2",d={},c=o.id.toUpperCase();d.params="market"===t?[void 0,s,c]:[r,s,c];let h=await this[n](this.extend(d,a));return{info:h,id:h.id}}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=i.market;return await this.privatePostCancelOrder(this.extend({params:[e,s]},i))}nonce(){return this.microseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+e;if("private"===t){this.checkRequiredCredentials();let t=[];"params"in s&&(t=s.params);let o=this.nonce(),n={method:e,id:o,params:t};t=t.join(","),a=this.json(n);let d="tonce="+o+"&accesskey="+this.apiKey+"&requestmethod="+i.toLowerCase()+"&id="+o+"&method="+e+"&params="+t,c=this.hmac(this.encode(d),this.encode(this.secret),"sha1"),h=this.encode(this.apiKey+":"+c);r={Authorization:"Basic "+this.stringToBase64(h),"Json-Rpc-Tonce":o}}else Object.keys(s).length&&(o+="?"+this.urlencode(s));return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(48);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcexchange",name:"BTCExchange",countries:["PH"],rateLimit:1500,has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27993052-4c92911a-64aa-11e7-96d8-ec6ac3435757.jpg",api:"https://www.btcexchange.ph/api",www:"https://www.btcexchange.ph",doc:"https://github.com/BTCTrader/broker-api-docs"},markets:{"BTC/PHP":{id:"BTC/PHP",symbol:"BTC/PHP",base:"BTC",quote:"PHP"}}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,OrderNotFound:a,NotSupported:o,InvalidOrder:n,DDoSProtection:d}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btcmarkets",name:"BTC Markets",countries:["AU"],rateLimit:1e3,has:{CORS:!1,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchClosedOrders:"emulated",fetchOpenOrders:!0,fetchMyTrades:!0,cancelOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/29142911-0e1acfc2-7d5c-11e7-98c4-07d9532b29d7.jpg",api:{public:"https://api.btcmarkets.net",private:"https://api.btcmarkets.net",web:"https://btcmarkets.net/data"},www:"https://btcmarkets.net",doc:"https://github.com/BTCMarkets/API"},api:{public:{get:["market/{id}/tick","market/{id}/orderbook","market/{id}/trades","v2/market/{id}/tickByTime/{timeframe}","v2/market/{id}/trades","v2/market/active"]},private:{get:["account/balance","account/{id}/tradingfee","v2/order/open","v2/order/open/{id}","v2/order/history/{id}","v2/order/trade/history/{id}","v2/transaction/history/{currency}"],post:["fundtransfer/withdrawCrypto","fundtransfer/withdrawEFT","order/create","order/cancel","order/history","order/open","order/trade/history","order/createBatch","order/detail"]},web:{get:["market/BTCMarkets/{id}/tickByTime"]}},timeframes:{"1m":"minute","1h":"hour","1d":"day"},exceptions:{3:n,6:d}})}async fetchMarkets(e={}){let t=[],i=(await this.publicGetV2MarketActive()).markets;for(let e=0;e<i.length;e++){let s=i[e],r=s.instrument,a=s.currency,o=r+"/"+a,n=this.commonCurrencyCode(r),d=this.commonCurrencyCode(a),c=n+"/"+d,h="AUD"===d?.0085:.0022,l=2,u=4,p=.001,m=void 0;"AUD"===d&&("XRP"!==n&&"OMG"!==n||(l=4),u=-Math.log10(p),m=Math.pow(10,-l));let f={amount:u,price:l},y={amount:{min:p,max:void 0},price:{min:m,max:void 0},cost:{min:void 0,max:void 0}};t.push({info:s,id:o,symbol:c,base:n,quote:d,baseId:r,quoteId:a,maker:h,taker:h,limits:y,precision:f})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetAccountBalance(),i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.currency,a=1e8,o=parseFloat(s.balance/a),n=parseFloat(s.pendingFunds/a),d={free:o-n,used:n,total:o};i[r]=d}return this.parseBalance(i)}parseOHLCV(e,t,i="1m",s,r){return[e[0],parseFloat(e[1])/1e8,parseFloat(e[2])/1e8,parseFloat(e[3])/1e8,parseFloat(e[4])/1e8,parseFloat(e[5])/1e8]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.load_markets();let a=this.market(e),o={id:a.id,timeWindow:this.timeframes[t]};void 0!==i&&(o.since=i);let n=await this.webGetMarketBTCMarketsIdTickByTime(this.extend(o,r));return this.parseOHLCVs(n.ticks,a,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r=await this.publicGetMarketIdOrderbook(this.extend({id:s.id},i)),a=1e3*r.timestamp;return this.parseOrderBook(r,a)}parseTicker(e,t){let i=1e3*e.timestamp,s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"lastPrice");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeFloat(e,"bestBid"),bidVolume:void 0,ask:this.safeFloat(e,"bestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume24h"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetMarketIdTick(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=1e3*e.date;return{info:e,id:e.tid.toString(),order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetMarketIdTrades(this.extend({id:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n="buy"===i?"Bid":"Ask",d=this.ordered({currency:o.quote});d.currency=o.quote,d.instrument=o.base,d.price=parseInt(1e8*r),d.volume=parseInt(1e8*s),d.orderSide=n,d.ordertype=this.capitalize(t),d.clientRequestId=this.nonce().toString();let c=await this.privatePostOrderCreate(d);return{info:c,id:c.id.toString()}}async cancelOrders(e,t,i={}){await this.loadMarkets();for(let t=0;t<e.length;t++)e[t]=parseInt(e[t]);return await this.privatePostOrderCancel({orderIds:e})}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.cancelOrders([e])}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d=n[a],c=void 0,h=void 0;return"AUD"===n.quote?(c=n.quote,h=parseFloat(this.costToPrecision(e,s*r))):(c=n.base,h=parseFloat(this.amountToPrecision(e,s))),{type:a,currency:c,rate:d,cost:parseFloat(this.feeToPrecision(e,d*h))}}parseMyTrade(e,t){let i=e.creationTime,s="Bid"===e.side?"buy":"sell",r="AUD"===t.quote?t.quote:t.base;return{info:e,id:e.id.toString(),timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:s,price:e.price/1e8,fee:{currency:r,cost:e.fee/1e8},amount:e.volume/1e8,order:this.safeString(e,"orderId")}}parseMyTrades(e,t,i,s){let r=[];for(let i=0;i<e.length;i++){let s=this.parseMyTrade(e[i],t);r.push(s)}return r}parseOrder(e,t){let i="Bid"===e.orderSide?"buy":"sell",s="Limit"===e.ordertype?"limit":"market",r=e.creationTime;void 0===t&&(t=this.market(e.instrument+"/"+e.currency));let a="open";"Failed"===e.status||"Cancelled"===e.status||"Partially Cancelled"===e.status||"Error"===e.status?a="canceled":"Fully Matched"!==e.status&&"Partially Matched"!==e.status||(a="closed");let o=this.safeFloat(e,"price")/1e8,n=this.safeFloat(e,"volume")/1e8,d=this.safeFloat(e,"openVolume",0)/1e8,c=n-d,h=o*n,l=this.parseMyTrades(e.trades,t);return{info:e,id:e.id.toString(),timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:t.symbol,type:s,side:i,price:o,cost:h,amount:n,filled:c,remaining:d,status:a,trades:l,fee:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=[parseInt(e)],r=await this.privatePostOrderDetail(this.extend({orderIds:s},i));if(r.orders.length<1)throw new a(this.id+" No matching order found: "+e);let o=r.orders[0];return this.parseOrder(o)}prepareHistoryRequest(e,t,i){let s=this.ordered({currency:e.quote,instrument:e.base});return s.limit=void 0!==i?i:100,s.since=void 0!==t?t:0,s}async fetchOrders(e,t,i,s={}){if(void 0===e)throw new o(this.id+": fetchOrders requires a `symbol` parameter.");await this.loadMarkets();let r=this.market(e),a=this.prepareHistoryRequest(r,t,i),n=await this.privatePostOrderHistory(this.extend(a,s));return this.parseOrders(n.orders,r)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new o(this.id+": fetchOpenOrders requires a `symbol` parameter.");await this.loadMarkets();let r=this.market(e),a=this.prepareHistoryRequest(r,t,i),n=await this.privatePostOrderOpen(this.extend(a,s));return this.parseOrders(n.orders,r)}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+": fetchMyTrades requires a `symbol` parameter.");await this.loadMarkets();let r=this.market(e),a=this.prepareHistoryRequest(r,t,i),n=await this.privatePostOrderTradeHistory(this.extend(a,s));return this.parseMyTrades(n.trades,r)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s),n=this.urls.api[t]+o;if("private"===t){this.checkRequiredCredentials();let e=this.nonce().toString(),t=o+"\n"+e+"\n";r={"Content-Type":"application/json",apikey:this.apiKey,timestamp:e},"POST"===i&&(t+=a=this.json(s));let n=this.base64ToBinary(this.secret),d=this.hmac(this.encode(t),n,"sha512","base64");r.signature=this.decode(d)}else Object.keys(s).length&&(n+="?"+this.urlencode(s));return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if(!(o.length<2)&&"{"===o[0]&&"success"in n&&!n.success){let e=this.safeString(n,"errorCode"),t=this.id+" "+this.json(n);if(e in this.exceptions){throw new(0,this.exceptions[e])(t)}throw new r(t)}}}},function(e,t,i){"use strict";const s=i(27),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){let e=this.deepExtend(super.describe(),{id:"btctradeim",name:"BtcTrade.im",countries:["HK"],urls:{logo:"https://user-images.githubusercontent.com/1294454/36770531-c2142444-1c5b-11e8-91e2-a4d90dc85fe8.jpg",api:{web:"https://api.btctrade.im/coin",rest:"https://api.btctrade.im/api/v1"},www:"https://www.btctrade.im",doc:"https://www.btctrade.im/help.api.html",fees:"https://www.btctrade.im/spend.price.html"},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:.001}}}});return e.options.quoteIds=["btc","eth","usc"],e}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("web"===t)return n;let d=this.safeValue(n,"data");if(d){if("0"!==this.safeString(n,"code")){let e=this.safeString(n,"msg","Error");throw new r(e)}return d}return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"btctradeua",name:"BTC Trade UA",countries:["UA"],rateLimit:3e3,has:{CORS:!0,createMarketOrder:!1,fetchOpenOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27941483-79fc7350-62d9-11e7-9f61-ac47f28fcd96.jpg",api:"https://btc-trade.com.ua/api",www:"https://btc-trade.com.ua",doc:"https://docs.google.com/document/d/1ocYA0yMy_RXd561sfG3qEPZ80kyll36HUxvCRe5GbhE/edit"},api:{public:{get:["deals/{symbol}","trades/sell/{symbol}","trades/buy/{symbol}","japan_stat/high/{symbol}"]},private:{post:["auth","ask/{symbol}","balance","bid/{symbol}","buy/{symbol}","my_orders/{symbol}","order/status/{id}","remove/order/{id}","sell/{symbol}"]}},markets:{"BCH/UAH":{id:"bch_uah",symbol:"BCH/UAH",base:"BCH",quote:"UAH"},"BTC/UAH":{id:"btc_uah",symbol:"BTC/UAH",base:"BTC",quote:"UAH",precision:{price:1},limits:{amount:{min:1e-10}}},"DASH/BTC":{id:"dash_btc",symbol:"DASH/BTC",base:"DASH",quote:"BTC"},"DASH/UAH":{id:"dash_uah",symbol:"DASH/UAH",base:"DASH",quote:"UAH"},"DOGE/BTC":{id:"doge_btc",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC"},"DOGE/UAH":{id:"doge_uah",symbol:"DOGE/UAH",base:"DOGE",quote:"UAH"},"ETH/UAH":{id:"eth_uah",symbol:"ETH/UAH",base:"ETH",quote:"UAH"},"ITI/UAH":{id:"iti_uah",symbol:"ITI/UAH",base:"ITI",quote:"UAH"},"KRB/UAH":{id:"krb_uah",symbol:"KRB/UAH",base:"KRB",quote:"UAH"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC"},"LTC/UAH":{id:"ltc_uah",symbol:"LTC/UAH",base:"LTC",quote:"UAH"},"NVC/BTC":{id:"nvc_btc",symbol:"NVC/BTC",base:"NVC",quote:"BTC"},"NVC/UAH":{id:"nvc_uah",symbol:"NVC/UAH",base:"NVC",quote:"UAH"},"PPC/BTC":{id:"ppc_btc",symbol:"PPC/BTC",base:"PPC",quote:"BTC"},"SIB/UAH":{id:"sib_uah",symbol:"SIB/UAH",base:"SIB",quote:"UAH"},"XMR/UAH":{id:"xmr_uah",symbol:"XMR/UAH",base:"XMR",quote:"UAH"},"ZEC/UAH":{id:"zec_uah",symbol:"ZEC/UAH",base:"ZEC",quote:"UAH"}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:6e-4,LTC:.01,NVC:.01,DOGE:10}}}})}async signIn(e={}){return await this.privatePostAuth(e)}async fetchBalance(e={}){let t=await this.privatePostBalance(),i={info:t};if("accounts"in t){let e=t.accounts;for(let t=0;t<e.length;t++){let s=e[t],r=s.currency,a=parseFloat(s.balance);i[r]={free:a,used:0,total:a}}}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){let s=this.market(e),r=await this.publicGetTradesBuySymbol(this.extend({symbol:s.id},i)),a=await this.publicGetTradesSellSymbol(this.extend({symbol:s.id},i)),o={bids:[],asks:[]};return r&&"list"in r&&(o.bids=r.list),a&&"list"in a&&(o.asks=a.list),this.parseOrderBook(o,void 0,"bids","asks","price","currency_trade")}async fetchTicker(e,t={}){let i=(await this.publicGetJapanStatHighSymbol(this.extend({symbol:this.marketId(e)},t))).trades,s=this.milliseconds(),r={symbol:e,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:i},a=i.length;if(a>0){for(let e=Math.max(a-48,0);e<i.length;e++){let t=i[e];void 0===r.open&&(r.open=t[1]),(void 0===r.high||r.high<t[2])&&(r.high=t[2]),(void 0===r.low||r.low>t[3])&&(r.low=t[3]),void 0===r.baseVolume?r.baseVolume=-t[5]:r.baseVolume-=t[5]}let e=a-1;r.last=i[e][4],r.close=r.last,r.baseVolume=-1*r.baseVolume}return r}convertCyrillicMonthNameToString(e){let t={"":"01","":"02","":"03","":"04","":"05","":"06","":"07","":"08","":"09","":"10","":"11","":"12"},i=void 0;return e in t&&(i=t[e]),i}parseCyrillicDatetime(e){let t=e.split(" "),i=t[0],s=this.convertCyrillicMonthNameToString(t[1]);if(!s)throw new r(this.id+" parseTrade() undefined month name: "+e);let a=t[2],o=t[4];7===o.length&&(o="0"+o),1===i.length&&(i="0"+i);let n=[a,s,i].join("-")+"T"+o,d=this.parse8601(n),c=[s,i].join("");return(c=parseInt(c))<325||c>1028?d-72e5:d-108e5}parseTrade(e,t){let i=this.parseCyrillicDatetime(e.pub_date);return{id:e.id.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:"limit",side:e.type,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amnt_trade")}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetDealsSymbol(this.extend({symbol:r.id},s)),o=[];for(let e=0;e<a.length;e++)a[e].id%2&&o.push(a[e]);return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,a,o={}){if("market"===t)throw new r(this.id+" allows limit orders only");let n=this.market(e),d="privatePost"+this.capitalize(i)+"Id",c={count:s,currency1:n.quote,currency:n.base,price:a};return this[d](this.extend(c,o))}async cancelOrder(e,t,i={}){return await this.privatePostRemoveOrderId({id:e})}parseOrder(e,t){let i=this.milliseconds;return{id:e.id,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:"open",symbol:t.symbol,type:void 0,side:e.type,price:e.price,amount:e.amnt_trade,filled:0,remaining:e.amnt_trade,trades:void 0,info:e}}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchOpenOrders requires a symbol argument");let r=this.market(e),o=(await this.privatePostMyOrdersSymbol(this.extend({symbol:r.id},s))).your_open_orders;return this.parseOrders(o,r,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+=this.implodeParams(e,n));else{this.checkRequiredCredentials();let e=this.nonce(),t=(a=this.urlencode(this.extend({out_order_id:e,nonce:e},n)))+this.secret;r={"public-key":this.apiKey,"api-sign":this.hash(this.encode(t),"sha256"),"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{AddressPending:r,AuthenticationError:a,ExchangeError:o,NotSupported:n,PermissionDenied:d}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"buda",name:"Buda",countries:["AR","CL","CO","PE"],rateLimit:1e3,version:"v2",has:{CORS:!1,createDepositAddress:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/47380619-8a029200-d706-11e8-91e0-8a391fe48de3.jpg",api:"https://www.buda.com/api",www:"https://www.buda.com",doc:"https://api.buda.com",fees:"https://www.buda.com/comisiones"},api:{public:{get:["pairs","markets","currencies","markets/{market}","markets/{market}/ticker","markets/{market}/volume","markets/{market}/order_book","markets/{market}/trades","currencies/{currency}/fees/deposit","currencies/{currency}/fees/withdrawal","tv/history"],post:["markets/{market}/quotations"]},private:{get:["balances","balances/{currency}","currencies/{currency}/balances","orders","orders/{id}","markets/{market}/orders","deposits","currencies/{currency}/deposits","withdrawals","currencies/{currency}/withdrawals","currencies/{currency}/receive_addresses","currencies/{currency}/receive_addresses/{id}"],post:["markets/{market}/orders","currencies/{currency}/deposits","currencies/{currency}/withdrawals","currencies/{currency}/simulated_withdrawals","currencies/{currency}/receive_addresses"],put:["orders/{id}"]}},timeframes:{"1m":"1","5m":"5","30m":"30","1h":"60","2h":"120","1d":"D","1w":"W"},fees:{trading:{tierBased:!0,percentage:!0,taker:.008,maker:.004,tiers:{taker:[[0,.008],[2e3,.007],[2e4,.006],[1e5,.005],[5e5,.004],[25e5,.003],[125e5,.002]],maker:[[0,.004],[2e3,.0035],[2e4,.003],[1e5,.0025],[5e5,.002],[25e5,.0015],[125e5,.001]]}}},exceptions:{not_authorized:a,forbidden:d,invalid_record:o,not_found:o,parameter_missing:o,bad_parameter:o}})}async fetchCurrencyInfo(e,t){if(!t){t=(await this.publicGetCurrencies()).currencies}for(let i=0;i<t.length;i++){let s=t[i];if(s.id===e)return s}}async fetchMarkets(e={}){let t=(await this.publicGetMarkets()).markets,i=(await this.publicGetCurrencies()).currencies,s=[];for(let e=0;e<t.length;e++){let r=t[e],a=r.id,o=r.base_currency,n=r.quote_currency,d=this.commonCurrencyCode(o),c=this.commonCurrencyCode(n),h=await this.fetchCurrencyInfo(o,i),l=await this.fetchCurrencyInfo(n,i),u=d+"/"+c,p={amount:h.input_decimals,price:l.input_decimals},m={amount:{min:parseFloat(r.minimum_order_amount[0]),max:void 0},price:{min:Math.pow(10,-p.price),max:void 0}};m.cost={min:m.amount.min*m.price.min,max:void 0},s.push({id:a,symbol:u,base:d,quote:c,baseId:o,quoteId:n,active:!0,precision:p,limits:m,info:r})}return s}async fetchCurrencies(e={}){let t=(await this.publicGetCurrencies()).currencies,i={};for(let e=0;e<t.length;e++){let s=t[e];if(!s.managed)continue;let r=s.id,a=this.commonCurrencyCode(r),o=s.input_decimals,n=Math.pow(10,-o);i[a]={id:r,code:a,info:s,name:void 0,active:!0,fee:void 0,precision:o,limits:{amount:{min:n,max:void 0},price:{min:n,max:void 0},cost:{min:void 0,max:void 0},deposit:{min:parseFloat(s.deposit_minimum[0]),max:void 0},withdraw:{min:parseFloat(s.withdrawal_minimum[0])}}}}return i}async fetchFundingFees(e,t={}){await this.loadMarkets();let i={},s={},r={};void 0===e&&(e=Object.keys(this.currencies));for(let t=0;t<e.length;t++){let a=e[t],o={currency:this.currency(a).id},n=await this.publicGetCurrenciesCurrencyFeesWithdrawal(o),d=await this.publicGetCurrenciesCurrencyFeesDeposit(o);i[a]=this.parseFundingFee(n.fee),s[a]=this.parseFundingFee(d.fee),r[a]={withdraw:n,deposit:d}}return{withdraw:i,deposit:s,info:r}}parseFundingFee(e,t){return void 0===t&&(t=e.name),"withdrawal"===t&&(t="withdraw"),{type:t,currency:e.base[1],rate:e.percent,cost:parseFloat(e.base[0])}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetMarketsMarketTicker(this.extend({market:i.id},t))).ticker;return this.parseTicker(s,i)}parseTicker(e,t){let i=this.milliseconds(),s=void 0;void 0!==t&&(s=t.symbol);let r=parseFloat(e.last_price[0]),a=parseFloat(e.price_variation_24h),o=parseFloat(this.priceToPrecision(s,r/(a+1))),n=r-o,d=this.sum(r,o)/2;return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:parseFloat(e.max_bid[0]),bidVolume:void 0,ask:parseFloat(e.min_ask[0]),askVolume:void 0,vwap:void 0,open:o,close:r,last:r,previousClose:o,change:n,percentage:100*a,average:d,baseVolume:parseFloat(e.volume[0]),quoteVolume:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e);const a={market:r.id};void 0!==i&&(a.limit=i);let o=await this.publicGetMarketsMarketTrades(this.extend(a,s));return this.parseTrades(o.trades.entries,r,t,i)}parseTrade(e,t){let i=void 0,s=void 0,r=void 0,a=void 0,o=void 0,n=void 0,d=void 0;return t&&(n=t.symbol),Array.isArray(e)&&(i=parseInt(e[0]),d=(r=parseFloat(e[1]))*(a=parseFloat(e[2])),s=e[3],o=e[4].toString()),{id:o,order:void 0,info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,type:void 0,side:s,price:r,amount:a,cost:d,fee:void 0}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r=(await this.publicGetMarketsMarketOrderBook(this.extend({market:s.id},i))).order_book;return this.parseOrderBook(r)}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e);void 0===i&&(i=this.milliseconds()-864e5);let o={symbol:a.id,resolution:this.timeframes[t],from:i/1e3,to:this.seconds()},n=await this.publicGetTvHistory(this.extend(o,r));return this.parseTradingViewOHLCV(n,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetBalances(),i={info:t},s=t.balances;for(let e=0;e<s.length;e++){let t=s[e],r=t.id,a=this.commonCurrencyCode(r),o=parseFloat(t.amount[0]),n=parseFloat(t.available_amount[0]),d={free:n,used:o-n,total:o};i[a]=d}return this.parseBalance(i)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=(await this.privateGetOrdersId(this.extend({id:parseInt(e)},i))).order;return this.parseOrder(s)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));let a=(await this.privateGetMarketsMarketOrders(this.extend({market:r.id,per:i},s))).orders;return this.parseOrders(a,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"pending"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({state:"traded"},s))}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),i="buy"===i?"Bid":"Ask";let o={market:this.marketId(e),price_type:t,type:i,amount:this.amountToPrecision(e,s)};"limit"===t&&(o.limit=this.priceToPrecision(e,r));let n=(await this.privatePostMarketsMarketOrders(this.extend(o,a))).order;return this.parseOrder(n)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=(await this.privatePutOrdersId(this.extend({id:parseInt(e),state:"canceling"},i))).order;return this.parseOrder(s)}parseOrderStatus(e){let t={traded:"closed",received:"open",canceling:"canceled"};return e in t?t[e]:e}parseOrder(e,t){let i=e.id,s=this.parse8601(this.safeString(e,"created_at")),r=void 0;if(void 0===t){let i=e.market_id;i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(r=t.symbol);let a=e.price_type,o=e.type.toLowerCase(),n=this.parseOrderStatus(this.safeString(e,"state")),d=parseFloat(e.original_amount[0]),c=parseFloat(e.amount[0]),h=parseFloat(e.traded_amount[0]),l=parseFloat(e.total_exchanged[0]),u=e.limit;void 0!==u&&(u=parseFloat(u[0])),l>0&&h>0&&(u=this.priceToPrecision(r,l/h));let p={cost:parseFloat(e.paid_fee[0]),currency:e.paid_fee[1]};return{id:i,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:n,symbol:r,type:a,side:o,price:u,cost:l,amount:d,filled:h,remaining:c,trades:void 0,fee:p,info:e}}isFiat(e){return this.safeValue({ARS:!0,CLP:!0,COP:!0,PEN:!0},e,!1)}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e);if(this.isFiat(e))throw new n(this.id+" fetchDepositAddress() for fiat "+e+" is not supported");let s=(await this.privateGetCurrenciesCurrencyReceiveAddresses(this.extend({currency:i.id},t))).receive_addresses,a=[];for(let e=1;e<s.length;e++){let t=s[e];if(t.ready){let e=t.address;this.checkAddress(e),a.push(e)}}if(a.length<1)throw new r(this.id+": there are no addresses ready for receiving "+e+", retry again later)");return{currency:e,address:a[0],tag:void 0,info:s}}async createDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e);if(this.isFiat(e))throw new n(this.id+": fiat fetchDepositAddress() for "+e+" is not supported");let s=await this.privatePostCurrenciesCurrencyReceiveAddresses(this.extend({currency:i.id},t));return{currency:e,address:this.safeString(s.receive_address,"address"),tag:void 0,info:s}}parseTransactionStatus(e){let t={rejected:"failed",confirmed:"ok",anulled:"canceled",retained:"canceled",pending_confirmation:"pending"};return e in t?t[e]:e}parseTransaction(e,t){let i=this.safeString(e,"id"),s=this.parse8601(this.safeString(e,"created_at")),r=void 0,a=void 0;void 0===t&&(a=this.safeString(e,"currency"),t=this.safeValue(this.currencies_by_id,a)),r=void 0!==t?t.code:this.commonCurrencyCode(a);let o=parseFloat(e.amount[0]),n=parseFloat(e.fee[0]),d=e.fee[1],c=this.parseTransactionStatus(this.safeString(e,"state")),h="deposit_data"in e?"deposit":"withdrawal",l=this.safeValue(e,h+"_data",{}),u=this.safeValue(l,"target_address"),p=this.safeString(l,"tx_hash"),m=this.parse8601(this.safeString(l,"updated_at"));return{info:e,id:i,txid:p,timestamp:s,datetime:this.iso8601(s),address:u,type:h,amount:o,currency:r,status:c,updated:m,fee:{cost:n,rate:d}}}async fetchDeposits(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new o(this.id+": fetchDeposits() requires a currency code argument");let r=this.currency(e),a=(await this.privateGetCurrenciesCurrencyDeposits(this.extend({currency:r.id,per:i},s))).deposits;return this.parseTransactions(a,r,t,i)}async fetchWithdrawals(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new o(this.id+": fetchDeposits() requires a currency code argument");let r=this.currency(e),a=(await this.privateGetCurrenciesCurrencyWithdrawals(this.extend({currency:r.id,per:i},s))).withdrawals;return this.parseTransactions(a,r,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a=this.currency(e),o=(await this.privatePostCurrenciesCurrencyWithdrawals(this.extend({currency:a.id,amount:t,withdrawal_data:{target_address:i}},r))).withdrawal;return this.parseTransaction(o)}nonce(){return this.microseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));Object.keys(n).length&&("GET"===i?o+="?"+this.urlencode(n):a=this.json(n));let d=this.urls.api+"/"+this.version+"/"+o;if("private"===t){this.checkRequiredCredentials();let e=this.nonce().toString(),t=[i,"/api/"+this.version+"/"+o];if(a){let e=this.stringToBase64(this.encode(a));t.push(this.decode(e))}t.push(e);let s=t.join(" "),n=this.hmac(this.encode(s),this.encode(this.secret),"sha384");r={"X-SBTC-APIKEY":this.apiKey,"X-SBTC-SIGNATURE":n,"X-SBTC-NONCE":e,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,n){if(this.isJsonEncodedObject(a)&&e>=400){let e=this.safeString(n,"code"),t=this.safeString(n,"message",a),i=this.id+" "+t,s=this.exceptions;if(void 0!==e)throw e in s?new s[e](i):new o(i)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"bxinth",name:"BX.in.th",countries:["TH"],rateLimit:1500,has:{CORS:!1,fetchTickers:!0,fetchOpenOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766412-567b1eb4-5ed7-11e7-94a8-ff6a3884f6c5.jpg",api:"https://bx.in.th/api",www:"https://bx.in.th",doc:"https://bx.in.th/info/api"},api:{public:{get:["","options","optionbook","orderbook","pairing","trade","tradehistory"]},private:{post:["balance","biller","billgroup","billpay","cancel","deposit","getorders","history","option-issue","option-bid","option-sell","option-myissue","option-mybid","option-myoptions","option-exercise","option-cancel","option-history","order","withdrawal","withdrawal-history"]}},fees:{trading:{taker:.0025,maker:.0025}},commonCurrencies:{DAS:"DASH",DOG:"DOGE"}})}async fetchMarkets(e={}){let t=await this.publicGetPairing(),i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){let r=t[i[e]],a=r.pairing_id.toString(),o=r.secondary_currency,n=r.primary_currency,d=r.active,c=this.commonCurrencyCode(o),h=this.commonCurrencyCode(n),l=c+"/"+h;s.push({id:a,symbol:l,base:c,quote:h,baseId:o,quoteId:n,active:d,info:r})}return s}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostBalance()).balance,i={info:t},s=Object.keys(t);for(let e=0;e<s.length;e++){let r=s[e],a=this.commonCurrencyCode(r),o={free:parseFloat(t[r].available),used:0,total:parseFloat(t[r].total)};o.used=o.total-o.free,i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetOrderbook(this.extend({pairing:this.marketId(e)},i));return this.parseOrderBook(s)}parseTicker(e,t){let i=this.milliseconds(),s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"last_price");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:parseFloat(e.orderbook.bids.highbid),bidVolume:void 0,ask:parseFloat(e.orderbook.asks.highbid),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:this.safeFloat(e,"change"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume_24hours"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGet(t),s={},r=Object.keys(i);for(let e=0;e<r.length;e++){let t=r[e],a=i[t],o=this.markets_by_id[t];s[o.symbol]=this.parseTicker(a,o)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGet(this.extend({pairing:i.id},t)))[i.id.toString()];return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.trade_date+"+07:00");return{id:e.trade_id,info:e,order:e.order_id,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.trade_type,price:this.safeFloat(e,"rate"),amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTrade(this.extend({pairing:r.id},s));return this.parseTrades(a.trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=await this.privatePostOrder(this.extend({pairing:this.marketId(e),type:i,amount:s,rate:r},a));return{info:o,id:o.order_id.toString()}}async cancelOrder(e,t,i={}){await this.loadMarkets();return await this.privatePostCancel({order_id:e,pairing:void 0})}async parseOrder(e,t){let i=this.safeString(e,"order_type"),s=void 0;if(void 0===t){let i=this.safeString(e,"pairing_id");void 0!==i&&i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(s=t.symbol);let r=this.parse8601(e.date),a=this.safeFloat(e,"rate"),o=this.safeFloat(e,"amount");return{info:e,id:e.order_id,timestamp:r,datetime:this.iso8601(r),symbol:s,type:"limit",side:i,price:a,amount:o}}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.market(e),r.pairing=a.id);const o=await this.privatePostGetorders(this.extend(r,s)),n=this.parseOrders(o.orders,a,t,i);return this.filterBySymbol(n,e)}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/";if(e&&(o+=e+"/"),Object.keys(s).length&&(o+="?"+this.urlencode(s)),"private"===t){this.checkRequiredCredentials();let e=this.nonce(),t=this.apiKey+e.toString()+this.secret,i=this.hash(this.encode(t),"sha256");a=this.urlencode(this.extend({key:this.apiKey,nonce:e,signature:i},s)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("public"===t)return n;if("success"in n&&n.success)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ccex",name:"C-CEX",countries:["DE","EU"],rateLimit:1500,has:{CORS:!1,fetchTickers:!0,fetchOrderBooks:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766433-16881f90-5ed8-11e7-92f8-3d92cc747a6c.jpg",api:{web:"https://c-cex.com/t",public:"https://c-cex.com/t/api_pub.html",private:"https://c-cex.com/t/api.html"},www:"https://c-cex.com",doc:"https://c-cex.com/?id=api"},api:{web:{get:["coinnames","{market}","pairs","prices","volume_{coin}"]},public:{get:["balancedistribution","markethistory","markets","marketsummaries","orderbook","fullorderbook"]},private:{get:["buylimit","cancel","getbalance","getbalances","getopenorders","getorder","getorderhistory","mytrades","selllimit"]}},fees:{trading:{taker:.002,maker:.002}},commonCurrencies:{BLC:"Cryptobullcoin",CRC:"CoreCoin",IOT:"IoTcoin",LUX:"Luxmi",VIT:"VitalCoin",XID:"InternationalDiamond"}})}async fetchMarkets(e={}){let t={},i=(await this.webGetPairs()).pairs;for(let e=0;e<i.length;e++){let s=i[e],[r,a]=s.split("-"),o=r.toUpperCase(),n=a.toUpperCase(),d=(o=this.commonCurrencyCode(o))+"/"+(n=this.commonCurrencyCode(n));t[d]={id:s,symbol:d,base:o,quote:n,baseId:r,quoteId:a,info:s}}return t}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privateGetGetbalances()).result,i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.Currency,a=this.commonCurrencyCode(r),o={free:s.Available,used:s.Pending,total:s.Balance};i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={market:this.marketId(e),type:"both"};void 0!==t&&(s.depth=t);let r=(await this.publicGetOrderbook(this.extend(s,i))).result;return this.parseOrderBook(r,void 0,"buy","sell","Rate","Quantity")}async fetchOrderBooks(e,t={}){await this.loadMarkets();let i={},s=await this.publicGetFullorderbook(),r=Object.keys(s.result);for(let e=0;e<r.length;e++){let t=r[e],a=s.result[t],o=this.groupBy(a,"Market"),n=Object.keys(o);for(let e=0;e<n.length;e++){let s=n[e],r=s;if(s in this.markets_by_id){r=this.markets_by_id[r].symbol}else{let[e,t]=r.split("-"),i=t+"-"+e;if(i in this.markets_by_id){r=this.markets_by_id[i].symbol}}r in i||(i[r]={}),i[r][t]=o[s]}}let a={},o=Object.keys(i);for(let e=0;e<o.length;e++){let t=o[e];a[t]=this.parseOrderBook(i[t],void 0,"buy","sell","Rate","Quantity")}return a}parseTicker(e,t){let i=1e3*e.updated,s=void 0;void 0!==t&&(s=t.symbol);let r=this.safeFloat(e,"lastprice");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:void 0,quoteVolume:this.safeFloat(e,"buysupport"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.webGetPrices(t),s={},r=Object.keys(i);for(let e=0;e<r.length;e++){let t=r[e],a=i[t],o=void 0,n=void 0;if(t in this.markets_by_id)n=(o=this.markets_by_id[t]).symbol;else{let e=t.toUpperCase(),[i,s]=e.split("-");n=(i=this.commonCurrencyCode(i))+"/"+(s=this.commonCurrencyCode(s))}s[n]=this.parseTicker(a,o)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.webGetMarket(this.extend({market:i.id.toLowerCase()},t))).ticker;return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.TimeStamp);return{id:e.Id.toString(),info:e,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.OrderType.toLowerCase(),price:e.Price,amount:e.Quantity}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetMarkethistory(this.extend({market:r.id,type:"both",depth:100},s));return this.parseTrades(a.result,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="privateGet"+this.capitalize(i)+t,n=await this[o](this.extend({market:this.marketId(e),quantity:s,rate:r},a));return{info:n,id:n.result.uuid}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privateGetCancel({uuid:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];if("private"===t){this.checkRequiredCredentials();let t=this.nonce().toString(),i=this.keysort(this.extend({a:e,apikey:this.apiKey,nonce:t},s));o+="?"+this.urlencode(i),r={apisign:this.hmac(this.encode(o),this.encode(this.secret),"sha512")}}else o+="public"===t?"?"+this.urlencode(this.extend({a:"get"+e},s)):"/"+this.implodeParams(e,s)+".json";return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("web"===t)return n;if("success"in n&&n.success)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,NullResponse:o,InvalidOrder:n,NotSupported:d}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"cex",name:"CEX.IO",countries:["GB","EU","CY","RU"],rateLimit:1500,has:{CORS:!0,fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchDepositAddress:!0},timeframes:{"1m":"1m"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766442-8ddc33b0-5ed8-11e7-8b98-f786aef0f3c9.jpg",api:"https://cex.io/api",www:"https://cex.io",doc:"https://cex.io/cex-api",fees:["https://cex.io/fee-schedule","https://cex.io/limits-commissions"],referral:"https://cex.io/r/0/up105393824/0/"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency_limits/","last_price/{pair}/","last_prices/{currencies}/","ohlcv/hd/{yyyymmdd}/{pair}","order_book/{pair}/","ticker/{pair}/","tickers/{currencies}/","trade_history/{pair}/"],post:["convert/{pair}","price_stats/{pair}"]},private:{post:["active_orders_status/","archived_orders/{pair}/","balance/","cancel_order/","cancel_orders/{pair}/","cancel_replace_order/{pair}/","close_position/{pair}/","get_address/","get_myfee/","get_order/","get_order_tx/","open_orders/{pair}/","open_orders/","open_position/{pair}/","open_positions/{pair}/","place_order/{pair}/"]}},fees:{trading:{maker:.0016,taker:.0025},funding:{withdraw:{BTC:.001,ETH:.01,BCH:.001,DASH:.01,BTG:.001,ZEC:.001,XRP:.02},deposit:{BTC:0,ETH:0,BCH:0,DASH:0,BTG:0,ZEC:0,XRP:0,XLM:0}}},options:{fetchOHLCVWarning:!0,createMarketBuyOrderRequiresPrice:!0}})}async fetchMarkets(e={}){let t=await this.publicGetCurrencyLimits(),i=[];for(let e=0;e<t.data.pairs.length;e++){let s=t.data.pairs[e],r=s.symbol1+"/"+s.symbol2,a=r,[o,n]=a.split("/");i.push({id:r,info:s,symbol:a,base:o,quote:n,precision:{price:this.precisionFromString(this.safeString(s,"minPrice")),amount:this.precisionFromString(this.safeString(s,"minLotSize"))},limits:{amount:{min:s.minLotSize,max:s.maxLotSize},price:{min:this.safeFloat(s,"minPrice"),max:this.safeFloat(s,"maxPrice")},cost:{min:s.minLotSizeS2,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalance(),i={info:t},s=this.omit(t,["username","timestamp"]),r=Object.keys(s);for(let e=0;e<r.length;e++){let t=r[e];if(t in s){let e={free:this.safeFloat(s[t],"available",0),used:this.safeFloat(s[t],"orders",0),total:0};e.total=this.sum(e.free,e.used),i[t]=e}}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={pair:this.marketId(e)};void 0!==t&&(s.depth=t);let r=await this.publicGetOrderBookPair(this.extend(s,i)),a=1e3*r.timestamp;return this.parseOrderBook(r,a)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[1],e[2],e[3],e[4],e[5]]}async fetchOHLCV(e,t="1m",i,s,a={}){await this.loadMarkets();let n=this.market(e);if(void 0===i)i=this.milliseconds()-864e5;else if(this.options.fetchOHLCVWarning)throw new r(this.id+" fetchOHLCV warning: CEX can return historical candles for a certain date only, this might produce an empty or null reply. Set exchange.options['fetchOHLCVWarning'] = false or add ({ 'options': { 'fetchOHLCVWarning': false }}) to constructor params to suppress this warning message.");let d=this.ymd(i);d=(d=d.split("-")).join("");let c={pair:n.id,yyyymmdd:d};try{let e=await this.publicGetOhlcvHdYyyymmddPair(this.extend(c,a)),r="data"+this.timeframes[t],d=JSON.parse(e[r]);return this.parseOHLCVs(d,n,t,i,s)}catch(e){if(e instanceof o)return[]}}parseTicker(e,t){let i=void 0;"timestamp"in e&&(i=1e3*parseInt(e.timestamp));let s=this.safeFloat(e,"volume"),r=this.safeFloat(e,"high"),a=this.safeFloat(e,"low"),o=this.safeFloat(e,"bid"),n=this.safeFloat(e,"ask"),d=this.safeFloat(e,"last"),c=void 0;return t&&(c=t.symbol),{symbol:c,timestamp:i,datetime:this.iso8601(i),high:r,low:a,bid:o,bidVolume:void 0,ask:n,askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:s,quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=Object.keys(this.currencies),s=(await this.publicGetTickersCurrencies(this.extend({currencies:i.join("/")},t))).data,r={};for(let e=0;e<s.length;e++){let t=s[e],i=t.pair.replace(":","/"),a=this.markets[i];r[i]=this.parseTicker(t,a)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerPair(this.extend({pair:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=1e3*parseInt(e.date);return{info:e,id:e.tid,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.type,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradeHistoryPair(this.extend({pair:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){if("market"===t&&"buy"===i&&this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new n(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");s*=r}await this.loadMarkets();let o={pair:this.marketId(e),type:i,amount:s};"limit"===t?o.price=r:o.order_type=t;let d=await this.privatePostPlaceOrderPair(this.extend(o,a));return{info:d,id:d.id}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelOrder({id:e})}parseOrderStatus(e){return this.safeValue({a:"open",cd:"canceled",c:"canceled",d:"closed"},e,e)}parseOrder(e,t){let i=this.safeValue(e,"time");i="string"==typeof i&&i.indexOf("T")>=0?this.parse8601(i):parseInt(i);let s=void 0;if(void 0===t){let i=e.symbol1+"/"+e.symbol2;i in this.markets&&(t=this.market(i))}let r=e.status;"a"===r?r="open":"cd"===r?r="canceled":"c"===r?r="canceled":"d"===r&&(r="closed");let a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),n=this.safeFloat(e,"pending");n||(n=this.safeFloat(e,"remains"));let d=o-n,c=void 0,h=void 0;if(void 0!==t){s=t.symbol,void 0===(h=this.safeFloat(e,"ta:"+t.quote))&&(h=this.safeFloat(e,"tta:"+t.quote));let i="fa:"+t.base,r="tfa:"+t.base,a="fa:"+t.quote,o="tfa:"+t.quote,n=this.safeFloat(e,"tradingFeeMaker");if(n||(n=this.safeFloat(e,"tradingFeeTaker",n)),n&&(n/=100),i in e||r in e){let s=this.safeFloat(e,i);void 0===s&&(s=this.safeFloat(e,r)),c={currency:t.base,rate:n,cost:s}}else if(a in e||o in e){let i=this.safeFloat(e,a);void 0===i&&(i=this.safeFloat(e,o)),c={currency:t.quote,rate:n,cost:i}}}return h||(h=a*d),{id:e.id,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:r,symbol:s,type:void 0,side:e.type,price:a,cost:h,amount:o,filled:d,remaining:n,trades:void 0,fee:c,info:e}}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r={};let a="privatePostOpenOrders",o=void 0;void 0!==e&&(o=this.market(e),r.pair=o.id,a+="Pair");const n=await this[a](this.extend(r,s));for(let e=0;e<n.length;e++)n[e]=this.extend(n[e],{status:"open"});return this.parseOrders(n,o,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();if(void 0===e)throw new a(this.id+" fetchClosedOrders requires a symbol argument");const r=this.market(e),o={pair:r.id},n=await this.privatePostArchivedOrdersPair(this.extend(o,s));return this.parseOrders(n,r,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={id:e.toString()},r=await this.privatePostGetOrder(this.extend(s,i));return this.parseOrder(r)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));a=this.urlencode(this.extend({key:this.apiKey,signature:i.toUpperCase(),nonce:e},n)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,n){let d=await this.fetch2(e,t,i,s,a,n);if(!d)throw new o(this.id+" returned "+this.json(d));if(!0===d)return d;if("e"in d){if("ok"in d&&"ok"===d.ok)return d;throw new r(this.id+" "+this.json(d))}if("error"in d&&d.error)throw new r(this.id+" "+this.json(d));return d}async fetchDepositAddress(e,t={}){if("XRP"===e||"XLM"===e)throw new d(this.id+" fetchDepositAddress does not support XRP and XLM addresses yet (awaiting docs from CEX.io)");await this.loadMarkets();let i={currency:this.currency(e).id},s=await this.privatePostGetAddress(this.extend(i,t)),r=this.safeString(s,"data");return this.checkAddress(r),{currency:e,address:r,tag:void 0,info:s}}}},function(e,t,i){"use strict";const s=i(26),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"chbtc",name:"CHBTC",countries:["CN"],rateLimit:1e3,version:"v1",has:{CORS:!1,fetchOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28555659-f0040dc2-7109-11e7-9d99-688a438bf9f4.jpg",api:{public:"http://api.chbtc.com/data",private:"https://trade.chbtc.com/api"},www:"https://trade.chbtc.com/api",doc:"https://www.chbtc.com/i/developer"},markets:{"BTC/CNY":{id:"btc_cny",symbol:"BTC/CNY",base:"BTC",quote:"CNY"},"LTC/CNY":{id:"ltc_cny",symbol:"LTC/CNY",base:"LTC",quote:"CNY"},"ETH/CNY":{id:"eth_cny",symbol:"ETH/CNY",base:"ETH",quote:"CNY"},"ETC/CNY":{id:"etc_cny",symbol:"ETC/CNY",base:"ETC",quote:"CNY"},"BTS/CNY":{id:"bts_cny",symbol:"BTS/CNY",base:"BTS",quote:"CNY"},"BCH/CNY":{id:"bcc_cny",symbol:"BCH/CNY",base:"BCH",quote:"CNY"},"HSR/CNY":{id:"hsr_cny",symbol:"HSR/CNY",base:"HSR",quote:"CNY"},"QTUM/CNY":{id:"qtum_cny",symbol:"QTUM/CNY",base:"QTUM",quote:"CNY"}}})}getMarketFieldName(){return"currency"}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("private"===t&&"code"in n)throw new r(this.id+" "+this.json(n));if("result"in n&&!n.result)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(11);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"chilebit",name:"ChileBit",countries:["CL"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991414-1298f0d8-647f-11e7-9c40-d56409266336.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://chilebit.net",doc:"https://blinktrade.com/docs"},options:{brokerId:"9"}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,InvalidAddress:a,InsufficientFunds:o,InvalidNonce:n,InvalidOrder:d,OrderNotFound:c,PermissionDenied:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"cobinhood",name:"COBINHOOD",countries:["TW"],rateLimit:100,version:"v1",has:{fetchCurrencies:!0,fetchTickers:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrderTrades:!0,fetchOrder:!0,fetchDepositAddress:!0,createDepositAddress:!0,fetchDeposits:!0,fetchWithdrawals:!0,withdraw:!0,fetchMyTrades:!0,editOrder:!0},requiredCredentials:{apiKey:!0,secret:!1},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/35755576-dee02e5c-0878-11e8-989f-1595d80ba47f.jpg",api:"https://api.cobinhood.com",www:"https://cobinhood.com",doc:"https://cobinhood.github.io/api-public"},api:{system:{get:["info","time","messages","messages/{message_id}"]},admin:{get:["system/messages","system/messages/{message_id}"],post:["system/messages"],patch:["system/messages/{message_id}"],delete:["system/messages/{message_id}"]},public:{get:["market/fundingbook/precisions/{currency_id}","market/fundingbooks/{currency_id}","market/tickers","market/currencies","market/quote_currencies","market/trading_pairs","market/orderbook/precisions/{trading_pair_id}","market/orderbooks/{trading_pair_id}","market/stats","market/tickers","market/tickers/{trading_pair_id}","market/trades/{trading_pair_id}","market/trades_history/{trading_pair_id}","market/trading_pairs","chart/candles/{trading_pair_id}","system/time"]},private:{get:["funding/auto_offerings","funding/auto_offerings/{currency_id}","funding/funding_history","funding/fundings","funding/loans","funding/loans/{loan_id}","trading/orders/{order_id}","trading/orders/{order_id}/trades","trading/orders","trading/order_history","trading/positions","trading/positions/{trading_pair_id}","trading/positions/{trading_pair_id}/claimable_size","trading/trades","trading/trades/{trade_id}","trading/volume","wallet/balances","wallet/ledger","wallet/limits/withdrawal","wallet/generic_deposits","wallet/generic_deposits/{generic_deposit_id}","wallet/generic_withdrawals","wallet/generic_withdrawals/{generic_withdrawal_id}","wallet/deposit_addresses","wallet/deposit_addresses/iota","wallet/withdrawal_addresses","wallet/withdrawal_frozen","wallet/withdrawals/{withdrawal_id}","wallet/withdrawals","wallet/deposits/{deposit_id}","wallet/deposits"],patch:["trading/positions/{trading_pair_id}"],post:["funding/auto_offerings","funding/fundings","trading/check_order","trading/orders","wallet/deposit_addresses","wallet/transfer","wallet/withdrawal_addresses","wallet/withdrawals","wallet/withdrawals/fee"],put:["funding/fundings/{funding_id}","trading/orders/{order_id}"],delete:["funding/auto_offerings/{currency_id}","funding/fundings/{funding_id}","funding/loans/{loan_id}","trading/orders/{order_id}","trading/positions/{trading_pair_id}","wallet/generic_withdrawals/{generic_withdrawal_id}","wallet/withdrawal_addresses/{wallet_id}"]}},fees:{trading:{maker:0,taker:0}},precision:{amount:8,price:8},exceptions:{insufficient_balance:o,invalid_order_size:d,invalid_nonce:n,unauthorized_scope:h,invalid_address:a,parameter_error:c},commonCurrencies:{SMT:"SocialMedia.Market",MTN:"Motion Token"}})}async fetchCurrencies(e={}){let t=(await this.publicGetMarketCurrencies(e)).result.currencies,i={};for(let e=0;e<t.length;e++){let s=t[e],r=s.currency,a=this.commonCurrencyCode(r),o=this.safeFloat(s,"min_unit");i[a]={id:r,code:a,name:s.name,active:!0,fiat:!1,precision:this.precisionFromString(s.min_unit),limits:{amount:{min:o,max:void 0},price:{min:o,max:void 0},deposit:{min:o,max:void 0},withdraw:{min:o,max:void 0}},funding:{withdraw:{fee:this.safeFloat(s,"withdrawal_fee")},deposit:{fee:this.safeFloat(s,"deposit_fee")}},info:s}}return i}async fetchMarkets(e={}){let t=(await this.publicGetMarketTradingPairs()).result.trading_pairs,i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.id,[a,o]=r.split("-"),n=this.commonCurrencyCode(a),d=this.commonCurrencyCode(o),c=n+"/"+d,h={amount:8,price:this.precisionFromString(s.quote_increment)},l=this.safeValue(s,"is_active",!0);i.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:l,precision:h,limits:{amount:{min:this.safeFloat(s,"base_min_size"),max:this.safeFloat(s,"base_max_size")},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:s})}return i}parseTicker(e,t){let i=void 0;if(void 0===t){let s=this.safeString(e,"trading_pair_id");if(s in this.markets_by_id)t=this.markets_by_id[s];else{let[e,t]=s.split("-");i=this.commonCurrencyCode(e)+"/"+this.commonCurrencyCode(t)}}void 0!==t&&(i=t.symbol);let s=this.safeInteger(e,"timestamp"),r=this.safeFloat(e,"last_trade_price");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"24h_high"),low:this.safeFloat(e,"24h_low"),bid:this.safeFloat(e,"highest_bid"),bidVolume:void 0,ask:this.safeFloat(e,"lowest_ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:this.safeFloat(e,"percentChanged24hr"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"24h_volume"),quoteVolume:this.safeFloat(e,"quote_volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetMarketTickersTradingPairId(this.extend({trading_pair_id:i.id},t))).result.ticker;return this.parseTicker(s,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=(await this.publicGetMarketTickers(t)).result.tickers,s=[];for(let e=0;e<i.length;e++)s.push(this.parseTicker(i[e]));return this.indexBy(s,"symbol")}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={trading_pair_id:this.marketId(e)};void 0!==t&&(s.limit=t);let r=await this.publicGetMarketOrderbooksTradingPairId(this.extend(s,i));return this.parseOrderBook(r.result.orderbook,void 0,"bids","asks",0,2)}parseTrade(e,t){let i=void 0;t&&(i=t.symbol);let s=e.timestamp,r=this.safeFloat(e,"price"),a=this.safeFloat(e,"size"),o=r*a;return{info:e,timestamp:s,datetime:this.iso8601(s),symbol:i,id:e.id,order:void 0,type:void 0,side:void 0,price:r,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i=50,s={}){await this.loadMarkets();let r=this.market(e),a=(await this.publicGetMarketTradesTradingPairId(this.extend({trading_pair_id:r.id,limit:i},s))).result.trades;return this.parseTrades(a,r,t,i)}parseOHLCV(e,t,i="5m",s,r){return[e.timestamp,parseFloat(e.open),parseFloat(e.high),parseFloat(e.low),parseFloat(e.close),parseFloat(e.volume)]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o=this.milliseconds(),n={trading_pair_id:a.id,timeframe:this.timeframes[t],end_time:o};void 0!==i&&(n.start_time=i);let d=(await this.publicGetChartCandlesTradingPairId(this.extend(n,r))).result.candles;return this.parseOHLCVs(d,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetWalletBalances(e),i={info:t},s=t.result.balances;for(let e=0;e<s.length;e++){let t=s[e],r=t.currency;r in this.currencies_by_id&&(r=this.currencies_by_id[r].code);let a={used:parseFloat(t.on_order),total:parseFloat(t.total)};a.free=parseFloat(a.total-a.used),i[r]=a}return this.parseBalance(i)}parseOrderStatus(e){let t={filled:"closed",rejected:"closed",partially_filled:"open",pending_cancellation:"open",pending_modification:"open",open:"open",new:"open",queued:"open",cancelled:"canceled",triggered:"triggered"};return e in t?t[e]:e}parseOrder(e,t){let i=void 0;if(void 0===t){let i=this.safeString2(e,"trading_pair","trading_pair_id");t=this.safeValue(this.markets_by_id,i)}void 0!==t&&(i=t.symbol);let s=this.safeInteger(e,"timestamp"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"eq_price"),o=this.safeFloat(e,"size"),n=this.safeFloat(e,"filled"),d=void 0,c=void 0;void 0!==n&&void 0!==a?c=a*n:void 0!==a&&(c=a*o),void 0!==o&&void 0!==n&&(d=o-n);let h=this.parseOrderStatus(this.safeString(e,"state")),l=this.safeString(e,"side");return"bid"===l?l="buy":"ask"===l&&(l="sell"),{id:this.safeString(e,"id"),datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:h,symbol:i,type:this.safeString(e,"type"),side:l,price:r,cost:c,average:a,amount:o,filled:n,remaining:d,trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e);i="sell"===i?"ask":"bid";let n={trading_pair_id:o.id,type:t,side:i,size:this.amountToPrecision(e,s)};"market"!==t&&(n.price=this.priceToPrecision(e,r));let d=await this.privatePostTradingOrders(this.extend(n,a)),c=this.parseOrder(d.result.order,o),h=c.id;return this.orders[h]=c,c}async editOrder(e,t,i,s,r,a,o={}){await this.loadMarkets();let n=await this.privatePutTradingOrdersOrderId(this.extend({order_id:e,price:this.priceToPrecision(t,a),size:this.amountToPrecision(t,r)},o));return this.parseOrder(this.extend(n,{id:e}))}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateDeleteTradingOrdersOrderId(this.extend({order_id:e},i));return this.parseOrder(this.extend(s,{id:e}))}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetTradingOrdersOrderId(this.extend({order_id:e.toString()},i));return this.parseOrder(s.result.order)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=await this.privateGetTradingOrders(s),a=this.parseOrders(r.result.orders,void 0,t,i);return void 0!==e?this.filterBySymbolSinceLimit(a,e,t,i):this.filterBySinceLimit(a,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=await this.privateGetTradingOrderHistory(s),a=this.parseOrders(r.result.orders,void 0,t,i);return void 0!==e?this.filterBySymbolSinceLimit(a,e,t,i):this.filterBySinceLimit(a,t,i)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();let a=await this.privateGetTradingOrdersOrderIdTrades(this.extend({order_id:e},r)),o=void 0===t?void 0:this.market(t);return this.parseTrades(a.result.trades,o)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={};void 0!==e&&(a.trading_pair_id=r.id);let o=await this.privateGetTradingTrades(this.extend(a,s));return this.parseTrades(o.result.trades,r,t,i)}async createDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=this.safeString(t,"ledger_type","exchange"),r={currency:i.id,ledger_type:s},a=await this.privatePostWalletDepositAddresses(this.extend(r,t)),o=this.safeString(a.result.deposit_address,"address"),n=this.safeString(a.result.deposit_address,"memo");return this.checkAddress(o),{currency:e,address:o,tag:n,info:a}}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privateGetWalletDepositAddresses(this.extend({currency:i.id},t)),r=this.safeValue(s.result,"deposit_addresses",[]),a=void 0,o=void 0;return r.length>0&&(a=this.safeString(r[0],"address"),o=this.safeString2(r[0],"memo","tag")),this.checkAddress(a),{currency:e,address:a,tag:o,info:s}}async withdraw(e,t,i,s,r={}){await this.loadMarkets();const a={currency:this.currency(e).id,amount:t,address:i};return void 0!==s&&(a.memo=s),{id:void 0,info:await this.privatePostWalletWithdrawals(this.extend(a,r))}}async fetchDeposits(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new r(this.id+" fetchDeposits() requires a currency code argument");let a=this.currency(e),o={currency:a.id},n=await this.privateGetWalletDeposits(this.extend(o,s));return this.parseTransactions(n.result.deposits,a)}async fetchWithdrawals(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new r(this.id+" fetchWithdrawals() requires a currency code argument");let a=this.currency(e),o={currency:a.id},n=await this.privateGetWalletWithdrawals(this.extend(o,s));return this.parseTransactions(n.result.withdrawals,a)}parseTransactionStatus(e){let t={tx_pending_two_factor_auth:"pending",tx_pending_email_auth:"pending",tx_pending_approval:"pending",tx_approved:"pending",tx_processing:"pending",tx_pending:"pending",tx_sent:"pending",tx_cancelled:"canceled",tx_timeout:"failed",tx_invalid:"failed",tx_rejected:"failed",tx_confirmed:"ok"};return e in t?t[e]:e}parseTransaction(e,t){let i=this.safeInteger(e,"created_at"),s=void 0;if(void 0===t){let i=this.safeString(e,"currency");i in this.currencies_by_id?t=this.currencies_by_id[i]:s=this.commonCurrencyCode(i)}void 0!==t&&(s=t.code);let r=void 0,a=this.safeString(e,"withdrawal_id"),o=this.safeString(e,"deposit_id"),n=void 0,d=void 0;void 0!==a?(n="withdrawal",r=a,d=this.safeString(e,"to_address")):void 0!==o&&(n="deposit",r=o,d=this.safeString(e,"from_address"));const c=this.safeValue(e,"additional_info",{}),h=this.safeString(c,"memo");return{info:e,id:r,txid:this.safeString(e,"txhash"),timestamp:i,datetime:this.iso8601(i),address:d,tag:h,type:n,amount:this.safeFloat(e,"amount"),currency:s,status:this.parseTransactionStatus(e.status),updated:void 0,fee:{cost:this.safeFloat(e,"fee"),rate:void 0}}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));return r={},"private"===t&&(this.checkRequiredCredentials(),r.nonce=this.nonce().toString(),r.Authorization=this.apiKey),"GET"===i?(n=this.urlencode(n)).length&&(o+="?"+n):(r["Content-type"]="application/json; charset=UTF-8",a=this.json(n)),{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if(e<400||e>=600)return;if("{"!==o[0])throw new r(this.id+" "+o);const c=this.id+" "+this.json(n);let h=this.safeValue(n.error,"error_code");if(("DELETE"===s||"GET"===s)&&"parameter_error"===h&&i.indexOf("trading/orders/")>=0)throw new d(c);const l=this.exceptions;if(h in l)throw new l[h](c);throw new r(c)}nonce(){return this.milliseconds()}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:o,DDoSProtection:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinbase",name:"Coinbase",countries:["US"],rateLimit:400,version:"v2",userAgent:this.userAgents.chrome,headers:{"CB-VERSION":"2018-05-30"},has:{CORS:!0,cancelOrder:!1,createDepositAddress:!1,createOrder:!1,deposit:!1,fetchBalance:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!1,fetchMarkets:!1,fetchMyTrades:!1,fetchOHLCV:!1,fetchOpenOrders:!1,fetchOrder:!1,fetchOrderBook:!1,fetchL2OrderBook:!1,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchBidsAsks:!1,fetchTrades:!1,withdraw:!1,fetchTransactions:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchMySells:!0,fetchMyBuys:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/40811661-b6eceae2-653a-11e8-829e-10bfadb078cf.jpg",api:"https://api.coinbase.com",www:"https://www.coinbase.com",doc:"https://developers.coinbase.com/api/v2",fees:"https://support.coinbase.com/customer/portal/articles/2109597-buy-sell-bank-transfer-fees",referral:"https://www.coinbase.com/join/58cbe25a355148797479dbd2"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["currencies","time","exchange-rates","users/{user_id}","prices/{symbol}/buy","prices/{symbol}/sell","prices/{symbol}/spot"]},private:{get:["accounts","accounts/{account_id}","accounts/{account_id}/addresses","accounts/{account_id}/addresses/{address_id}","accounts/{account_id}/addresses/{address_id}/transactions","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}","accounts/{account_id}/deposits","accounts/{account_id}/deposits/{deposit_id}","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}","payment-methods","payment-methods/{payment_method_id}","user","user/auth"],post:["accounts","accounts/{account_id}/primary","accounts/{account_id}/addresses","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}/complete","accounts/{account_id}/transactions/{transaction_id}/resend","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}/commit","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}/commit","accounts/{account_id}/deposists","accounts/{account_id}/deposists/{deposit_id}/commit","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}/commit"],put:["accounts/{account_id}","user"],delete:["accounts/{id}","accounts/{account_id}/transactions/{transaction_id}"]}},exceptions:{two_factor_required:o,param_required:r,validation_error:r,invalid_request:r,personal_details_required:o,identity_verification_required:o,jumio_verification_required:o,jumio_face_match_verification_required:o,unverified_email:o,authentication_error:o,invalid_token:o,revoked_token:o,expired_token:o,invalid_scope:o,not_found:r,rate_limit_exceeded:n,internal_server_error:r},markets:{"BTC/USD":{id:"btc-usd",symbol:"BTC/USD",base:"BTC",quote:"USD"},"LTC/USD":{id:"ltc-usd",symbol:"LTC/USD",base:"LTC",quote:"USD"},"ETH/USD":{id:"eth-usd",symbol:"ETH/USD",base:"ETH",quote:"USD"},"BCH/USD":{id:"bch-usd",symbol:"BCH/USD",base:"BCH",quote:"USD"}},options:{accounts:["wallet","fiat"]}})}async fetchTime(){let e=(await this.publicGetTime()).data;return this.parse8601(e.iso)}async fetchAccounts(e={}){return await this.loadMarkets(),(await this.privateGetAccounts(e)).data}async fetchMySells(e,t,i,s={}){const r=this.safeString2(s,"account_id","accountId");if(void 0===r)throw new a(this.id+" fetchMyTrades requires an account_id or accountId extra parameter, use fetchAccounts or loadAccounts to get ids of all your accounts.");await this.loadMarkets();const o=this.omit(s,["account_id","accountId"]),n=await this.privateGetAccountsAccountIdSells(this.extend({account_id:r},o));return this.parseTrades(n.data,void 0,t,i)}async fetchMyBuys(e,t,i,s={}){const r=this.safeString2(s,"account_id","accountId");if(void 0===r)throw new a(this.id+" fetchMyTrades requires an account_id or accountId extra parameter, use fetchAccounts or loadAccounts to get ids of all your accounts.");await this.loadMarkets();const o=this.omit(s,["account_id","accountId"]),n=await this.privateGetAccountsAccountIdBuys(this.extend({account_id:r},o));return this.parseTrades(n.data,void 0,t,i)}async fetchTransactionsWithMethod(e,t,i,s,r={}){const o=this.safeString2(r,"account_id","accountId");if(void 0===o)throw new a(this.id+" fetchTransactionsWithMethod requires an account_id or accountId extra parameter, use fetchAccounts or loadAccounts to get ids of all your accounts.");await this.loadMarkets();const n=this.omit(r,["account_id","accountId"]),d=await this[e](this.extend({account_id:o},n));return this.parseTransactions(d.data,void 0,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetAccountsAccountIdWithdrawals",e,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsWithMethod("privateGetAccountsAccountIdDeposits",e,t,i,s)}parseTransactionStatus(e){return this.safeString({created:"pending",completed:"ok",canceled:"canceled"},e,e)}parseTransaction(e,t){let i=this.safeValue(e,"amount",{}),s=this.safeValue(e,"fee",{}),r=this.safeString(e,"id"),a=this.parse8601(this.safeValue(e,"created_at")),o=this.parse8601(this.safeValue(e,"updated_at")),n=this.safeString(e,"resource"),d=this.safeFloat(i,"amount"),c=this.safeString(i,"currency"),h=this.commonCurrencyCode(c),l=this.safeFloat(s,"amount"),u=this.safeString(s,"currency"),p={cost:l,currency:this.commonCurrencyCode(u)},m=this.parseTransactionStatus(this.safeString(e,"status"));if(void 0===m){m=this.safeValue(e,"committed")?"ok":"pending"}return{info:e,id:r,txid:r,order:void 0,timestamp:a,datetime:this.iso8601(a),address:void 0,tag:void 0,type:n,amount:d,currency:h,status:m,updated:o,fee:p}}parseTrade(e,t){let i=void 0,s=this.safeValue(e,"total",{}),r=this.safeValue(e,"amount",{}),a=this.safeValue(e,"subtotal",{}),o=this.safeValue(e,"fee",{}),n=this.safeString(e,"id"),d=this.parse8601(this.safeValue(e,"created_at"));if(void 0===t){let e=this.safeString(s,"currency"),t=this.safeString(r,"currency");if(void 0!==e&&void 0!==t){i=this.commonCurrencyCode(e)+"/"+this.commonCurrencyCode(t)}}let c=this.safeString(e,"resource"),h=this.safeFloat(a,"amount"),l=this.safeFloat(r,"amount"),u=void 0;void 0!==h&&void 0!==l&&(u=h/l);let p=this.safeFloat(o,"amount"),m=this.safeString(o,"currency"),f={cost:p,currency:this.commonCurrencyCode(m)};return{info:e,id:n,order:void 0,timestamp:d,datetime:this.iso8601(d),symbol:i,type:void 0,side:c,price:u,amount:l,cost:h,fee:f}}async fetchCurrencies(e={}){let t=(await this.publicGetCurrencies(e)).data,i={};for(let e=0;e<t.length;e++){let s=t[e],r=s.id,a=s.name,o=this.commonCurrencyCode(r),n=this.safeFloat(s,"min_size");i[o]={id:r,code:o,info:s,name:a,active:!0,fee:void 0,precision:void 0,limits:{amount:{min:n,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.seconds(),s=this.market(e),r=this.extend({symbol:s.id},t),a=await this.publicGetPricesSymbolBuy(r),o=await this.publicGetPricesSymbolSell(r),n=await this.publicGetPricesSymbolSpot(r),d=this.safeFloat(a.data,"amount"),c=this.safeFloat(o.data,"amount"),h=this.safeFloat(n.data,"amount");return{symbol:e,timestamp:i,datetime:this.iso8601(i),bid:c,ask:d,last:h,high:void 0,low:void 0,bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:{buy:a,sell:o,spot:n}}}async fetchBalance(e={}){let t=await this.privateGetAccounts(),i=t.data,s=this.safeValue(e,"type",this.options.accounts),r={info:t};for(let e=0;e<i.length;e++){let t=i[e];if(this.inArray(t.type,s)){let e=t.balance.currency,i=e;e in this.currencies_by_id&&(i=this.currencies_by_id[e].code);let s=this.safeFloat(t.balance,"amount"),a=s,o=void 0;if(i in r)r[i].free+=s,r[i].total+=s;else{let e={free:a,used:o,total:s};r[i]=e}}}return this.parseBalance(r)}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));let d=this.urls.api+"/"+this.version+o;if("private"===t){this.checkRequiredCredentials();let e=this.nonce().toString(),t="";"GET"!==i&&Object.keys(n).length&&(t=a=this.json(n));let s=e+i+"/"+this.version+o+t,d=this.hmac(this.encode(s),this.encode(this.secret));r={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":d,"CB-ACCESS-TIMESTAMP":e,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&!(o.length<2||"{"!==o[0]&&"["!==o[0])){let e=this.id+" "+o,t=this.exceptions,i=this.safeString(n,"error");if(void 0!==i)throw i in t?new t[i](e):new r(e);let s=this.safeValue(n,"errors");if(void 0!==s&&Array.isArray(s)){if(s.length>0&&void 0!==(i=this.safeString(s[0],"id")))throw i in t?new t[i](e):new r(e)}if(void 0===this.safeValue(n,"data"))throw new r(this.id+" failed due to a malformed response "+this.json(n))}}}},function(e,t,i){"use strict";const s=i(28);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinbaseprime",name:"Coinbase Prime",urls:{test:"https://api-public.sandbox.prime.coinbase.com",logo:"https://user-images.githubusercontent.com/1294454/44539184-29f26e00-a70c-11e8-868f-e907fc236a7c.jpg",api:"https://api.prime.coinbase.com",www:"https://prime.coinbase.com",doc:"https://docs.prime.coinbase.com",fees:"https://support.prime.coinbase.com/customer/en/portal/articles/2945629-fees?b_id=17475"}})}}},function(e,t,i){"use strict";const s=i(28);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinbasepro",name:"Coinbase Pro",urls:{test:"https://api-public.sandbox.pro.coinbase.com",logo:"https://user-images.githubusercontent.com/1294454/41764625-63b7ffde-760a-11e8-996d-a6328fa9347a.jpg",api:"https://api.pro.coinbase.com",www:"https://pro.coinbase.com/",doc:"https://docs.pro.coinbase.com/",fees:["https://docs.pro.coinbase.com/#fees","https://support.pro.coinbase.com/customer/en/portal/articles/2945310-fees"]}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,NotSupported:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coincheck",name:"coincheck",countries:["JP","ID"],rateLimit:1500,has:{CORS:!1,fetchOpenOrders:!0,fetchMyTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766464-3b5c3c74-5ed9-11e7-840e-31b32968e1da.jpg",api:"https://coincheck.com/api",www:"https://coincheck.com",doc:"https://coincheck.com/documents/exchange/api",fees:["https://coincheck.com/exchange/fee","https://coincheck.com/info/fee"]},api:{public:{get:["exchange/orders/rate","order_books","rate/{pair}","ticker","trades"]},private:{get:["accounts","accounts/balance","accounts/leverage_balance","bank_accounts","deposit_money","exchange/orders/opens","exchange/orders/transactions","exchange/orders/transactions_pagination","exchange/leverage/positions","lending/borrows/matches","send_money","withdraws"],post:["bank_accounts","deposit_money/{id}/fast","exchange/orders","exchange/transfers/to_leverage","exchange/transfers/from_leverage","lending/borrows","lending/borrows/{id}/repay","send_money","withdraws"],delete:["bank_accounts/{id}","exchange/orders/{id}","withdraws/{id}"]}},markets:{"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy"}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0}}})}async fetchBalance(e={}){let t=await this.privateGetAccountsBalance(),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=r.toLowerCase(),o=this.account();a in t&&(o.free=parseFloat(t[a]));let n=a+"_reserved";n in t&&(o.used=parseFloat(t[n])),o.total=this.sum(o.free,o.used),i[r]=o}return this.parseBalance(i)}async fetchOpenOrders(e,t,i,s={}){let r=void 0;void 0!==e&&(r=this.market(e));const a=await this.privateGetExchangeOrdersOpens(s),o=this.safeValue(a,"orders",[]),n=this.parseOrders(o,r,t,i),d=[];for(let e=0;e<n.length;e++)d.push(this.extend(n[e],{status:"open"}));return d}parseOrder(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"order_type"),r=this.parse8601(this.safeString(e,"created_at")),a=this.safeFloat(e,"pending_amount"),o=this.safeFloat(e,"pending_amount"),n=this.safeFloat(e,"rate");let d=void 0,c=void 0;void 0!==o&&void 0!==a&&(d=Math.max(a-o,0),void 0!==n&&(c=d*n));const h=this.safeString(e,"pair");let l=void 0;if(void 0!==h)if(h in this.markets_by_id)l=this.markets_by_id[h].symbol;else{const[e,t]=h.split("_");l=this.commonCurrencyCode(e)+"/"+this.commonCurrencyCode(t)}return{id:i,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,amount:a,remaining:o,filled:d,side:s,type:void 0,status:void 0,symbol:l,price:n,cost:c,fee:void 0,info:e}}async fetchOrderBook(e,t,i={}){if("BTC/JPY"!==e)throw new a(this.id+" fetchOrderBook () supports BTC/JPY only");let s=await this.publicGetOrderBooks(i);return this.parseOrderBook(s)}async fetchTicker(e,t={}){if("BTC/JPY"!==e)throw new a(this.id+" fetchTicker () supports BTC/JPY only");let i=await this.publicGetTicker(t),s=1e3*i.timestamp,r=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(i,"volume"),quoteVolume:void 0,info:i}}parseTrade(e,t){const i=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"id"),r=this.safeFloat(e,"rate"),a=this.safeString(e,"pair");t=this.safeValue(this.markets_by_id,a,t);let o=void 0,n=void 0,d=void 0;if(void 0!==a)if(a in this.markets_by_id)n=(t=this.markets_by_id[a]).baseId,d=t.quoteId,o=t.symbol;else{const e=a.split("_");n=e[0],d=e[1],o=this.commonCurrencyCode(n)+"/"+this.commonCurrencyCode(d)}void 0===o&&void 0!==t&&(o=t.symbol);let c=void 0,h=void 0,l=void 0,u=void 0,p=void 0,m=void 0;if("liquidity"in e){"T"===this.safeString(e,"liquidity")?c="taker":"M"===this.safeString(e,"liquidity")&&(c="maker");const t=this.safeValue(e,"funds",{});h=this.safeFloat(t,n),l=this.safeFloat(t,d),p={currency:this.safeString(e,"fee_currency"),cost:this.safeFloat(e,"fee")},u=this.safeString(e,"side"),m=this.safeString(e,"order_id")}else h=this.safeFloat(e,"amount"),u=this.safeString(e,"order_type");return void 0===l&&void 0!==h&&void 0!==r&&(l=h*r),{id:s,info:e,datetime:this.iso8601(i),timestamp:i,symbol:o,type:void 0,side:u,order:m,takerOrMaker:c,price:r,amount:h,cost:l,fee:p}}async fetchMyTrades(e,t,i,s={}){const r=this.market(e),a=await this.privateGetExchangeOrdersTransactions(this.extend({},s)),o=this.safeValue(a,"transactions",[]);return this.parseTrades(o,r,t,i)}async fetchTrades(e,t,i,s={}){if("BTC/JPY"!==e)throw new a(this.id+" fetchTrades () supports BTC/JPY only");const r=this.market(e),o={pair:r.id};void 0!==i&&(o.limit=i);const n=await this.publicGetTrades(this.extend(o,s)),d=this.safeValue(n,"data",[]);return this.parseTrades(d,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o={pair:this.marketId(e)};if("market"===t){let e=t+"_"+i;o.order_type=e,o[("buy"===i?e+"_":"")+"amount"]=s}else o.order_type=i,o.rate=r,o.amount=s;let n=await this.privatePostExchangeOrders(this.extend(o,a));return{info:n,id:n.id.toString()}}async cancelOrder(e,t,i={}){return await this.privateDeleteExchangeOrdersId({id:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t="";"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(this.keysort(n))):Object.keys(n).length&&(t=a=this.urlencode(this.keysort(n)));let s=e+o+t;r={"Content-Type":"application/x-www-form-urlencoded","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":e,"ACCESS-SIGNATURE":this.hmac(this.encode(s),this.encode(this.secret))}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("public"===t)return n;if("success"in n&&n.success)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,InsufficientFunds:o,OrderNotFound:n,InvalidOrder:d,AuthenticationError:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinex",name:"CoinEx",version:"v1",countries:["CN"],rateLimit:1e3,has:{fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/1294454/38046312-0b450aac-32c8-11e8-99ab-bc6b136b6cc7.jpg",api:{public:"https://api.coinex.com",private:"https://api.coinex.com",web:"https://www.coinex.com"},www:"https://www.coinex.com",doc:"https://github.com/coinexcom/coinex_exchange_api/wiki",fees:"https://www.coinex.com/fees",referral:"https://www.coinex.com/account/signup?refer_code=yw5fz"},api:{web:{get:["res/market"]},public:{get:["market/list","market/ticker","market/ticker/all","market/depth","market/deals","market/kline"]},private:{get:["balance/coin/withdraw","balance/coin/deposit","balance/info","order","order/pending","order/finished","order/finished/{id}","order/user/deals"],post:["balance/coin/withdraw","order/limit","order/market"],delete:["balance/coin/withdraw","order/pending"]}},fees:{trading:{maker:0,taker:.001},funding:{withdraw:{BCH:0,BTC:.001,LTC:.001,ETH:.001,ZEC:1e-4,DASH:1e-4}}},limits:{amount:{min:.001,max:void 0}},precision:{amount:8,price:8},options:{createMarketBuyOrderRequiresPrice:!0}})}async fetchMarkets(e={}){let t=(await this.webGetResMarket()).data.market_info,i=[],s=Object.keys(t);for(let e=0;e<s.length;e++){let r=t[s[e]],a=r.market,o=r.buy_asset_type,n=r.sell_asset_type,d=this.commonCurrencyCode(n),c=this.commonCurrencyCode(o),h=d+"/"+c,l={amount:r.sell_asset_type_places,price:r.buy_asset_type_places},u=r.merge.length,p="pass"===r.status;i.push({id:a,symbol:h,base:d,quote:c,baseId:n,quoteId:o,active:p,taker:this.safeFloat(r,"taker_fee_rate"),maker:this.safeFloat(r,"maker_fee_rate"),info:r,precision:l,limits:{amount:{min:this.safeFloat(r,"least_amount"),max:void 0},price:{min:parseFloat(r.merge[u-1]),max:void 0}}})}return i}parseTicker(e,t){let i=e.date,s=t.symbol;e=e.ticker;let r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetMarketTicker(this.extend({market:i.id},t));return this.parseTicker(s.data,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=(await this.publicGetMarketTickerAll(t)).data,s=i.date,r=i.ticker,a=Object.keys(r),o={};for(let e=0;e<a.length;e++){let t=a[e],i=this.markets_by_id[t],n=i.symbol,d={date:s,ticker:r[t]};o[n]=this.parseTicker(d,i)}return o}async fetchOrderBook(e,t=20,i={}){await this.loadMarkets(),void 0===t&&(t=20);const s={market:this.marketId(e),merge:"0.00000001",limit:t.toString()};let r=await this.publicGetMarketDepth(this.extend(s,i));return this.parseOrderBook(r.data)}parseTrade(e,t){let i=this.safeInteger(e,"create_time");void 0===i?i=this.safeInteger(e,"date_ms"):i*=1e3;let s=this.safeString(e,"id"),r=this.safeString(e,"order_id"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),n=this.safeString(e,"market"),d=void 0;void 0!==(t=this.safeValue(this.markets_by_id,n,t))&&(d=t.symbol);let c=this.safeFloat(e,"deal_money");c||(c=parseFloat(this.costToPrecision(d,a*o)));let h=void 0,l=this.safeFloat(e,"fee");if(void 0!==l){let t=this.safeString(e,"fee_asset"),i=this.safeValue(this.currencies_by_id,t),s=void 0;void 0!==i&&(s=i.code),h={cost:l,currency:s}}let u=this.safeString(e,"role"),p=this.safeString(e,"type");return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:d,id:s,order:r,type:void 0,side:p,takerOrMaker:u,price:a,amount:o,cost:c,fee:h}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetMarketDeals(this.extend({market:r.id},s));return this.parseTrades(a.data,r,t,i)}parseOHLCV(e,t,i="5m",s,r){return[1e3*e[0],parseFloat(e[1]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[2]),parseFloat(e[5])]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o=await this.publicGetMarketKline(this.extend({market:a.id,type:this.timeframes[t]},r));return this.parseOHLCVs(o.data,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetBalanceInfo(e),i={info:t},s=t.data,r=Object.keys(s);for(let e=0;e<r.length;e++){let t=r[e],a=s[t],o=this.commonCurrencyCode(t),n={free:parseFloat(a.available),used:parseFloat(a.frozen),total:0};n.total=this.sum(n.free,n.used),i[o]=n}return this.parseBalance(i)}parseOrderStatus(e){let t={not_deal:"open",part_deal:"open",done:"closed",cancel:"canceled"};return e in t?t[e]:e}parseOrder(e,t){let i=1e3*this.safeInteger(e,"create_time"),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"deal_money"),a=this.safeFloat(e,"amount"),o=this.safeFloat(e,"deal_amount");const n=this.safeFloat(e,"avg_price");let d=void 0,c=this.safeString(e,"market");t=this.safeValue(this.markets_by_id,c);let h=void 0,l=this.safeString(e,"fee_asset"),u=this.safeValue(this.currencies_by_id,l);void 0!==u&&(h=u.code),void 0!==t&&(d=t.symbol,void 0===h&&(h=t.quote));let p=this.safeFloat(e,"left"),m=this.parseOrderStatus(this.safeString(e,"status")),f=this.safeString(e,"order_type"),y=this.safeString(e,"type");return{id:this.safeString(e,"id"),datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:m,symbol:d,type:f,side:y,price:s,cost:r,average:n,amount:a,filled:o,remaining:p,trades:void 0,fee:{currency:h,cost:this.safeFloat(e,"deal_fee")},info:e}}async createOrder(e,t,i,s,r,a={}){if(s=parseFloat(s),"market"===t&&"buy"===i&&this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new d(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");s*=r=parseFloat(r)}await this.loadMarkets();let o="privatePostOrder"+this.capitalize(t),n=this.market(e),c={market:n.id,amount:this.amountToPrecision(e,s),type:i};"limit"===t&&(r=parseFloat(r),c.price=this.priceToPrecision(e,r));let h=await this[o](this.extend(c,a)),l=this.parseOrder(h.data,n),u=l.id;return this.orders[u]=l,l}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t),r=await this.privateDeleteOrderPending(this.extend({id:e,market:s.id},i));return this.parseOrder(r.data,s)}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();let s=this.market(t),r=await this.privateGetOrder(this.extend({id:e,market:s.id},i));return this.parseOrder(r.data,s)}async fetchOrdersByStatus(e,t,i,s,r={}){await this.loadMarkets(),void 0===s&&(s=100);let a={page:1,limit:s},o=void 0;void 0!==t&&(o=this.market(t),a.market=o.id);let n="privateGetOrder"+this.capitalize(e),d=await this[n](this.extend(a,r));return this.parseOrders(d.data.data,o,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("pending",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStatus("finished",e,t,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets(),void 0===i&&(i=100);let r={page:1,limit:i},a=void 0;void 0!==e&&(a=this.market(e),r.market=a.id);let o=await this.privateGetOrderUserDeals(this.extend(r,s));return this.parseTrades(o.data.data,a,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets(),s&&(i=i+":"+s);let a={coin_type:this.currency(e).id,coin_address:i,actual_amount:parseFloat(t)},o=await this.privatePostBalanceCoinWithdraw(this.extend(a,r));return{info:o,id:this.safeString(o,"coin_withdraw_id")}}parseTransactionStatus(e){return this.safeString({audit:"pending",pass:"pending",processing:"pending",confirming:"pending",not_pass:"failed",cancel:"canceled",finish:"ok",fail:"failed"},e,e)}parseTransaction(e,t){let i=this.safeString2(e,"coin_withdraw_id","coin_deposit_id"),s=this.safeString(e,"coin_address"),r=this.safeString(e,"remark");void 0!==r&&r.length<1&&(r=void 0);let a=this.safeValue(e,"tx_id");void 0!==a&&a.length<1&&(a=void 0);let o=void 0,n=this.safeString(e,"coin_type");n in this.currencies_by_id?t=this.currencies_by_id[n]:o=this.commonCurrencyCode(n),void 0!==t&&(o=t.code);let d=this.safeInteger(e,"create_time");void 0!==d&&(d*=1e3);let c="coin_withdraw_id"in e?"withdraw":"deposit",h=this.parseTransactionStatus(this.safeString(e,"status"),c),l=this.safeFloat(e,"amount"),u=this.safeFloat(e,"tx_fee");"deposit"===c&&(u=0);let p={cost:u,currency:o};return{info:e,id:i,txid:a,timestamp:d,datetime:this.iso8601(d),address:s,tag:r,type:c,amount:l,currency:o,status:h,updated:void 0,fee:p}}async fetchWithdrawals(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchWithdrawals requires a currency code argument");const r=this.currency(e),o={coin_type:r.id};void 0!==i&&(o.Limit=i);const n=await this.privateGetBalanceCoinWithdraw(this.extend(o,s));return this.parseTransactions(n.data,r,t,i)}async fetchDeposits(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchDeposits requires a currency code argument");const r=this.currency(e),o={coin_type:r.id};void 0!==i&&(o.Limit=i);const n=await this.privateGetBalanceCoinDeposit(this.extend(o,s));return this.parseTransactions(n.data,r,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){e=this.implodeParams(e,s);let o=this.urls.api[t]+"/"+this.version+"/"+e,n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else if("web"===t)o=this.urls.api[t]+"/"+e,Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce();n=this.extend({access_id:this.apiKey,tonce:e.toString()},n),n=this.keysort(n);let t=this.urlencode(n);r={Authorization:this.hash(this.encode(t+"&secret_key="+this.secret)).toUpperCase(),"Content-Type":"application/json"},"GET"===i||"DELETE"===i?o+="?"+t:a=this.json(n)}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,h){let l=await this.fetch2(e,t,i,s,a,h),u=this.safeString(l,"code"),p=this.safeValue(l,"data");if("0"!==u||!p){let e={24:c,25:c,107:o,600:n,601:d,602:d,606:d};throw new(this.safeValue(e,u,r))(l.message)}return l}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinexchange",name:"CoinExchange",countries:["IN","JP","KR","VN","US"],rateLimit:1e3,has:{privateAPI:!1,fetchBalance:!1,createOrder:!1,createMarketOrder:!1,createLimitOrder:!1,cancelOrder:!1,editOrder:!1,fetchTrades:!1,fetchOHLCV:!1,fetchCurrencies:!0,fetchTickers:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/34842303-29c99fca-f71c-11e7-83c1-09d900cb2334.jpg",api:"https://www.coinexchange.io/api/v1",www:"https://www.coinexchange.io",doc:"https://coinexchangeio.github.io/slate/",fees:"https://www.coinexchange.io/fees"},api:{public:{get:["getcurrency","getcurrencies","getmarkets","getmarketsummaries","getmarketsummary","getorderbook"]}},fees:{trading:{maker:.0015,taker:.0015},funding:{withdraw:{1337:.01,"420G":.01,611:.1,ACC:.01,ACES:.01,ACO:.01,ACP:.01,ADCN:500,ADST:1,ADZ:.1,AGRI:.01,AI:1,AKY:.01,ALIS:1,ALL:.2,AMC:.1,AMMO:.01,AMS:.01,ANTX:.01,ANY:1,ARG:.1,ARGUS:.01,ARGUSOLD:.01,ASN:.01,ATOM:.01,ATX:.01,AU:.01,B2B:1,B3:.01,BAKED:.01,BCC:.01,BCH:.001,BCM:.01,BDL:.01,BEER:.01,BELA:.01,BENJI:.05,BET:.01,BFI:1,BIGUP:1,BIRDS:.01,BITB:.1,BIXC:.01,BIZ:.01,BLAS:.1,BLAZR:.2,BLK:.01,BLN:1,BLUE:1,BOAT:1,BON:.01,BONPAY:1,BOPS:.01,BPOK:.1,BQ:1,BRAT:.01,BRC:1,BRIT:.01,BSN:1,BSR:.01,BTBc:.01,BTC:.001,BTCRED:1,BTCRF:.01,BTDX:.1,BTE:1,BTPL:.01,BULLS:.01,BUZZ:.01,BXT:.01,C47:1,CACH:.2,CALC:.01,CANN:.01,CBANK:1,CDX:1,CHEAP:.01,CHESS:.01,CHILI:.01,CHIPS:.1,CJ:.1,CLT:.1,CMPCO:.2,CMX:.01,CNNC:.02,CNT:.01,CO2:1,COOC:.01,COUPE:.01,CQST:.1,CRACKERS:.01,CRDNC:.01,CREA:.02,CREAK:.01,CREVA2:.01,CRMSN:.01,CRN:.01,CRW:.01,CTIC2:.01,CUBE:.01,CXT:.01,CYCLONE:.01,CYDER:.01,DAG:.01,DALC:1,DARI:.01,DASH:.01,DAV:.01,DBIC:.1,DCN:1,DEM:.01,DFS:.01,DGB:.1,DGC:.1,DIME:.01,DMB:.01,DMC:.1,DNCV2:.01,DNE:1,DNR:.01,DOGE:2,DOGEJ:1,DP:.01,DRGN:1,DRS:.1,DSE:.01,DSR:.01,DTCT:1,DUTCH:.01,EBC:.01,EBT:.01,ECC:.1,ECN:.01,EDRC:.01,EECN:.01,EGC:.1,ELCO:.1,ELIX:1,ELS:.01,ELT:1,EMC:.01,EMIRG:.01,ENTRC:1,ENZO:.1,EQL:1,EQT:.1,ERSO:.01,ERT:1,ERY:.01,ESP:.1,ETBS:1,ETC:.1,ETG:1,ETH:.01,ETHD:.01,ETHOS:1,ETN:2,EUROP:.1,EXCL:.1,EXTN:.01,FAIR:.01,FAP:1,FAZZ:.01,FCH:.01,FGZ:.1,FLASH:.01,FLIK:1,FRT:.1,FSX:.1,FTC:.01,FXE:2,GAIN:1,GB:.1,GBX:.01,GDC:1,GEERT:.01,GET:.01,GFC:1,GLS:.01,GLT:.01,GLTC:.01,GMB:.01,GMX:.01,GOKUOLD:.1,GOLD:.01,GOLF:.1,GOOD:2,GP:.01,GRE:.01,GREENF:.01,GRMD:1,GRS:.01,GRX:1,GTC:.01,GWC:.2,HALLO:.01,HBC:.01,HC:.01,HEALTHY:.01,HIGH:.01,HarmonyCoin:.01,HNC:.01,HOC:.01,HODL:.01,HOLLY:1,HONEY:.01,HOPE:.01,HPC:.01,HUB:1,HYP:.01,HYPER:.01,IBC:1,ICE:1,ICOT:1,IFT:1,ILC:.01,IMX:.01,INDIA:.01,INFO:.01,INSN:.01,INXT:1,IOE:.01,IQT:1,IXC:.01,JAPAN:.01,JEDI:.01,JET:1,JIN:.2,KAYI:.01,KB3:.01,KGB:.01,KLC:.1,KMD:.01,KOBO:1,KOI:.01,KORUNA:.1,KRA:.01,KUBO:.01,KURT:.01,LA:1,LAMBO:.01,LCT:1,LDC:.01,LEVO:.1,LIFE:1,LINDA:.01,LINX:.01,LIZ:.01,LMC:.1,LNK:.05,LRC:1,LTC:.01,LTG:1,LUCK:.01,LUNA:.01,LVPS:.01,MAC:2,MAG:.01,MALC:.01,MARS:.01,MARS2:.01,MAXI:.01,MAY:.01,MBC:.01,MBIT:.01,MCB:1,MEC:.1,MENTAL:.1,MER:.1,MET:.01,MGM:.01,MGT:.01,MILO:.5,MINEX:1,MINT:1,MIPS:1,MNX:.01,MOIN:.1,MOON:.1,MSCN:.01,MSP:1,MST:.1,MTH:1,MUE:.1,MUX:1,MXC:.01,MXT:.1,MYB:1,NBIT:.1,NBX:.01,NEOG:1,NEON:.01,NLC2:.01,NLG:.1,NRN:.01,NRO:.01,NTC:1,NTO:1,NUA:1,NUMUS:.01,OC:.01,OGN:.01,ORO:.01,PARIS:.01,PAYU:.1,PCN:1,PCS:.01,PDG:.01,PEC:.01,PGL:1,PHN:1,PICO:.1,PIE:.01,PIGGY:.1,PIVX:.2,PIX:1,PKT:1,PLACO:.01,PLX:1,POL:.01,POLOB:.1,POS:1,POST:1,POSW:.01,POT:.1,PRE:1,PRIMU:.01,PRL:1,PRN:1,PRX:.01,PT:1,PTS:1,PURA:1,PURE:.01,PUT:.1,PWC:.01,PWR:.1,QTUM:.01,QUANT:.01,RAIN:.5,RBL:.01,RDC:.01,REC:.01,REGA:.1,REX:1,RHO:.1,RIYA:1,RMC:2,RNS:.01,ROC:0,ROOFS:.01,RUB:.01,RUNE:.01,RUNNERS:.01,RUP:.01,SBIT:.01,SCL:1,SCORE:.01,SCOREOLD:.01,SDASH:.01,SFC:.01,SFE:.01,SGR:1,SHIT:.1,SHM:.1,SHND:.1,SHOT:.1,SIC:.1,SILK2:.01,SIMP:.001,SISA:1,SKOIN:.01,SKULL:.01,SLEVIN:.01,SLR:.01,SMART:.01,SMS:.002,SNOW:.01,SOLAR:.01,SPRTS:1,SRC:.01,SST:.1,STARS:.01,STN:.01,STO:.01,STX:1,SUPER:.01,SUPERMAN:.01,SURGE:.01,SWC:.1,SYNQ:.01,SYNX:.01,TAAS:2,TBS:.01,TCOIN:.01,TELL:.1,TER:.005,TGT:1,TIGER:.01,TIPS:.01,TLE:.01,TOPAZ:.01,TOR:.01,TPC:.01,TPG:.01,TPI:1,TRANCE:.01,TRC:.01,TRUX:.01,TSE:.1,TSTR:.01,TURBO:.01,UFO:.01,UK:.01,ULA:.01,UNIFY:0,UNIT:.1,UNO:.001,UP:.01,UQC:1,USA:.01,VC:.01,VGS:.01,VIDZ:.01,VISIO:.05,VLTC:.1,VOISE:1,VONE:.01,VOX:.01,VSX:.01,VULCANO:.01,WASH:.1,WCL:1,WINK:.01,WOMEN:.01,WORM:.01,WOW:.1,WRP:.01,WYV:.01,XBC:.01,XBL:1,XBU:1,XCHE:.1,XCS:.01,XCT:.01,XCXT:.01,XDE2:.01,XEV:.1,XGOX:.01,XGTC:.01,XLR:.1,XMCC:.01,XP:1,XPASC:.01,XQN:.01,XSA:.1,XSTC:2,XTD:.01,XVS:.01,XXX:.1,XYOC:1,XYZ:.01,XZC:.1,XZCD:.01,YHC:.01,ZCC:.01,ZCG:1,ZCL:.001,ZEC:.001,ZEIT:.1,ZENI:.01,ZERO:.01,ZMC:.1,ZOI:.01,ZSE:.01,ZURMO:.1,ZZC:.01}}},precision:{amount:8,price:8},commonCurrencies:{ACC:"AdCoin",ANC:"AnyChain",BON:"BonPeKaO",BONPAY:"BON",eNAU:"ENAU",ETN:"Ethernex",FRC:"FireRoosterCoin",GET:"GreenEnergyToken",GDC:"GoldenCryptoCoin",GOLD:"GoldenCoin",GTC:"GlobalTourCoin",HMC:"HarmonyCoin",HNC:"Huncoin",IBC:"RCoin",MARS:"MarsBux",MER:"TheMermaidCoin",OC:"occnetwork",PUT:"PutinCoin",RUB:"RubbleCoin",UP:"UpscaleToken",VULCANO:"VULC"}})}async fetchCurrencies(e={}){let t=(await this.publicGetGetcurrencies(e)).result,i=this.precision.amount,s={};for(let e=0;e<t.length;e++){let r=t[e],a=r.CurrencyID,o=this.commonCurrencyCode(r.TickerCode),n="online"===r.WalletStatus;s[o]={id:a,code:o,name:r.Name,active:n,precision:i,limits:{amount:{min:void 0,max:Math.pow(10,i)},price:{min:Math.pow(10,-i),max:Math.pow(10,i)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,i)}},info:r}}return s}async fetchMarkets(e={}){let t=(await this.publicGetGetmarkets()).result,i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.MarketID,a=this.safeString(s,"MarketAssetCode"),o=this.safeString(s,"BaseCurrencyCode");if(void 0!==a&&void 0!==o){let e=this.commonCurrencyCode(a),t=this.commonCurrencyCode(o),n=e+"/"+t;i.push({id:r,symbol:n,base:e,quote:t,baseId:a,quoteId:o,active:s.Active,info:s})}}return i}parseTicker(e,t){let i=void 0;if(void 0===t){let s=e.MarketID;s in this.markets_by_id?t=this.markets_by_id[s]:i=s}t&&(i=t.symbol);let s=this.milliseconds(),r=this.safeFloat(e,"LastPrice");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"HighPrice"),low:this.safeFloat(e,"LowPrice"),bid:this.safeFloat(e,"BidPrice"),bidVolume:void 0,ask:this.safeFloat(e,"AskPrice"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"Change"),average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"Volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetGetmarketsummary(this.extend({market_id:i.id},t));return this.parseTicker(s.result,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=(await this.publicGetGetmarketsummaries(t)).result,s={};for(let e=0;e<i.length;e++){let t=this.parseTicker(i[e]);s[t.symbol]=t}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetGetorderbook(this.extend({market_id:this.marketId(e)},i));return this.parseOrderBook(s.result,void 0,"BuyOrders","SellOrders","Price","Quantity")}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+e;return"public"===t&&Object.keys(s).length&&(o+="?"+this.urlencode(s)),{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if(1!==this.safeInteger(n,"success")){let e=this.safeString(n,"message","Error");throw new r(e)}return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,AuthenticationError:a,DDoSProtection:o,ArgumentsRequired:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinfalcon",name:"CoinFalcon",countries:["GB"],rateLimit:1e3,version:"v1",has:{fetchTickers:!0,fetchOpenOrders:!0,fetchMyTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/41822275-ed982188-77f5-11e8-92bb-496bcd14ca52.jpg",api:"https://coinfalcon.com",www:"https://coinfalcon.com",doc:"https://docs.coinfalcon.com",fees:"https://coinfalcon.com/fees",referral:"https://coinfalcon.com/?ref=CFJSVGTUPASB"},api:{public:{get:["markets","markets/{market}/orders","markets/{market}/trades"]},private:{get:["user/accounts","user/orders","user/orders/{id}","user/trades"],post:["user/orders"],delete:["user/orders/{id}"]}},fees:{trading:{tierBased:!0,maker:0,taker:.002}},precision:{amount:8,price:8}})}async fetchMarkets(e={}){let t=(await this.publicGetMarkets()).data,i=[];for(let e=0;e<t.length;e++){let s=t[e],[r,a]=s.name.split("-"),o=this.commonCurrencyCode(r),n=this.commonCurrencyCode(a),d=o+"/"+n,c={amount:this.safeInteger(s,"size_precision"),price:this.safeInteger(s,"price_precision")};i.push({id:s.name,symbol:d,base:o,quote:n,baseId:r,quoteId:a,active:!0,precision:c,limits:{amount:{min:Math.pow(10,-c.amount),max:void 0},price:{min:Math.pow(10,-c.price),max:void 0},cost:{min:void 0,max:void 0}},info:s})}return i}parseTicker(e,t){if(void 0===t){let i=this.safeString(e,"name");t=this.safeValue(this.markets_by_id,i,t)}let i=void 0;void 0!==t&&(i=t.symbol);let s=this.milliseconds(),r=parseFloat(e.last_price);return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:parseFloat(e.change_in_24h),percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:parseFloat(e.volume),info:e}}async fetchTicker(e,t={}){return(await this.fetchTickers(t))[e]}async fetchTickers(e,t={}){await this.loadMarkets();let i=(await this.publicGetMarkets()).data,s={};for(let e=0;e<i.length;e++){let t=this.parseTicker(i[e]);s[t.symbol]=t}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetMarketsMarketOrders(this.extend({market:this.marketId(e),level:"3"},i));return this.parseOrderBook(s.data,void 0,"bids","asks","price","size")}parseTrade(e,t){let i=this.parse8601(e.created_at),s=parseFloat(e.price),r=parseFloat(e.size),a=t.symbol,o=parseFloat(this.costToPrecision(a,s*r)),n=this.safeString(e,"id"),d=this.safeString(e,"side"),c=this.safeString(e,"order_id"),h=void 0,l=this.safeFloat(e,"fee");if(void 0!==l){h={cost:l,currency:void 0}}return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,id:n,order:c,type:void 0,side:d,price:s,amount:r,cost:o,fee:h}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new n(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();let r=this.market(e),a={market:r.id};void 0!==t&&(a.start_time=this.iso8601(t)),void 0!==i&&(a.limit=i);let o=await this.privateGetUserTrades(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={market:r.id};void 0!==t&&(a.since=this.iso8601(t));let o=await this.publicGetMarketsMarketTrades(this.extend(a,s));return this.parseTrades(o.data,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetUserAccounts(e),i={info:t},s=t.data;for(let e=0;e<s.length;e++){let t=s[e],r=this.safeString(t,"currency_code").toUpperCase(),a=this.commonCurrencyCode(r);r in this.currencies_by_id&&(a=this.currencies_by_id[r].code);let o={free:parseFloat(t.available_balance),used:parseFloat(t.hold_balance),total:parseFloat(t.balance)};i[a]=o}return this.parseBalance(i)}parseOrder(e,t){if(void 0===t){let i=this.safeString(e,"market");i in this.markets_by_id&&(t=this.markets_by_id[i])}let i=void 0;void 0!==t&&(i=t.symbol);let s=this.parse8601(e.created_at),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"size"),o=this.safeFloat(e,"size_filled"),n=parseFloat(this.amountToPrecision(i,a-o)),d=parseFloat(this.priceToPrecision(i,a*r)),c=e.status;c="fulfilled"===c?"closed":"canceled"===c?"canceled":"open";let h=e.operation_type.split("_");return{id:this.safeString(e,"id"),datetime:this.iso8601(s),timestamp:s,status:c,symbol:i,type:h[0],side:e.order_type,price:r,cost:d,amount:a,filled:o,remaining:n,trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e);s=this.amountToPrecision(e,s);let n={market:o.id,size:s,order_type:i};"limit"===t&&(r=this.priceToPrecision(e,r),n.price=r.toString()),n.operation_type=t+"_order";let d=await this.privatePostUserOrders(this.extend(n,a)),c=this.parseOrder(d.data,o),h=c.id;return this.orders[h]=c,c}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateDeleteUserOrdersId(this.extend({id:e},i)),r=this.market(t);return this.parseOrder(s.data,r)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetUserOrdersId(this.extend({id:e},i));return this.parseOrder(s.data)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r={};void 0!==e&&(r.market=this.marketId(e)),void 0!==t&&(r.since_time=this.iso8601(this.milliseconds()));let a=await this.privateGetUserOrders(this.extend(r,s));return this.parseOrders(a.data)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):a=this.json(n);let e=this.seconds().toString(),t=[e,i,o].join("|");a&&(t+="|"+a);let s=this.hmac(this.encode(t),this.encode(this.secret));r={"CF-API-KEY":this.apiKey,"CF-API-TIMESTAMP":e,"CF-API-SIGNATURE":s,"Content-Type":"application/json"}}return{url:this.urls.api+o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,n,d,c){if(e<400)return;throw new(this.safeValue({401:a,429:o},e,r))(d)}}},function(e,t,i){"use strict";const s=i(1),{NotSupported:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinfloor",name:"coinfloor",rateLimit:1e3,countries:["UK"],has:{CORS:!1,fetchOpenOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28246081-623fc164-6a1c-11e7-913f-bac0d5576c90.jpg",api:"https://webapi.coinfloor.co.uk/bist",www:"https://www.coinfloor.co.uk",doc:["https://github.com/coinfloor/api","https://www.coinfloor.co.uk/api"]},requiredCredentials:{apiKey:!0,secret:!1,password:!0,uid:!0},api:{public:{get:["{id}/ticker/","{id}/order_book/","{id}/transactions/"]},private:{post:["{id}/balance/","{id}/user_transactions/","{id}/open_orders/","{id}/cancel_order/","{id}/buy/","{id}/sell/","{id}/buy_market/","{id}/sell_market/","{id}/estimate_sell_market/","{id}/estimate_buy_market/"]}},markets:{"BTC/GBP":{id:"XBT/GBP",symbol:"BTC/GBP",base:"BTC",quote:"GBP",baseId:"XBT",quoteId:"GBP"},"BTC/EUR":{id:"XBT/EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"XBT",quoteId:"EUR"},"BTC/USD":{id:"XBT/USD",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"XBT",quoteId:"USD"},"BCH/GBP":{id:"BCH/GBP",symbol:"BCH/GBP",base:"BCH",quote:"GBP",baseId:"BCH",quoteId:"GBP"},"ETH/GBP":{id:"ETH/GBP",symbol:"ETH/GBP",base:"ETH",quote:"GBP",baseId:"ETH",quoteId:"GBP"}}})}async fetchBalance(e={}){let t=void 0;if("symbol"in e&&(t=this.findMarket(e.symbol)),"id"in e&&(t=this.findMarket(e.id)),!t)throw new r(this.id+" fetchBalance requires a symbol param");let i=await this.privatePostIdBalance({id:t.id}),s={info:i},a=t.id.toLowerCase().split("/");return s[t.base]={free:parseFloat(i[a[0]+"_available"]),used:parseFloat(i[a[0]+"_reserved"]),total:parseFloat(i[a[0]+"_balance"])},s[t.quote]={free:parseFloat(i[a[1]+"_available"]),used:parseFloat(i[a[1]+"_reserved"]),total:parseFloat(i[a[1]+"_balance"])},this.parseBalance(s)}async fetchOrderBook(e,t,i={}){let s=await this.publicGetIdOrderBook(this.extend({id:this.marketId(e)},i));return this.parseOrderBook(s)}parseTicker(e,t){let i=this.milliseconds(),s=void 0;void 0!==t&&(s=t.symbol);let r=this.safeFloat(e,"vwap"),a=this.safeFloat(e,"volume"),o=void 0;void 0!==r&&(o=a*r);let n=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:r,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:e}}async fetchTicker(e,t={}){let i=this.market(e),s=await this.publicGetIdTicker(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=1e3*e.date;return{info:e,id:e.tid.toString(),order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetIdTransactions(this.extend({id:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o={id:this.marketId(e)},n="privatePostId"+this.capitalize(i);return"market"===t?(o.quantity=s,n+="Market"):(o.price=r,o.amount=s),this[n](this.extend(o,a))}async cancelOrder(e,t,i={}){return await this.privatePostIdCancelOrder({id:e})}parseOrder(e,t){let i=this.parse8601(e.datetime),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount"),a=s*r,o=void 0,n=this.safeString(e,"status");0===e.type?o="buy":1===e.type&&(o="sell");let d=void 0;void 0!==t&&(d=t.symbol);let c=e.id.toString();return{info:e,id:c,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:n,symbol:d,type:"limit",side:o,price:s,amount:r,filled:void 0,remaining:void 0,cost:a,fee:void 0}}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOpenOrders requires a symbol param");await this.loadMarkets();let a=this.market(e),o=await this.privatePostIdOpenOrders({id:a.id});for(let e=0;e<o.length;e++)o[e]=this.extend(o[e],{status:"open"});return this.parseOrders(o,a,t,i)}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce();a=this.urlencode(this.extend({nonce:e},n));let t=this.uid+"/"+this.apiKey+":"+this.password;r={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+this.decode(this.stringToBase64(this.encode(t)))}}return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coingi",name:"Coingi",rateLimit:1e3,countries:["PA","BG","CN","US"],has:{CORS:!1,fetchTickers:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28619707-5c9232a8-7212-11e7-86d6-98fe5d15cc6e.jpg",api:{www:"https://coingi.com",current:"https://api.coingi.com",user:"https://api.coingi.com"},www:"https://coingi.com",doc:"https://coingi.docs.apiary.io"},api:{www:{get:[""]},current:{get:["order-book/{pair}/{askCount}/{bidCount}/{depth}","transactions/{pair}/{maxCount}","24hour-rolling-aggregation"]},user:{post:["balance","add-order","cancel-order","orders","transactions","create-crypto-withdrawal"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,LTC:.01,DOGE:2,PPC:.02,VTC:.2,NMC:2,DASH:.002,USD:10,EUR:10},deposit:{BTC:0,LTC:0,DOGE:0,PPC:0,VTC:0,NMC:0,DASH:0,USD:5,EUR:1}}}})}async fetchMarkets(e={}){let t=(await this.wwwGet()).split('do=currencyPairSelector-selectCurrencyPair" class="active">')[1].split('<div class="currency-pair-label">'),i=[];for(let e=1;e<t.length;e++){let s=t[e].split("</div>")[0],r=s;s=(s=s.replace("/","-")).toLowerCase();let[a,o]=r.split("/"),n={amount:8,price:8};i.push({id:s,symbol:r,base:a,quote:o,info:s,active:!0,precision:n,limits:{amount:{min:Math.pow(10,-n.amount),max:Math.pow(10,n.amount)},price:{min:Math.pow(10,-n.price),max:void 0},cost:{min:0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=[],i=Object.keys(this.currencies);for(let e=0;e<i.length;e++){let s=i[e];t.push(s.toLowerCase())}let s=await this.userPostBalance({currencies:t.join(",")}),r={info:s};for(let e=0;e<s.length;e++){let t=s[e],i=t.currency.name;i=i.toUpperCase();let a={free:t.available,used:t.blocked+t.inOrders+t.withdrawing,total:0};a.total=this.sum(a.free,a.used),r[i]=a}return this.parseBalance(r)}async fetchOrderBook(e,t=512,i={}){await this.loadMarkets();let s=this.market(e),r=await this.currentGetOrderBookPairAskCountBidCountDepth(this.extend({pair:s.id,depth:32,askCount:t,bidCount:t},i));return this.parseOrderBook(r,void 0,"bids","asks","price","baseAmount")}parseTicker(e,t){let i=this.milliseconds(),s=void 0;return t&&(s=t.symbol),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:e.high,low:e.low,bid:e.highestBid,bidVolume:void 0,ask:e.lowestAsk,askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:e.baseVolume,quoteVolume:e.counterVolume,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.currentGet24hourRollingAggregation(t),s={};for(let e=0;e<i.length;e++){let t=i[e],r=t.currencyPair.base.toUpperCase()+"/"+t.currencyPair.counter.toUpperCase(),a=void 0;r in this.markets&&(a=this.markets[r]),s[r]=this.parseTicker(t,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.fetchTickers(void 0,t);if(e in i)return i[e];throw new r(this.id+" return did not contain "+e)}parseTrade(e,t){return t||(t=this.markets_by_id[e.currencyPair]),{id:e.id,info:e,timestamp:e.timestamp,datetime:this.iso8601(e.timestamp),symbol:t.symbol,type:void 0,side:void 0,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.currentGetTransactionsPairMaxCount(this.extend({pair:r.id,maxCount:128},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={currencyPair:this.marketId(e),volume:s,price:r,orderType:"buy"===i?0:1},n=await this.userPostAddOrder(this.extend(o,a));return{info:n,id:n.result}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.userPostCancelOrder({orderId:e})}sign(e,t="current",i="GET",s={},r,a){let o=this.urls.api[t];"www"!==t&&(o+="/"+t+"/"+this.implodeParams(e,s));let n=this.omit(s,this.extractParams(e));if("current"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else if("user"===t){this.checkRequiredCredentials();let e=this.nonce(),t=this.extend({token:this.apiKey,nonce:e},n),i=e.toString()+"$"+this.apiKey;t.signature=this.hmac(this.encode(i),this.encode(this.secret)),a=this.json(t),r={"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="current",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("string"!=typeof n&&"errors"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinmarketcap",name:"CoinMarketCap",rateLimit:1e4,version:"v1",countries:["US"],has:{CORS:!0,privateAPI:!1,createOrder:!1,createMarketOrder:!1,createLimitOrder:!1,cancelOrder:!1,editOrder:!1,fetchBalance:!1,fetchOrderBook:!1,fetchL2OrderBook:!1,fetchOHLCV:!1,fetchTrades:!1,fetchTickers:!0,fetchCurrencies:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28244244-9be6312a-69ed-11e7-99c1-7c1797275265.jpg",api:{public:"https://api.coinmarketcap.com",files:"https://files.coinmarketcap.com",charts:"https://graph.coinmarketcap.com"},www:"https://coinmarketcap.com",doc:"https://coinmarketcap.com/api"},requiredCredentials:{apiKey:!1,secret:!1},api:{files:{get:["generated/stats/global.json"]},graphs:{get:["currencies/{name}/"]},public:{get:["ticker/","ticker/{id}/","global/"]}},currencyCodes:["AUD","BRL","CAD","CHF","CNY","EUR","GBP","HKD","IDR","INR","JPY","KRW","MXN","RUB","USD","BTC","ETH","LTC"]})}async fetchOrderBook(e,t,i={}){throw new r("Fetching order books is not supported by the API of "+this.id)}currencyCode(e,t){const i={ACChain:"ACChain",AdCoin:"AdCoin",BatCoin:"BatCoin",Bitgem:"Bitgem",BlazeCoin:"BlazeCoin",BlockCAT:"BlockCAT",Catcoin:"Catcoin",CanYaCoin:"CanYaCoin",Comet:"Comet",CPChain:"CPChain",CrowdCoin:"CrowdCoin",Cubits:"Cubits","DAO.Casino":"DAO.Casino","E-Dinar Coin":"E-Dinar Coin",EDRcoin:"EDRcoin",ENTCash:"ENTCash",FairGame:"FairGame","Fabric Token":"Fabric Token","GET Protocol":"GET Protocol","Global Tour Coin":"Global Tour Coin",GuccioneCoin:"GuccioneCoin",HarmonyCoin:"HarmonyCoin","Harvest Masternode Coin":"Harvest Masternode Coin","Hydro Protocol":"Hydro Protocol",Huncoin:"Huncoin",iCoin:"iCoin","Infinity Economics":"Infinity Economics","KingN Coin":"KingN Coin",LiteBitcoin:"LiteBitcoin",Maggie:"Maggie",IOTA:"IOTA",NetCoin:"NetCoin",PCHAIN:"PCHAIN",Polcoin:"Polcoin",PutinCoin:"PutinCoin",Rcoin:"Rcoin"};return t in i?i[t]:e}async fetchMarkets(e={}){let t=await this.publicGetTicker({limit:0}),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=this.currencyCodes;for(let e=0;e<r.length;e++){let t=r[e],a=t.toLowerCase(),o=s.id,n=this.currencyCode(s.symbol,s.name),d=n+"/"+t,c=o+"/"+a;i.push({id:c,symbol:d,base:n,quote:t,baseId:o,quoteId:a,info:s})}}return i}async fetchGlobal(e="USD"){await this.loadMarkets();let t={};return e&&(t.convert=e),await this.publicGetGlobal(t)}parseTicker(e,t){let i=this.milliseconds();"last_updated"in e&&e.last_updated&&(i=1e3*parseInt(e.last_updated));let s=void 0;"percent_change_24h"in e&&e.percent_change_24h&&(s=this.safeFloat(e,"percent_change_24h"));let r=void 0,a=void 0,o=void 0;if(void 0!==t){let i="price_"+t.quoteId;i in e&&e[i]&&(r=this.safeFloat(e,i)),a=t.symbol;let s="24h_volume_"+t.quoteId;s in e&&e[s]&&(o=this.safeFloat(e,s))}return{symbol:a,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:s,average:void 0,baseVolume:void 0,quoteVolume:o,info:e}}async fetchTickers(e="USD",t={}){await this.loadMarkets();let i={limit:1e4};e&&(i.convert=e);let s=await this.publicGetTicker(this.extend(i,t)),r={};for(let t=0;t<s.length;t++){let i=s[t],a=e.toLowerCase(),o=i.id+"/"+a,n=o,d=void 0;o in this.markets_by_id&&(n=(d=this.markets_by_id[o]).symbol),r[n]=this.parseTicker(i,d)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=this.extend({convert:i.quote,id:i.baseId},t),r=(await this.publicGetTickerId(s))[0];return this.parseTicker(r,i)}async fetchCurrencies(e={}){let t=await this.publicGetTicker(this.extend({limit:0},e)),i={};for(let e=0;e<t.length;e++){let s=t[e],r=s.symbol,a=s.name,o=8,n=this.currencyCode(r,a);i[n]={id:r,code:n,info:s,name:a,active:!0,fee:void 0,precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}return i}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));return Object.keys(n).length&&(o+="?"+this.urlencode(n)),{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n&&n.error)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinmate",name:"CoinMate",countries:["GB","CZ","EU"],rateLimit:1e3,has:{CORS:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27811229-c1efb510-606c-11e7-9a36-84ba2ce412d8.jpg",api:"https://coinmate.io/api",www:"https://coinmate.io",doc:["https://coinmate.docs.apiary.io","https://coinmate.io/developers"],referral:"https://coinmate.io?referral=YTFkM1RsOWFObVpmY1ZjMGREQmpTRnBsWjJJNVp3PT0"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["orderBook","ticker","transactions"]},private:{post:["balances","bitcoinWithdrawal","bitcoinDepositAddresses","buyInstant","buyLimit","cancelOrder","cancelOrderWithInfo","createVoucher","openOrders","redeemVoucher","sellInstant","sellLimit","transactionHistory","unconfirmedBitcoinDeposits"]}},markets:{"BTC/EUR":{id:"BTC_EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",precision:{amount:4,price:2}},"BTC/CZK":{id:"BTC_CZK",symbol:"BTC/CZK",base:"BTC",quote:"CZK",precision:{amount:4,price:2}},"LTC/BTC":{id:"LTC_BTC",symbol:"LTC/BTC",base:"LTC",quote:"BTC",precision:{amount:4,price:5}}},fees:{trading:{maker:5e-4,taker:.0035}}})}async fetchBalance(e={}){let t=(await this.privatePostBalances()).data,i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=this.account();r in t&&(a.free=t[r].available,a.used=t[r].reserved,a.total=t[r].balance),i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){let s=(await this.publicGetOrderBook(this.extend({currencyPair:this.marketId(e),groupByPriceLimit:"False"},i))).data,r=1e3*s.timestamp;return this.parseOrderBook(s,r,"bids","asks","price","amount")}async fetchTicker(e,t={}){let i=(await this.publicGetTicker(this.extend({currencyPair:this.marketId(e)},t))).data,s=1e3*i.timestamp,r=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),vwap:void 0,askVolume:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(i,"amount"),quoteVolume:void 0,info:i}}parseTrade(e,t){return t||(t=this.markets_by_id[e.currencyPair]),{id:e.transactionId,info:e,timestamp:e.timestamp,datetime:this.iso8601(e.timestamp),symbol:t.symbol,type:void 0,side:void 0,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTransactions(this.extend({currencyPair:r.id,minutesIntoHistory:10},s));return this.parseTrades(a.data,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o="privatePost"+this.capitalize(i),n={currencyPair:this.marketId(e)};"market"===t?("buy"===i?n.total=s:n.amount=s,o+="Instant"):(n.amount=s,n.price=r,o+=this.capitalize(t));let d=await this[o](this.extend(n,a));return{info:d,id:d.data.toString()}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder({orderId:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=e+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));a=this.urlencode(this.extend({clientId:this.uid,nonce:e,publicKey:this.apiKey,signature:i.toUpperCase()},s)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n&&n.error)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,AuthenticationError:a,DDoSProtection:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinnest",name:"coinnest",countries:["KR"],rateLimit:1e3,has:{fetchOpenOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/38065728-7289ff5c-330d-11e8-9cc1-cf0cbcb606bc.jpg",api:{public:"https://api.coinnest.co.kr/api",private:"https://api.coinnest.co.kr/api",web:"https://www.coinnest.co.kr"},www:"https://www.coinnest.co.kr",doc:"https://www.coinnest.co.kr/doc/intro.html",fees:["https://coinnesthelp.zendesk.com/hc/ko/articles/115002110252-%EA%B1%B0%EB%9E%98-%EC%88%98%EC%88%98%EB%A3%8C%EB%8A%94-%EC%96%BC%EB%A7%88%EC%9D%B8%EA%B0%80%EC%9A%94-","https://coinnesthelp.zendesk.com/hc/ko/articles/115002110272-%EB%B9%84%ED%8A%B8%EC%BD%94%EC%9D%B8-%EC%88%98%EC%88%98%EB%A3%8C%EB%A5%BC-%EC%84%A0%ED%83%9D%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0%EA%B0%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80%EC%9A%94-"]},api:{web:{get:["coin/allcoin"]},public:{get:["pub/ticker","pub/depth","pub/trades"]},private:{post:["account/balance","trade/add","trade/cancel","trade/fetchtrust","trade/trust"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:"0.002"}}},precision:{amount:8,price:8}})}async fetchMarkets(e={}){let t="KRW".toLowerCase(),i=["btc","bch","btg","bcd","ubtc","btn","kst","ltc","act","eth","etc","ada","qtum","xlm","neo","gas","rpx","hsr","knc","tsl","tron","omg","wtc","mco","storm","gto","pxs","chat","ink","oc","hlc","ent","qbt","spc","put"],s=[];for(let e=0;e<i.length;e++){let r=i[e],a=r+"/"+t,o=this.commonCurrencyCode(r.toUpperCase()),n=o+"/KRW";s.push({id:a,symbol:n,base:o,quote:"KRW",baseId:r,quoteId:t,active:!0,info:void 0})}return s}parseTicker(e,t){let i=1e3*e.time,s=t.symbol,r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetPubTicker(this.extend({coin:i.baseId},t));return this.parseTicker(s,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r=await this.publicGetPubDepth(this.extend({coin:s.baseId},i));return this.parseOrderBook(r)}parseTrade(e,t){let i=1e3*parseInt(e.date),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount"),a=t.symbol,o=this.priceToPrecision(a,r*s);return{timestamp:i,datetime:this.iso8601(i),symbol:a,id:this.safeString(e,"tid"),order:void 0,type:"limit",side:e.type,price:s,amount:r,cost:parseFloat(o),fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetPubTrades(this.extend({coin:r.baseId},s));return this.parseTrades(a,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostAccountBalance(e),i={info:t},s=Object.keys(t);for(let e=0;e<s.length;e++){let r=s[e],a=r.split("_");if(2!==a.length)continue;let o=a[1];if("reserved"!==o&&"balance"!==o)continue;let n=a[0].toUpperCase();(n=this.commonCurrencyCode(n))in i||(i[n]={free:0,used:0,total:0}),o="reserved"===o?"used":"free",i[n][o]=parseFloat(t[r]),("used"===o?"free":"used")in i[n]&&(i[n].total=this.sum(i[n].free,i[n].used))}return this.parseBalance(i)}parseOrder(e,t){let i=t.symbol,s=1e3*parseInt(e.time),r=parseInt(e.status);r=4===r?"closed":3===r?"canceled":"open";let a=this.safeFloat(e,"amount_total"),o=this.safeFloat(e,"amount_over"),n=this.safeValue(e,"deals");return n=n?this.safeFloat(n,"sum_amount"):a-o,{id:this.safeString(e,"id"),datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:r,symbol:i,type:"limit",side:e.type,price:this.safeFloat(e,"price"),cost:void 0,amount:a,filled:n,remaining:o,trades:void 0,fee:void 0,info:this.safeValue(e,"info",e)}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n=await this.privatePostTradeAdd(this.extend({coin:o.baseId,type:i,number:s,price:r},a)),d={id:n.id,time:this.seconds(),type:i,price:r,amount_total:s,amount_over:s,info:n},c=d.id;return this.orders[c]=this.parseOrder(d,o),d}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t);return await this.privatePostTradeCancel(this.extend({id:e,coin:s.baseId},i))}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t),r=await this.privatePostTradeFetchtrust(this.extend({id:e,coin:s.baseId},i));return this.parseOrder(r,s)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={coin:r.baseId};void 0!==t&&(a.since=parseInt(t/1e3)),void 0!==i&&(a.limit=i);let o=await this.privatePostTradeTrust(this.extend(a,s));return this.parseOrders(o,r)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({type:"1"},s))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+e,n=void 0;if("public"===t)(n=this.urlencode(s)).length&&(o+="?"+n);else{this.checkRequiredCredentials(),a=this.urlencode(this.extend(s,{key:this.apiKey,nonce:this.nonce()}));let e=this.hash(this.secret);a+="&signature="+this.hmac(this.encode(a),this.encode(e)),r={"Content-type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},n,d){let c=await this.fetch2(e,t,i,s,n,d),h=this.safeString(c,"status");if(!c||"nil"===c||h){throw new(this.safeValue({100:o,101:o,104:a,105:a,106:o},h,r))(this.safeString(c,"msg",this.json(c)))}return c}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:o,InvalidOrder:n,OrderNotFound:d}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinone",name:"CoinOne",countries:["KR"],rateLimit:667,version:"v2",has:{CORS:!1,createMarketOrder:!1,fetchTickers:!0,fetchOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/38003300-adc12fba-323f-11e8-8525-725f53c4a659.jpg",api:"https://api.coinone.co.kr",www:"https://coinone.co.kr",doc:"https://doc.coinone.co.kr"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["orderbook/","trades/","ticker/"]},private:{post:["account/btc_deposit_address/","account/balance/","account/daily_balance/","account/user_info/","account/virtual_account/","order/cancel_all/","order/cancel/","order/limit_buy/","order/limit_sell/","order/complete_orders/","order/limit_orders/","order/order_info/","transaction/auth_number/","transaction/history/","transaction/krw/history/","transaction/btc/","transaction/coin/"]}},markets:{"BCH/KRW":{id:"bch",symbol:"BCH/KRW",base:"BCH",quote:"KRW",baseId:"bch",quoteId:"krw"},"BTC/KRW":{id:"btc",symbol:"BTC/KRW",base:"BTC",quote:"KRW",baseId:"btc",quoteId:"krw"},"BTG/KRW":{id:"btg",symbol:"BTG/KRW",base:"BTG",quote:"KRW",baseId:"btg",quoteId:"krw"},"ETC/KRW":{id:"etc",symbol:"ETC/KRW",base:"ETC",quote:"KRW",baseId:"etc",quoteId:"krw"},"ETH/KRW":{id:"eth",symbol:"ETH/KRW",base:"ETH",quote:"KRW",baseId:"eth",quoteId:"krw"},"IOTA/KRW":{id:"iota",symbol:"IOTA/KRW",base:"IOTA",quote:"KRW",baseId:"iota",quoteId:"krw"},"LTC/KRW":{id:"ltc",symbol:"LTC/KRW",base:"LTC",quote:"KRW",baseId:"ltc",quoteId:"krw"},"OMG/KRW":{id:"omg",symbol:"OMG/KRW",base:"OMG",quote:"KRW",baseId:"omg",quoteId:"krw"},"QTUM/KRW":{id:"qtum",symbol:"QTUM/KRW",base:"QTUM",quote:"KRW",baseId:"qtum",quoteId:"krw"},"XRP/KRW":{id:"xrp",symbol:"XRP/KRW",base:"XRP",quote:"KRW",baseId:"xrp",quoteId:"krw"},"EOS/KRW":{id:"eos",symbol:"EOS/KRW",base:"EOS",quote:"KRW",baseId:"eos",quoteId:"krw"},"DATA/KRW":{id:"data",symbol:"DATA/KRW",base:"DATA",quote:"KRW",baseId:"data",quoteId:"krw"},"ZIL/KRW":{id:"zil",symbol:"ZIL/KRW",base:"ZIL",quote:"KRW",baseId:"zil",quoteId:"krw"},"KNC/KRW":{id:"knc",symbol:"KNC/KRW",base:"KNC",quote:"KRW",baseId:"knc",quoteId:"krw"},"ZRX/KRW":{id:"zrx",symbol:"ZRX/KRW",base:"ZRX",quote:"KRW",baseId:"zrx",quoteId:"krw"}},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:.001,tiers:{taker:[[0,.001],[1e8,9e-4],[1e9,8e-4],[5e9,7e-4],[1e10,6e-4],[2e10,5e-4],[3e10,4e-4],[4e10,3e-4],[5e10,2e-4]],maker:[[0,.001],[1e8,8e-4],[1e9,6e-4],[5e9,4e-4],[1e10,2e-4],[2e10,0],[3e10,0],[4e10,0],[5e10,0]]}}},exceptions:{405:o,104:d}})}async fetchBalance(e={}){let t=await this.privatePostAccountBalance(),i={info:t},s=this.omit(t,["errorCode","result","normalWallets"]),r=Object.keys(s);for(let e=0;e<r.length;e++){let t=r[e],a=s[t],o=t.toUpperCase();t in this.currencies_by_id&&(o=this.currencies_by_id[t].code);let n=parseFloat(a.avail),d=parseFloat(a.balance),c={free:n,used:d-n,total:d};i[o]=c}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){let s=this.market(e),r=await this.publicGetOrderbook(this.extend({currency:s.id,format:"json"},i));return this.parseOrderBook(r,void 0,"bid","ask","price","qty")}async fetchTickers(e,t={}){await this.loadMarkets();let i={},s=await this.publicGetTicker(this.extend({currency:"all",format:"json"},t)),r=Object.keys(s);for(let e=0;e<r.length;e++){let t=r[e],a=t,o=void 0;if(t in this.markets_by_id){a=(o=this.markets_by_id[t]).symbol;let e=s[t];i[a]=this.parseTicker(e,o)}}return i}async fetchTicker(e,t={}){let i=this.market(e),s=await this.publicGetTicker(this.extend({currency:i.id,format:"json"},t));return this.parseTicker(s,i)}parseTicker(e,t){let i=this.milliseconds(),s=this.safeFloat(e,"last"),r=this.safeFloat(e,"yesterday_last"),a=void 0;return void 0!==s&&void 0!==r&&(a=r-s),{symbol:void 0!==t?t.symbol:void 0,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"first"),close:s,last:s,previousClose:r,change:a,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}parseTrade(e,t){let i=1e3*parseInt(e.timestamp),s=void 0!==t?t.symbol:void 0,r=this.safeString(e,"is_ask"),a=void 0;return"1"===r?a="sell":"0"===r&&(a="buy"),{id:void 0,timestamp:i,datetime:this.iso8601(i),order:void 0,symbol:s,type:void 0,side:a,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"qty"),fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTrades(this.extend({currency:r.id,period:"hour",format:"json"},s));return this.parseTrades(a.completeOrders,r,t,i)}async createOrder(e,t,i,s,a,o={}){if("limit"!==t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();let n={price:a,currency:this.marketId(e),qty:s},d="privatePostOrder"+this.capitalize(t)+this.capitalize(i),c=await this[d](this.extend(n,o)),h=this.safeString(c,"orderId");void 0!==h&&(h=h.toUpperCase());let l=this.milliseconds(),u=a*s,p={info:c,id:h,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,symbol:e,type:t,side:i,price:a,cost:u,average:void 0,amount:s,filled:void 0,remaining:s,status:"open",fee:void 0};return this.orders[h]=p,p}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=void 0,r=void 0;if(void 0===t){if(!(e in this.orders))throw new a(this.id+" fetchOrder() requires a symbol argument for order ids missing in the .orders cache (the order was created with a different instance of this class or within a different run of this code).");r=this.market(this.orders[e].symbol)}else r=this.market(t);try{let t=await this.privatePostOrderOrderInfo(this.extend({order_id:e,currency:r.id},i));s=this.parseOrder(t),this.orders[e]=s}catch(t){if(!(t instanceof d))throw t;if(!(e in this.orders))throw t;this.orders[e].status="canceled",s=this.orders[e]}return s}parseOrderStatus(e){let t={live:"open",partially_filled:"open",filled:"closed"};return e in t?t[e]:e}parseOrder(e,t){let i=this.safeValue(e,"info"),s=this.safeString(i,"orderId");void 0!==s&&(s=s.toUpperCase());let r=1e3*parseInt(i.timestamp),a=this.parseOrderStatus(this.safeString(e,"status")),o=void 0,n=this.safeString(i,"type");n=n.indexOf("ask")>=0?"sell":"buy";let d=this.safeFloat(i,"price"),c=this.safeFloat(i,"qty"),h=this.safeFloat(i,"remainQty"),l=void 0;void 0!==c&&(void 0!==h&&(l=c-h),void 0!==d&&(o=d*c));let u=this.safeString(i,"currency"),p={currency:u,cost:this.safeFloat(i,"fee"),rate:this.safeFloat(i,"feeRate")},m=void 0;if(void 0===t){let e=u.toLowerCase();e in this.markets_by_id&&(t=this.markets_by_id[e])}return void 0!==t&&(m=t.symbol),{info:e,id:s,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:m,type:"limit",side:n,price:d,cost:o,amount:c,filled:l,remaining:h,status:a,fee:p}}async cancelOrder(e,t,i={}){let s=this.safeValue(this.orders,e),r=void 0,a=void 0,o=void 0;if(void 0===s){if(void 0===t)throw new n(this.id+" cancelOrder could not find the order id "+e+" in orders cache. The order was probably created with a different instance of this class earlier. The `symbol` argument is missing. To cancel the order, pass a symbol argument and {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument of cancelOrder.");if(void 0===(a=this.safeFloat(i,"price")))throw new n(this.id+" cancelOrder could not find the order id "+e+" in orders cache. The order was probably created with a different instance of this class earlier. The `price` parameter is missing. To cancel the order, pass a symbol argument and {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument of cancelOrder.");if(void 0===(r=this.safeFloat(i,"qty")))throw new n(this.id+" cancelOrder could not find the order id "+e+" in orders cache. The order was probably created with a different instance of this class earlier. The `qty` (amount) parameter is missing. To cancel the order, pass a symbol argument and {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument of cancelOrder.");if(void 0===(o=this.safeFloat(i,"is_ask")))throw new n(this.id+" cancelOrder could not find the order id "+e+" in orders cache. The order was probably created with a different instance of this class earlier. The `is_ask` (side) parameter is missing. To cancel the order, pass a symbol argument and {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument of cancelOrder.")}else a=s.price,r=s.amount,o="buy"===s.side?0:1,t=s.symbol;let d={order_id:e,price:a,qty:r,is_ask:o,currency:this.marketId(t)};return this.orders[e].status="canceled",await this.privatePostOrderCancel(this.extend(d,i))}sign(e,t="public",i="GET",s={},r,a){let o=this.implodeParams(e,s),n=this.omit(s,this.extractParams(e)),d=this.urls.api+"/";if("public"===t)d+=o,Object.keys(n).length&&(d+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),d+=this.version+"/"+o;let e=this.nonce().toString(),t=this.json(this.extend({access_token:this.apiKey,nonce:e},s)),i=this.stringToBase64(this.encode(t));a=this.decode(i);let n=this.secret.toUpperCase();r={"content-type":"application/json","X-COINONE-PAYLOAD":i,"X-COINONE-SIGNATURE":this.hmac(i,this.encode(n),"sha512")}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("{"===o[0]||"["===o[0]){if(!("result"in n))throw new r(this.id+" "+o);if("success"!==n.result){const e=this.safeString(n,"errorCode"),t=this.id+" "+this.json(n),i=this.exceptions;throw e in i?new i[e](t):new r(t)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,AuthenticationError:a,NotSupported:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coinspot",name:"CoinSpot",countries:["AU"],rateLimit:1e3,has:{CORS:!1,createMarketOrder:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/28208429-3cacdf9a-6896-11e7-854e-4c79a772a30f.jpg",api:{public:"https://www.coinspot.com.au/pubapi",private:"https://www.coinspot.com.au/api"},www:"https://www.coinspot.com.au",doc:"https://www.coinspot.com.au/api"},api:{public:{get:["latest"]},private:{post:["orders","orders/history","my/coin/deposit","my/coin/send","quote/buy","quote/sell","my/balances","my/orders","my/buy","my/sell","my/buy/cancel","my/sell/cancel"]}},markets:{"BTC/AUD":{id:"BTC",symbol:"BTC/AUD",base:"BTC",quote:"AUD"},"LTC/AUD":{id:"LTC",symbol:"LTC/AUD",base:"LTC",quote:"AUD"},"DOGE/AUD":{id:"DOGE",symbol:"DOGE/AUD",base:"DOGE",quote:"AUD"}}})}async fetchBalance(e={}){let t=await this.privatePostMyBalances(),i={info:t};if("balance"in t){let e=t.balance,s=Object.keys(e);for(let t=0;t<s.length;t++){let r=s[t],a=r.toUpperCase(),o={free:e[r],used:0,total:e[r]};"DRK"===a&&(a="DASH"),i[a]=o}}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){let s=this.market(e),r=await this.privatePostOrders(this.extend({cointype:s.id},i));return this.parseOrderBook(r,void 0,"buyorders","sellorders","rate","amount")}async fetchTicker(e,t={}){let i=await this.publicGetLatest(t),s=this.marketId(e);s=s.toLowerCase();let r=i.prices[s],a=this.milliseconds(),o=this.safeFloat(r,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:void 0,low:void 0,bid:this.safeFloat(r,"bid"),bidVolume:void 0,ask:this.safeFloat(r,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:r}}fetchTrades(e,t,i,s={}){return this.privatePostOrdersHistory(this.extend({cointype:this.marketId(e)},s))}createOrder(e,t,i,s,a,o={}){let n="privatePostMy"+this.capitalize(i);if("market"===t)throw new r(this.id+" allows limit orders only");let d={cointype:this.marketId(e),amount:s,rate:a};return this[n](this.extend(d,o))}async cancelOrder(e,t,i={}){throw new o(this.id+" cancelOrder () is not fully implemented yet")}sign(e,t="public",i="GET",s={},r,o){if(!this.apiKey)throw new a(this.id+" requires apiKey for all requests");let n=this.urls.api[t]+"/"+e;if("private"===t){this.checkRequiredCredentials();let e=this.nonce();o=this.json(this.extend({nonce:e},s)),r={"Content-Type":"application/json",key:this.apiKey,sign:this.hmac(this.encode(o),this.encode(this.secret),"sha512")}}return{url:n,method:i,body:o,headers:r}}}},function(e,t,i){"use strict";const s=i(14),{ExchangeError:r,ArgumentsRequired:a,BadRequest:o,ExchangeNotAvailable:n,AuthenticationError:d,InvalidOrder:c,InsufficientFunds:h,OrderNotFound:l,DDoSProtection:u}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"cointiger",name:"CoinTiger",countries:["CN"],hostname:"cointiger.pro",has:{fetchCurrencies:!1,fetchTickers:!0,fetchTradingLimits:!1,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrderTrades:!1,cancelOrders:!0},headers:{Language:"en_US"},urls:{logo:"https://user-images.githubusercontent.com/1294454/39797261-d58df196-5363-11e8-9880-2ec78ec5bd25.jpg",api:{public:"https://api.{hostname}/exchange/trading/api/market",private:"https://api.{hostname}/exchange/trading/api",exchange:"https://www.{hostname}/exchange",v2public:"https://api.{hostname}/exchange/trading/api/v2",v2:"https://api.{hostname}/exchange/trading/api/v2"},www:"https://www.cointiger.pro",referral:"https://www.cointiger.pro/exchange/register.html?refCode=FfvDtt",doc:"https://github.com/cointiger/api-docs-en/wiki"},api:{v2public:{get:["timestamp","currencys"]},v2:{get:["order/orders","order/match_results","order/make_detail","order/details"],post:["order","order/batch_cancel"]},public:{get:["history/kline","detail/merged","depth","trade","history/trade","detail"]},exchange:{get:["footer/tradingrule.html","api/public/market/detail"]},private:{get:["user/balance","order/new","order/history","order/trade"],post:["order"],delete:["order"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:8e-4,taker:.0015}},exceptions:{1:r,2:o,5:c,6:c,8:l,16:d,100001:r,100002:n,100003:r,100005:d,110030:u},commonCurrencies:{FGC:"FoundGameCoin",TCT:"The Tycoon Chain Token"}})}async fetchMarkets(e={}){const t=await this.v2publicGetCurrencys(),i=Object.keys(t.data),s=[];for(let e=0;e<i.length;e++){let r=i[e],a=t.data[r];for(let e=0;e<a.length;e++){let t=a[e],i=this.safeString(t,"baseCurrency"),r=this.safeString(t,"quoteCurrency"),o=i.toUpperCase(),n=r.toUpperCase();o=this.commonCurrencyCode(o),n=this.commonCurrencyCode(n);let d=i+r,c=d.toUpperCase(),h=o+"/"+n,l={amount:t.amountPrecision,price:t.pricePrecision},u={id:d,uppercaseId:c,symbol:h,base:o,quote:n,baseId:i,quoteId:r,info:t,active:!0,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:void 0},price:{min:Math.pow(10,-l.price),max:void 0},cost:{min:0,max:void 0}}};s.push(u)}}return this.options.marketsByUppercaseId=this.indexBy(s,"uppercaseId"),s}parseTicker(e,t){let i=void 0;t&&(i=t.symbol);let s=this.safeInteger(e,"id"),r=this.safeFloat(e,"last"),a=this.safeFloat(e,"percentChange");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high24hr"),low:this.safeFloat(e,"low24hr"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:a,average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),a=await this.publicGetDepth(this.extend({symbol:s.id,type:"step0"},i)),o=a.data.depth_data;if("tick"in o){if(!o.tick)throw new r(this.id+" fetchOrderBook() returned empty response: "+this.json(a));let e=o.tick,t=o.ts;return this.parseOrderBook(e,t,"buys")}throw new r(this.id+" fetchOrderBook() returned unrecognized response: "+this.json(a))}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=i.uppercaseId,a=await this.exchangeGetApiPublicMarketDetail(t);if(!(s in a))throw new r(this.id+" fetchTicker symbol "+e+" ("+s+") not found");return this.parseTicker(a[s],i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.exchangeGetApiPublicMarketDetail(t),s={},r=Object.keys(i);for(let e=0;e<r.length;e++){let t=r[e],a=void 0,o=t;t in this.options.marketsByUppercaseId&&(o=this.options.marketsByUppercaseId[t].symbol,a=this.options.marketsByUppercaseId[t]),s[o]=this.parseTicker(i[t],a)}return s}parseTrade(e,t){let i=this.safeString(e,"id"),s=this.safeString(e,"orderId"),r=this.safeString(e,"type"),a=void 0,o=void 0;if(void 0!==r){let e=r.split("-");o=e[0],a=e[1]}let n=void 0,d=void 0,c=void 0;void 0===(o=this.safeString(e,"side",o))?(d=this.safeFloat(e.price,"amount"),n=this.safeFloat(e.volume,"amount"),c=this.safeFloat(e.deal_price,"amount")):(o=o.toLowerCase(),d=this.safeFloat(e,"price"),n=this.safeFloat2(e,"amount","volume"));let h=void 0,l=this.safeFloat(e,"fee");if(void 0!==l){let e=void 0;void 0!==t&&("buy"===o?e=t.base:"sell"===o&&(e=t.quote)),h={cost:l,currency:e}}void 0!==n&&void 0!==d&&void 0===c&&(c=n*d);let u=this.safeInteger2(e,"created_at","ts");u=this.safeInteger2(e,"created","mtime",u);let p=void 0;return void 0!==t&&(p=t.symbol),{info:e,id:i,order:s,timestamp:u,datetime:this.iso8601(u),symbol:p,type:a,side:o,price:d,amount:n,cost:c,fee:h}}async fetchTrades(e,t,i=1e3,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:r.id};void 0!==i&&(a.size=i);let o=await this.publicGetHistoryTrade(this.extend(a,s));return this.parseTrades(o.data.trade_data,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();let r=this.market(e);void 0===i&&(i=100);let o=await this.privateGetOrderTrade(this.extend({symbol:r.id,offset:1,limit:i},s));return this.parseTrades(o.data.list,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e.id,e.open,e.high,e.low,e.close,e.vol]}async fetchOHLCV(e,t="1m",i,s=1e3,r={}){await this.loadMarkets();let a=this.market(e),o={symbol:a.id,period:this.timeframes[t]};void 0!==s&&(o.size=s);let n=await this.publicGetHistoryKline(this.extend(o,r));return this.parseOHLCVs(n.data.kline_data,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetUserBalance(e),i=t.data,s={info:t};for(let e=0;e<i.length;e++){let t=i[e],r=t.coin,a=r.toUpperCase();a=this.commonCurrencyCode(a),r in this.currencies_by_id&&(a=this.currencies_by_id[r].code);let o=this.account();o.used=parseFloat(t.lock),o.free=parseFloat(t.normal),o.total=this.sum(o.used,o.free),s[a]=o}return this.parseBalance(s)}async fetchOrderTrades(e,t,i,s,r={}){if(void 0===t)throw new a(this.id+" fetchOrderTrades requires a symbol argument");await this.loadMarkets();let o=this.market(t),n={symbol:o.id,order_id:e},d=await this.v2GetOrderMakeDetail(this.extend(n,r));return this.parseTrades(d.data,o,i,s)}async fetchOrdersByStatusV1(e,t,i,s,r={}){if(void 0===t)throw new a(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();let o=this.market(t);void 0===s&&(s=100);let n="open"===e?"privateGetOrderNew":"privateGetOrderHistory",d=(await this[n](this.extend({symbol:o.id,offset:1,limit:s},r))).data.list,c=[];for(let t=0;t<d.length;t++){let i=this.extend(d[t],{status:e});c.push(this.parseOrder(i,o))}return c}async fetchOpenOrdersV1(e,t,i,s={}){return await this.fetchOrdersByStatusV1("open",e,t,i,s)}async fetchOrdersV1(e,t,i,s={}){return await this.fetchOrdersByStatusV1(void 0,e,t,i,s)}async fetchOrdersByStatesV2(e,t,i,s,r={}){if(void 0===t)throw new a(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();let o=this.market(t);void 0===s&&(s=50);let n=await this.v2GetOrderOrders(this.extend({symbol:o.id,states:e,direct:"next",size:s},r));return this.parseOrders(n.data,o,i,s)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByStatesV2("new,part_filled,filled,canceled,expired",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByStatesV2("new,part_filled",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByStatesV2("filled,canceled",e,t,i,s)}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();let s=this.market(t),r={symbol:s.id,order_id:e.toString()},o=await this.v2GetOrderDetails(this.extend(r,i));return this.parseOrder(o.data,s)}parseOrderStatus(e){let t={0:"open",1:"open",2:"closed",3:"open",4:"canceled",6:"error"};return e in t?t[e]:e}parseOrder(e,t){let i=this.safeString(e,"id"),s=this.safeString(e,"side"),r=void 0,a=this.safeString(e,"type"),o=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeInteger2(e,"created_at","ctime"),d=this.safeInteger2(e,"mtime","finished-at"),c=void 0;if(void 0===t){let i=this.safeString(e,"symbol");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(c=t.symbol);let h=void 0,l=void 0,u=void 0,p=void 0,m=void 0,f=void 0,y=void 0;if(void 0!==s)s=s.toLowerCase(),l=this.safeFloat(e.volume,"amount"),h="remain_volume"in e?this.safeFloat(e.remain_volume,"amount"):void 0,u="deal_volume"in e?this.safeFloat(e.deal_volume,"amount"):void 0,p="price"in e?this.safeFloat(e.price,"amount"):void 0,y="age_price"in e?this.safeFloat(e.age_price,"amount"):void 0;else if(void 0!==a){let i=a.split("-");s=i[0],r=i[1],m=this.safeFloat(e,"deal_money"),p=this.safeFloat(e,"price"),y=this.safeFloat(e,"avg_price"),l=this.safeFloat2(e,"amount","volume"),u=this.safeFloat(e,"deal_volume");let o=this.safeFloat(e,"fee");if(void 0!==o){let e=void 0;void 0!==t&&("buy"===s?e=t.base:"sell"===s&&(e=t.quote)),f={cost:o,currency:e}}}return void 0!==l&&(void 0!==h?void 0===u&&(u=Math.max(0,l-h)):void 0!==u&&(m=u*p,void 0===h&&(h=Math.max(0,l-u)))),void 0===o&&void 0!==h&&0===h&&(o="closed"),{info:e,id:i,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:d,symbol:c,type:r,side:s,price:p,average:y,cost:m,amount:l,filled:u,remaining:h,status:o,fee:f,trades:void 0}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),this.checkRequiredCredentials();let o="limit"===t?1:2,n={symbol:this.market(e).id,side:i.toUpperCase(),type:o,volume:this.amountToPrecision(e,s)};if("market"===t&&"buy"===i){if(void 0===r)throw new c(this.id+" createOrder requires price argument for market buy orders to calculate total cost according to exchange rules");n.volume=this.amountToPrecision(e,parseFloat(s)*parseFloat(r))}n.price="limit"===t?this.priceToPrecision(e,r):void 0===r?this.priceToPrecision(e,0):this.priceToPrecision(e,r);let d=await this.v2PostOrder(this.extend(n,a));const h=this.milliseconds();return{info:d,id:this.safeString(d.data,"order_id"),timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,status:void 0,symbol:e,type:t,side:i,price:r,amount:s,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0}}async cancelOrder(e,t,i={}){if(await this.loadMarkets(),void 0===t)throw new a(this.id+" cancelOrder requires a symbol argument");let s=this.market(t);return{id:e,symbol:t,info:await this.privateDeleteOrder(this.extend({symbol:s.id,order_id:e},i))}}async cancelOrders(e,t,i={}){if(await this.loadMarkets(),void 0===t)throw new a(this.id+" cancelOrders requires a symbol argument");let s={};s[this.market(t).id]=e;let r={orderIdList:this.json(s)};return{info:await this.v2PostOrderBatchCancel(this.extend(r,i))}}sign(e,t="public",i="GET",s={},r,a){this.checkRequiredCredentials();let o=this.implodeParams(this.urls.api[t],{hostname:this.hostname});if(o+="/"+this.implodeParams(e,s),"private"===t||"v2"===t){let e=this.milliseconds().toString(),t=this.keysort(this.extend({time:e},s)),n=Object.keys(t),d="";for(let e=0;e<n.length;e++)d+=n[e]+t[n[e]].toString();d+=this.secret;let c=this.hmac(this.encode(d),this.encode(this.secret),"sha512"),h="POST"===i?{}:t;o+="?"+this.urlencode(this.keysort(this.extend({api_key:this.apiKey,time:e},h))),o+="&sign="+c,"POST"===i&&(a=this.urlencode(t),r={"Content-Type":"application/x-www-form-urlencoded"})}else"public"===t||"v2public"===t?o+="?"+this.urlencode(this.extend({api_key:this.apiKey},s)):Object.keys(s).length&&(o+="?"+this.urlencode(s));return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,u){if("string"==typeof n&&!(n.length<2)&&("{"===n[0]||"["===n[0])&&"code"in u){let e=this.safeString(u,"code");if(void 0!==e){const t=this.safeString(u,"msg"),i=this.id+" "+this.json(u);if("0"!==e){const s=this.exceptions;if(e in s){if("1"===e){if(t.indexOf("Balance insufficient")>=0)throw new h(i)}else if("2"===e){if("offsetNot Null"===t)throw new r(i);if("api_keyNot EXIST"===t)throw new d(i);if("price precision exceed the limit"===t)throw new c(i);if("Parameter error"===t)throw new o(i)}throw new s[e](i)}throw new r(this.id+' unknown "error" value: '+this.json(u))}if(i.indexOf(",")>=0)throw i.indexOf("Parameter error")>=0?new l(i):new c(i);if(i.indexOf(",")>=0)throw new l(i)}}}}},function(e,t,i){"use strict";const s=i(27);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coolcoin",name:"CoolCoin",countries:["HK"],urls:{logo:"https://user-images.githubusercontent.com/1294454/36770529-be7b1a04-1c5b-11e8-9600-d11f1996b539.jpg",api:{web:"https://www.coolcoin.com/coin",rest:"https://www.coolcoin.com/api/v1"},www:"https://www.coolcoin.com",doc:"https://www.coolcoin.com/help.api.html",fees:"https://www.coolcoin.com/spend.price.html"},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.001,BCH:.002,ETH:.01,ETC:.01,LTC:.001,TBC:"1%",HSR:"1%",NEO:"1%",SDC:"1%",EOS:"1%",BTM:"1%",XAS:"1%",ACT:"1%",SAK:"1%",GCS:"1%",HCC:"1%",QTUM:"1%",GEC:"1%",TRX:"1%",IFC:"1%",PAY:"1%",PGC:"1%",KTC:"1%",INT:"1%",LSK:"0.5%",SKT:"1%",SSS:"1%",BT1:"1%",BT2:"1%"}}},options:{quoteIds:["btc","usdt"]}})}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"coss",name:"COSS",countries:["SG","NL"],rateLimit:1e3,version:"v1",certified:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/50328158-22e53c00-0503-11e9-825c-c5cfd79bfa74.jpg",api:{trade:"https://trade.coss.io/c/api/v1",engine:"https://engine.coss.io/api/v1",public:"https://trade.coss.io/c/api/v1",web:"https://trade.coss.io/c",exchange:"https://exchange.coss.io/api"},www:"https://www.coss.io",doc:"https://api.coss.io/v1/spec",referral:"https://www.coss.io/c/reg?r=OWCMHQVW2Q"},has:{fetchTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchBalance:!0,fetchOrderBook:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchOHLCV:!0,createOrder:!0,cancelOrder:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w"},api:{exchange:{get:["getmarketsummaries"]},public:{get:["market-price","exchange-info"]},web:{get:["coins/getinfo/all","order/symbols","coins/get_base_list"]},engine:{get:["dp","ht","cs"]},trade:{get:["ping","time","account/balances","account/details"],post:["order/add","order/details","order/list/open","order/list/completed","order/list/all","order/trade-detail"],delete:["order/cancel"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.002,maker:.0014},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}}})}async fetchMarkets(e={}){const t=await this.publicGetExchangeInfo(e),i=[],s=this.safeValue(t,"symbols",[]),r=this.safeValue(t,"base_currencies",[]),a=this.indexBy(r,"currency_code"),o=this.safeValue(t,"coins",[]),n=this.indexBy(o,"currency_code");for(let e=0;e<s.length;e++){const t=s[e],r=t.symbol,[o,d]=r.split("_"),c=this.commonCurrencyCode(o),h=this.commonCurrencyCode(d),l=c+"/"+h,u={amount:this.safeInteger(t,"amount_limit_decimal"),price:this.safeInteger(t,"price_limit_decimal")},p=this.safeValue(t,"allow_trading",!1),m=this.safeValue(a,o,{}),f=this.safeFloat(m,"minimum_total_order"),y=this.safeValue(n,o,{}),b=Math.pow(10,-u.amount),w=this.safeFloat(y,"minimum_order_amount",b);i.push({symbol:l,id:r,baseId:o,quoteId:d,base:c,quote:h,active:p,precision:u,limits:{amount:{min:w,max:void 0},price:{min:void 0,max:void 0},cost:{min:f,max:void 0}},info:t})}return i}async fetchCurrencies(e={}){const t=await this.webGetCoinsGetinfoAll(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"currency_code"),a=this.commonCurrencyCode(r),o=this.safeString(s,"name"),n=this.safeValue(s,"allow_buy"),d=this.safeValue(s,"allow_sell"),c=this.safeValue(s,"allow_withdrawn"),h=this.safeValue(s,"allow_deposit"),l=n&&d&&c&&h,u=this.safeFloat(s,"withdrawn_fee"),p=this.safeString(s,"token_type"),m=this.safeString(s,"decimal_format");let f=8;if(void 0!==m){const e=m.split(".");e.length>1&&e[1].length>1&&(f=e[1].length)}i[a]={id:r,code:a,info:s,name:o,active:l,fee:u,precision:f,type:p,limits:{amount:{min:this.safeFloat(s,"minimum_order_amount"),max:void 0},withdraw:{min:this.safeFloat(s,"minimum_withdrawn_amount"),max:void 0}}}}return i}async fetchBalance(e={}){await this.loadMarkets();const t=await this.tradeGetAccountBalances(e),i={};for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"currency_code"),a=this.commonCurrencyCode(r),o=this.safeFloat(s,"total"),n=this.safeFloat(s,"in_order"),d=this.safeFloat(s,"available");i[a]={total:o,used:n,free:d}}return this.parseBalance(i)}parseOHLCV(e,t,i="1m",s,r){return[parseInt(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5])]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e);const o={symbol:a.id,tt:this.timeframes[t]};let n=await this.engineGetCs(this.extend(o,r));return this.parseOHLCVs(n.series,a,t,i,s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)},r=await this.engineGetDp(this.extend(s,i)),a=this.safeInteger(r,"time");return this.parseOrderBook(r,a)}parseTicker(e,t){let i=this.parse8601(this.safeString(e,"TimeStamp")),s=void 0,r=this.safeString(e,"MarketName");if(void 0!==r&&(r=r.replace("-","_")),void 0===(t=this.safeValue(this.markets_by_id,r,t))&&void 0!==r){const[e,t]=r.split("_");s=this.commonCurrencyCode(e)+"/"+this.commonCurrencyCode(t)}void 0!==t&&(s=t.symbol);let a=this.safeFloat(e,"PrevDay"),o=this.safeFloat(e,"Last"),n=void 0,d=void 0;return void 0!==o&&void 0!==a&&(n=o-a,a>0&&(d=n/a*100)),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"High"),low:this.safeFloat(e,"Low"),bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:a,close:o,last:o,previousClose:void 0,change:n,percentage:d,average:void 0,baseVolume:this.safeFloat(e,"Volume"),quoteVolume:this.safeFloat(e,"BaseVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.exchangeGetGetmarketsummaries(t),s=this.safeValue(i,"result",[]),r={};for(let e=0;e<s.length;e++){const t=this.parseTicker(s[e]);r[t.symbol]=t}return r}async fetchTicker(e,t={}){return(await this.fetchTickers([e],t))[e]}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.engineGetHt(this.extend(a,s));return this.parseTrades(o.history,r,t,i)}parseTradeFee(e){if(void 0===e)return e;const t=e.split(" "),i=t.length,s=t[0];let r=void 0;return i>1&&(r=this.commonCurrencyCode(t[1])),{cost:s,currency:r}}parseTrade(e,t){const i=this.safeString(e,"id"),s=this.safeInteger(e,"time"),r=this.safeString(e,"order_id");let a=this.safeString(e,"order_side");void 0!==a&&(a=a.toLowerCase());let o=void 0;const n=this.safeString(e,"symbol");if(void 0!==n){if(void 0===(t=this.safeValue(this.markets_by_id,n,t))){const[e,t]=n.split("_");o=this.commonCurrencyCode(e)+"/"+this.commonCurrencyCode(t)}}else void 0!==t&&(o=t.symbol);let d=void 0;const c=this.safeFloat(e,"price"),h=this.safeFloat2(e,"qty","quantity");void 0!==h&&void 0!==c&&(d=c*h);const l={info:e,timestamp:s,datetime:this.iso8601(s),symbol:o,id:i,order:r,type:void 0,takerOrMaker:void 0,side:a,price:c,cost:d,amount:h},u=this.parseTradeFee(this.safeString(e,"fee"));if(void 0!==u){const t=this.parseTradeFee(this.safeString(e,"additional_fee"));void 0===t?l.fee=u:l.fees=[u,t]}return l}async fetchOrdersByType(e,t,i,s,a={}){if(void 0===t)throw new r(this.id+" fetchOrders requires a symbol argument");await this.loadMarkets();const o=this.market(t),n={symbol:o.id};void 0!==s&&(n.limit=s);const d="tradePostOrderList"+e,c=await this[d](this.extend(n,a));let h=void 0;return h=Array.isArray(c)?c:this.safeValue(c,"list",[]),this.parseOrders(h,o,i,s)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByType("All",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByType("Completed",e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByType("Open",e,t,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.tradePostOrderDetails(this.extend({order_id:e},i));return this.parseOrder(s)}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();let a=void 0;void 0!==t&&(a=this.market(t));const o={order_id:e};let n=await this.tradePostOrderTradeDetail(this.extend(o,r));return this.parseTrades(n,a,i,s)}parseOrderStatus(e){if(void 0===e)return e;return this.safeString({OPEN:"open",CANCELLED:"canceled",FILLED:"closed",PARTIAL_FILL:"open",CANCELLING:"open"},e.toUpperCase(),e)}parseOrder(e,t){const i=this.safeString(e,"order_id");let s=void 0,r=this.safeString(e,"order_symbol");if(void 0===r)void 0!==t&&(s=t.symbol);else if(r=(r=r.toUpperCase()).replace("-","_"),void 0===(t=this.safeValue(this.markets_by_id,r,t))){const[e,t]=r.split("_");s=this.commonCurrencyCode(e)+"/"+this.commonCurrencyCode(t)}else s=t.symbol;const a=this.safeInteger(e,"createTime"),o=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeFloat(e,"order_price"),d=this.safeFloat(e,"executed"),c=this.safeString(e,"type"),h=this.safeFloat(e,"order_size");let l=void 0;void 0!==h&&void 0!==d&&(l=h-d);const u=this.safeFloat(e,"avg");let p=this.safeString(e,"order_side");void 0!==p&&(p=p.toLowerCase());const m=this.safeFloat(e,"total");return{info:e,id:i,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:s,type:c,side:p,price:n,amount:h,cost:m,average:u,filled:d,remaining:l,status:o,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n={order_symbol:o.id,order_price:parseFloat(this.priceToPrecision(e,r)),order_size:parseFloat(this.amountToPrecision(e,s)),order_side:i.toUpperCase(),type:t},d=await this.tradePostOrderAdd(this.extend(n,a));return this.parseOrder(d,o)}async cancelOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();const s={order_id:e,order_symbol:this.market(t).id},a=await this.tradeDeleteOrderCancel(this.extend(s,i));return this.parseOrder(a)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+e;if("trade"===t){this.checkRequiredCredentials();const e=this.nonce(),t=this.extend({timestamp:e},s);let n=void 0;"GET"===i?o+="?"+(n=this.urlencode(t)):a=n=this.json(t),r={Signature:this.hmac(this.encode(n),this.encode(this.secret)),Authorization:this.apiKey}}else Object.keys(s).length&&(o+="?"+this.urlencode(s));return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,BadRequest:a,InvalidNonce:o,RequestTimeout:n,ExchangeNotAvailable:d,InsufficientFunds:c,OrderNotFound:h,InvalidOrder:l,DDoSProtection:u,AuthenticationError:p}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"crex24",name:"CREX24",countries:["EE"],rateLimit:500,version:"v2",has:{cancelAllOrders:!0,CORS:!1,editOrder:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchMyTrades:!0,fetchOHLCV:!1,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchTickers:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/47813922-6f12cc00-dd5d-11e8-97c6-70f957712d47.jpg",api:"https://api.crex24.com",www:"https://crex24.com",referral:"https://crex24.com/?refid=slxsjsjtil8xexl9hksr",doc:"https://docs.crex24.com/trade-api/v2",fees:"https://crex24.com/fees"},api:{public:{get:["currencies","instruments","tickers","recentTrades","orderBook"]},trading:{get:["orderStatus","activeOrders","orderHistory","tradeHistory","tradeFee","moneyTransferStatus"],post:["placeOrder","modifyOrder","cancelOrdersById","cancelOrdersByInstrument","cancelAllOrders"]},account:{get:["balance","depositAddress","moneyTransfers","moneyTransferStatus","previewWithdrawal"],post:["withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:-.01},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{YOYO:"YOYOW",BCC:"BCH"},options:{fetchTickersMethod:"publicGetTicker24hr",defaultTimeInForce:"GTC",defaultLimitOrderType:"limit",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,parseOrderToPrecision:!1,newOrderRespType:"RESULT"},exceptions:{exact:{"Parameter 'filter' contains invalid value.":a,"Mandatory parameter 'instrument' is missing.":a,"The value of parameter 'till' must be greater than or equal to the value of parameter 'from'.":a,"Failed to verify request signature.":p,"Nonce error. Make sure that the value passed in the 'X-CREX24-API-NONCE' header is greater in each consecutive request than in the previous one for the corresponding API-Key provided in 'X-CREX24-API-KEY' header.":o,"Market orders are not supported by the instrument currently.":l},broad:{"API Key":p,"Insufficient funds":c}}})}nonce(){return this.milliseconds()}async fetchMarkets(e={}){let t=await this.publicGetInstruments(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.symbol,a=s.baseCurrency,o=s.quoteCurrency,n=this.commonCurrencyCode(a),d=this.commonCurrencyCode(o),c=n+"/"+d,h={amount:this.precisionFromString(this.truncate_to_string(s.tickSize,8)),price:this.precisionFromString(this.truncate_to_string(s.minPrice,8))},l="active"===s.state;i.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,info:s,active:l,precision:h,limits:{amount:{min:this.safeFloat(s,"minVolume"),max:void 0},price:{min:Math.pow(10,-h.price),max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchCurrencies(e={}){let t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){let s=t[e],r=s.symbol,a=this.commonCurrencyCode(r),o=this.safeInteger(s,"withdrawalPrecision"),n=this.safeValue(s,"BaseAddress"),d=s.depositsAllowed&&s.withdrawalsAllowed&&!s.isDelisted,c=s.isFiat?"fiat":"crypto";i[a]={id:r,code:a,address:n,info:s,type:c,name:this.safeString(s,"name"),active:d,fee:this.safeFloat(s,"flatWithdrawalFee"),precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(s,"minDeposit"),max:void 0},withdraw:{min:this.safeFloat(s,"minWithdrawal"),max:this.safeFloat(s,"maxWithdrawal")}}}}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.accountGetBalance(this.extend({},e)),i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=this.safeString(s,"currency"),a=r;a=r in this.currencies_by_id?this.currencies_by_id[r].code:this.commonCurrencyCode(a);let o=this.safeFloat(s,"available"),n=this.safeFloat(s,"reserved"),d=this.sum(o,n);i[a]={free:o,used:n,total:d}}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={instrument:this.market(e).id};void 0!==t&&(s.limit=t);let r=await this.publicGetOrderBook(this.extend(s,i));return this.parseOrderBook(r,void 0,"buyLevels","sellLevels","price","volume")}parseTicker(e,t){let i=this.parse8601(e.timestamp),s=void 0,r=this.safeString(e,"instrument");if(void 0!==(t=this.safeValue(this.markets_by_id,r,t)))s=t.symbol;else if(void 0!==r){let[e,t]=r.split("-");s=this.commonCurrencyCode(e)+"/"+this.commonCurrencyCode(t)}let a=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"percentChange"),average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s={instrument:i.id},a=await this.publicGetTickers(this.extend(s,t));if(a.length<1)throw new r(this.id+" fetchTicker could not load quotes for symbol "+e);return this.parseTicker(a[0],i)}async fetchTickers(e,t={}){await this.loadMarkets();let i={};if(void 0!==e){let t=this.marketIds(e);i.instrument=t.join(",")}let s=await this.publicGetTickers(this.extend(i,t));return this.parseTickers(s,e)}parseTickers(e,t){let i=[];for(let t=0;t<e.length;t++)i.push(this.parseTicker(e[t]));return this.filterByArray(i,"symbol",t)}parseTrade(e,t){let i=this.parse8601(e.timestamp),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"volume"),a=void 0;void 0!==s&&void 0!==r&&(a=r*s);let o=this.safeString(e,"side"),n=this.safeString(e,"orderId"),d=void 0,c=this.safeString(e,"instrument");void 0!==(t=this.safeValue(this.markets_by_id,c,t))&&(d=t.symbol);let h=void 0,l=this.safeString(e,"feeCurrency"),u=this.safeValue(this.currencies_by_id,l),p=void 0;void 0!==u?p=u.code:void 0!==t&&(p=t.quote);let m=this.safeFloat(e,"fee");void 0!==m&&(h={cost:m,currency:p});return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:d,id:void 0,order:n,type:void 0,takerOrMaker:void 0,side:o,price:s,cost:a,amount:r,fee:h}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={instrument:r.id};void 0!==i&&(a.limit=i);let o=await this.publicGetRecentTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOrderStatus(e){let t={submitting:"open",unfilledActive:"open",partiallyFilledActive:"open",filled:"closed",partiallyFilledCancelled:"canceled",unfilledCancelled:"canceled"};return e in t?t[e]:e}parseOrder(e,t){let i=this.parseOrderStatus(this.safeString(e,"status")),s=this.findSymbol(this.safeString(e,"symbol"),t),r=this.parse8601(this.safeString(e,"timestamp")),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"volume"),n=this.safeFloat(e,"remainingVolume"),d=void 0,c=this.parse8601(this.safeString(e,"lastUpdate")),h=void 0;void 0!==n&&void 0!==o&&(d=o-n,this.options.parseOrderToPrecision&&(d=parseFloat(this.amountToPrecision(s,d))),d=Math.max(d,0),void 0!==a&&(h=a*d));let l=this.safeString(e,"id"),u=this.safeString(e,"type");"market"===u&&0===a&&void 0!==h&&void 0!==d&&h>0&&d>0&&(a=h/d);let p=this.safeString(e,"side"),m=void 0;return void 0!==h&&(d&&(m=h/d),this.options.parseOrderToPrecision&&(h=parseFloat(this.costToPrecision(s,h)))),{info:e,id:l,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:c,symbol:s,type:u,side:p,price:a,amount:o,cost:h,average:m,filled:d,remaining:n,status:i,fee:void 0,trades:void 0}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n={instrument:o.id,volume:this.amountToPrecision(e,s),type:t,side:i},d=!1,c=!1;if("limit"===t?d=!0:"stopLimit"===t&&(d=!0,c=!0),d){if(void 0===r)throw new l(this.id+" createOrder method requires a price argument for a "+t+" order");n.price=this.priceToPrecision(e,r)}if(c){let i=this.safeFloat(a,"stopPrice");if(void 0===i)throw new l(this.id+" createOrder method requires a stopPrice extra param for a "+t+" order");n.stopPrice=this.priceToPrecision(e,i)}let h=await this.tradingPostPlaceOrder(this.extend(n,a));return this.parseOrder(h,o)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s={id:e},r=await this.tradingGetOrderStatus(this.extend(s,i));if(r.length<1)throw new h(this.id+" fetchOrder could not fetch order id "+e);return this.parseOrder(r[0])}async fetchOrdersByIds(e,t,i,s={}){await this.loadMarkets();let r={id:e.join(",")},a=await this.tradingGetOrderStatus(this.extend(r,s));return this.parseOrders(a,void 0,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.instrument=r.id);let o=await this.tradingGetActiveOrders(this.extend(a,s));return this.parseOrders(o,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.instrument=r.id),void 0!==t&&(a.from=this.ymdhms(t,"T")),void 0!==i&&(a.limit=i);let o=await this.tradingGetActiveOrders(this.extend(a,s));return this.parseOrders(o,r,t,i)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=await this.tradingPostCancelOrdersById(this.extend({ids:[parseInt(e)]},i));return this.parseOrder(s)}async cancelAllOrders(e,t={}){return await this.tradingPostCancelAllOrders(t)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.instrument=r.id),void 0!==t&&(a.from=this.ymdhms(t,"T")),void 0!==i&&(a.limit=i);let o=await this.tradingGetTradeHistory(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let r=void 0;const a={};void 0!==e&&(r=this.currency(e),a.currency=r.id),void 0!==t&&(a.from=this.ymd(t,"T"));let o=await this.accountGetMoneyTransfers(this.extend(a,s));return this.parseTransactions(o,r,t,i)}async fetchDeposits(e,t,i,s={}){return this.fetchTransactions(e,t,i,this.extend({type:"deposit"},s))}async fetchWithdrawals(e,t,i,s={}){return this.fetchTransactions(e,t,i,this.extend({type:"withdrawal"},s))}parseTransactionStatus(e){return this.safeString({pending:"pending",success:"ok",failed:"failed"},e,e)}parseTransaction(e,t){let i=this.safeString(e,"id"),s=this.safeString(e,"address"),r=this.safeString(e,"paymentId"),a=this.safeValue(e,"txId"),o=void 0,n=this.safeString(e,"currency");n in this.currencies_by_id?t=this.currencies_by_id[n]:o=this.commonCurrencyCode(n),void 0!==t&&(o=t.code);let d=this.safeString(e,"type"),c=this.parse8601(e,"createdAt"),h=this.parse8601(e,"processedAt"),l=this.parseTransactionStatus(this.safeString(e,"status")),u=this.safeFloat(e,"amount");let p={cost:this.safeFloat(e,"fee"),currency:o};return{info:e,id:i,txid:a,timestamp:c,datetime:this.iso8601(c),address:s,tag:r,type:d,amount:u,currency:o,status:l,updated:h,fee:p}}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i={currency:this.currency(e).id},s=await this.accountGetDepositAddress(this.extend(i,t)),r=this.safeString(s,"address"),a=this.safeString(s,"paymentId");return{currency:e,address:this.checkAddress(r),tag:a,info:s}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a={currency:this.currency(e).id,address:i,amount:parseFloat(this.currencyToPrecision(e,t))};void 0!==s&&(a.paymentId=s);let o=await this.accountPostWithdraw(this.extend(a,r));return this.parseTransaction(o)}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/"+t+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));let d=this.urls.api+o;if("trading"===t||"account"===t){this.checkRequiredCredentials();let e=this.nonce().toString(),t=this.base64ToBinary(this.secret),n=o+e;r={"X-CREX24-API-KEY":this.apiKey,"X-CREX24-API-NONCE":e},"POST"===i&&(r["Content-Type"]="application/json",n+=a=this.json(s));let d=this.stringToBase64(this.hmac(this.encode(n),t,"sha512","binary"));r["X-CREX24-API-SIGN"]=d}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,o,c,h){if(!this.isJsonEncodedObject(c))return;if(e>=200&&e<300)return;const l=this.safeString(h,"errorDescription"),m=this.id+" "+this.json(h),f=this.exceptions.exact;if(l in f)throw new f[l](m);const y=this.exceptions.broad,b=this.findBroadlyMatchedKey(y,l);if(void 0!==b)throw new y[b](m);if(400===e)throw new a(m);if(401===e)throw new p(m);if(403===e)throw new p(m);if(429===e)throw new u(m);if(500===e)throw new r(m);if(503===e)throw new d(m);if(504===e)throw new n(m);throw new r(m)}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"crypton",name:"Crypton",countries:["EU"],rateLimit:500,version:"1",has:{fetchDepositAddress:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchTicker:!1,fetchTickers:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/41334251-905b5a78-6eed-11e8-91b9-f3aa435078a1.jpg",api:"https://api.cryptonbtc.com",www:"https://cryptonbtc.com",doc:"https://cryptonbtc.docs.apiary.io/",fees:"https://help.cryptonbtc.com/hc/en-us/articles/360004089872-Fees"},api:{public:{get:["currencies","markets","markets/{id}","markets/{id}/orderbook","markets/{id}/trades","tickers"]},private:{get:["balances","orders","orders/{id}","fills","deposit_address/{currency}","deposits"],post:["orders"],delete:["orders/{id}"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}}})}async fetchMarkets(e={}){let t=(await this.publicGetMarkets()).result,i=[],s=Object.keys(t);for(let e=0;e<s.length;e++){let r=s[e],a=t[r],o=a.base,n=a.quote,d=this.commonCurrencyCode(o),c=this.commonCurrencyCode(n),h=d+"/"+c,l={amount:8,price:this.precisionFromString(this.safeString(a,"priceStep"))},u=a.enabled;i.push({id:r,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:u,info:a,precision:l,limits:{amount:{min:this.safeFloat(a,"minSize"),max:void 0},price:{min:this.safeFloat(a,"priceStep"),max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetBalances(e),i={info:t},s=Object.keys(t);for(let e=0;e<s.length;e++){let r=s[e],a=this.commonCurrencyCode(r),o=this.account(),n=t[r],d=parseFloat(n.total),c=parseFloat(n.free),h=parseFloat(n.locked);o.total=d,o.free=c,o.used=h,i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetMarketsIdOrderbook(this.extend({id:this.marketId(e)},i));return this.parseOrderBook(s)}parseTicker(e,t){let i=void 0;t&&(i=t.symbol);let s=this.safeFloat(e,"last"),r=this.safeFloat(e,"change24h",0);return{symbol:i,timestamp:void 0,datetime:void 0,high:void 0,low:void 0,bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:s,last:s,previousClose:void 0,change:void 0,percentage:100*r,average:void 0,baseVolume:this.safeFloat(e,"volume24h"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=(await this.publicGetTickers(t)).result,s=Object.keys(i),r={};for(let e=0;e<s.length;e++){let t=s[e],a=i[t],o=void 0,n=t;r[n=t in this.markets_by_id?(o=this.markets_by_id[t]).symbol:this.parseSymbol(t)]=this.parseTicker(a,o)}return r}parseTrade(e,t){let i=this.parse8601(e.time),s=void 0;if("market"in e){let i=e.market;i in this.markets_by_id?t=this.markets_by_id[i]:s=this.parseSymbol(i)}void 0!==t&&(s=t.symbol);let r=void 0;return"fee"in e&&(r={cost:this.safeFloat(e,"fee"),currency:this.commonCurrencyCode(e.feeCurrency)}),{id:e.id.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:e.side,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"size"),order:this.safeString(e,"orderId"),fee:r}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={id:r.id};void 0!==i&&(a.limit=i);let o=await this.publicGetMarketsIdTrades(this.extend(a,s));return this.parseTrades(o.result,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={};void 0!==i&&(a.limit=i);let o=await this.privateGetFills(this.extend(a,s)),n=this.parseTrades(o.result,r,t,i);return this.filterBySymbol(n,e)}parseOrder(e,t){let i=e.id.toString(),s=e.status,r=e.side,a=e.type,o=void 0,n=e.market;o=n in this.markets_by_id?this.markets_by_id[n].symbol:this.parseSymbol(n);let d=this.parse8601(e.createdAt),c=void 0;"fee"in e&&(c={cost:parseFloat(e.fee),currency:this.commonCurrencyCode(e.feeCurrency)});let h=this.safeFloat(e,"price"),l=this.safeFloat(e,"size"),u=this.safeFloat(e,"filledSize"),p=l-u,m=u*h;return{info:e,id:i,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:void 0,symbol:o,type:a,side:r,price:h,cost:m,average:void 0,amount:l,filled:u,remaining:p,status:s,fee:c}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s={id:e},r=await this.privateGetOrdersId(this.extend(s,i));return this.parseOrder(r.result)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r={};void 0!==e&&(r.market=this.marketId(e));let a=await this.privateGetOrders(this.extend(r,s));return this.parseOrders(a.result,void 0,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={market:this.marketId(e),side:i,type:t,size:this.amountToPrecision(e,s),price:this.priceToPrecision(e,r)},n=await this.privatePostOrders(this.extend(o,a));return this.parseOrder(n.result)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s={id:e},r=await this.privateDeleteOrdersId(this.extend(s,i));return this.parseOrder(r.result)}parseSymbol(e){let[t,i]=e.split("-");return(t=this.commonCurrencyCode(t))+"/"+(i=this.commonCurrencyCode(i))}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privateGetDepositAddressCurrency(this.extend({currency:i.id},t)),r=s.result,a=this.safeString(r,"address"),o=this.safeString(r,"tag");return this.checkAddress(a),{currency:e,address:a,tag:o,info:s}}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));"GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n));let d=this.urls.api+o;if("private"===t){this.checkRequiredCredentials();let e=this.milliseconds().toString(),t="";"GET"!==i&&Object.keys(n).length&&(t=a=this.json(n));let s=e+i+o+t,d=this.hmac(this.encode(s),this.encode(this.secret),"sha256");r={"CRYPTON-APIKEY":this.apiKey,"CRYPTON-SIGNATURE":d,"CRYPTON-TIMESTAMP":e,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("{"===o[0]){if(!this.safeValue(n,"success"))throw new r(this.id+" "+o)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,InsufficientFunds:a,InvalidOrder:o,OrderNotFound:n,OrderNotCached:d,InvalidNonce:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"cryptopia",name:"Cryptopia",rateLimit:1500,countries:["NZ"],has:{CORS:!1,createMarketOrder:!1,fetchClosedOrders:"emulated",fetchCurrencies:!0,fetchDepositAddress:!0,fetchMyTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,fetchDeposits:!0,fetchOHLCV:!0,fetchOrder:"emulated",fetchOrderBooks:!0,fetchOrders:"emulated",fetchOpenOrders:!0,fetchTickers:!0,deposit:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/29484394-7b4ea6e2-84c6-11e7-83e5-1fccf4b2dc81.jpg",api:{public:"https://www.cryptopia.co.nz/api",private:"https://www.cryptopia.co.nz/api",web:"https://www.cryptopia.co.nz"},www:"https://www.cryptopia.co.nz",referral:"https://www.cryptopia.co.nz/Register?referrer=kroitor",doc:["https://support.cryptopia.co.nz/csm?id=kb_article&sys_id=a75703dcdbb9130084ed147a3a9619bc","https://support.cryptopia.co.nz/csm?id=kb_article&sys_id=40e9c310dbf9130084ed147a3a9619eb"]},timeframes:{"15m":15,"30m":30,"1h":60,"2h":120,"4h":240,"12h":720,"1d":1440,"1w":10080},api:{web:{get:["Exchange/GetTradePairChart"]},public:{get:["GetCurrencies","GetTradePairs","GetMarkets","GetMarkets/{id}","GetMarkets/{hours}","GetMarkets/{id}/{hours}","GetMarket/{id}","GetMarket/{id}/{hours}","GetMarketHistory/{id}","GetMarketHistory/{id}/{hours}","GetMarketOrders/{id}","GetMarketOrders/{id}/{count}","GetMarketOrderGroups/{ids}","GetMarketOrderGroups/{ids}/{count}"]},private:{post:["CancelTrade","GetBalance","GetDepositAddress","GetOpenOrders","GetTradeHistory","GetTransactions","SubmitTip","SubmitTrade","SubmitTransfer","SubmitWithdraw"]}},commonCurrencies:{ACC:"AdCoin",BAT:"BatCoin",BEAN:"BITB",BLZ:"BlazeCoin",BTG:"Bitgem",CAN:"CanYaCoin",CAT:"Catcoin",CC:"CCX",CMT:"Comet",EPC:"ExperienceCoin",FCN:"Facilecoin",FT:"Fabric Token",FUEL:"FC2",HAV:"Havecoin",HC:"Harvest Masternode Coin",HSR:"HC",KARM:"KARMA",LBTC:"LiteBitcoin",LDC:"LADACoin",MARKS:"Bitmark",NET:"NetCoin",PLC:"Polcoin",RED:"RedCoin",STC:"StopTrumpCoin",QBT:"Cubits",WRC:"WarCoin"},options:{fetchTickersErrors:!0}})}async fetchMarkets(e={}){let t=[],i=(await this.publicGetGetTradePairs()).Data;for(let e=0;e<i.length;e++){let s=i[e],r=s.Id,a=s.Label,o=s.Symbol,n=s.BaseSymbol,d=this.commonCurrencyCode(o),c=this.commonCurrencyCode(n),h=d+"/"+c,l=o+"_"+n,u={amount:8,price:8},p=s.MinimumTrade,m={min:s.MinimumPrice,max:s.MaximumPrice},f={amount:{min:p,max:s.MaximumTrade},price:m,cost:{min:s.MinimumBaseTrade,max:void 0}},y="OK"===s.Status;t.push({id:l,symbol:h,numericId:r,base:d,quote:c,baseId:o,quoteId:n,info:s,maker:s.TradeFee/100,taker:s.TradeFee/100,active:y,precision:u,limits:f,label:a})}return this.options.marketsByLabel=this.indexBy(t,"label"),t}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=(await this.publicGetGetMarketOrdersId(this.extend({id:this.marketId(e)},i))).Data;return this.parseOrderBook(s,void 0,"Buy","Sell","Price","Volume")}async fetchOHLCV(e,t="15m",i,s,r={}){let a=0;if(void 0!==i){const e=[86400,172800,604800,1209600,2592e3,7776e3,15552e3],t=e.length;let s=this.seconds(),r=parseInt(i/1e3);for(let i=1;i<t;i++)s-r>e[i]&&(a=i)}await this.loadMarkets();let o=this.market(e),n={tradePairId:o.numericId,dataRange:a,dataGroup:this.timeframes[t]},d=await this.webGetExchangeGetTradePairChart(this.extend(n,r)),c=d.Candle,h=d.Volume;for(let e=0;e<c.length;e++)c[e].push(h[e].basev);return this.parseOHLCVs(c,o,t,i,s)}joinMarketIds(e,t="-"){let i=e[0].toString();for(let s=1;s<e.length;s++)i+=t+e[s].toString();return i}async fetchOrderBooks(e,t={}){if(await this.loadMarkets(),void 0===e)throw new r(this.id+" fetchOrderBooks requires the symbols argument as of May 2018 (up to 5 symbols at max)");if(e.length>5)throw new r(this.id+" fetchOrderBooks accepts 5 symbols at max");let i=this.joinMarketIds(this.marketIds(e)),s=(await this.publicGetGetMarketOrderGroupsIds(this.extend({ids:i},t))).Data,a={};for(let e=0;e<s.length;e++){let t=s[e],i=this.safeString(t,"Market"),r=i;if(i in this.markets_by_id){r=this.markets_by_id[i].symbol}a[r]=this.parseOrderBook(t,void 0,"Buy","Sell","Price","Volume")}return a}parseTicker(e,t){let i=this.milliseconds(),s=void 0;void 0!==t&&(s=t.symbol);let r=this.safeFloat(e,"Open"),a=this.safeFloat(e,"LastPrice"),o=a-r,n=this.safeFloat(e,"Volume"),d=this.safeFloat(e,"BaseVolume"),c=void 0;return void 0!==d&&void 0!==n&&n>0&&(c=d/n),{symbol:s,info:e,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"High"),low:this.safeFloat(e,"Low"),bid:this.safeFloat(e,"BidPrice"),bidVolume:void 0,ask:this.safeFloat(e,"AskPrice"),askVolume:void 0,vwap:c,open:r,close:a,last:a,previousClose:void 0,change:o,percentage:this.safeFloat(e,"Change"),average:this.sum(a,r)/2,baseVolume:n,quoteVolume:d}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetGetMarketId(this.extend({id:i.id},t))).Data;return this.parseTicker(s,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i={},s=(await this.publicGetGetMarkets(t)).Data;for(let e=0;e<s.length;e++){let t=s[e],a=t.Label.replace("/","_");if(a in this.markets_by_id){let e=this.markets_by_id[a];i[e.symbol]=this.parseTicker(t,e)}else if(this.options.fetchTickersErrors)throw new r(this.id+" fetchTickers() returned unrecognized pair id "+a.toString())}return this.filterByArray(i,"symbol",e)}parseTrade(e,t){let i=void 0;"Timestamp"in e?i=1e3*e.Timestamp:"TimeStamp"in e&&(i=this.parse8601(e.TimeStamp));let s=this.safeFloat(e,"Price");s||(s=this.safeFloat(e,"Rate"));let r=this.safeFloat(e,"Total"),a=this.safeString(e,"TradeId");if(void 0===t){let i=this.safeString(e,"Market");(i=i.replace("/","_"))in this.markets_by_id&&(t=this.markets_by_id[i])}let o=void 0,n=void 0;return void 0!==t&&(o=t.symbol,"Fee"in e&&(n={currency:t.quote,cost:e.Fee})),{id:a,info:e,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:o,type:"limit",side:e.Type.toLowerCase(),price:s,cost:r,amount:e.Amount,fee:n}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=24;if(void 0!==t){let e=this.milliseconds()-t,i=36e5;a=parseInt(Math.ceil(e/i))}let o={id:r.id,hours:a},n=(await this.publicGetGetMarketHistoryIdHours(this.extend(o,s))).Data;return this.parseTrades(n,r,t,i)}parseTransaction(e,t){let i=this.parse8601(this.safeString(e,"Timestamp")),s=void 0,r=this.safeString(e,"Currency");void 0===(t=this.safeValue(this.currencies_by_id,r))&&(s=this.commonCurrencyCode(r)),void 0!==t&&(s=t.code);let a=this.safeString(e,"Status"),o=this.safeString(e,"TxId");void 0!==a&&(a=this.parseTransactionStatus(a));const n=this.safeString(e,"Id"),d=this.parseTransactionType(this.safeString(e,"Type")),c=this.safeFloat(e,"Amount"),h=this.safeString(e,"Address");let l=this.safeFloat(e,"Fee");return{info:e,id:n,currency:s,amount:c,address:h,tag:void 0,status:a,type:d,updated:void 0,txid:o,timestamp:i,datetime:this.iso8601(i),fee:{currency:s,cost:l}}}parseTransactionStatus(e){return this.safeString({Confirmed:"ok",Complete:"ok",Pending:"pending"},e,e)}parseTransactionType(e){return this.safeString({Withdraw:"withdrawal",Deposit:"deposit"},e,e)}async fetchTransactionsByType(e,t,i,s,r={}){let a={type:"deposit"===e?"Deposit":"Withdraw"},o=await this.privatePostGetTransactions(this.extend(a,r));return this.parseTransactions(o.Data,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsByType("withdrawal",e,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsByType("deposit",e,t,i,s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r={},a=void 0;void 0!==e&&(a=this.market(e),r.Market=a.id),void 0!==i&&(r.Count=i);let o=await this.privatePostGetTradeHistory(this.extend(r,s));return this.parseTrades(o.Data,a,t,i)}async fetchCurrencies(e={}){let t=(await this.publicGetGetCurrencies(e)).Data,i={};for(let e=0;e<t.length;e++){let s=t[e],r=s.Symbol,a=8,o=this.commonCurrencyCode(r),n="Active"===s.ListingStatus,d=s.Status.toLowerCase();"ok"!==d&&(n=!1),i[o]={id:r,code:o,info:s,name:s.Name,active:n,status:d,fee:s.WithdrawFee,precision:a,limits:{amount:{min:Math.pow(10,-a),max:Math.pow(10,a)},price:{min:Math.pow(10,-a),max:Math.pow(10,a)},cost:{min:s.MinBaseTrade,max:void 0},withdraw:{min:s.MinWithdraw,max:s.MaxWithdraw}}}}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostGetBalance(e),i=t.Data,s={info:t};for(let e=0;e<i.length;e++){let t=i[e],r=t.Symbol,a=this.commonCurrencyCode(r),o={free:t.Available,used:0,total:t.Total};o.used=o.total-o.free,s[a]=o}return this.parseBalance(s)}async createOrder(e,t,i,s,a,o={}){if("market"===t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();let n={Market:this.market(e).id,Type:this.capitalize(i),Rate:a,Amount:s},d=await this.privatePostSubmitTrade(this.extend(n,o));if(!d)throw new r(this.id+" createOrder returned unknown error: "+this.json(d));let c=void 0,h=0,l="open";"Data"in d&&"OrderId"in d.Data&&(d.Data.OrderId?c=d.Data.OrderId.toString():(h=s,l="closed"));let u={id:c,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,status:l,symbol:e,type:t,side:i,price:a,cost:a*s,amount:s,remaining:s-h,filled:h,fee:void 0};return c&&(this.orders[c]=u),this.extend({info:d},u)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{s=await this.privatePostCancelTrade(this.extend({Type:"Trade",OrderId:e},i)),e in this.orders&&(this.orders[e].status="canceled")}catch(e){if(this.last_json_response){let e=this.safeString(this.last_json_response,"Error");if(e&&e.indexOf("does not exist")>=0)throw new n(this.id+" cancelOrder() error: "+this.last_http_response)}throw e}return this.parseOrder(s)}parseOrder(e,t){let i=void 0;if(void 0!==t)i=t.symbol;else if("Market"in e){let s=e.Market;s in this.markets_by_id?i=(t=this.markets_by_id[s]).symbol:s in this.options.marketsByLabel&&(i=(t=this.options.marketsByLabel[s]).symbol)}let s=this.parse8601(this.safeString(e,"TimeStamp")),r=this.safeFloat(e,"Amount"),a=this.safeFloat(e,"Remaining"),o=void 0;void 0!==r&&void 0!==a&&(o=r-a);let n=this.safeValue(e,"OrderId");void 0!==n&&(n=n.toString());let d=this.safeString(e,"Type");return void 0!==d&&(d=d.toLowerCase()),{id:n,info:this.omit(e,"status"),timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,status:this.safeString(e,"status"),symbol:i,type:"limit",side:d,price:this.safeFloat(e,"Rate"),cost:this.safeFloat(e,"Total"),amount:r,filled:o,remaining:a,fee:void 0}}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.Market=r.id);let o=await this.privatePostGetOpenOrders(this.extend(a,s)),n=[];for(let e=0;e<o.Data.length;e++)n.push(this.extend(o.Data[e],{status:"open"}));let d=this.parseOrders(n,r);for(let e=0;e<d.length;e++)this.orders[d[e].id]=d[e];let c=this.indexBy(d,"id"),h=Object.keys(this.orders),l=[];for(let t=0;t<h.length;t++){let i=h[t];if(i in c)this.orders[i]=this.extend(this.orders[i],c[i]);else{let t=this.orders[i];"open"===t.status&&(void 0!==e&&t.symbol!==e||(this.orders[i]=this.extend(t,{status:"closed",cost:t.amount*t.price,filled:t.amount,remaining:0})))}let s=this.orders[i];void 0!==e&&s.symbol!==e||l.push(s)}return this.filterBySinceLimit(l,t,i)}async fetchOrder(e,t,i={}){e=e.toString();let s=await this.fetchOrders(t,void 0,void 0,i);for(let t=0;t<s.length;t++)if(s[t].id===e)return s[t];throw new d(this.id+" order "+e+" not found in cached .orders, fetchOrder requires .orders (de)serialization implemented for this method to work properly")}async fetchOpenOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s),a=[];for(let e=0;e<r.length;e++)"open"===r[e].status&&a.push(r[e]);return a}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s),a=[];for(let e=0;e<r.length;e++)"closed"===r[e].status&&a.push(r[e]);return a}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privatePostGetDepositAddress(this.extend({Currency:i.id},t)),r=this.safeString(s.Data,"BaseAddress"),a=this.safeString(s.Data,"Address");return void 0!==r&&r.length<1&&(r=void 0),void 0===r&&(r=a,a=void 0),this.checkAddress(r),{currency:e,address:r,tag:a,info:s}}async withdraw(e,t,i,s,r={}){await this.loadMarkets();let a=this.currency(e);this.checkAddress(i);let o={Currency:a.id,Amount:t,Address:i};s&&(o.PaymentId=s);let n=await this.privatePostSubmitWithdraw(this.extend(o,r));return{info:n,id:n.Data}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();let e=this.nonce().toString();a=this.json(n,{convertArraysToObjects:!0});let t=this.hash(this.encode(a),"md5","base64"),s=this.base64ToBinary(this.secret),d=this.encodeURIComponent(o).toLowerCase();t=this.binaryToString(t);let c=this.apiKey+i+d+e+t,h=this.hmac(this.encode(c),s,"sha256","base64");r={"Content-Type":"application/json",Authorization:"amx "+this.apiKey+":"+this.binaryToString(h)+":"+e}}else Object.keys(n).length&&(o+="?"+this.urlencode(n));return{url:o,method:i,body:a,headers:r}}nonce(){return this.milliseconds()}handleErrors(e,t,i,s,d,h,l){if(void 0!==l&&"Success"in l){const e=this.safeValue(l,"Success");if(void 0!==e&&!e){let e=this.safeString(l,"Error"),t=this.id+" "+h;if("string"==typeof e){if(e.indexOf("Invalid trade amount")>=0)throw new o(t);if(e.indexOf("No matching trades found")>=0)throw new n(t);if(e.indexOf("does not exist")>=0)throw new n(t);if(e.indexOf("Insufficient Funds")>=0)throw new a(t);if(e.indexOf("Nonce has already been used")>=0)throw new c(t)}throw new r(t)}}}}},function(e,t,i){"use strict";const s=i(1),{AuthenticationError:r,ExchangeError:a,PermissionDenied:o,InvalidOrder:n,OrderNotFound:d,DDoSProtection:c,NotSupported:h,ExchangeNotAvailable:l,InsufficientFunds:u}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"deribit",name:"Deribit",countries:["NL"],version:"v1",userAgent:void 0,rateLimit:2e3,has:{CORS:!0,editOrder:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchTickers:!1},timeframes:{},urls:{test:"https://test.deribit.com",logo:"https://user-images.githubusercontent.com/1294454/41933112-9e2dd65a-798b-11e8-8440-5bab2959fcb8.jpg",api:"https://www.deribit.com",www:"https://www.deribit.com",doc:["https://docs.deribit.com/","https://github.com/deribit"],fees:"https://www.deribit.com/pages/information/fees",referral:"https://www.deribit.com/reg-1189.4038"},api:{public:{get:["test","getinstruments","index","getcurrencies","getorderbook","getlasttrades","getsummary","stats","getannouncments"]},private:{get:["account","getopenorders","positions","orderhistory","orderstate","tradehistory","newannouncements"],post:["buy","sell","edit","cancel","cancelall"]}},exceptions:{9999:o,10000:r,10001:a,10002:n,10003:n,10004:d,10005:n,10006:n,10007:n,10008:n,10009:u,10010:d,10011:n,10012:n,10013:o,10014:o,10015:o,10016:o,10017:o,10019:o,10020:a,10022:n,10023:n,10024:n,10025:n,10026:n,10027:n,10028:c,10029:d,10030:a,10031:a,10032:n,10033:h,10034:n,10035:n,11035:n,11036:n,11037:n,11038:n,11039:n,11040:n,11041:n,11042:o,11044:d,11045:a,11046:a,11047:a,11048:a,11050:a,11051:l,11030:a,11031:a},options:{fetchTickerQuotes:!0}})}async fetchMarkets(e={}){let t=(await this.publicGetGetinstruments()).result,i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.instrumentName,a=s.baseCurrency,o=s.currency;a=this.commonCurrencyCode(a),o=this.commonCurrencyCode(o),i.push({id:r,symbol:r,base:a,quote:o,active:s.isActive,precision:{amount:s.minTradeSize,price:s.tickSize},limits:{amount:{min:s.minTradeSize},price:{min:s.tickSize}},type:s.kind,spot:!1,future:"future"===s.kind,option:"option"===s.kind,info:s})}return i}async fetchBalance(e={}){let t=await this.privateGetAccount(),i={BTC:{free:t.result.availableFunds,used:t.result.maintenanceMargin,total:t.result.equity}};return this.parseBalance(i)}async fetchDepositAddress(e,t={}){let i=await this.privateGetAccount();return{currency:"BTC",address:i.depositAddress,tag:void 0,info:i}}parseTicker(e,t){let i=this.safeInteger(e,"created"),s=void 0===i?void 0:this.iso8601(i),r=this.findSymbol(this.safeString(e,"instrumentName"),t),a=this.safeFloat(e,"last");return{symbol:r,timestamp:i,datetime:s,high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bidPrice"),bidVolume:void 0,ask:this.safeFloat(e,"askPrice"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"volume"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetGetsummary(this.extend({instrument:i.id},t));return this.parseTicker(s.result,i)}parseTrade(e,t){let i=this.safeString(e,"tradeId"),s=void 0;void 0!==t&&(s=t.symbol);let r=this.safeInteger(e,"timeStamp");return{info:e,id:i,timestamp:r,datetime:this.iso8601(r),symbol:s,order:void 0,type:void 0,side:e.direction,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"quantity")}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={instrument:r.id};a.limit=void 0!==i?i:1e4;let o=await this.publicGetGetlasttrades(this.extend(a,s));return this.parseTrades(o.result,r,t,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r=await this.publicGetGetorderbook({instrument:s.id}),a=parseInt(r.usOut/1e3),o=this.parseOrderBook(r.result,a,"bids","asks","price","quantity");return this.extend(o,{nonce:this.safeInteger(r,"tstamp")})}parseOrderStatus(e){const t={open:"open",cancelled:"canceled",filled:"closed"};return e in t?t[e]:e}parseOrder(e,t){let i=this.safeInteger(e,"created"),s=this.safeInteger(e,"lastUpdate"),r=this.safeInteger2(e,"tstamp","modified"),a=this.safeString(e,"orderId"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"avgPrice"),d=this.safeFloat(e,"quantity"),c=this.safeFloat(e,"filledQuantity");void 0===r&&void 0!==c&&c>0&&(r=s);let h=void 0,l=void 0;void 0!==c&&(void 0!==d&&(h=d-c),void 0!==o&&(l=o*c));let u=this.parseOrderStatus(this.safeString(e,"state")),p=this.safeString(e,"direction");void 0!==p&&(p=p.toLowerCase());let m=this.safeFloat(e,"commission");void 0!==m&&(m=Math.abs(m));let f={cost:m,currency:"BTC"},y=this.safeString(e,"type");return{info:e,id:a,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:r,symbol:e.instrument,type:y,side:p,price:o,amount:d,cost:l,average:n,filled:c,remaining:h,status:u,fee:f,trades:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetOrderstate({orderId:e});return this.parseOrder(s.result)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={instrument:this.marketId(e),quantity:s,type:t};void 0!==r&&(o.price=r);let n="privatePost"+this.capitalize(i),d=await this[n](this.extend(o,a)),c=this.safeValue(d.result,"order");return void 0===c?d:this.parseOrder(c)}async editOrder(e,t,i,s,r,a,o={}){await this.loadMarkets();let n={orderId:e};void 0!==r&&(n.quantity=r),void 0!==a&&(n.price=a);let d=await this.privatePostEdit(this.extend(n,o));return this.parseOrder(d.result.order)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostCancel(this.extend({orderId:e},i));return this.parseOrder(s.result.order)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={instrument:r.id},o=await this.privateGetGetopenorders(this.extend(a,s));return this.parseOrders(o.result,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={instrument:r.id},o=await this.privateGetOrderhistory(this.extend(a,s));return this.parseOrders(o.result,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={instrument:r.id};void 0!==i&&(a.count=i);let o=await this.privateGetTradehistory(this.extend(a,s));return this.parseTrades(o.result,r,t,i)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+t+"/"+e,n=this.urls.api+o;if("public"===t)Object.keys(s).length&&(n+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t="_="+e+"&_ackey="+this.apiKey+"&_acsec="+this.secret+"&_action="+o;"POST"===i&&(s=this.keysort(s),t+="&"+this.urlencode(s));let n=this.hash(this.encode(t),"sha256","base64");r={"x-deribit-sig":this.apiKey+"."+e+"."+this.decode(n)},"GET"!==i&&(r["Content-Type"]="application/x-www-form-urlencoded",a=this.urlencode(s))}return{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,o,n){if(!n)return;const d=this.safeString(n,"error");if(void 0!==d&&"0"!==d){const e=this.id+" "+o,t=this.exceptions;if(d in t)throw new t[d](e);throw new a(e)}}}},function(e,t,i){"use strict";const s=i(15),{ArgumentsRequired:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"dsx",name:"DSX",countries:["UK"],rateLimit:1500,version:"v2",has:{CORS:!1,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!1,fetchOrderBooks:!1,createDepositAddress:!0,fetchDepositAddress:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27990275-1413158a-645a-11e7-931c-94717f7510e3.jpg",api:{public:"https://dsx.uk/mapi",private:"https://dsx.uk/tapi",dwapi:"https://dsx.uk/dwapi"},www:"https://dsx.uk",doc:["https://api.dsx.uk","https://dsx.uk/api_docs/public","https://dsx.uk/api_docs/private",""]},api:{public:{get:["barsFromMoment/{id}/{period}/{start}","depth/{pair}","info","lastBars/{id}/{period}/{amount}","periodBars/{id}/{period}/{start}/{end}","ticker/{pair}","trades/{pair}"]},private:{post:["info/account","history/transactions","history/trades","history/orders","orders","order/cancel","order/cancel/all","order/status","order/new","volume","fees"]},dwapi:{post:["deposit/cryptoaddress","withdraw/crypto","withdraw/fiat","withdraw/submit","withdraw/cancel","transaction/status"]}},options:{fetchOrderMethod:"privatePostOrderStatus",fetchMyTradesMethod:"privatePostHistoryTrades",cancelOrderMethod:"privatePostOrderCancel",fetchTickersMaxLength:250}})}async fetchMarkets(e={}){let t=(await this.publicGetInfo()).pairs,i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){let r=i[e],a=t[r],o=this.safeString(a,"base_currency"),n=this.safeString(a,"quoted_currency"),d=this.commonCurrencyCode(o),c=this.commonCurrencyCode(n),h=d+"/"+c,l={amount:this.safeInteger(a,"decimal_places"),price:this.safeInteger(a,"decimal_places")},u={amount:{min:this.safeFloat(a,"min_amount"),max:this.safeFloat(a,"max_amount")},price:{min:this.safeFloat(a,"min_price"),max:this.safeFloat(a,"max_price")},cost:{min:this.safeFloat(a,"min_total")}},p=0===this.safeInteger(a,"hidden");s.push({id:r,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:p,taker:a.fee/100,precision:l,limits:u,info:a})}return s}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostInfoAccount()).return,i={info:t},s=t.funds,r=Object.keys(s);for(let e=0;e<r.length;e++){let t=r[e],a=this.commonCurrencyCode(t),o={free:s[t].available,used:0,total:s[t].total};o.used=o.total-o.free,i[a]=o}return this.parseBalance(i)}async createDepositAddress(e,t={}){return await this.fetchDepositAddress(e,this.extend({new:1},t))}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},s=await this.dwapiPostDepositCryptoaddress(this.extend(i,t)),r=this.safeValue(s,"return",{}),a=this.safeString(r,"address");return this.checkAddress(a),{currency:e,address:a,tag:void 0,info:s}}parseTicker(e,t){let i=1e3*e.updated,s=void 0,r=this.safeString(e,"pair");void 0!==(t=this.safeValue(this.markets_by_id,r,t))&&(s=t.symbol);let a=this.safeFloat(e,"avg");void 0!==a&&a>0&&(a=1/a);let o=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:a,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"vol_cur"),info:e}}signBodyWithSecret(e){return this.decode(this.hmac(this.encode(e),this.encode(this.secret),"sha512","base64"))}getVersionString(){return""}getPrivatePath(e,t){return"/"+this.version+"/"+this.implodeParams(e,t)}getOrderIdKey(){return"orderId"}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();let n=this.market(e);if("market"===t&&void 0===a)throw new r(this.id+" createOrder requires a price argument even for market orders, that is the worst price that you agree to fill your order for");let d={pair:n.id,type:i,volume:this.amountToPrecision(e,s),rate:this.priceToPrecision(e,a),orderType:t};a=parseFloat(a),s=parseFloat(s);let c=await this.privatePostOrderNew(this.extend(d,o)),h="open",l=0,u=s,p=this.safeValue(c,"return"),m=this.safeString2(p,"orderId","order_id");"0"===m&&(m=this.safeString(p,"initOrderId","init_order_id"),h="closed"),l=this.safeFloat(p,"received",0),u=this.safeFloat(p,"remains",s);let f=this.milliseconds();return{info:c,id:m,timestamp:f,datetime:this.iso8601(f),lastTradeTimestamp:void 0,status:h,symbol:e,type:t,side:i,price:a,cost:a*l,amount:s,remaining:u,filled:l,fee:void 0}}parseOrderStatus(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"canceling",7:"canceled"},e,e)}parseTrade(e,t){let i=this.safeInteger(e,"timestamp");void 0!==i&&(i*=1e3);let s=this.safeString(e,"type");"ask"===s?s="sell":"bid"===s&&(s="buy");let r=this.safeFloat2(e,"rate","price"),a=this.safeString2(e,"trade_id","tid"),o=this.safeString(e,"orderId");if("pair"in e){let i=this.safeString(e,"pair");t=this.safeValue(this.markets_by_id,i,t)}let n=void 0;void 0!==t&&(n=t.symbol);let d=this.safeFloat2(e,"amount","volume"),c=void 0,h=void 0,l=this.safeFloat(e,"commission");if(void 0!==l){let t=this.safeString(e,"commissionCurrency");t=t.toUpperCase();let i=this.safeValue(this.currencies_by_id,t),s=void 0;h={cost:l,currency:s=void 0!==i?i.code:this.commonCurrencyCode(t)}}let u=this.safeValue(e,"is_your_order");return void 0!==u&&(c="taker",u&&(c="maker"),void 0===h&&(h=this.calculateFee(n,"limit",s,d,r,c))),{id:a,order:o,timestamp:i,datetime:this.iso8601(i),symbol:n,type:"limit",side:s,takerOrMaker:c,price:r,amount:d,fee:h,info:e}}parseOrder(e,t){let i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeInteger(e,"timestampCreated");void 0!==r&&(r*=1e3);let a=this.safeString(e,"pair"),o=void 0;void 0!==(t=this.safeValue(this.markets_by_id,a,t))&&(o=t.symbol);let n=this.safeFloat(e,"remainingVolume"),d=this.safeFloat(e,"volume"),c=this.safeFloat(e,"rate"),h=void 0,l=void 0;void 0!==d&&void 0!==n&&(l=c*(h=d-n));let u=this.safeString(e,"orderType"),p=this.safeString(e,"type"),m=void 0,f=this.safeValue(e,"deals",[]),y=void 0,b=void 0;if(f.length>0){y=this.parseTrades(f);let e=void 0,t=void 0;for(let i=0;i<y.length;i++){let s=y[i];void 0===e&&(e=0),e+=s.fee.cost,t=s.fee.currency,b=s.timestamp}void 0!==e&&(m={cost:e,currency:t})}return{info:e,id:i,symbol:o,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:b,type:u,side:p,price:c,cost:l,amount:d,remaining:n,filled:h,status:s,fee:m,trades:y}}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={orderId:parseInt(e)},r=await this.privatePostOrderStatus(this.extend(s,i));return this.parseOrder(this.extend({id:e},r.return))}parseOrdersById(e,t,i,s){let r=Object.keys(e),a=[];for(let t=0;t<r.length;t++){let i=r[t],s=this.parseOrder(this.extend({id:i.toString()},e[i]));a.push(s)}return this.filterBySymbolSinceLimit(a,t,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.privatePostOrders(this.extend({},s));return this.parseOrdersById(this.safeValue(r,"return",{}),e,t,i)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();const r=await this.privatePostHistoryOrders(this.extend({},s));return this.parseOrdersById(this.safeValue(r,"return",{}),e,t,i)}parseTrades(e,t,i,s){let r=[];if(Array.isArray(e))for(let i=0;i<e.length;i++)r.push(this.parseTrade(e[i],t));else{const i=Object.keys(e);for(let s=0;s<i.length;s++){const a=i[s],o=this.parseTrade(e[a],t);r.push(this.extend(o,{id:a}))}}r=this.sortBy(r,"timestamp");const a=void 0!==t?t.symbol:void 0;return this.filterBySymbolSinceLimit(r,a,i,s)}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t],n=this.omit(s,this.extractParams(e));if("private"===t||"dwapi"===t){o+=this.getPrivatePath(e,s),this.checkRequiredCredentials();let t=this.nonce();a=this.urlencode(this.extend({nonce:t,method:e},n));let i=this.signBodyWithSecret(a);r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:i}}else"public"===t?(o+=this.getVersionString()+"/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n))):(o+="/"+this.implodeParams(e,s),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(a=this.json(n),r={"Content-Type":"application/json"}));return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(25);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ethfinex",name:"Ethfinex",countries:["VG"],version:"v1",rateLimit:1500,certified:!1,has:{CORS:!1,createDepositAddress:!0,deposit:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchFees:!0,fetchFundingFees:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchTickers:!0,fetchTradingFee:!0,fetchTradingFees:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/37555526-7018a77c-29f9-11e8-8835-8e415c038a18.jpg",api:"https://api.ethfinex.com",www:"https://www.ethfinex.com",doc:["https://bitfinex.readme.io/v1/docs","https://github.com/bitfinexcom/bitfinex-api-node","https://www.ethfinex.com/api_docs"]}})}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:r,ExchangeError:a,ExchangeNotAvailable:o,OrderNotFound:n,AuthenticationError:d,InsufficientFunds:c,InvalidOrder:h,InvalidNonce:l}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"exmo",name:"EXMO",countries:["ES","RU"],rateLimit:350,version:"v1",has:{CORS:!1,fetchClosedOrders:"emulated",fetchDepositAddress:!0,fetchOpenOrders:!0,fetchOrder:"emulated",fetchOrders:"emulated",fetchOrderTrades:!0,fetchOrderBooks:!0,fetchMyTrades:!0,fetchTickers:!0,withdraw:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchFundingFees:!0,fetchCurrencies:!0,fetchTransactions:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766491-1b0ea956-5eda-11e7-9225-40d67b481b8d.jpg",api:{public:"https://api.exmo.com",private:"https://api.exmo.com",web:"https://exmo.me"},www:"https://exmo.me",referral:"https://exmo.me/?ref=131685",doc:["https://exmo.me/en/api_doc?ref=131685","https://github.com/exmo-dev/exmo_api_lib/tree/master/nodejs"],fees:"https://exmo.com/en/docs/fees"},api:{web:{get:["ctrl/feesAndLimits","en/docs/fees"]},public:{get:["currency","order_book","pair_settings","ticker","trades"]},private:{post:["user_info","order_create","order_cancel","user_open_orders","user_trades","user_cancelled_orders","order_trades","required_amount","deposit_address","withdraw_crypt","withdraw_get_txid","excode_create","excode_load","wallet_history"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002},funding:{tierBased:!1,percentage:!1}},options:{useWebapiForFetchingFees:!1,feesAndLimits:{success:1,ctlr:"feesAndLimits",error:"",data:{limits:[{pair:"BTC/USD",min_q:"0.001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000"},{pair:"BTC/EUR",min_q:"0.001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000"},{pair:"BTC/RUB",min_q:"0.001",max_q:"1000",min_p:"1",max_p:"2000000",min_a:"10",max_a:"50000000"},{pair:"BTC/UAH",min_q:"0.001",max_q:"1000",min_p:"1",max_p:"1500000",min_a:"10",max_a:"15000000"},{pair:"BTC/PLN",min_q:"0.001",max_q:"1000",min_p:"0.001",max_p:"90000",min_a:"1",max_a:"2000000"},{pair:"BTC/TRY",min_q:"0.001",max_q:"1000",min_p:"1",max_p:"800000",min_a:"40",max_a:"6000000"},{pair:"ETH/TRY",min_q:"0.01",max_q:"5000",min_p:"0.1",max_p:"80000",min_a:"10",max_a:"6000000"},{pair:"XRP/TRY",min_q:"1",max_q:"100000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"6000000"},{pair:"XLM/TRY",min_q:"0.01",max_q:"200000",min_p:"0.00001",max_p:"100000",min_a:"0.1",max_a:"6000000"},{pair:"DAI/BTC",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"0.1",min_a:"0.00001",max_a:"100"},{pair:"DAI/ETH",min_q:"1",max_q:"500000",min_p:"0.000001",max_p:"10",min_a:"0.0001",max_a:"5000"},{pair:"DAI/USD",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"DAI/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"0.5",max_a:"30000000"},{pair:"MKR/BTC",min_q:"0.001",max_q:"1000",min_p:"0.0001",max_p:"100",min_a:"0.000001",max_a:"100"},{pair:"MKR/DAI",min_q:"0.001",max_q:"1000",min_p:"0.5",max_p:"500000",min_a:"0.005",max_a:"500000"},{pair:"QTUM/BTC",min_q:"0.1",max_q:"200000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100"},{pair:"QTUM/ETH",min_q:"0.1",max_q:"200000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"5000"},{pair:"QTUM/USD",min_q:"0.1",max_q:"200000",min_p:"0.00000001",max_p:"10000",min_a:"0.1",max_a:"500000"},{pair:"HB/BTC",min_q:"10",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"100"},{pair:"SMART/BTC",min_q:"10",max_q:"10000000",min_p:"0.0000001",max_p:"1",min_a:"0.00001",max_a:"100"},{pair:"SMART/USD",min_q:"10",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"1",max_a:"500000"},{pair:"SMART/EUR",min_q:"10",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"1",max_a:"500000"},{pair:"SMART/RUB",min_q:"10",max_q:"10000000",min_p:"0.000001",max_p:"100000",min_a:"10",max_a:"50000000"},{pair:"XEM/BTC",min_q:"10",max_q:"5000000",min_p:"0.0000001",max_p:"1",min_a:"0.00015",max_a:"100"},{pair:"XEM/USD",min_q:"10",max_q:"5000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"XEM/EUR",min_q:"10",max_q:"5000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"GUSD/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0015",max_a:"100"},{pair:"GUSD/USD",min_q:"1",max_q:"500000",min_p:"0.1",max_p:"10",min_a:"0.1",max_a:"500000"},{pair:"GUSD/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000"},{pair:"LSK/BTC",min_q:"1",max_q:"200000",min_p:"0.0000001",max_p:"1",min_a:"0.0015",max_a:"100"},{pair:"LSK/USD",min_q:"1",max_q:"200000",min_p:"0.1",max_p:"1000",min_a:"1",max_a:"500000"},{pair:"LSK/RUB",min_q:"1",max_q:"200000",min_p:"0.001",max_p:"100000",min_a:"0.5",max_a:"50000000"},{pair:"NEO/BTC",min_q:"0.01",max_q:"200000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"NEO/USD",min_q:"0.01",max_q:"200000",min_p:"0.01",max_p:"50000",min_a:"0.1",max_a:"500000"},{pair:"NEO/RUB",min_q:"0.01",max_q:"200000",min_p:"0.001",max_p:"1500000",min_a:"50",max_a:"50000000"},{pair:"ADA/BTC",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"ADA/USD",min_q:"0.01",max_q:"10000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000"},{pair:"ADA/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"5000"},{pair:"ZRX/BTC",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"ZRX/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000"},{pair:"GNT/BTC",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"GNT/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000"},{pair:"TRX/BTC",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"TRX/USD",min_q:"0.01",max_q:"10000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000"},{pair:"TRX/RUB",min_q:"0.01",max_q:"10000000",min_p:"0.000001",max_p:"100000",min_a:"0.1",max_a:"50000000"},{pair:"GAS/BTC",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"GAS/USD",min_q:"0.01",max_q:"10000000",min_p:"0.01",max_p:"50000",min_a:"0.1",max_a:"500000"},{pair:"INK/BTC",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"INK/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"5000"},{pair:"INK/USD",min_q:"0.01",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.01",max_a:"500000"},{pair:"MNX/BTC",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"MNX/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000"},{pair:"MNX/USD",min_q:"0.01",max_q:"10000000",min_p:"0.01",max_p:"1000",min_a:"0.5",max_a:"500000"},{pair:"OMG/BTC",min_q:"0.01",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"OMG/ETH",min_q:"0.01",max_q:"100000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000"},{pair:"OMG/USD",min_q:"0.01",max_q:"100000",min_p:"0.01",max_p:"1000",min_a:"0.5",max_a:"500000"},{pair:"XLM/BTC",min_q:"0.01",max_q:"200000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"XLM/USD",min_q:"0.01",max_q:"200000",min_p:"0.001",max_p:"1000",min_a:"0.01",max_a:"500000"},{pair:"XLM/RUB",min_q:"0.01",max_q:"200000",min_p:"0.00001",max_p:"100000",min_a:"0.1",max_a:"50000000"},{pair:"EOS/BTC",min_q:"0.01",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"EOS/USD",min_q:"0.01",max_q:"100000",min_p:"0.01",max_p:"1000",min_a:"0.5",max_a:"500000"},{pair:"STQ/BTC",min_q:"100",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100"},{pair:"STQ/USD",min_q:"100",max_q:"10000000",min_p:"0.0001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"STQ/EUR",min_q:"100",max_q:"10000000",min_p:"0.0001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"STQ/RUB",min_q:"100",max_q:"10000000",min_p:"0.00001",max_p:"50000",min_a:"1",max_a:"50000000"},{pair:"BTG/BTC",min_q:"0.01",max_q:"200000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"BTG/USD",min_q:"0.01",max_q:"200000",min_p:"0.001",max_p:"1000",min_a:"3",max_a:"500000"},{pair:"HBZ/BTC",min_q:"100",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100"},{pair:"HBZ/ETH",min_q:"100",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"5000"},{pair:"HBZ/USD",min_q:"100",max_q:"10000000",min_p:"0.0001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"DXT/BTC",min_q:"100",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100"},{pair:"DXT/USD",min_q:"100",max_q:"10000000",min_p:"0.0001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"BTCZ/BTC",min_q:"100",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.1",max_a:"100"},{pair:"BCH/BTC",min_q:"0.003",max_q:"10000",min_p:"0.00000001",max_p:"5",min_a:"0.0001",max_a:"100"},{pair:"BCH/USD",min_q:"0.003",max_q:"10000",min_p:"0.00000001",max_p:"30000",min_a:"0.0001",max_a:"500000"},{pair:"BCH/RUB",min_q:"0.003",max_q:"10000",min_p:"0.00000001",max_p:"2000000",min_a:"0.0001",max_a:"50000000"},{pair:"BCH/ETH",min_q:"0.003",max_q:"10000",min_p:"0.0000001",max_p:"200",min_a:"0.0001",max_a:"5000"},{pair:"DASH/BTC",min_q:"0.01",max_q:"200000",min_p:"0.001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"DASH/USD",min_q:"0.01",max_q:"200000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000"},{pair:"DASH/RUB",min_q:"0.01",max_q:"200000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000"},{pair:"ETH/BTC",min_q:"0.001",max_q:"5000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"100"},{pair:"ETH/LTC",min_q:"0.01",max_q:"5000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"100000"},{pair:"ETH/USD",min_q:"0.01",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000"},{pair:"ETH/EUR",min_q:"0.01",max_q:"5000",min_p:"0.001",max_p:"10000",min_a:"1",max_a:"500000"},{pair:"ETH/RUB",min_q:"0.01",max_q:"5000",min_p:"0.001",max_p:"100000",min_a:"1",max_a:"50000000"},{pair:"ETH/UAH",min_q:"0.01",max_q:"5000",min_p:"0.01",max_p:"1000000",min_a:"90",max_a:"15000000"},{pair:"ETH/PLN",min_q:"0.001",max_q:"5000",min_p:"0.001",max_p:"8000",min_a:"1",max_a:"2000000"},{pair:"ETC/BTC",min_q:"0.2",max_q:"1000",min_p:"0.0001",max_p:"0.5",min_a:"0.001",max_a:"100"},{pair:"ETC/USD",min_q:"0.2",max_q:"1000",min_p:"0.01",max_p:"10000",min_a:"0.01",max_a:"500000"},{pair:"ETC/RUB",min_q:"0.2",max_q:"1000",min_p:"0.01",max_p:"10000",min_a:"0.01",max_a:"50000000"},{pair:"LTC/BTC",min_q:"0.05",max_q:"1000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"LTC/USD",min_q:"0.05",max_q:"1000000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000"},{pair:"LTC/EUR",min_q:"0.05",max_q:"1000000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000"},{pair:"LTC/RUB",min_q:"0.05",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000"},{pair:"ZEC/BTC",min_q:"0.01",max_q:"1000",min_p:"0.001",max_p:"10",min_a:"0.001",max_a:"100"},{pair:"ZEC/USD",min_q:"0.01",max_q:"1000",min_p:"0.001",max_p:"5000",min_a:"0.1",max_a:"500000"},{pair:"ZEC/EUR",min_q:"0.01",max_q:"1000",min_p:"0.001",max_p:"5000",min_a:"0.1",max_a:"500000"},{pair:"ZEC/RUB",min_q:"0.01",max_q:"1000",min_p:"0.001",max_p:"100000",min_a:"0.1",max_a:"50000000"},{pair:"XRP/BTC",min_q:"1",max_q:"100000",min_p:"0.0000001",max_p:"1",min_a:"0.00001",max_a:"100"},{pair:"XRP/USD",min_q:"1",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000"},{pair:"XRP/RUB",min_q:"1",max_q:"100000",min_p:"0.000001",max_p:"1000",min_a:"0.01",max_a:"50000000"},{pair:"XMR/BTC",min_q:"0.03",max_q:"1000",min_p:"0.001",max_p:"1",min_a:"0.001",max_a:"100"},{pair:"XMR/USD",min_q:"0.03",max_q:"1000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"XMR/EUR",min_q:"0.03",max_q:"1000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"BTC/USDT",min_q:"0.001",max_q:"1000",min_p:"0.01",max_p:"30000",min_a:"3",max_a:"500000"},{pair:"ETH/USDT",min_q:"0.01",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000"},{pair:"USDT/USD",min_q:"1",max_q:"500000",min_p:"0.5",max_p:"10",min_a:"0.1",max_a:"500000"},{pair:"USDT/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000"},{pair:"USD/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000"},{pair:"DOGE/BTC",min_q:"100",max_q:"100000000",min_p:"0.0000001",max_p:"1",min_a:"0.0001",max_a:"100"},{pair:"WAVES/BTC",min_q:"0.5",max_q:"10000",min_p:"0.0001",max_p:"1",min_a:"0.0001",max_a:"100"},{pair:"WAVES/RUB",min_q:"0.5",max_q:"10000",min_p:"1",max_p:"10000",min_a:"1",max_a:"50000000"},{pair:"KICK/BTC",min_q:"100",max_q:"10000000",min_p:"0.0000001",max_p:"0.1",min_a:"0.00001",max_a:"100"},{pair:"KICK/ETH",min_q:"100",max_q:"10000000",min_p:"0.000001",max_p:"1",min_a:"0.0001",max_a:"5000"},{pair:"EOS/EUR",min_q:"0.01",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000"},{pair:"BCH/EUR",min_q:"0.003",max_q:"100000",min_p:"0.01",max_p:"300000",min_a:"3",max_a:"500000"},{pair:"XRP/EUR",min_q:"1",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000"},{pair:"XRP/UAH",min_q:"1",max_q:"100000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"15000000"},{pair:"XEM/UAH",min_q:"1",max_q:"5000000",min_p:"0.0001",max_p:"30000",min_a:"10",max_a:"15000000"},{pair:"BCH/USDT",min_q:"0.003",max_q:"100000",min_p:"0.01",max_p:"5000",min_a:"3",max_a:"500000"},{pair:"DASH/USDT",min_q:"0.01",max_q:"100000",min_p:"0.01",max_p:"5000",min_a:"3",max_a:"500000"},{pair:"BCH/UAH",min_q:"0.003",max_q:"100000",min_p:"0.1",max_p:"30000",min_a:"10",max_a:"15000000"},{pair:"XRP/USDT",min_q:"1",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000"},{pair:"USDT/UAH",min_q:"0.01",max_q:"100000",min_p:"1",max_p:"3000",min_a:"2",max_a:"15000000"},{pair:"USDT/EUR",min_q:"0.01",max_q:"100000",min_p:"0.1",max_p:"10",min_a:"0.1",max_a:"500000"},{pair:"ZRX/USD",min_q:"0.01",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000"},{pair:"BTG/ETH",min_q:"0.01",max_q:"200000",min_p:"0.0001",max_p:"100",min_a:"0.01",max_a:"5000"},{pair:"WAVES/USD",min_q:"0.5",max_q:"10000",min_p:"0.001",max_p:"3500",min_a:"0.5",max_a:"500000"},{pair:"DOGE/USD",min_q:"100",max_q:"1000000000",min_p:"0.0000001",max_p:"1000",min_a:"0.01",max_a:"500000"},{pair:"XRP/ETH",min_q:"1",max_q:"100000",min_p:"0.00000001",max_p:"10",min_a:"0.00001",max_a:"5000"},{pair:"DASH/UAH",min_q:"0.01",max_q:"200000",min_p:"0.01",max_p:"200000",min_a:"10",max_a:"15000000"},{pair:"XMR/ETH",min_q:"0.03",max_q:"1000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"5000"},{pair:"WAVES/ETH",min_q:"0.5",max_q:"10000",min_p:"0.00001",max_p:"30",min_a:"0.0035",max_a:"3500"}],fees:[{group:"crypto",title:"Cryptocurrency",items:[{prov:"BTC",dep:"0%",wd:"0.0005 BTC"},{prov:"LTC",dep:"0%",wd:"0.01 LTC"},{prov:"DOGE",dep:"0%",wd:"1 Doge"},{prov:"DASH",dep:"0%",wd:"0.01 DASH"},{prov:"ETH",dep:"0%",wd:"0.01 ETH"},{prov:"WAVES",dep:"0%",wd:"0.001 WAVES"},{prov:"ZEC",dep:"0%",wd:"0.001 ZEC"},{prov:"USDT",dep:"5 USDT",wd:"5 USDT"},{prov:"XMR",dep:"0%",wd:"0.05 XMR"},{prov:"XRP",dep:"0%",wd:"0.02 XRP"},{prov:"KICK",dep:"0 KICK",wd:"50 KICK"},{prov:"ETC",dep:"0%",wd:"0.01 ETC"},{prov:"BCH",dep:"0%",wd:"0.001 BCH"},{prov:"BTG",dep:"0%",wd:"0.001 BTG"},{prov:"EOS",dep:"",wd:"0.05 EOS"},{prov:"HBZ",dep:"65 HBZ",wd:"65 HBZ"},{prov:"BTCZ",dep:"0 %",wd:"5 BTCZ"},{prov:"DXT",dep:"20 DXT",wd:"20 DXT"},{prov:"STQ",dep:"100 STQ",wd:"100 STQ"},{prov:"XLM",dep:"0%",wd:"-"},{prov:"MNX",dep:"0%",wd:"0.01 MNX"},{prov:"OMG",dep:"0.1 OMG",wd:"0.5 OMG"},{prov:"TRX",dep:"0%",wd:"1 TRX"},{prov:"ADA",dep:"0%",wd:"1 ADA"},{prov:"INK",dep:"10 INK",wd:"50 INK"},{prov:"NEO",dep:"0%",wd:"0%"},{prov:"GAS",dep:"0%",wd:"0%"},{prov:"ZRX",dep:"0%",wd:"1 ZRX"},{prov:"GNT",dep:"0%",wd:"1 GNT"},{prov:"GUSD",dep:"0%",wd:"0.5 GUSD"},{prov:"LSK",dep:"0%",wd:"0.1 LSK"},{prov:"XEM",dep:"0%",wd:"5 XEM"},{prov:"SMART",dep:"0%",wd:"0.5 SMART"},{prov:"QTUM",dep:"0%",wd:"0.01 QTUM"},{prov:"HB",dep:"0%",wd:"10 HB"},{prov:"DAI",dep:"0%",wd:"1 DAI"},{prov:"MKR",dep:"0%",wd:"0.005 MKR"}]},{group:"usd",title:"USD",items:[{prov:"Perfect Money",dep:"-",wd:"0.5%"},{prov:"Neteller",dep:"3.5% + 0.29 USD",wd:"-"},{prov:"AdvCash",dep:"1.95%",wd:"3.95%"},{prov:"Payeer",dep:"-",wd:"0.45%"},{prov:"Visa",dep:"3.45%",wd:"-"},{prov:"Skrill",dep:"2.95%",wd:"2.45%"},{prov:"Visa/MasterCard (Simplex)",dep:"5%",wd:"-"}]},{group:"eur",title:"EUR",items:[{prov:"Payeer",dep:"-",wd:"0.45%"},{prov:"CryptoCapital",dep:"-",wd:"0.45%"},{prov:"AdvCash",dep:"1%",wd:"-"},{prov:"Perfect Money",dep:"-",wd:"2.95%"},{prov:"Neteller",dep:"3.5%+0.25 EUR",wd:"2.95%"},{prov:"Visa",dep:"3.45%",wd:"-"},{prov:"Wire Transfer",dep:"6.95 EUR",wd:"-"},{prov:"Skrill",dep:"2.95% + 0.29 EUR",wd:"-"},{prov:"Rapid Transfer",dep:"1.5% + 0.29 EUR",wd:"-"},{prov:"MisterTango SEPA",dep:"5 EUR",wd:"-"},{prov:"SEPA",dep:"6.95 EUR",wd:"-"},{prov:"Visa/MasterCard (Simplex)",dep:"5%",wd:"-"}]},{group:"rub",title:"RUB",items:[{prov:"AdvCash",dep:"0.95%",wd:"2.95%"},{prov:"Payeer",dep:"1.95%",wd:"-"},{prov:"Qiwi",dep:"1.95%",wd:"3.45%"},{prov:"Visa/MasterCard",dep:"4%",wd:"-"},{prov:"Yandex Money",dep:"3.45%",wd:"3.95%"},{prov:"Visa/Mastercard",dep:"-",wd:"4.45% + 50 RUB"}]},{group:"pln",title:"PLN",items:[{prov:"Neteller",dep:"3.5% + 4 PLN",wd:"-"},{prov:"Rapid Transfer",dep:"1.5% + 1.21 PLN",wd:"-"},{prov:"CryptoCapital",dep:"-",wd:"0.45%"},{prov:"Skrill",dep:"3.5% + 1.21 PLN",wd:"1.95%"},{prov:"Visa/MasterCard (Simplex)",dep:"5%",wd:"-"}]},{group:"try",title:"TRY",items:[{prov:"QR ile yatrma",dep:"5.95%",wd:"-"},{prov:"Visa",dep:"0%",wd:"-"},{prov:"Skrill",dep:"2.95% + 3 TRY",wd:"1.45%"}]},{group:"uah",title:"UAH",items:[{prov:"Terminal",dep:"2.6%",wd:"-"},{prov:"AdvCash",dep:"0.45%",wd:"3.45%"},{prov:"Visa/MasterCard",dep:"2.6%",wd:"3.95%"},{prov:"Enfins",dep:"0%",wd:"-"}]}]}}},exceptions:{40005:d,40009:l,40015:a,40016:o,40017:d,50052:c,50054:c,50304:n,50173:n,50319:h,50321:h}})}async fetchTradingFees(e={}){if(this.options.useWebapiForFetchingFees){let t=await this.webGetEnDocsFees(e),i=t.split('<td class="th_fees_2" colspan="2">'),s=i.length;if(2!==s)throw new a(this.id+" fetchTradingFees format has changed");if((s=(i=i[1].split("</td>")).length)<2)throw new a(this.id+" fetchTradingFees format has changed");const r=.01*parseFloat(i[0].replace("%",""));return{info:t,maker:r,taker:r}}return{maker:this.fees.trading.maker,taker:this.fees.trading.taker}}parseFixedFloatValue(e){if(void 0===e||"-"===e)return;let t=e.indexOf("%")>=0,i=e.split(" ")[0].replace("%",""),s=parseFloat(i);if(s>0&&t)throw new a(this.id+" parseFixedFloatValue detected an unsupported non-zero percentage-based fee "+e);return s}async fetchFundingFees(e={}){let t=void 0;t=this.options.useWebapiForFetchingFees?await this.webGetCtrlFeesAndLimits(e):this.options.feesAndLimits;const i={},s={},r=this.safeValue(t.data,"fees"),a=this.indexBy(r,"group"),o=a.crypto.items;for(let e=0;e<o.length;e++){let t=o[e],r=this.commonCurrencyCode(this.safeString(t,"prov")),a=this.safeString(t,"wd"),n=this.safeString(t,"dep");void 0!==a&&a.length>0&&(i[r]=this.parseFixedFloatValue(a)),void 0!==n&&n.length>0&&(s[r]=this.parseFixedFloatValue(n))}const n=this.toArray(this.omit(a,"crypto"));for(let e=0;e<n.length;e++){const t=this.commonCurrencyCode(this.safeString(n[e],"title"));i[t]=void 0,s[t]=void 0}const d={info:t,withdraw:i,deposit:s};return this.options.fundingFees=d,d}async fetchCurrencies(e={}){let t=await this.fetchFundingFees(e),i=Object.keys(t.withdraw),s=this.indexBy(t.info.data.limits,"pair"),r=Object.keys(s),a={},o={},n={},d={},c={},h={};for(let e=0;e<r.length;e++){let t=r[e],i=s[t],[l,u]=t.split("/"),p=this.commonCurrencyCode(l),m=this.commonCurrencyCode(u),f=this.safeFloat(i,"max_q"),y=this.safeFloat(i,"max_p"),b=this.safeFloat(i,"max_a"),w=this.safeFloat(i,"min_q"),v=this.safeFloat(i,"min_p"),g=this.safeFloat(i,"min_a");a[p]=Math.min(this.safeFloat(a,p,w),w),d[p]=Math.max(this.safeFloat(d,p,f),f),o[m]=Math.min(this.safeFloat(o,m,v),v),n[m]=Math.min(this.safeFloat(n,m,g),g),c[m]=Math.max(this.safeFloat(c,m,y),y),h[m]=Math.max(this.safeFloat(h,m,b),b)}let l={};for(let e=0;e<i.length;e++){let s=i[e],r=this.commonCurrencyCode(s),u=this.safeValue(t.withdraw,r),p=!0;l[r]={id:s,code:r,name:r,active:p,fee:u,precision:8,limits:{amount:{min:this.safeFloat(a,r),max:this.safeFloat(d,r)},price:{min:this.safeFloat(o,r),max:this.safeFloat(c,r)},cost:{min:this.safeFloat(n,r),max:this.safeFloat(h,r)}},info:s}}return l}async fetchMarkets(e={}){let t=await this.fetchTradingFees(),i=await this.publicGetPairSettings(),s=Object.keys(i),r=[];for(let e=0;e<s.length;e++){let a=s[e],o=i[a],n=a.replace("_","/"),[d,c]=n.split("/");r.push({id:a,symbol:n,base:d,quote:c,active:!0,taker:t.taker,maker:t.maker,limits:{amount:{min:this.safeFloat(o,"min_quantity"),max:this.safeFloat(o,"max_quantity")},price:{min:this.safeFloat(o,"min_price"),max:this.safeFloat(o,"max_price")},cost:{min:this.safeFloat(o,"min_amount"),max:this.safeFloat(o,"max_amount")}},precision:{amount:8,price:8},info:o})}return r}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostUserInfo(e),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=this.account();r in t.balances&&(a.free=parseFloat(t.balances[r])),r in t.reserved&&(a.used=parseFloat(t.reserved[r])),a.total=this.sum(a.free,a.used),i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r=this.extend({pair:s.id},i);void 0!==t&&(r.limit=t);let a=(await this.publicGetOrderBook(r))[s.id];return this.parseOrderBook(a,void 0,"bid","ask")}async fetchOrderBooks(e,t={}){await this.loadMarkets();let i=void 0;if(void 0===e){if((i=this.ids.join(",")).length>2048){let e=this.ids.length;throw new a(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else i=(i=this.marketIds(e)).join(",");let s=await this.publicGetOrderBook(this.extend({pair:i},t)),r={};i=Object.keys(s);for(let e=0;e<i.length;e++){let t=i[e];r[this.findSymbol(t)]=this.parseOrderBook(s[t],void 0,"bid","ask")}return r}parseTicker(e,t){let i=1e3*e.updated,s=void 0;t&&(s=t.symbol);const r=this.safeFloat(e,"last_trade");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy_price"),bidVolume:void 0,ask:this.safeFloat(e,"sell_price"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"vol_curr"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t),s={},r=Object.keys(i);for(let e=0;e<r.length;e++){let t=r[e],a=this.markets_by_id[t],o=a.symbol,n=i[t];s[o]=this.parseTicker(n,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t),s=this.market(e);return this.parseTicker(i[s.id],s)}parseTrade(e,t){let i=1e3*e.date,s=void 0,r=void 0,o=this.safeString(e,"trade_id"),n=this.safeString(e,"order_id"),d=this.safeFloat(e,"price"),c=this.safeFloat(e,"quantity"),h=this.safeFloat(e,"amount"),l=this.safeString(e,"type");if(void 0!==t){if(r=t.symbol,t.taker!==t.maker)throw new a(this.id+" parseTrade can not deduce proper fee costs, taker and maker fees now differ");"buy"===l&&void 0!==c?s={currency:t.base,cost:c*t.taker,rate:t.taker}:"sell"===l&&void 0!==h&&(s={currency:t.quote,cost:h*t.taker,rate:t.taker})}return{id:o,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,order:n,type:void 0,side:l,price:d,amount:c,cost:h,fee:s}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTrades(this.extend({pair:r.id},s));return this.parseTrades(a[r.id],r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();let a=this.market(e),o={pair:a.id};void 0!==i&&(o.limit=i);let n=await this.privatePostUserTrades(this.extend(o,s));return void 0!==a&&(n=n[a.id]),this.parseTrades(n,a,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="market"===t?t+"_":"";"market"===t&&void 0===r&&(r=0);let n={pair:this.market(e).id,quantity:this.amountToPrecision(e,s),type:o+i,price:this.priceToPrecision(e,r)},d=await this.privatePostOrderCreate(this.extend(n,a)),c=this.safeString(d,"order_id"),h=this.milliseconds();s=parseFloat(s),r=parseFloat(r);let l={id:c,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,status:"open",symbol:e,type:t,side:i,price:r,cost:r*s,amount:s,remaining:s,filled:0,fee:void 0,trades:void 0};return this.orders[c]=l,this.extend({info:d},l)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostOrderCancel({order_id:e});return e in this.orders&&(this.orders[e].status="canceled"),s}async fetchOrder(e,t,i={}){await this.loadMarkets();try{let t=await this.privatePostOrderTrades({order_id:e.toString()});return this.parseOrder(t)}catch(t){if(t instanceof n&&e in this.orders)return this.orders[e]}throw new n(this.id+" fetchOrder order id "+e.toString()+" not found in cache.")}async fetchOrderTrades(e,t,i,s,r={}){let a=void 0;void 0!==t&&(a=this.market(t));const o=await this.privatePostOrderTrades(this.extend({order_id:e.toString()},r)),n=this.safeValue(o,"trades");return this.parseTrades(n,a,i,s)}updateCachedOrders(e,t){for(let t=0;t<e.length;t++){const i=e[t].id;this.orders[i]=e[t]}let i=this.indexBy(e,"id"),s=Object.keys(this.orders);for(let e=0;e<s.length;e++){let r=s[e],a=this.orders[r];if(!(r in i)){if(void 0!==t&&t!==a.symbol)continue;"open"===a.status&&(void 0===(a=this.extend(a,{status:"closed",cost:void 0,filled:a.amount,remaining:0})).cost&&void 0!==a.filled&&(a.cost=a.filled*a.price),this.orders[r]=a)}}return this.toArray(this.orders)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=await this.privatePostUserOpenOrders(s),a=Object.keys(r),o=[];for(let e=0;e<a.length;e++){let t=a[e],i=void 0;t in this.markets_by_id&&(i=this.markets_by_id[t]);let s=this.parseOrders(r[t],i);o=this.arrayConcat(o,s)}return this.updateCachedOrders(o,e),this.filterBySymbolSinceLimit(this.toArray(this.orders),e,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.fetchOrders(e,t,i,s);let r=this.filterBy(this.orders,"status","open");return this.filterBySymbolSinceLimit(r,e,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.fetchOrders(e,t,i,s);let r=this.filterBy(this.orders,"status","closed");return this.filterBySymbolSinceLimit(r,e,t,i)}parseOrder(e,t){let i=this.safeString(e,"order_id"),s=this.safeInteger(e,"created");void 0!==s&&(s*=1e3);let r=void 0,a=this.safeString(e,"type");if(void 0===t){let i=void 0;"pair"in e?i=e.pair:"in_currency"in e&&"out_currency"in e&&(i="buy"===a?e.in_currency+"_"+e.out_currency:e.out_currency+"_"+e.in_currency),void 0!==i&&i in this.markets_by_id&&(t=this.markets_by_id[i])}let o=this.safeFloat(e,"quantity");if(void 0===o){let t="buy"===a?"in_amount":"out_amount";o=this.safeFloat(e,t)}let n=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount"),c=0,h=[],l=this.safeValue(e,"trades"),u=void 0;if(void 0!==l&&Array.isArray(l))for(let e=0;e<l.length;e++){let r=this.parseTrade(l[e],t);void 0===i&&(i=r.order),void 0===s&&(s=r.timestamp),s>r.timestamp&&(s=r.timestamp),c=this.sum(c,r.amount),void 0===u&&(u=0),u=this.sum(u,r.fee.cost),void 0===d&&(d=0),d=this.sum(d,r.cost),h.push(r)}let p=void 0;void 0!==o&&(p=o-c);let m=this.safeString(e,"status");m=c>=o?"closed":"open",void 0===t&&(t=this.getMarketFromTrades(h));let f=void 0;void 0!==t&&(r=t.symbol,f=t.quote),void 0===d?void 0!==n&&(d=n*c):void 0===n&&c>0&&(n=d/c);let y={cost:u,currency:f};return{id:i,datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:m,symbol:r,type:"limit",side:a,price:n,cost:d,amount:o,filled:c,remaining:p,trades:h,fee:y,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=await this.privatePostDepositAddress(t),s=this.safeString(i,e),r=void 0,a=void 0;if(s){let e=s.split(",");r=e[0],e.length>1&&(a=e[1])}return this.checkAddress(r),{currency:e,address:r,tag:a,info:i}}getMarketFromTrades(e){let t=this.indexBy(e,"pair"),i=Object.keys(t);if(1===i.length)return this.markets[i[0]]}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d=n[a],c=parseFloat(this.costToPrecision(e,s*d)),h="quote";return"sell"===i?c*=r:h="base",{type:a,currency:n[h],rate:d,cost:parseFloat(this.feeToPrecision(e,c))}}async withdraw(e,t,i,s,r={}){await this.loadMarkets();let a={amount:t,currency:this.currency(e).id,address:i};void 0!==s&&(a.invoice=s);let o=await this.privatePostWithdrawCrypt(this.extend(a,r));return{info:o,id:o.task_id}}parseTransactionStatus(e){return this.safeString({transferred:"ok",paid:"ok",pending:"pending",processing:"pending"},e,e)}parseTransaction(e,t){let i=this.safeFloat(e,"dt");void 0!==i&&(i*=1e3);let s=this.safeFloat(e,"amount");void 0!==s&&(s=Math.abs(s));const r=this.parseTransactionStatus(this.safeString(e,"status")),a=this.safeString(e,"txid"),o=this.safeString(e,"type");let n=this.safeString(e,"curr");void 0===t&&(t=this.safeValue(this.currencies_by_id,n)),n=void 0!==t?t.code:this.commonCurrencyCode(n);let d=this.safeString(e,"account");if(void 0!==d){const e=d.split(":");2===e.length&&(d=e[1].replace(" ",""))}let c=void 0;if(!this.fees.funding.percentage){let t="withdrawal"===o?"withdraw":"deposit",i=this.safeFloat(this.options.fundingFees[t],n);"cashback"===this.safeString(e,"provider")&&(i=0),void 0!==i&&("withdrawal"===o&&(s-=i),c={cost:i,currency:n,rate:void 0})}return{info:e,id:void 0,currency:n,amount:s,address:d,tag:void 0,status:r,type:o,updated:void 0,txid:a,timestamp:i,datetime:this.iso8601(i),fee:c}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r={};void 0!==t&&(r.date=parseInt(t/1e3));let a=void 0;void 0!==e&&(a=this.currency(e));let o=await this.privatePostWalletHistory(this.extend(r,s));return this.parseTransactions(o.history,a,t,i)}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/";if("web"!==t&&(o+=this.version+"/"),o+=e,"public"===t||"web"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else if("private"===t){this.checkRequiredCredentials();let e=this.nonce();a=this.urlencode(this.extend({nonce:e},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}nonce(){return this.milliseconds()}handleErrors(e,t,i,s,r,o,n){if(void 0!==n&&("{"===o[0]||"["===o[0])&&"result"in n){let e=this.safeValue(n,"result",!1);if("string"==typeof e&&(e="true"===e||"1"===e),!e){let e=void 0;const t=this.safeString(n,"error").split(":");if(t.length>1){const i=t[0].split(" ");e=i.length>1?i[1]:i[0]}const i=this.id+" "+this.json(n),s=this.exceptions;throw e in s?new s[e](i):new a(i)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,AuthenticationError:a,ExchangeNotAvailable:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"exx",name:"EXX",countries:["CN"],rateLimit:100,userAgent:this.userAgents.chrome,has:{fetchOrder:!0,fetchTickers:!0,fetchOpenOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/37770292-fbf613d0-2de4-11e8-9f79-f2dc451b8ccb.jpg",api:{public:"https://api.exx.com/data/v1",private:"https://trade.exx.com/api"},www:"https://www.exx.com/",doc:"https://www.exx.com/help/restApi",fees:"https://www.exx.com/help/rate",referral:"https://www.exx.com/r/fde4260159e53ab8a58cc9186d35501f"},api:{public:{get:["markets","tickers","ticker","depth","trades"]},private:{get:["order","cancel","getOrder","getOpenOrders","getBalance"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BCC:3e-4,BCD:0,BOT:10,BTC:.001,BTG:0,BTM:25,BTS:3,EOS:1,ETC:.01,ETH:.01,ETP:.012,HPY:0,HSR:.001,INK:20,LTC:.005,MCO:.6,MONA:.01,QASH:5,QCASH:5,QTUM:.01,USDT:5}}},commonCurrencies:{TV:"TIV"},exceptions:{103:a}})}async fetchMarkets(e={}){let t=await this.publicGetMarkets(),i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){let r=i[e],a=t[r],[o,n]=r.split("_"),d=r.toUpperCase(),[c,h]=d.split("_"),l=(c=this.commonCurrencyCode(c))+"/"+(h=this.commonCurrencyCode(h)),u=!0===a.isOpen,p={amount:parseInt(a.amountScale),price:parseInt(a.priceScale)};s.push({id:r,symbol:l,base:c,quote:h,baseId:o,quoteId:n,active:u,precision:p,limits:{amount:{min:Math.pow(10,-p.amount),max:Math.pow(10,p.amount)},price:{min:Math.pow(10,-p.price),max:Math.pow(10,p.price)},cost:{min:void 0,max:void 0}},info:a})}return s}parseTicker(e,t){let i=t.symbol,s=parseInt(e.date);e=e.ticker;let r=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:this.safeFloat(e,"riseRate"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTicker(this.extend({currency:i.id},t));return this.parseTicker(s,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s={},r=this.milliseconds(),a=Object.keys(i);for(let e=0;e<a.length;e++){let t=a[e];if(!(t in this.marketsById))continue;let o=this.marketsById[t],n=o.symbol,d={date:r,ticker:i[t]};s[n]=this.parseTicker(d,o)}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetDepth(this.extend({currency:this.marketId(e)},i));return this.parseOrderBook(s,s.timestamp)}parseTrade(e,t){let i=1e3*e.date,s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount"),a=t.symbol,o=this.costToPrecision(a,s*r);return{timestamp:i,datetime:this.iso8601(i),symbol:a,id:this.safeString(e,"tid"),order:void 0,type:"limit",side:e.type,price:s,amount:r,cost:o,fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTrades(this.extend({currency:r.id},s));return this.parseTrades(a,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetGetBalance(e),i={info:t};t=t.funds;let s=Object.keys(t);for(let e=0;e<s.length;e++){let r=s[e],a=t[r],o=this.commonCurrencyCode(r),n={free:parseFloat(a.balance),used:parseFloat(a.freeze),total:parseFloat(a.total)};i[o]=n}return this.parseBalance(i)}parseOrder(e,t){let i=t.symbol,s=parseInt(e.trade_date),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"trade_money"),o=this.safeFloat(e,"total_amount"),n=this.safeFloat(e,"trade_amount",0),d=parseFloat(this.amountToPrecision(i,o-n)),c=this.safeInteger(e,"status");c=1===c?"canceled":2===c?"closed":"open";let h=void 0;return"fees"in e&&(h={cost:this.safeFloat(e,"fees"),currency:t.quote}),{id:this.safeString(e,"id"),datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:c,symbol:i,type:"limit",side:e.type,price:r,cost:a,amount:o,filled:n,remaining:d,trades:void 0,fee:h,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n=await this.privateGetOrder(this.extend({currency:o.id,type:i,price:r,amount:s},a)),d=n.id,c=this.parseOrder({id:d,trade_date:this.milliseconds(),total_amount:s,price:r,type:i,info:n},o);return this.orders[d]=c,c}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t);return await this.privateGetCancel(this.extend({id:e,currency:s.id},i))}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t),r=await this.privateGetGetOrder(this.extend({id:e,currency:s.id},i));return this.parseOrder(r,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.privateGetGetOpenOrders(this.extend({currency:r.id},s));return Array.isArray(a)?this.parseOrders(a,r,t,i):[]}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.urlencode(this.keysort(this.extend({accesskey:this.apiKey,nonce:this.nonce()},s)));o+="?"+e+"&signature="+this.hmac(this.encode(e),this.encode(this.secret),"sha512"),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,n,d){if("string"==typeof n&&!(n.length<2||"{"!==n[0]&&"["!==n[0])){let e=this.safeString(d,"code"),t=this.safeString(d,"message");const i=this.id+" "+this.json(d);if("100"===e)return;if(void 0!==e){const t=this.exceptions;if(e in t)throw new t[e](i);if("308"===e)return;throw new r(i)}let s=this.safeValue(d,"result");if(void 0!==s&&!s)throw""===t?new o(i):new r(i)}}}},function(e,t,i){"use strict";const s=i(49);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"fcoinjp",name:"FCoinJP",countries:["JP"],hostname:"fcoinjp.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/54219174-08b66b00-4500-11e9-862d-f522d0fe08c6.jpg",fees:"https://fcoinjp.zendesk.com/hc/en-us/articles/360018727371",www:"https://www.fcoinjp.com",referral:void 0}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"flowbtc",name:"flowBTC",countries:["BR"],version:"v1",rateLimit:1e3,has:{CORS:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28162465-cd815d4c-67cf-11e7-8e57-438bea0523a2.jpg",api:"https://api.flowbtc.com:8405/ajax",www:"https://trader.flowbtc.com",doc:"https://www.flowbtc.com.br/api.html"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{post:["GetTicker","GetTrades","GetTradesByDate","GetOrderBook","GetProductPairs","GetProducts"]},private:{post:["CreateAccount","GetUserInfo","SetUserInfo","GetAccountInfo","GetAccountTrades","GetDepositAddresses","Withdraw","CreateOrder","ModifyOrder","CancelOrder","CancelAllOrders","GetAccountOpenOrders","GetOrderFee"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0035,taker:.0035}}})}async fetchMarkets(e={}){let t=(await this.publicPostGetProductPairs()).productPairs,i={};for(let e=0;e<t.length;e++){let s=t[e],r=s.name,a=s.product1Label,o=s.product2Label,n={amount:this.safeInteger(s,"product1DecimalPlaces"),price:this.safeInteger(s,"product2DecimalPlaces")},d=a+"/"+o;i[d]={id:r,symbol:d,base:a,quote:o,precision:n,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:s}}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostGetAccountInfo(),i=t.currencies,s={info:t};for(let e=0;e<i.length;e++){let t=i[e],r=t.name,a={free:t.balance,used:t.hold,total:0};a.total=this.sum(a.free,a.used),s[r]=a}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r=await this.publicPostGetOrderBook(this.extend({productPair:s.id},i));return this.parseOrderBook(r,void 0,"bids","asks","px","qty")}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicPostGetTicker(this.extend({productPair:i.id},t)),r=this.milliseconds(),a=this.safeFloat(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"volume24hr"),quoteVolume:this.safeFloat(s,"volume24hrProduct2"),info:s}}parseTrade(e,t){let i=1e3*e.unixtime,s=0===e.incomingOrderSide?"buy":"sell";return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:e.tid.toString(),order:void 0,type:void 0,side:s,price:e.px,amount:e.qty}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicPostGetTrades(this.extend({ins:r.id,startIndex:-1},s));return this.parseTrades(a.trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="market"===t?1:0,n={ins:this.marketId(e),side:i,orderType:o,qty:s,px:this.priceToPrecision(e,r)},d=await this.privatePostCreateOrder(this.extend(n,a));return{info:d,id:d.serverOrderId}}async cancelOrder(e,t,i={}){if(await this.loadMarkets(),"ins"in i)return await this.privatePostCancelOrder(this.extend({serverOrderId:e},i));throw new r(this.id+" requires `ins` symbol parameter for cancelling an order")}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(s).length&&(a=this.json(s));else{this.checkRequiredCredentials();let e=this.nonce(),t=e.toString()+this.uid+this.apiKey,i=this.hmac(this.encode(t),this.encode(this.secret));a=this.json(this.extend({apiKey:this.apiKey,apiNonce:e,apiSig:i.toUpperCase()},s)),r={"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("isAccepted"in n&&n.isAccepted)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(50);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"fybsg",name:"FYB-SG",countries:["SG"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766513-3364d56a-5edb-11e7-9e6b-d5898bb89c81.jpg",api:"https://www.fybsg.com/api/SGD",www:"https://www.fybsg.com",doc:"https://fyb.docs.apiary.io"},markets:{"BTC/SGD":{id:"SGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD"}}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,InvalidAddress:o,OrderNotFound:n,NotSupported:d,DDoSProtection:c,InsufficientFunds:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"gateio",name:"Gate.io",countries:["CN"],version:"2",rateLimit:1e3,has:{CORS:!1,createMarketOrder:!1,fetchTickers:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!0,createDepositAddress:!0,fetchDepositAddress:!0,fetchClosedOrders:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderTrades:!0,fetchOrders:!0,fetchOrder:!0,fetchMyTrades:!0},timeframes:{"1m":"60","5m":"300","10m":"600","15m":"900","30m":"1200","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800"},urls:{logo:"https://user-images.githubusercontent.com/1294454/31784029-0313c702-b509-11e7-9ccc-bc0da6a0e435.jpg",api:{public:"https://data.gate.io/api",private:"https://data.gate.io/api"},www:"https://gate.io/",doc:"https://gate.io/api2",fees:["https://gate.io/fee","https://support.gate.io/hc/en-us/articles/115003577673"],referral:"https://www.gate.io/signup/2436035"},api:{public:{get:["candlestick2/{id}","pairs","marketinfo","marketlist","tickers","ticker/{id}","orderBook/{id}","trade/{id}","tradeHistory/{id}","tradeHistory/{id}/{tid}"]},private:{post:["balances","depositAddress","newAddress","depositsWithdrawals","buy","sell","cancelOrder","cancelAllOrders","getOrder","openOrders","tradeHistory","withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.002,taker:.002}},exceptions:{4:c,7:d,8:d,9:d,15:c,16:n,17:n,21:h},errorCodeNames:{1:"Invalid request",2:"Invalid version",3:"Invalid request",4:"Too many attempts",5:"Invalid sign",6:"Invalid sign",7:"Currency is not supported",8:"Currency is not supported",9:"Currency is not supported",10:"Verified failed",11:"Obtaining address failed",12:"Empty params",13:"Internal error, please report to administrator",14:"Invalid user",15:"Cancel order too fast, please wait 1 min and try again",16:"Invalid order id or order is already closed",17:"Invalid orderid",18:"Invalid amount",19:"Not permitted or trade is disabled",20:"Your order size is too small",21:"You don't have enough fund"},options:{limits:{cost:{min:{BTC:1e-4,ETH:.001,USDT:1}}}}})}async fetchMarkets(e={}){let t=await this.publicGetMarketinfo(),i=this.safeValue(t,"pairs");if(!i)throw new r(this.id+" fetchMarkets got an unrecognized response");let s=[];for(let e=0;e<i.length;e++){let t=i[e],r=Object.keys(t)[0],a=t[r];const o=r.split("_"),n=o.length;let d=o[0],c=o[1];n>2&&(d=o[0]+"_"+o[1],c=o[2]);let h=d.toUpperCase(),l=c.toUpperCase(),u=(h=this.commonCurrencyCode(h))+"/"+(l=this.commonCurrencyCode(l)),p={amount:8,price:a.decimal_places},m={min:a.min_amount,max:void 0},f={min:Math.pow(10,-a.decimal_places),max:void 0},y=m.min*f.min,b={amount:m,price:f,cost:{min:this.safeFloat(this.options.limits.cost.min,l,y),max:void 0}},w=!0;s.push({id:r,symbol:u,base:h,quote:l,baseId:d,quoteId:c,info:t,active:w,maker:a.fee/100,taker:a.fee/100,precision:p,limits:b})}return s}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalances(),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=this.commonCurrencyCode(r),o=this.account();"available"in t&&r in t.available&&(o.free=parseFloat(t.available[r])),"locked"in t&&r in t.locked&&(o.used=parseFloat(t.locked[r])),o.total=this.sum(o.free,o.used),i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={id:this.marketId(e)},r=await this.publicGetOrderBookId(this.extend(s,i));return this.parseOrderBook(r)}parseOHLCV(e,t,i="1m",s,r){return[parseInt(e[0]),parseFloat(e[5]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[2]),parseFloat(e[1])]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();const a=this.market(e),o={id:a.id,group_sec:this.timeframes[t]};if(void 0!==s){const e=this.parseTimeframe(t),i=parseInt(e*s/3600);o.range_hour=Math.max(0,i-1)}const n=await this.publicGetCandlestick2Id(this.extend(o,r));return this.parseOHLCVs(n.data,a,t,i,s)}parseTicker(e,t){const i=this.milliseconds();let s=void 0;t&&(s=t.symbol);const r=this.safeFloat(e,"last"),a=this.safeFloat(e,"percentChange");let o=void 0,n=void 0,d=void 0;if(void 0!==r&&void 0!==a){let e=a/100;n=r-(o=r/this.sum(1,e)),d=this.sum(r,o)/2}return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high24hr"),low:this.safeFloat(e,"low24hr"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:o,close:r,last:r,previousClose:void 0,change:n,percentage:a,average:d,baseVolume:this.safeFloat(e,"quoteVolume"),quoteVolume:this.safeFloat(e,"baseVolume"),info:e}}handleErrors(e,t,i,s,r,a,o){if(a.length<=0)return;if("{"!==a[0])return;if("false"!==this.safeString(o,"result",""))return;const n=this.safeString(o,"code");if(void 0!==n){const e=this.exceptions,t=this.errorCodeNames;if(n in e){let i="";throw i=n in t?t[n]:this.safeString(o,"message","(unknown)"),new e[n](i)}}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s={},r=Object.keys(i);for(let e=0;e<r.length;e++){let t=r[e],[a,o]=t.split("_"),n=a.toUpperCase(),d=o.toUpperCase(),c=(n=this.commonCurrencyCode(n))+"/"+(d=this.commonCurrencyCode(d)),h=i[t],l=void 0;c in this.markets&&(l=this.markets[c]),t in this.markets_by_id&&(l=this.markets_by_id[t]),s[c]=this.parseTicker(h,l)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerId(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=this.safeInteger(e,"timestamp");void 0!==(i=this.safeInteger(e,"time_unix",i))&&(i*=1e3);let s=this.safeString(e,"tradeID");s=this.safeString(e,"id",s);let r=this.safeString(e,"orderid");r=this.safeString(e,"orderNumber",r);let a=this.safeFloat(e,"rate"),o=this.safeFloat(e,"amount"),n=void 0;return void 0!==a&&void 0!==o&&(n=a*o),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,order:r,type:void 0,side:e.type,price:a,amount:o,cost:n,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradeHistoryId(this.extend({id:r.id},s));return this.parseTrades(a.data,r,t,i)}async fetchOrders(e,t,i,s={}){let r=await this.privatePostOpenOrders(s);return this.parseOrders(r.orders,void 0,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostGetOrder(this.extend({orderNumber:e,currencyPair:this.marketId(t)},i));return this.parseOrder(s.order)}parseOrderStatus(e){let t={cancelled:"canceled"};return e in t?t[e]:e}parseOrder(e,t){let i=this.safeString(e,"orderNumber"),s=void 0,r=this.safeString(e,"currencyPair");r in this.markets_by_id&&(t=this.markets_by_id[r]),void 0!==t&&(s=t.symbol);let a=this.safeInteger(e,"timestamp");void 0!==a&&(a*=1e3);let o=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeString(e,"type"),d=this.safeFloat(e,"filledRate"),c=this.safeFloat(e,"initialAmount"),h=this.safeFloat(e,"filledAmount"),l=this.safeFloat(e,"leftAmount");void 0===l&&(l=this.safeFloat(e,"left"));let u=this.safeFloat(e,"feeValue"),p=this.safeString(e,"feeCurrency"),m=this.safeFloat(e,"feePercentage");return void 0!==m&&(m/=100),void 0!==p&&p in this.currencies_by_id&&(p=this.currencies_by_id[p].code),{id:i,datetime:this.iso8601(a),timestamp:a,status:o,symbol:s,type:"limit",side:n,price:d,cost:void 0,amount:c,filled:h,remaining:l,trades:void 0,fee:{cost:u,currency:p,rate:m},info:e}}async createOrder(e,t,i,s,a,o={}){if("market"===t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();let n="privatePost"+this.capitalize(i),d=this.market(e),c={currencyPair:d.id,rate:a,amount:s},h=await this[n](this.extend(c,o));return this.parseOrder(this.extend({status:"open",type:i,initialAmount:s},h),d)}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder requires symbol argument");return await this.loadMarkets(),await this.privatePostCancelOrder({orderNumber:e,currencyPair:this.marketId(t)})}async queryDepositAddress(e,t,i={}){await this.loadMarkets();let s=this.currency(t);e="privatePost"+e+"Address";let r=await this[e](this.extend({currency:s.id},i)),a=this.safeString(r,"addr"),n=void 0;if(void 0!==a&&a.indexOf("address")>=0)throw new o(this.id+" queryDepositAddress "+a);if("XRP"===t){let e=a.split(" ");a=e[0],n=e[1]}return{currency:s,address:a,tag:n,info:r}}async createDepositAddress(e,t={}){return await this.queryDepositAddress("New",e,t)}async fetchDepositAddress(e,t={}){return await this.queryDepositAddress("Deposit",e,t)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));let a=await this.privatePostOpenOrders();return this.parseOrders(a.orders,r,t,i)}async fetchOrderTrades(e,t,i,s,r={}){if(void 0===t)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();let o=this.market(t),n=await this.privatePostTradeHistory(this.extend({currencyPair:o.id,orderNumber:e},r));return this.parseTrades(n.trades,o,i,s)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchMyTrades requires symbol param");await this.loadMarkets();let a=this.market(e),o=a.id,n=await this.privatePostTradeHistory(this.extend({currencyPair:o},s));return this.parseTrades(n.trades,a,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a={currency:this.currency(e).id,amount:t,address:i};return void 0!==s&&(a.address+=" "+s),{info:await this.privatePostWithdraw(this.extend(a,r)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){let o="private"===t?t+"/":"",n=this.urls.api[t]+this.version+"/1/"+o+this.implodeParams(e,s),d=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials();let e={nonce:this.nonce()};a=this.urlencode(this.extend(e,d));let t=this.hmac(this.encode(a),this.encode(this.secret),"sha512");r={Key:this.apiKey,Sign:t,"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:a,headers:r}}async fetchTransactionsByType(e,t,i,s,r={}){await this.loadMarkets();const a={};void 0!==i&&(a.start=i);const o=this.privatePostDepositswithdrawals(this.extend(a,r));let n=void 0;if(void 0===e){const e=this.safeValue(o,"deposits",[]),t=this.safeValue(o,"withdraws",[]);n=this.arrayConcat(e,t)}else n=this.safeValue(o,e,[]);let d=void 0;return void 0!==t&&(d=this.currency(t)),this.parseTransactions(n,d,i,s)}async fetchTransactions(e,t,i,s={}){return await this.fetchTransactionsByType(void 0,e,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsByType("deposits",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsByType("withdraws",e,t,i,s)}parseTransaction(e,t){let i=void 0,s=this.safeString(e,"currency");void 0===(t=this.safeValue(this.currencies_by_id,s))&&(i=this.commonCurrencyCode(s)),void 0!==t&&(i=t.code);const r=this.safeString(e,"id"),a=this.safeString(e,"txid"),o=this.safeFloat(e,"amount"),n=this.safeString(e,"address");let d=this.safeInteger(e,"timestamp");return void 0!==d&&(d*=1e3),{info:e,id:r,txid:a,currency:i,amount:o,address:n,tag:void 0,status:this.parseTransactionStatus(this.safeString(e,"status")),type:this.parseTransactionType(r[0]),timestamp:d,datetime:this.iso8601(d),fee:void 0}}parseTransactionStatus(e){return this.safeString({PEND:"pending",REQUEST:"pending",CANCEL:"failed",DONE:"ok"},e,e)}parseTransactionType(e){return this.safeString({d:"deposit",w:"withdrawal"},e,e)}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("result"in n){let e=n.result,t=this.id+" "+this.json(n);if(void 0===e)throw new r(t);if("string"==typeof e){if("true"!==e)throw new r(t)}else if(!e)throw new r(t)}return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"gemini",name:"Gemini",countries:["US"],rateLimit:1500,version:"v1",has:{fetchDepositAddress:!1,createDepositAddress:!0,CORS:!1,fetchBidsAsks:!1,fetchTickers:!1,fetchMyTrades:!0,fetchOrder:!0,fetchOrders:!1,fetchOpenOrders:!0,fetchClosedOrders:!1,createMarketOrder:!1,withdraw:!0,fetchTransactions:!0,fetchWithdrawals:!1,fetchDeposits:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27816857-ce7be644-6096-11e7-82d6-3c257263229c.jpg",api:"https://api.gemini.com",www:"https://gemini.com",doc:["https://docs.gemini.com/rest-api","https://docs.sandbox.gemini.com"],test:"https://api.sandbox.gemini.com",fees:["https://gemini.com/fee-schedule/","https://gemini.com/transfer-fees/"]},api:{public:{get:["symbols","pubticker/{symbol}","book/{symbol}","trades/{symbol}","auction/{symbol}","auction/{symbol}/history"]},private:{post:["order/new","order/cancel","order/cancel/session","order/cancel/all","order/status","orders","mytrades","tradevolume","transfers","balances","deposit/{currency}/newAddress","withdraw/{currency}","heartbeat","transfers"]}},fees:{trading:{taker:.0035,maker:.001}}})}async fetchMarkets(e={}){let t=await this.publicGetSymbols(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s,a=r.toUpperCase(),o=a.slice(0,3),n=a.slice(3,6),d=o+"/"+n;i.push({id:s,symbol:d,base:o,quote:n,info:r})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={symbol:this.marketId(e)};void 0!==t&&(s.limit_bids=t,s.limit_asks=t);const r=await this.publicGetBookSymbol(this.extend(s,i));return this.parseOrderBook(r,void 0,"bids","asks","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetPubtickerSymbol(this.extend({symbol:i.id},t)),r=s.volume.timestamp,a=i.base,o=i.quote,n=this.safeFloat(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:parseFloat(s.volume[a]),quoteVolume:parseFloat(s.volume[o]),info:s}}parseTrade(e,t){let i=e.timestampms,s=void 0;"order_id"in e&&(s=e.order_id.toString());let r=this.safeFloat(e,"fee_amount");if(void 0!==r){let t=this.safeString(e,"fee_currency");void 0!==t&&(t in this.currencies_by_id&&(t=this.currencies_by_id[t].code),t=this.commonCurrencyCode(t)),r={cost:this.safeFloat(e,"fee_amount"),currency:t}}let a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");return{id:e.tid.toString(),order:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.type.toLowerCase(),price:a,cost:a*o,amount:o,fee:r}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradesSymbol(this.extend({symbol:r.id},s));return this.parseTrades(a,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalances(),i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.currency,a={free:parseFloat(s.available),used:0,total:parseFloat(s.amount)};a.used=a.total-a.free,i[r]=a}return this.parseBalance(i)}parseOrder(e,t){let i=e.timestampms,s=this.safeFloat(e,"original_amount"),r=this.safeFloat(e,"remaining_amount"),a=this.safeFloat(e,"executed_amount"),o="closed";e.is_live&&(o="open"),e.is_cancelled&&(o="canceled");let n=this.safeFloat(e,"price"),d=this.safeFloat(e,"avg_execution_price");0!==d&&(n=d);let c=void 0;void 0!==a&&void 0!==d&&(c=a*d);let h=this.safeString(e,"type");h="exchange limit"===h?"limit":"market buy"===h||"market sell"===h?"market":e.type;let l=void 0;if(void 0===t){let i=this.safeString(e,"symbol");i in this.markets_by_id&&(t=this.markets_by_id[i])}return void 0!==t&&(l=t.symbol),{id:e.order_id,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:o,symbol:l,type:h,side:e.side.toLowerCase(),price:n,average:d,cost:c,amount:s,filled:a,remaining:r,fee:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostOrderStatus(this.extend({order_id:e},i));return this.parseOrder(s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=await this.privatePostOrders(s),a=this.parseOrders(r,void 0,t,i);if(void 0!==e){let t=this.market(e);a=this.filterBySymbol(a,t.symbol)}return a}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"market"===t)throw new r(this.id+" allows limit orders only");let n={client_order_id:this.nonce().toString(),symbol:this.marketId(e),amount:s.toString(),price:a.toString(),side:i,type:"exchange limit"},d=await this.privatePostOrderNew(this.extend(n,o));return{info:d,id:d.order_id}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostOrderCancel({order_id:e})}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();let r=this.market(e),o={symbol:r.id};void 0!==i&&(o.limit_trades=i),void 0!==t&&(o.timestamp=parseInt(t/1e3));let n=await this.privatePostMytrades(this.extend(o,s));return this.parseTrades(n,r,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a=this.currency(e),o=await this.privatePostWithdrawCurrency(this.extend({currency:a.id,amount:t,address:i},r));return{info:o,id:this.safeString(o,"txHash")}}nonce(){return this.milliseconds()}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let r=await this.privatePostTransfers(this.extend({},s));return this.parseTransactions(r)}parseTransaction(e,t){let i=this.safeInteger(e,"timestampms"),s=void 0;if(void 0===t){let i=this.safeString(e,"currency");i in this.currencies_by_id&&(t=this.currencies_by_id[i])}void 0!==t&&(s=t.code);let r=this.safeString(e,"type");void 0!==r&&(r=r.toLowerCase());let a="pending";return e.status&&(a="ok"),{info:e,id:this.safeString(e,"eid"),txid:this.safeString(e,"txHash"),timestamp:i,datetime:this.iso8601(i),address:void 0,tag:void 0,type:r,amount:this.safeFloat(e,"amount"),currency:s,status:a,updated:void 0,fee:{cost:void 0,rate:void 0}}}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce(),t=this.extend({request:o,nonce:e},n),i=this.json(t);i=this.stringToBase64(this.encode(i));let s=this.hmac(i,this.encode(this.secret),"sha384");r={"Content-Type":"text/plain","X-GEMINI-APIKEY":this.apiKey,"X-GEMINI-PAYLOAD":this.decode(i),"X-GEMINI-SIGNATURE":s}}return{url:o=this.urls.api+o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("result"in n&&"error"===n.result)throw new r(this.id+" "+this.json(n));return n}async createDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privatePostDepositCurrencyNewAddress(this.extend({currency:i.id},t)),r=this.safeString(s,"address");return this.checkAddress(r),{currency:e,address:r,tag:void 0,info:s}}}},function(e,t,i){"use strict";const s=i(41);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"getbtc",name:"GetBTC",countries:["VC","RU"],rateLimit:1e3,urls:{logo:"https://user-images.githubusercontent.com/1294454/33801902-03c43462-dd7b-11e7-992e-077e4cd015b9.jpg",api:"https://getbtc.org/api",www:"https://getbtc.org",doc:"https://getbtc.org/api-docs.php"},has:{fetchTrades:!1,fetchOHLCV:!1},fees:{trading:{taker:.002,maker:.002}},markets:{"BTC/USD":{symbol:"BTC/USD",quote:"USD",base:"BTC",precision:{amount:8,price:8},id:"USD",limits:{amount:{max:void 0,min:1e-8},price:{max:void 0,min:1e-8}}},"BTC/EUR":{symbol:"BTC/EUR",quote:"EUR",base:"BTC",precision:{amount:8,price:8},id:"EUR",limits:{amount:{max:void 0,min:1e-8},price:{max:void 0,min:1e-8}}},"BTC/RUB":{symbol:"BTC/RUB",quote:"RUB",base:"BTC",precision:{amount:8,price:8},id:"RUB",limits:{amount:{max:void 0,min:1e-8},price:{max:void 0,min:1e-8}}}}})}}},function(e,t,i){"use strict";const s=i(14),{PermissionDenied:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"hadax",name:"HADAX",countries:["CN"],hostname:"api.hadax.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/38059952-4756c49e-32f1-11e8-90b9-45c1eccba9cd.jpg",api:{market:"https://api.hadax.com",public:"https://api.hadax.com",private:"https://api.hadax.com"},www:"https://www.hadax.com",doc:"https://github.com/huobiapi/API_Docs/wiki"},has:{fetchCurrencies:!1},api:{public:{get:["hadax/common/symbols","hadax/common/currencys","common/timestamp","hadax/settings/currencys"]},private:{get:["account/accounts","hadax/account/accounts/{id}/balance","order/orders/{id}","order/orders/{id}/matchresults","order/orders","order/matchresults","dw/withdraw-virtual/addresses","dw/deposit-virtual/addresses","query/deposit-withdraw","margin/loan-orders","margin/accounts/balance"],post:["hadax/order/orders/place","order/orders","order/orders/{id}/place","order/orders/{id}/submitcancel","order/orders/batchcancel","dw/balance/transfer","dw/withdraw/api/create","dw/withdraw-virtual/create","dw/withdraw-virtual/{id}/place","dw/withdraw-virtual/{id}/cancel","dw/transfer-in/margin","dw/transfer-out/margin","margin/orders","margin/orders/{id}/repay"]}},exceptions:{"not-allow-entry-hadax":r},options:{fetchMarketsMethod:"publicGetHadaxCommonSymbols",fetchBalanceMethod:"privateGetHadaxAccountAccountsIdBalance",createOrderMethod:"privatePostHadaxOrderOrdersPlace"},commonCurrencies:{FAIR:"FairGame",GET:"Themis",HOT:"Hydro Protocol"}})}}},function(e,t,i){"use strict";const s=i(14);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"huobiru",name:"Huobi Russia",countries:["RU"],hostname:"www.huobi.com.ru",urls:{logo:"https://user-images.githubusercontent.com/1294454/52978816-e8552e00-33e3-11e9-98ed-845acfece834.jpg",api:{market:"https://www.huobi.com.ru/api",public:"https://www.huobi.com.ru/api",private:"https://www.huobi.com.ru/api",zendesk:"https://huobiglobal.zendesk.com/hc/en-us/articles"},www:"https://www.huobi.com.ru/ru-ru",referral:"https://www.huobi.com.ru/invite?invite_code=esc74",doc:"https://github.com/cloudapidoc/API_Docs_en",fees:"https://www.huobi.com.ru/ru-ru/about/fee/"}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,AuthenticationError:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"ice3x",name:"ICE3X",countries:["ZA"],rateLimit:1e3,version:"v1",has:{fetchCurrencies:!0,fetchTickers:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchMyTrades:!0,fetchDepositAddress:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/38012176-11616c32-3269-11e8-9f05-e65cf885bb15.jpg",api:"https://ice3x.com/api",www:["https://ice3x.com","https://ice3x.co.za"],doc:"https://ice3x.co.za/ice-cubed-bitcoin-exchange-api-documentation-1-june-2017",fees:["https://help.ice3.com/support/solutions/articles/11000033293-trading-fees","https://help.ice3.com/support/solutions/articles/11000033288-fees-explained","https://help.ice3.com/support/solutions/articles/11000008131-what-are-your-fiat-deposit-and-withdrawal-fees-","https://help.ice3.com/support/solutions/articles/11000033289-deposit-fees"],referral:"https://ice3x.com?ref=14341802"},api:{public:{get:["currency/list","currency/info","pair/list","pair/info","stats/marketdepthfull","stats/marketdepthbtcav","stats/marketdepth","orderbook/info","trade/list","trade/info"]},private:{post:["balance/list","balance/info","order/new","order/cancel","order/list","order/info","trade/list","trade/info","transaction/list","transaction/info","invoice/list","invoice/info","invoice/pdf"]}},fees:{trading:{maker:.01,taker:.01}},precision:{amount:8,price:8}})}async fetchCurrencies(e={}){let t=(await this.publicGetCurrencyList(e)).response.entities,i=this.precision.amount,s={};for(let e=0;e<t.length;e++){let r=t[e],a=this.safeString(r,"currency_id"),o=this.safeString(r,"iso");o=o.toUpperCase(),s[o=this.commonCurrencyCode(o)]={id:a,code:o,name:r.name,active:!0,precision:i,limits:{amount:{min:void 0,max:Math.pow(10,i)},price:{min:Math.pow(10,-i),max:Math.pow(10,i)},cost:{min:void 0,max:void 0}},info:r}}return s}async fetchMarkets(e={}){Object.keys(this.currencies).length||(this.currencies=await this.fetchCurrencies()),this.currencies_by_id=this.indexBy(this.currencies,"id");let t=(await this.publicGetPairList()).response.entities,i=[];for(let e=0;e<t.length;e++){let s=t[e],r=this.safeString(s,"pair_id"),a=this.safeString(s,"currency_id_from"),o=this.safeString(s,"currency_id_to"),n=this.currencies_by_id[a],d=this.currencies_by_id[o],c=this.commonCurrencyCode(n.code),h=this.commonCurrencyCode(d.code),l=c+"/"+h;i.push({id:r,symbol:l,base:c,quote:h,baseId:a,quoteId:o,active:!0,info:s})}return i}parseTicker(e,t){let i=this.milliseconds(),s=t.symbol,r=this.safeFloat(e,"last_price");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"max"),low:this.safeFloat(e,"min"),bid:this.safeFloat(e,"max_bid"),bidVolume:void 0,ask:this.safeFloat(e,"min_ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:void 0,quoteVolume:this.safeFloat(e,"vol"),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetStatsMarketdepthfull(this.extend({pair_id:i.id},t));return this.parseTicker(s.response.entity,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=(await this.publicGetStatsMarketdepthfull(t)).response.entities,s={};for(let e=0;e<i.length;e++){let t=i[e],r=this.safeString(t,"pair_id"),a=this.safeValue(this.marketsById,r);if(void 0!==a){s[a.symbol]=this.parseTicker(t,a)}}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={pair_id:this.marketId(e)};if(void 0!==t){let e=this.safeString(i,"type");if("ask"!==e&&"bid"!==e)throw new r(this.id+" fetchOrderBook requires an exchange-specific extra 'type' param ('bid' or 'ask') when used with a limit");s.items_per_page=t}let a=(await this.publicGetOrderbookInfo(this.extend(s,i))).response.entities;return this.parseOrderBook(a,void 0,"bids","asks","price","amount")}parseTrade(e,t){let i=1e3*parseInt(e.created),s=this.safeFloat(e,"price"),r=this.safeFloat(e,"volume"),a=t.symbol,o=parseFloat(this.costToPrecision(a,s*r)),n=this.safeFloat(e,"fee");return n&&(n={cost:n,currency:t.quote}),{timestamp:i,datetime:this.iso8601(i),symbol:a,id:this.safeString(e,"trade_id"),order:void 0,type:"limit",side:e.type,price:s,amount:r,cost:o,fee:n,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=(await this.publicGetTradeList(this.extend({pair_id:r.id},s))).response.entities;return this.parseTrades(a,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalanceList(e),i={info:t},s=t.response.entities;for(let e=0;e<s.length;e++){let t=s[e],r=t.currency_id;if(r in this.currencies_by_id){i[this.currencies_by_id[r].code]={free:0,used:0,total:parseFloat(t.balance)}}}return this.parseBalance(i)}parseOrder(e,t){let i=this.safeInteger(e,"pair_id"),s=void 0;i&&!t&&i in this.marketsById&&(s=(t=this.marketsById[i]).symbol);let r=1e3*this.safeInteger(e,"created"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"volume"),n=this.safeInteger(e,"active"),d=this.safeFloat(e,"remaining"),c=void 0;1===n?n="open":(n="closed",d=0,c=o);let h=this.safeFloat(e,"fee");return h&&(h={cost:h},t&&(h.currency=t.quote)),{id:this.safeString(e,"order_id"),datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:n,symbol:s,type:"limit",side:e.type,price:a,cost:void 0,amount:o,filled:c,remaining:d,trades:void 0,fee:h,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n=await this.privatePostOrderNew(this.extend({pair_id:o.id,type:i,amount:s,price:r},a)),d=this.parseOrder({order_id:n.response.entity.order_id,created:this.seconds(),active:1,type:i,price:r,volume:s,remaining:s,info:n},o),c=d.id;return this.orders[c]=d,d}async cancelOrder(e,t,i={}){return await this.privatePostOrderCancel(this.extend({order_id:e},i))}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostOrderInfo(this.extend({"order _id":e},i));return this.parseOrder(s.response.entity)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=(await this.privatePostOrderList()).response.entities;return this.parseOrders(r,void 0,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={pair_id:r.id};void 0!==i&&(a.items_per_page=i),void 0!==t&&(a.date_from=parseInt(t/1e3));let o=(await this.privatePostTradeList(this.extend(a,s))).response.entities;return this.parseTrades(o,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privatePostBalanceInfo(this.extend({currency_id:i.id},t)),r=s.response.entity,a=this.safeString(r,"address");return{currency:e,address:a,tag:void 0,status:a?"ok":"none",info:s}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;return"public"===t?Object.keys(s).length&&(o+="?"+this.urlencode(s)):(this.checkRequiredCredentials(),a=this.urlencode(this.extend({nonce:this.nonce()},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},o,n){let d=await this.fetch2(e,t,i,s,o,n),c=this.safeValue(d,"errors"),h=this.safeValue(d,"response");if(c||!h){let e=["Key","user_id","Sign"];for(let t=0;t<e.length;t++){let i=e[t],s=this.safeString(c,i);if(s&&!("user_id"===i&&s.indexOf("authorization")<0))throw new a(s)}throw new r(this.json(c))}return d}}},function(e,t,i){"use strict";const s=i(1);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"independentreserve",name:"Independent Reserve",countries:["AU","NZ"],rateLimit:1e3,has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/30521662-cf3f477c-9bcb-11e7-89bc-d1ac85012eda.jpg",api:{public:"https://api.independentreserve.com/Public",private:"https://api.independentreserve.com/Private"},www:"https://www.independentreserve.com",doc:"https://www.independentreserve.com/API"},api:{public:{get:["GetValidPrimaryCurrencyCodes","GetValidSecondaryCurrencyCodes","GetValidLimitOrderTypes","GetValidMarketOrderTypes","GetValidOrderTypes","GetValidTransactionTypes","GetMarketSummary","GetOrderBook","GetTradeHistorySummary","GetRecentTrades","GetFxRates"]},private:{post:["PlaceLimitOrder","PlaceMarketOrder","CancelOrder","GetOpenOrders","GetClosedOrders","GetClosedFilledOrders","GetOrderDetails","GetAccounts","GetTransactions","GetDigitalCurrencyDepositAddress","GetDigitalCurrencyDepositAddresses","SynchDigitalCurrencyDepositAddressWithBlockchain","WithdrawDigitalCurrency","RequestFiatWithdrawal","GetTrades"]}},fees:{trading:{taker:.005,maker:.005,percentage:!0,tierBased:!1}}})}async fetchMarkets(e={}){let t=await this.publicGetGetValidPrimaryCurrencyCodes(),i=await this.publicGetGetValidSecondaryCurrencyCodes(),s=[];for(let e=0;e<t.length;e++){let r=t[e],a=r.toUpperCase(),o=this.commonCurrencyCode(a);for(let e=0;e<i.length;e++){let t=i[e],a=t.toUpperCase(),n=this.commonCurrencyCode(a),d=r+"/"+t,c=o+"/"+n;s.push({id:d,symbol:c,base:o,quote:n,baseId:r,quoteId:t,info:d})}}return s}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostGetAccounts(),i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.CurrencyCode.toUpperCase(),a=this.commonCurrencyCode(r),o=this.account();o.free=s.AvailableBalance,o.total=s.TotalBalance,o.used=o.total-o.free,i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r=await this.publicGetGetOrderBook(this.extend({primaryCurrencyCode:s.baseId,secondaryCurrencyCode:s.quoteId},i)),a=this.parse8601(r.CreatedTimestampUtc);return this.parseOrderBook(r,a,"BuyOrders","SellOrders","Price","Volume")}parseTicker(e,t){let i=this.parse8601(e.CreatedTimestampUtc),s=void 0;t&&(s=t.symbol);let r=e.LastPrice;return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:e.DayHighestPrice,low:e.DayLowestPrice,bid:e.CurrentHighestBidPrice,bidVolume:void 0,ask:e.CurrentLowestOfferPrice,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:e.DayAvgPrice,baseVolume:e.DayVolumeXbtInSecondaryCurrrency,quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetGetMarketSummary(this.extend({primaryCurrencyCode:i.baseId,secondaryCurrencyCode:i.quoteId},t));return this.parseTicker(s,i)}parseOrder(e,t){let i=void 0;void 0===t?i=t.symbol:t=this.findMarket(e.PrimaryCurrencyCode+"/"+e.SecondaryCurrencyCode);let s=this.safeValue(e,"Type");s.indexOf("Market")>=0?s="market":s.indexOf("Limit")>=0&&(s="limit");let r=void 0;s.indexOf("Bid")>=0?r="buy":s.indexOf("Offer")>=0&&(r="sell");let a=this.parse8601(e.CreatedTimestampUtc),o=this.safeFloat(e,"VolumeOrdered");void 0===o&&(o=this.safeFloat(e,"Volume"));let n=this.safeFloat(e,"VolumeFilled"),d=void 0,c=this.safeFloat(e,"FeePercent"),h=void 0;void 0!==o&&void 0!==n&&(d=o-n,void 0!==c&&(h=c*n));let l=void 0;void 0!==t&&(i=t.symbol,l=t.base);let u={rate:c,cost:h,currency:l},p=e.OrderGuid,m=this.parseOrderStatus(this.safeString(e,"Status")),f=this.safeFloat(e,"Value"),y=this.safeFloat(e,"AvgPrice"),b=this.safeFloat(e,"Price",y);return{info:e,id:p,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:i,type:s,side:r,price:b,cost:f,average:y,amount:o,filled:n,remaining:d,status:m,fee:u}}parseOrderStatus(e){let t={Open:"open",PartiallyFilled:"open",Filled:"closed",PartiallyFilledAndCancelled:"canceled",Cancelled:"canceled",PartiallyFilledAndExpired:"canceled",Expired:"canceled"};return e in t?t[e]:e}async fetchOrder(e,t,i={}){await this.loadMarkets();const s=await this.privatePostGetOrderDetails(this.extend({orderGuid:e},i));let r=void 0;return void 0!==t&&(r=this.market(t)),this.parseOrder(s,r)}async fetchMyTrades(e,t,i=50,s={}){await this.loadMarkets();let r=this.safeInteger(s,"pageIndex",1);void 0===i&&(i=50);const a=this.ordered({pageIndex:r,pageSize:i}),o=await this.privatePostGetTrades(this.extend(a,s));let n=void 0;return void 0!==e&&(n=this.market(e)),this.parseTrades(o.Data,n,t,i)}parseTrade(e,t){let i=this.parse8601(e.TradeTimestampUtc),s=this.safeString(e,"TradeGuid"),r=this.safeString(e,"OrderGuid"),a=this.safeFloat(e,"Price");void 0===a&&(a=this.safeFloat(e,"SecondaryCurrencyTradePrice"));let o=this.safeFloat(e,"VolumeTraded");void 0===o&&(o=this.safeFloat(e,"PrimaryCurrencyAmount"));let n=void 0;void 0!==t&&(n=t.symbol);let d=this.safeString(e,"OrderType");return void 0!==d&&(d.indexOf("Bid")>=0?d="buy":d.indexOf("Offer")>=0&&(d="sell")),{id:s,info:e,timestamp:i,datetime:this.iso8601(i),symbol:n,order:r,type:void 0,side:d,price:a,amount:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetGetRecentTrades(this.extend({primaryCurrencyCode:r.baseId,secondaryCurrencyCode:r.quoteId,numberOfRecentTradesToRetrieve:50},s));return this.parseTrades(a.Trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n=this.capitalize(t),d="privatePostPlace"+n+"Order",c=n;c+="sell"===i?"Offer":"Bid";let h=this.ordered({primaryCurrencyCode:o.baseId,secondaryCurrencyCode:o.quoteId,orderType:c});"limit"===t&&(h.price=r),h.volume=s;let l=await this[d](this.extend(h,a));return{info:l,id:l.OrderGuid}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelOrder({orderGuid:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce(),t=[o,"apiKey="+this.apiKey,"nonce="+e.toString()],i=Object.keys(s);for(let e=0;e<i.length;e++){let r=i[e],a=s[r].toString();t.push(r+"="+a)}let n=t.join(","),d=this.hmac(this.encode(n),this.encode(this.secret)),c=this.ordered({});c.apiKey=this.apiKey,c.nonce=e,c.signature=d.toUpperCase();for(let e=0;e<i.length;e++){let t=i[e];c[t]=s[t]}a=this.json(c),r={"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,InsufficientFunds:o,InvalidOrder:n,OrderNotFound:d,AuthenticationError:c}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"indodax",name:"INDODAX",countries:["ID"],has:{CORS:!1,createMarketOrder:!1,fetchTickers:!1,fetchOrder:!0,fetchOrders:!1,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchMyTrades:!1,fetchCurrencies:!1,withdraw:!0},version:"1.8",urls:{logo:"https://user-images.githubusercontent.com/1294454/37443283-2fddd0e4-281c-11e8-9741-b4f1419001b5.jpg",api:{public:"https://indodax.com/api",private:"https://indodax.com/tapi"},www:"https://www.indodax.com",doc:"https://indodax.com/downloads/BITCOINCOID-API-DOCUMENTATION.pdf",referral:"https://indodax.com/ref/testbitcoincoid/1"},api:{public:{get:["{pair}/ticker","{pair}/trades","{pair}/depth"]},private:{post:["getInfo","transHistory","trade","tradeHistory","getOrder","openOrders","cancelOrder","orderHistory","withdrawCoin"]}},markets:{"BTC/IDR":{id:"btc_idr",symbol:"BTC/IDR",base:"BTC",quote:"IDR",baseId:"btc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1e-4,max:void 0}}},"ACT/IDR":{id:"act_idr",symbol:"ACT/IDR",base:"ACT",quote:"IDR",baseId:"act",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"ADA/IDR":{id:"ada_idr",symbol:"ADA/IDR",base:"ADA",quote:"IDR",baseId:"ada",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"BCD/IDR":{id:"bcd_idr",symbol:"BCD/IDR",base:"BCD",quote:"IDR",baseId:"bcd",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"BCH/IDR":{id:"bch_idr",symbol:"BCH/IDR",base:"BCH",quote:"IDR",baseId:"bch",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.001,max:void 0}}},"BTG/IDR":{id:"btg_idr",symbol:"BTG/IDR",base:"BTG",quote:"IDR",baseId:"btg",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"BTS/IDR":{id:"bts_idr",symbol:"BTS/IDR",base:"BTS",quote:"IDR",baseId:"bts",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"DASH/IDR":{id:"drk_idr",symbol:"DASH/IDR",base:"DASH",quote:"IDR",baseId:"drk",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"DOGE/IDR":{id:"doge_idr",symbol:"DOGE/IDR",base:"DOGE",quote:"IDR",baseId:"doge",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1e3,max:void 0}}},"ETH/IDR":{id:"eth_idr",symbol:"ETH/IDR",base:"ETH",quote:"IDR",baseId:"eth",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"ETC/IDR":{id:"etc_idr",symbol:"ETC/IDR",base:"ETC",quote:"IDR",baseId:"etc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"GSC/IDR":{id:"gsc_idr",symbol:"GSC/IDR",base:"GSC",quote:"IDR",baseId:"gsc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"IGNIS/IDR":{id:"ignis_idr",symbol:"IGNIS/IDR",base:"IGNIS",quote:"IDR",baseId:"ignis",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1,max:void 0}}},"LTC/IDR":{id:"ltc_idr",symbol:"LTC/IDR",base:"LTC",quote:"IDR",baseId:"ltc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.01,max:void 0}}},"NPXS/IDR":{id:"npxs_idr",symbol:"NPXS/IDR",base:"NPXS",quote:"IDR",baseId:"npxs",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1,max:void 0}}},"NXT/IDR":{id:"nxt_idr",symbol:"NXT/IDR",base:"NXT",quote:"IDR",baseId:"nxt",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"STQ/IDR":{id:"stq_idr",symbol:"STQ/IDR",base:"STQ",quote:"IDR",baseId:"stq",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"TEN/IDR":{id:"ten_idr",symbol:"TEN/IDR",base:"TEN",quote:"IDR",baseId:"ten",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:5,max:void 0}}},"TRX/IDR":{id:"trx_idr",symbol:"TRX/IDR",base:"TRX",quote:"IDR",baseId:"trx",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:void 0,max:void 0}}},"WAVES/IDR":{id:"waves_idr",symbol:"WAVES/IDR",base:"WAVES",quote:"IDR",baseId:"waves",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"XEM/IDR":{id:"nem_idr",symbol:"XEM/IDR",base:"XEM",quote:"IDR",baseId:"nem",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:1,max:void 0}}},"XLM/IDR":{id:"str_idr",symbol:"XLM/IDR",base:"XLM",quote:"IDR",baseId:"str",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:20,max:void 0}}},"XRP/IDR":{id:"xrp_idr",symbol:"XRP/IDR",base:"XRP",quote:"IDR",baseId:"xrp",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:10,max:void 0}}},"XZC/IDR":{id:"xzc_idr",symbol:"XZC/IDR",base:"XZC",quote:"IDR",baseId:"xzc",quoteId:"idr",precision:{amount:8,price:0},limits:{amount:{min:.1,max:void 0}}},"BTS/BTC":{id:"bts_btc",symbol:"BTS/BTC",base:"BTS",quote:"BTC",baseId:"bts",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"DASH/BTC":{id:"drk_btc",symbol:"DASH/BTC",base:"DASH",quote:"BTC",baseId:"drk",quoteId:"btc",precision:{amount:8,price:6},limits:{amount:{min:.01,max:void 0}}},"DOGE/BTC":{id:"doge_btc",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC",baseId:"doge",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:1,max:void 0}}},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",precision:{amount:8,price:5},limits:{amount:{min:.001,max:void 0}}},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc",precision:{amount:8,price:6},limits:{amount:{min:.01,max:void 0}}},"NXT/BTC":{id:"nxt_btc",symbol:"NXT/BTC",base:"NXT",quote:"BTC",baseId:"nxt",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"TEN/BTC":{id:"ten_btc",symbol:"TEN/BTC",base:"TEN",quote:"BTC",baseId:"ten",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"XEM/BTC":{id:"nem_btc",symbol:"XEM/BTC",base:"XEM",quote:"BTC",baseId:"nem",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:1,max:void 0}}},"XLM/BTC":{id:"str_btc",symbol:"XLM/BTC",base:"XLM",quote:"BTC",baseId:"str",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}},"XRP/BTC":{id:"xrp_btc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"xrp",quoteId:"btc",precision:{amount:8,price:8},limits:{amount:{min:.01,max:void 0}}}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:.003}}})}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetInfo()).return,i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=this.currencies[r].id,o=this.account();o.free=this.safeFloat(t.balance,a,0),o.used=this.safeFloat(t.balance_hold,a,0),o.total=this.sum(o.free,o.used),i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetPairDepth(this.extend({pair:this.marketId(e)},i));return this.parseOrderBook(s,void 0,"buy","sell")}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetPairTicker(this.extend({pair:i.id},t))).ticker,r=1e3*this.safeFloat(s,"server_time"),a="vol_"+i.baseId.toLowerCase(),o="vol_"+i.quoteId.toLowerCase(),n=this.safeFloat(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"buy"),bidVolume:void 0,ask:this.safeFloat(s,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,a),quoteVolume:this.safeFloat(s,o),info:s}}parseTrade(e,t){let i=1e3*parseInt(e.date);return{id:e.tid,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.type,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetPairTrades(this.extend({pair:r.id},s));return this.parseTrades(a,r,t,i)}parseOrder(e,t){let i=void 0;"type"in e&&(i=e.type);let s=this.safeString(e,"status","open");"filled"===s?s="closed":"calcelled"===s&&(s="canceled");let r=void 0,a=void 0,o=this.safeFloat(e,"price"),n=void 0,d=void 0,c=void 0;if(void 0!==t){r=t.symbol;let i=t.quoteId,s=t.baseId;if("idr"===t.quoteId&&"order_rp"in e&&(i="rp"),"idr"===t.baseId&&"remain_rp"in e&&(s="rp"),a=this.safeFloat(e,"order_"+i)){n=a/o;let t=this.safeFloat(e,"remain_"+i);void 0!==t&&(c=n-(d=t/o))}else a=o*(n=this.safeFloat(e,"order_"+s)),c=n-(d=this.safeFloat(e,"remain_"+s))}let h=void 0;c&&(h=a/c);let l=parseInt(e.submit_time);return{info:e,id:e.order_id,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,symbol:r,type:"limit",side:i,price:o,cost:a,average:h,amount:n,filled:c,remaining:d,status:s,fee:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" fetchOrder requires a symbol");await this.loadMarkets();let s=this.market(t),a=await this.privatePostGetOrder(this.extend({pair:s.id,order_id:e},i)),o=a.return,n=this.parseOrder(this.extend({id:e},o.order),s);return this.extend({info:a},n)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.pair=r.id);let o=(await this.privatePostOpenOrders(this.extend(a,s))).return.orders;if(!o)return[];if(void 0!==e)return this.parseOrders(o,r,t,i);let n=Object.keys(o),d=[];for(let e=0;e<n.length;e++){let s=n[e],a=o[s];r=this.markets_by_id[s];let c=this.parseOrders(a,r,t,i);d=this.arrayConcat(d,c)}return d}async fetchClosedOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOrders requires a symbol");await this.loadMarkets();let a={},o=void 0;void 0!==e&&(o=this.market(e),a.pair=o.id);let n=await this.privatePostOrderHistory(this.extend(a,s)),d=this.parseOrders(n.return.orders,o,t,i);return d=this.filterBy(d,"status","closed"),void 0!==e?this.filterBySymbol(d,e):d}async createOrder(e,t,i,s,a,o={}){if("limit"!==t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();let n=this.market(e),d={pair:n.id,type:i,price:a},c=n.baseId;"buy"===i?d[n.quoteId]=s*a:d[n.baseId]=s,d[c]=s;let h=await this.privatePostTrade(this.extend(d,o));return{info:h,id:h.return.order_id.toString()}}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder requires a symbol argument");if(void 0===this.safeValue(i,"side"))throw new r(this.id+' cancelOrder requires an extra "side" param');await this.loadMarkets();let s=this.market(t);return await this.privatePostCancelOrder(this.extend({order_id:e,pair:s.id,type:i.side},i))}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a=this.currency(e),o=this.milliseconds(),n={currency:a.id,withdraw_amount:t,withdraw_address:i,request_id:o.toString()};s&&(n.withdraw_memo=s);let d=await this.privatePostWithdrawCoin(this.extend(n,r)),c=void 0;return"txid"in d&&d.txid.length>0&&(c=d.txid),{info:d,id:c}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t];return"public"===t?o+="/"+this.implodeParams(e,s):(this.checkRequiredCredentials(),a=this.urlencode(this.extend({method:e,nonce:this.nonce()},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,h,l){if("string"!=typeof h)return;if(Array.isArray(l))return;if(!("success"in l))return;if(1===l.success){if("return"in l)return;throw new r(this.id+": malformed response: "+this.json(l))}let u=l.error,p=this.id+" "+this.json(l);if("Insufficient balance."===u)throw new o(p);if("invalid order."===u)throw new d(p);if(u.indexOf("Minimum price ")>=0)throw new n(p);if(u.indexOf("Minimum order ")>=0)throw new n(p);if("Invalid credentials. API not found or session has expired."===u)throw new c(p);if("Invalid credentials. Bad sign."===u)throw new c(p);throw new r(this.id+": unknown error: "+this.json(l))}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,AuthenticationError:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"itbit",name:"itBit",countries:["US"],rateLimit:2e3,version:"v1",has:{CORS:!0,createMarketOrder:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27822159-66153620-60ad-11e7-89e7-005f6d7f3de0.jpg",api:"https://api.itbit.com",www:"https://www.itbit.com",doc:["https://api.itbit.com/docs","https://www.itbit.com/api"]},api:{public:{get:["markets/{symbol}/ticker","markets/{symbol}/order_book","markets/{symbol}/trades"]},private:{get:["wallets","wallets/{walletId}","wallets/{walletId}/balances/{currencyCode}","wallets/{walletId}/funding_history","wallets/{walletId}/trades","wallets/{walletId}/orders","wallets/{walletId}/orders/{id}"],post:["wallet_transfers","wallets","wallets/{walletId}/cryptocurrency_deposits","wallets/{walletId}/cryptocurrency_withdrawals","wallets/{walletId}/orders","wire_withdrawal"],delete:["wallets/{walletId}/orders/{id}"]}},markets:{"BTC/USD":{id:"XBTUSD",symbol:"BTC/USD",base:"BTC",quote:"USD"},"BTC/SGD":{id:"XBTSGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD"},"BTC/EUR":{id:"XBTEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR"}},fees:{trading:{maker:-3e-4,taker:.35/100}},commonCurrencies:{XBT:"BTC"}})}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetMarketsSymbolOrderBook(this.extend({symbol:this.marketId(e)},i));return this.parseOrderBook(s)}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.publicGetMarketsSymbolTicker(this.extend({symbol:this.marketId(e)},t)),s=this.safeString(i,"serverTimeUTC");if(!s)throw new r(this.id+" fetchTicker returned a bad response: "+this.json(i));let a=this.parse8601(s),o=this.safeFloat(i,"vwap24h"),n=this.safeFloat(i,"volume24h"),d=void 0;void 0!==n&&void 0!==o&&(d=n*o);let c=this.safeFloat(i,"lastPrice");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(i,"high24h"),low:this.safeFloat(i,"low24h"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:o,open:this.safeFloat(i,"openToday"),close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:n,quoteVolume:d,info:i}}parseTrade(e,t){const i=this.safeString2(e,"executionId","matchNumber"),s=this.parse8601(this.safeString(e,"timestamp")),r=this.safeString(e,"direction"),a=this.safeString(e,"orderId");let o=this.safeFloat(e,"commissionPaid");const n=this.safeString(e,"commissionCurrency"),d=this.commonCurrencyCode(n);let c=this.safeFloat(e,"rebatesApplied");void 0!==c&&(c=-c);const h=this.safeString(e,"rebateCurrency"),l=this.commonCurrencyCode(h),u=this.safeFloat2(e,"price","rate"),p=this.safeFloat2(e,"currency1Amount","amount");let m=void 0;void 0!==u&&void 0!==p&&(m=u*p);let f=void 0;const y=this.safeString(e,"instrument");if(void 0!==y)if(y in this.markets_by_id)t=this.markets_by_id[y];else{const t=this.safeString(e,"currency1"),i=this.safeString(e,"currency2");f=this.commonCurrencyCode(t)+"/"+this.commonCurrencyCode(i)}void 0===f&&void 0!==t&&(f=t.symbol);const b={info:e,id:i,timestamp:s,datetime:this.iso8601(s),symbol:f,order:a,type:void 0,side:r,price:u,amount:p,cost:m};return void 0!==o&&(void 0!==c?d===l?(o=this.sum(o,c),b.fee={cost:o,currency:d}):b.fees=[{cost:o,currency:d},{cost:c,currency:l}]:b.fee={cost:o,currency:d}),b}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const a=this.safeString(s,"walletId");if(void 0===a)throw new r(this.id+" fetchMyTrades requires a walletId parameter");await this.loadMarkets();const o={walletId:a};void 0!==t&&(o.rangeStart=this.ymdhms(t,"T")),void 0!==i&&(o.perPage=i);const n=await this.privateGetWalletsWalletIdTrades(this.extend(o,s)),d=this.safeValue(n,"tradingHistory",[]);let c=void 0;return void 0!==e&&(c=this.market(e)),this.parseTrades(d,c,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={symbol:r.id},o=await this.publicGetMarketsSymbolTrades(this.extend(a,s)),n=this.safeValue(o,"recentTrades",[]);return this.parseTrades(n,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.fetchWallets(e),i=t[0].balances,s={info:t};for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"currency"),a=this.commonCurrencyCode(r);let o={free:this.safeFloat(t,"availableBalance"),used:0,total:this.safeFloat(t,"totalBalance")};o.used=o.total-o.free,s[a]=o}return this.parseBalance(s)}async fetchWallets(e={}){if(!this.uid)throw new a(this.id+" fetchWallets requires uid API credential");let t={userId:this.uid};return this.privateGetWallets(this.extend(t,e))}async fetchWallet(e,t={}){let i={walletId:e};return this.privateGetWalletsWalletId(this.extend(i,t))}async fetchOpenOrders(e,t,i,s={}){return this.fetchOrders(e,t,i,this.extend({status:"open"},s))}async fetchClosedOrders(e,t,i,s={}){return this.fetchOrders(e,t,i,this.extend({status:"filled"},s))}async fetchOrders(e,t,i,s={}){if(!("walletId"in s))throw new r(this.id+" fetchOrders requires a walletId parameter");let a=s.walletId,o=await this.privateGetWalletsWalletIdOrders(this.extend({walletId:a},s));return this.parseOrders(o,void 0,t,i)}parseOrder(e,t){let i=e.side,s=e.type,r=this.markets_by_id[e.instrument].symbol,a=this.parse8601(e.createdTime),o=this.safeFloat(e,"amount"),n=this.safeFloat(e,"amountFilled"),d=o-n,c=this.safeFloat(e,"price"),h=c*this.safeFloat(e,"volumeWeightedAveragePrice");return{id:e.id,info:e,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,status:e.status,symbol:r,type:s,side:i,price:c,cost:h,amount:o,filled:n,remaining:d,fee:void 0}}nonce(){return this.milliseconds()}async createOrder(e,t,i,s,a,o={}){if("market"===t)throw new r(this.id+" allows limit orders only");if(!("walletId"in o))throw new r(this.id+" createOrder requires a walletId parameter");s=s.toString(),a=a.toString();let n=this.market(e),d={side:i,type:t,currency:n.id.replace(n.quote,""),amount:s,display:s,price:a,instrument:n.id},c=await this.privatePostWalletsWalletIdOrders(this.extend(d,o));return{info:c,id:c.id}}async fetchOrder(e,t,i={}){if(!("walletId"in i))throw new r(this.id+" fetchOrder requires a walletId parameter");const s={id:e},a=await this.privateGetWalletsWalletIdOrdersId(this.extend(s,i));return this.parseOrder(a)}async cancelOrder(e,t,i={}){if(!("walletId"in i))throw new r(this.id+" cancelOrder requires a walletId parameter");return await this.privateDeleteWalletsWalletIdOrdersId(this.extend({id:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n)),a="POST"===i&&Object.keys(n).length?this.json(n):"","private"===t){this.checkRequiredCredentials();let e=this.nonce().toString(),t=e,s=[i,o,a,e,t],n=e+this.json(s).replace("\\/","/"),d=this.hash(this.encode(n),"sha256","binary"),c=this.stringToBinary(this.encode(o)),h=this.binaryConcat(c,d),l=this.hmac(h,this.encode(this.secret),"sha512","base64");r={Authorization:this.apiKey+":"+l,"Content-Type":"application/json","X-Auth-Timestamp":t,"X-Auth-Nonce":e}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("code"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(47);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"jubi",name:"jubi.com",countries:["CN"],rateLimit:1500,version:"v1",has:{CORS:!1,fetchTickers:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766581-9d397d9a-5edd-11e7-8fb9-5d8236c0e692.jpg",api:"https://www.jubi.com/api",www:"https://www.jubi.com",doc:"https://www.jubi.com/help/api.html"}})}async fetchMarkets(e={}){let t=await this.publicGetAllticker(),i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){let t=i[e],r=t.toUpperCase(),a="CNY",o=r+"/"+a;r=this.commonCurrencyCode(r),a=this.commonCurrencyCode(a),s.push({id:t,symbol:o,base:r,quote:a,info:t})}return s}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:r,InvalidOrder:a,OrderNotFound:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kkex",name:"KKEX",countries:["CN","US","JP"],version:"v2",has:{CORS:!1,fetchBalance:!0,fetchTickers:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchOHLCV:!0,createMarketOrder:!0,fetchOrder:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","4h":"4hour","12h":"12hour","1d":"1day","1w":"1week","1M":"1month"},urls:{logo:"https://user-images.githubusercontent.com/1294454/47401462-2e59f800-d74a-11e8-814f-e4ae17b4968a.jpg",api:{public:"https://kkex.com/api/v1",private:"https://kkex.com/api/v2",v1:"https://kkex.com/api/v1"},www:"https://kkex.com",doc:"https://kkex.com/api_wiki/cn/",fees:"https://intercom.help/kkex/fee"},api:{public:{get:["exchange_rate","products","assets","tickers","ticker","depth","trades","kline"]},private:{post:["profile","trade","batch_trade","cancel_order","cancel_all_orders","order_history","userinfo","order_info","orders_info"]},v1:{post:["process_strategy"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},options:{lastNonceTimestamp:0}})}async fetchMarkets(e={}){let t=await this.publicGetTickers(e);t=t.tickers;let i=await this.publicGetProducts(e);i=i.products;let s=[];for(let e=0;e<t.length;e++){let i=Object.keys(t[e]);s.push(i[0])}let r=[];for(let e=0;e<s.length;e++){let t=s[e],a=s[e],o="",n="",d={},c={};for(let e=0;e<i.length;e++){let t=i[e];if(t.mark_asset+t.base_asset===a){n=t.base_asset,o=t.mark_asset;let e=t.price_scale.toString().length-1;d={price:e,amount:e},(c={amount:{min:Math.max(this.safeFloat(t,"min_bid_size"),this.safeFloat(t,"min_ask_size")),max:Math.min(this.safeFloat(t,"max_bid_size"),this.safeFloat(t,"max_ask_size"))},price:{min:this.safeFloat(t,"min_price"),max:this.safeFloat(t,"max_price")}}).cost={min:this.safeFloat(t,"min_bid_amount"),max:this.safeFloat(t,"max_bid_amount")}}}let h=o.toUpperCase(),l=n.toUpperCase(),u=(h=this.commonCurrencyCode(h))+"/"+(l=this.commonCurrencyCode(l));r.push({id:t,symbol:u,base:h,quote:l,baseId:o,quoteId:n,active:!0,precision:d,limits:c,info:a})}return r}parseTicker(e,t){let i=this.safeInteger(e,"date");void 0!==i&&(i*=1e3);let s=void 0;void 0!==t&&(s=t.symbol);let r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.markets[e],s=await this.publicGetTicker(this.extend({symbol:i.id},t)),r=this.extend(s.ticker,this.omit(s,"ticker"));return this.parseTicker(r,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s=i.tickers,r={};for(let e=0;e<s.length;e++){let t=Object.keys(s[e])[0],a=this.safeValue(this.markets_by_id,t);if(void 0!==a){let o=a.symbol,n=this.extend(s[e][t],this.omit(i,"tickers"));r[o]=this.parseTicker(n,a)}}return r}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={symbol:this.marketId(e)};void 0!==t&&(s.size=t);let r=await this.publicGetDepth(this.extend(s,i));return this.parseOrderBook(r)}parseTrade(e,t){let i=this.safeInteger(e,"date_ms"),s=this.iso8601(i),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=void 0;void 0!==r&&void 0!==a&&(o=a*r);let n=void 0;void 0!==t&&(n=t.symbol);return{info:e,id:this.safeString(e,"tid"),timestamp:i,datetime:s,symbol:n,order:void 0,type:void 0,side:this.safeString(e,"type"),price:r,amount:a,cost:o,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTrades(this.extend({symbol:r.id},s));return this.parseTrades(a,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostUserinfo(),i={info:t.info},s=t.info.funds,r=Object.keys(s.free);for(let e=0;e<r.length;e++){let t=r[e],a=t.toUpperCase();a=this.commonCurrencyCode(a);let o=this.account();o.free=parseFloat(s.free[t]),o.used=parseFloat(s.freezed[t]),o.total=o.free+o.used,i[a]=o}return this.parseBalance(i)}async fetchOrder(e,t,i={}){if(!t)throw new r(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();let s=this.market(t),a={order_id:e,symbol:s.id},n=await this.privatePostOrderInfo(this.extend(a,i));if(n.result)return this.parseOrder(n.order,s);throw new o(this.id+" order "+e+" not found")}parseOHLCV(e,t,i="1m",s,r){return[parseInt(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5])]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={symbol:a.id,type:this.timeframes[t]};void 0!==i&&(o.since=i),void 0!==s&&(o.size=s);let n=await this.publicGetKline(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}parseOrderStatus(e){return this.safeString({"-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}parseOrder(e,t){let i=void 0;void 0!==t&&(i=t.symbol);let s=this.safeString(e,"side");void 0===s&&(s=this.safeString(e,"type"));let r=this.safeInteger(e,"create_date"),a=this.safeString2(e,"order_id","id"),o=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount"),c=this.safeFloat(e,"deal_amount"),h=this.safeFloat(e,"avg_price");h=this.safeFloat(e,"price_avg",h);let l=void 0,u=void 0;return void 0!==c&&(void 0!==d&&(l=d-c),void 0!==h&&(u=h*c)),{id:a,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:o,symbol:i,average:h,type:"limit",side:s,price:n,cost:u,amount:d,filled:c,remaining:l,fee:void 0,info:e}}async createOrder(e,t,i,s,r,o={}){await this.loadMarkets();let n={symbol:this.market(e).id,type:i};if("market"===t){if("buy"===i){if(this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new a(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");s*=r}n.price=this.amountToPrecision(e,s)}else n.amount=this.amountToPrecision(e,s);n.type+="_"+t}else n.amount=this.amountToPrecision(e,s),n.price=this.priceToPrecision(e,r);let d=await this.privatePostTrade(this.extend(n,o));return{info:d,id:this.safeString(d,"order_id"),datetime:void 0,timestamp:void 0,lastTradeTimestamp:void 0,status:"open",symbol:e,type:t,side:i,price:r,cost:void 0,amount:s,filled:void 0,remaining:void 0,trades:void 0,fee:void 0}}async cancelOrder(e,t,i={}){if(void 0===t)throw new r(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();let s={order_id:e,symbol:this.market(t).id};return await this.privatePostCancelOrder(this.extend(s,i))}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:r.id};void 0!==i&&(a.page_length=i);let o=await this.privatePostOrderHistory(this.extend(a,s));return this.parseOrders(o.orders,r,t,i)}async fetchOpenOrders(e,t,i,s={}){return this.fetchOrders(e,t,i,this.extend({status:0},s))}async fetchClosedOrders(e,t,i,s={}){return this.fetchOrders(e,t,i,this.extend({status:1},s))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+e;if("public"===t)o+="?"+this.urlencode(s),r={"Content-Type":"application/json"};else{this.checkRequiredCredentials();let e=this.nonce(),t=this.extend({nonce:e,api_key:this.apiKey},s);t=this.urlencode(this.keysort(t)),t+="&secret_key="+this.secret,t=(t=this.hash(this.encode(t),"md5")).toUpperCase(),a=this.extend({api_key:this.apiKey,sign:t,nonce:e},s),a=this.urlencode(a),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeNotAvailable:r,ArgumentsRequired:a,PermissionDenied:o,AuthenticationError:n,ExchangeError:d,OrderNotFound:c,DDoSProtection:h,InvalidNonce:l,InsufficientFunds:u,CancelPending:p,InvalidOrder:m,InvalidAddress:f}=i(0),{TRUNCATE:y,DECIMAL_PLACES:b}=i(4);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kraken",name:"Kraken",countries:["US"],version:"0",rateLimit:3e3,certified:!0,has:{createDepositAddress:!0,fetchDepositAddress:!0,fetchTradingFee:!0,fetchTradingFees:!0,CORS:!1,fetchCurrencies:!0,fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchWithdrawals:!0,fetchDeposits:!0,withdraw:!0,fetchLedgerEntry:!0,fetchLedger:!0},marketsByAltname:{},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","1d":"1440","1w":"10080","2w":"21600"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766599-22709304-5ede-11e7-9de1-9f33732e1509.jpg",api:{public:"https://api.kraken.com",private:"https://api.kraken.com",zendesk:"https://support.kraken.com/hc/en-us/articles/"},www:"https://www.kraken.com",doc:["https://www.kraken.com/en-us/help/api","https://github.com/nothingisdead/npm-kraken-api"],fees:"https://www.kraken.com/en-us/help/fees"},fees:{trading:{tierBased:!0,percentage:!0,taker:.0026,maker:.0016,tiers:{taker:[[0,.0026],[5e4,.0024],[1e5,.0022],[25e4,.002],[5e5,.0018],[1e6,.0016],[25e5,.0014],[5e6,.0012],[1e7,1e-4]],maker:[[0,.0016],[5e4,.0014],[1e5,.0012],[25e4,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[1e7,0]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,ETH:.005,XRP:.02,XLM:2e-5,LTC:.02,DOGE:2,ZEC:1e-4,ICN:.02,REP:.01,ETC:.005,MLN:.003,XMR:.05,DASH:.005,GNO:.01,EOS:.5,BCH:.001,XTZ:.05,USD:5,EUR:5,CAD:10,JPY:300},deposit:{BTC:0,ETH:0,XRP:0,XLM:0,LTC:0,DOGE:0,ZEC:0,ICN:0,REP:0,ETC:0,MLN:0,XMR:0,DASH:0,GNO:0,EOS:0,BCH:0,XTZ:.05,USD:5,EUR:0,CAD:5,JPY:0}}},api:{zendesk:{get:["205893708-What-is-the-minimum-order-size-","201396777-What-are-the-deposit-fees-","201893608-What-are-the-withdrawal-fees-"]},public:{get:["Assets","AssetPairs","Depth","OHLC","Spread","Ticker","Time","Trades"]},private:{post:["AddOrder","Balance","CancelOrder","ClosedOrders","DepositAddresses","DepositMethods","DepositStatus","Ledgers","OpenOrders","OpenPositions","QueryLedgers","QueryOrders","QueryTrades","TradeBalance","TradesHistory","TradeVolume","Withdraw","WithdrawCancel","WithdrawInfo","WithdrawStatus"]}},commonCurrencies:{XDG:"DOGE"},options:{cacheDepositMethodsOnFetchDepositAddress:!0,depositMethods:{},delistedMarketsById:{},inactiveCurrencies:["CAD","USD","JPY","GBP"]},exceptions:{"EAPI:Invalid key":n,"EFunding:Unknown withdraw key":d,"EFunding:Invalid amount":u,"EService:Unavailable":r,"EDatabase:Internal error":r,"EService:Busy":r,"EQuery:Unknown asset":d,"EAPI:Rate limit exceeded":h,"EOrder:Rate limit exceeded":h,"EGeneral:Internal error":r,"EGeneral:Temporary lockout":h,"EGeneral:Permission denied":o}})}costToPrecision(e,t){return this.decimalToPrecision(t,y,this.markets[e].precision.price,b)}feeToPrecision(e,t){return this.decimalToPrecision(t,y,this.markets[e].precision.amount,b)}async fetchMinOrderAmounts(){let e=(await this.zendeskGet205893708WhatIsTheMinimumOrderSize()).split('<td class="wysiwyg-text-align-right">');if(e.length<3)throw new d(this.id+" fetchMinOrderAmounts HTML page markup has changed: https://support.kraken.com/hc/en-us/articles/205893708-What-is-the-minimum-order-size-");let t={};for(let i=2;i<e.length;i++){let s=e[i].split("</td>")[0];if("To Be Announced"!==s){let e=s.split(" ");if(2===e.length){let i=parseFloat(e[0]);t[this.commonCurrencyCode(e[1])]=i}}}return t}async fetchMarkets(e={}){let t=await this.publicGetAssetPairs(),i=await this.fetchMinOrderAmounts(),s=Object.keys(t.result),r=[];for(let e=0;e<s.length;e++){let a=s[e],o=t.result[a],n=o.base,d=o.quote,c=n,h=d;c.length>3&&("X"!==c[0]&&"Z"!==c[0]||(c=c.slice(1))),h.length>3&&("X"!==h[0]&&"Z"!==h[0]||(h=h.slice(1))),c=this.commonCurrencyCode(c),h=this.commonCurrencyCode(h);let l=a.indexOf(".d")>=0,u=l?o.altname:c+"/"+h,p=void 0;"fees_maker"in o&&(p=parseFloat(o.fees_maker[0][1])/100);let m={amount:o.lot_decimals,price:o.pair_decimals},f=Math.pow(10,-m.amount);c in i&&(f=i[c]),r.push({id:a,symbol:u,base:c,quote:h,baseId:n,quoteId:d,darkpool:l,info:o,altname:o.altname,maker:p,taker:parseFloat(o.fees[0][1])/100,active:!0,precision:m,limits:{amount:{min:f,max:Math.pow(10,m.amount)},price:{min:Math.pow(10,-m.price),max:void 0},cost:{min:0,max:void 0}}})}return r=this.appendInactiveMarkets(r),this.marketsByAltname=this.indexBy(r,"altname"),r}appendInactiveMarkets(e){let t={amount:8,price:8},i={min:0,max:void 0},s={min:Math.pow(10,-t.price),max:void 0},r={darkpool:!1,info:void 0,maker:void 0,taker:void 0,active:!1,precision:t,limits:{amount:{min:Math.pow(10,-t.amount),max:Math.pow(10,t.amount)},price:s,cost:i}},a=[];for(let t=0;t<a.length;t++)e.push(this.extend(r,a[t]));return e}async fetchCurrencies(e={}){const t=await this.publicGetAssets(e),i=this.safeValue(t,"result"),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){const t=s[e],a=i[t],o=this.commonCurrencyCode(this.safeString(a,"altname")),n=this.safeInteger(a,"decimals"),d=!this.inArray(o,this.options.inactiveCurrencies);r[o]={id:t,code:o,info:a,name:o,active:d,fee:void 0,precision:n,limits:{amount:{min:Math.pow(10,-n),max:Math.pow(10,n)},price:{min:Math.pow(10,-n),max:Math.pow(10,n)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,n)}}}}return r}async fetchTradingFees(e={}){await this.loadMarkets(),this.checkRequiredCredentials();let t=await this.privatePostTradeVolume(e),i=this.safeFloat(t.result,"volume"),s=this.fees.trading.tiers,r=s.taker[1],a=s.maker[1];for(let e=0;e<s.taker.length;e++)i>=s.taker[e][0]&&(r=s.taker[e][1]);for(let e=0;e<s.maker.length;e++)i>=s.maker[e][0]&&(a=s.maker[e][1]);return{info:t,maker:a,taker:r}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e);if(s.darkpool)throw new d(this.id+" does not provide an order book for darkpool symbol "+e);let r={pair:s.id};void 0!==t&&(r.count=t);let a=(await this.publicGetDepth(this.extend(r,i))).result[s.id];return this.parseOrderBook(a)}parseTicker(e,t){let i=this.milliseconds(),s=void 0;t&&(s=t.symbol);let r=parseFloat(e.v[1]),a=parseFloat(e.p[1]),o=void 0;void 0!==r&&void 0!==a&&(o=r*a);let n=parseFloat(e.c[0]);return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:parseFloat(e.h[1]),low:parseFloat(e.l[1]),bid:parseFloat(e.b[0]),bidVolume:void 0,ask:parseFloat(e.a[0]),askVolume:void 0,vwap:a,open:this.safeFloat(e,"o"),close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:r,quoteVolume:o,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=[];for(let e=0;e<this.symbols.length;e++){let t=this.symbols[e],s=this.markets[t];s.active&&(s.darkpool||i.push(s.id))}let s=i.join(","),r=(await this.publicGetTicker(this.extend({pair:s},t))).result,a=Object.keys(r),o={};for(let e=0;e<a.length;e++){let t=a[e],i=this.markets_by_id[t],s=i.symbol,n=r[t];o[s]=this.parseTicker(n,i)}return o}async fetchTicker(e,t={}){if(await this.loadMarkets(),e.indexOf(".d")>=0)throw new d(this.id+" does not provide a ticker for darkpool symbol "+e);let i=this.market(e),s=(await this.publicGetTicker(this.extend({pair:i.id},t))).result[i.id];return this.parseTicker(s,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[6])]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={pair:a.id,interval:this.timeframes[t]};void 0!==i&&(o.since=parseInt((i-1)/1e3));let n=(await this.publicGetOHLC(this.extend(o,r))).result[a.id];return this.parseOHLCVs(n,a,t,i,s)}parseLedgerEntry(e,t){const i=this.safeString(e,"id");let s=void 0,r=this.safeString(e,"refid"),a=void 0;const o=this.safeString(e,"type");if("trade"===o)a="trade";else if("withdrawal"===o)a="transaction";else if("deposit"===o)a="transaction";else{if("margin"!==o)throw new d(this.id+" unsupported ledger item type: "+o);a="margin"}const n=this.safeCurrencyCode(e,"asset",t);let c=this.safeFloat(e,"amount");c<0?(s="out",c=Math.abs(c)):s="in";const h=this.safeFloat(e,"time");let l=void 0,u=void 0;void 0!==h&&(l=parseInt(1e3*h),u=this.iso8601(l));const p={cost:this.safeFloat(e,"fee"),currency:n};return{info:e,id:i,direction:s,account:void 0,referenceId:r,referenceAccount:void 0,type:a,currency:n,amount:c,before:void 0,after:this.safeFloat(e,"balance"),timestamp:l,datetime:u,fee:p}}async fetchLedger(e,t,i,s={}){await this.loadMarkets();let r={},a=void 0;void 0!==e&&(a=this.currency(e),r.asset=a.id),void 0!==t&&(r.start=parseInt(t/1e3));let o=(await this.privatePostLedgers(this.extend(r,s))).result.ledger,n=Object.keys(o),d=[];for(let e=0;e<n.length;e++){let t=n[e],i=o[t];i.id=t,d.push(i)}return this.parseLedger(d,a,t,i)}async fetchLedgerEntrysByIds(e,t,i={}){await this.loadMarkets(),e=e.join(",");let s=this.extend({id:e},i),r=(await this.privatePostQueryLedgers(s)).result,a=Object.keys(r),o=[];for(let e=0;e<a.length;e++){let t=a[e],i=r[t];i.id=t,o.push(i)}return this.parseLedger(o)}async fetchLedgerEntry(e,t,i={}){return(await this.fetchLedgerEntrysByIds([e],t,i))[0]}parseTrade(e,t){let i=void 0,s=void 0,r=void 0,a=void 0,o=void 0,n=void 0,d=void 0,c=void 0,h=this.safeString(e,"pair"),l=this.findMarketByAltnameOrId(h),u=void 0;if(void 0!==l?t=l:void 0!==h&&(t=this.getDelistedMarketById(h)),void 0!==t&&(u=t.symbol),"ordertxid"in e){if(d=e.ordertxid,n=this.safeString2(e,"id","postxid"),i=parseInt(1e3*e.time),s=e.type,r=e.ordertype,a=this.safeFloat(e,"price"),o=this.safeFloat(e,"vol"),"fee"in e){let i=void 0;t&&(i=t.quote),c={cost:this.safeFloat(e,"fee"),currency:i}}}else{i=parseInt(1e3*e[2]),s="s"===e[3]?"sell":"buy",r="l"===e[4]?"limit":"market",a=parseFloat(e[0]),o=parseFloat(e[1]),e.length>6&&(n=e[6])}return{id:n,order:d,info:e,timestamp:i,datetime:this.iso8601(i),symbol:u,type:r,side:s,price:a,amount:o,cost:a*o,fee:c}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=r.id,o=(await this.publicGetTrades(this.extend({pair:a},s))).result,n=o[a],d=n.length;if(d<=0)return[];let c=n[d-1],h=this.safeString(o,"last");return c.push(h),this.parseTrades(n,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostBalance(e),i=this.safeValue(t,"result");if(void 0===i)throw new r(this.id+" fetchBalance failed due to a malformed response "+this.json(t));let s={info:i},a=Object.keys(i);for(let e=0;e<a.length;e++){let t=a[e],r=t;r in this.currencies_by_id?r=this.currencies_by_id[r].code:("X"===r[0]?r=r.slice(1):"Z"===r[0]&&(r=r.slice(1)),r=this.commonCurrencyCode(r));let o=parseFloat(i[t]),n={free:o,used:0,total:o};s[r]=n}return this.parseBalance(s)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={pair:this.market(e).id,type:i,ordertype:t,volume:this.amountToPrecision(e,s)};("limit"===t||!("market"===t)&&void 0!==r)&&(o.price=this.priceToPrecision(e,r));let n=await this.privatePostAddOrder(this.extend(o,a)),d=this.safeValue(n.result,"txid");if(void 0!==d&&Array.isArray(d)){d=d.length>1?d:d[0]}return{info:n,id:d}}findMarketByAltnameOrId(e){return e in this.marketsByAltname?this.marketsByAltname[e]:e in this.markets_by_id?this.markets_by_id[e]:void 0}getDelistedMarketById(e){if(void 0===e)return e;let t=this.safeValue(this.options.delistedMarketsById,e);if(void 0!==t)return t;let i=3,s=3,r=6;8===e.length?(i=4,s=4,r=8):7===e.length&&(i=4,s=4,r=7);let a=e.slice(0,i),o=e.slice(s,r),n=a,d=o;return n.length>3&&("X"!==n[0]&&"Z"!==n[0]||(n=n.slice(1))),d.length>3&&("X"!==d[0]&&"Z"!==d[0]||(d=d.slice(1))),t={symbol:(n=this.commonCurrencyCode(n))+"/"+(d=this.commonCurrencyCode(d)),base:n,quote:d,baseId:a,quoteId:o},this.options.delistedMarketsById[e]=t,t}parseOrderStatus(e){return this.safeString({pending:"open",open:"open",closed:"closed",canceled:"canceled",expired:"expired"},e,e)}parseOrder(e,t){let i=e.descr,s=i.type,r=i.ordertype,a=this.safeString(i,"pair"),o=this.findMarketByAltnameOrId(a),n=void 0;void 0!==o?t=o:void 0!==a&&(t=this.getDelistedMarketById(a));let d=parseInt(1e3*e.opentm),c=this.safeFloat(e,"vol"),h=this.safeFloat(e,"vol_exec"),l=c-h,u=void 0,p=this.safeFloat(e,"cost"),m=this.safeFloat(i,"price");void 0!==m&&0!==m||(m=this.safeFloat(i,"price2")),void 0!==m&&0!==m||(m=this.safeFloat(e,"price",m));let f=this.safeFloat(e,"price");if(void 0!==t&&(n=t.symbol,"fee"in e)){let i=e.oflags;u={cost:this.safeFloat(e,"fee"),rate:void 0},i.indexOf("fciq")>=0?u.currency=t.quote:i.indexOf("fcib")>=0&&(u.currency=t.base)}const y=this.parseOrderStatus(this.safeString(e,"status"));return{id:e.id,info:e,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:void 0,status:y,symbol:n,type:r,side:s,price:m,cost:p,amount:c,filled:h,average:f,remaining:l,fee:u}}parseOrders(e,t,i,s){let r=[],a=Object.keys(e);for(let i=0;i<a.length;i++){let s=a[i],o=this.extend({id:s},e[s]);r.push(this.parseOrder(o,t))}return this.filterBySinceLimit(r,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostQueryOrders(this.extend({trades:!0,txid:e},i)),r=s.result,a=this.parseOrder(this.extend({id:e},r[e]));return this.extend({info:s},a)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r={};void 0!==t&&(r.start=parseInt(t/1e3));let a=(await this.privatePostTradesHistory(this.extend(r,s))).result.trades,o=Object.keys(a);for(let e=0;e<o.length;e++)a[o[e]].id=o[e];let n=this.parseTrades(a,void 0,t,i);return void 0===e?n:this.filterBySymbol(n,e)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{s=await this.privatePostCancelOrder(this.extend({txid:e},i))}catch(e){if(this.last_http_response&&this.last_http_response.indexOf("EOrder:Unknown order")>=0)throw new c(this.id+" cancelOrder() error "+this.last_http_response);throw e}return s}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r={};void 0!==t&&(r.start=parseInt(t/1e3));let a=await this.privatePostOpenOrders(this.extend(r,s)),o=this.parseOrders(a.result.open,void 0,t,i);return void 0===e?o:this.filterBySymbol(o,e)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r={};void 0!==t&&(r.start=parseInt(t/1e3));let a=await this.privatePostClosedOrders(this.extend(r,s)),o=this.parseOrders(a.result.closed,void 0,t,i);return void 0===e?o:this.filterBySymbol(o,e)}async fetchDepositMethods(e,t={}){await this.loadMarkets();let i=this.currency(e);return(await this.privatePostDepositMethods(this.extend({asset:i.id},t))).result}parseTransactionStatus(e){return this.safeString({Initial:"pending",Pending:"pending",Success:"ok",Settled:"ok",Failure:"failed",Partial:"ok"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"refid"),s=this.safeString(e,"txid");let r=this.safeInteger(e,"time");void 0!==r&&(r*=1e3);let a=void 0,o=this.safeString(e,"asset");a=void 0!==(t=this.safeValue(this.currencies_by_id,o))?t.code:this.commonCurrencyCode(o);const n=this.safeString(e,"info"),d=this.safeFloat(e,"amount"),c=this.parseTransactionStatus(this.safeString(e,"status")),h=this.safeString(e,"type");let l=this.safeFloat(e,"fee");return void 0===l&&"deposit"===h&&(l=0),{info:e,id:i,currency:a,amount:d,address:n,tag:void 0,status:c,type:h,updated:void 0,txid:s,timestamp:r,datetime:this.iso8601(r),fee:{currency:a,cost:l}}}parseTransactionsByType(e,t,i,s,r){const a=[];for(let i=0;i<t.length;i++){const s=this.parseTransaction(this.extend({type:e},t[i]));a.push(s)}return this.filterByCurrencySinceLimit(a,i,s,r)}async fetchDeposits(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new a(this.id+" fetchDeposits requires a currency code argument");const r={asset:this.currency(e).id},o=await this.privatePostDepositStatus(this.extend(r,s));return this.parseTransactionsByType("deposit",o.result,e,t,i)}async fetchWithdrawals(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new a(this.id+" fetchWithdrawals requires a currency code argument");const r={asset:this.currency(e).id},o=await this.privatePostWithdrawStatus(this.extend(r,s));return this.parseTransactionsByType("withdrawal",o.result,e,t,i)}async createDepositAddress(e,t={}){let i=await this.fetchDepositAddress(e,this.extend({new:"true"},t)),s=this.safeString(i,"address");return this.checkAddress(s),{currency:e,address:s,info:i}}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=this.safeString(t,"method");if(void 0===s){if(!this.options.cacheDepositMethodsOnFetchDepositAddress)throw new d(this.id+' fetchDepositAddress() requires an extra `method` parameter. Use fetchDepositMethods ("'+e+'") to get a list of available deposit methods or enable the exchange property .options["cacheDepositMethodsOnFetchDepositAddress"] = true');e in this.options.depositMethods||(this.options.depositMethods[e]=await this.fetchDepositMethods(e)),s=this.options.depositMethods[e][0].method}let r={asset:i.id,method:s},a=await this.privatePostDepositAddresses(this.extend(r,t)),o=a.result;if(o.length<1)throw new f(this.id+" privatePostDepositAddresses() returned no addresses");let n=this.safeString(o[0],"address"),c=this.safeString2(o[0],"tag","memo");return this.checkAddress(n),{currency:e,address:n,tag:c,info:a}}async withdraw(e,t,i,s,r={}){if(this.checkAddress(i),"key"in r){await this.loadMarkets();let i=this.currency(e),s=await this.privatePostWithdraw(this.extend({asset:i.id,amount:t},r));return{info:s,id:s.result}}throw new d(this.id+" withdraw requires a 'key' parameter (withdrawal key name, as set up on your account)")}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.version+"/"+t+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else if("private"===t){this.checkRequiredCredentials();let e=this.nonce().toString();a=this.urlencode(this.extend({nonce:e},s));let t=this.encode(e+a),i=this.hash(t,"sha256","binary"),n=this.stringToBinary(this.encode(o)),d=this.binaryConcat(n,i),c=this.base64ToBinary(this.secret),h=this.hmac(d,c,"sha512","base64");r={"API-Key":this.apiKey,"API-Sign":this.decode(h),"Content-Type":"application/x-www-form-urlencoded"}}else o="/"+e;return{url:o=this.urls.api[t]+o,method:i,body:a,headers:r}}nonce(){return this.milliseconds()}handleErrors(e,t,i,s,a,o,n){if(520===e)throw new r(this.id+" "+e.toString()+" "+t);if(o.indexOf("Invalid order")>=0)throw new m(this.id+" "+o);if(o.indexOf("Invalid nonce")>=0)throw new l(this.id+" "+o);if(o.indexOf("Insufficient funds")>=0)throw new u(this.id+" "+o);if(o.indexOf("Cancel pending")>=0)throw new p(this.id+" "+o);if(o.indexOf("Invalid arguments:volume")>=0)throw new m(this.id+" "+o);if("{"===o[0]&&"string"!=typeof n&&"error"in n){if(n.error.length){let e=this.id+" "+this.json(n);for(let t=0;t<n.error.length;t++)if(n.error[t]in this.exceptions)throw new this.exceptions[n.error[t]](e);throw new d(e)}}}}},function(e,t,i){"use strict";const s=i(51);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kucoin2"})}}},function(e,t,i){"use strict";const s=i(24),{ArgumentsRequired:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"kuna",name:"Kuna",countries:["UA"],rateLimit:1e3,version:"v2",has:{CORS:!1,fetchTickers:!0,fetchOpenOrders:!0,fetchMyTrades:!0,withdraw:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/31697638-912824fa-b3c1-11e7-8c36-cf9606eb94ac.jpg",api:"https://kuna.io",www:"https://kuna.io",doc:"https://kuna.io/documents/api",fees:"https://kuna.io/documents/api"},fees:{trading:{taker:.0025,maker:.0025},funding:{withdraw:{UAH:"1%",BTC:.001,BCH:.001,ETH:.01,WAVES:.01,GOL:0,GBG:0},deposit:{}}}})}async fetchMarkets(e={}){const t=["btc","eth","eurs","gbg","uah"],i={UAH:0};let s=[],r=await this.publicGetTickers(),a=Object.keys(r);for(let e=0;e<a.length;e++){let r=a[e];for(let e=0;e<t.length;e++){let a=t[e];if(r.indexOf(a)>0){let e=r.replace(a,""),t=e.toUpperCase(),o=a.toUpperCase(),n=(t=this.commonCurrencyCode(t))+"/"+(o=this.commonCurrencyCode(o)),d={amount:6,price:this.safeInteger(i,o,6)};s.push({id:r,symbol:n,base:t,quote:o,baseId:e,quoteId:a,precision:d,limits:{amount:{min:Math.pow(10,-d.amount),max:Math.pow(10,d.amount)},price:{min:Math.pow(10,-d.price),max:Math.pow(10,d.price)},cost:{min:void 0,max:void 0}}});break}}}return s}async fetchL3OrderBook(e,t,i={}){return this.fetchOrderBook(e,t,i)}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();let a=this.market(e),o=await this.privateGetOrders(this.extend({market:a.id},s));return this.parseOrders(o,a,t,i)}parseTrade(e,t){let i=this.parse8601(e.created_at),s=void 0;t&&(s=t.symbol);let r=this.safeString(e,"side");if(void 0!==r){let e={ask:"sell",bid:"buy"};r=this.safeString(e,r)}let a=this.safeFloat(e,"funds"),o=this.safeString(e,"order_id");return{id:e.id.toString(),timestamp:i,datetime:this.iso8601(i),symbol:s,type:void 0,side:r,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:a,order:o,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTrades(this.extend({market:r.id},s));return this.parseTrades(a,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new r(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();let a=this.market(e),o=await this.privateGetTradesMy({market:a.id});return this.parseTrades(o,a,t,i)}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"lakebtc",name:"LakeBTC",countries:["US"],version:"api_v2",has:{CORS:!0,createMarketOrder:!1,fetchTickers:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28074120-72b7c38a-6660-11e7-92d9-d9027502281d.jpg",api:"https://api.lakebtc.com",www:"https://www.lakebtc.com",doc:["https://www.lakebtc.com/s/api_v2","https://www.lakebtc.com/s/api"]},api:{public:{get:["bcorderbook","bctrades","ticker"]},private:{post:["buyOrder","cancelOrders","getAccountInfo","getExternalAccounts","getOrders","getTrades","openOrders","sellOrder"]}},fees:{trading:{maker:.0015,taker:.002}}})}async fetchMarkets(e={}){let t=await this.publicGetTicker(),i=[],s=Object.keys(t);for(let e=0;e<s.length;e++){let r=s[e],a=t[r],o=r.slice(0,3),n=r.slice(3,6),d=o.toUpperCase(),c=n.toUpperCase(),h=d+"/"+c;i.push({id:r,symbol:h,base:d,quote:c,baseId:o,quoteId:n,info:a})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostGetAccountInfo(),i=t.balance,s={info:t},r=Object.keys(i);for(let e=0;e<r.length;e++){let t=r[e],a=t;if(t in this.currencies_by_id){a=this.currencies_by_id[t].code}let o=parseFloat(i[t]),n={free:o,used:0,total:o};s[a]=n}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetBcorderbook(this.extend({symbol:this.marketId(e)},i));return this.parseOrderBook(s)}parseTicker(e,t){let i=this.milliseconds(),s=void 0;void 0!==t&&(s=t.symbol);let r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){let t=s[e],a=i[t],o=void 0;t in this.markets_by_id&&(t=(o=this.markets_by_id[t]).symbol),r[t]=this.parseTicker(a,o)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTicker(t);return this.parseTicker(s[i.id],i)}parseTrade(e,t){let i=1e3*e.date;return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:e.tid.toString(),order:void 0,type:void 0,side:void 0,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetBctrades(this.extend({symbol:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"market"===t)throw new r(this.id+" allows limit orders only");let n="privatePost"+this.capitalize(i)+"Order",d={params:[a,s,this.market(e).id]},c=await this[n](this.extend(d,o));return{info:c,id:c.id.toString()}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelOrder({params:[e]})}nonce(){return this.microseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version;if("public"===t)o+="/"+e,Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let t=this.nonce(),o="";if("params"in s){o=s.params.join(",")}let n=this.urlencode({tonce:t,accesskey:this.apiKey,requestmethod:i.toLowerCase(),id:t,method:e,params:o});a=this.json({method:e,params:o,id:t});let d=this.hmac(this.encode(n),this.encode(this.secret),"sha1"),c=this.encode(this.apiKey+":"+d);r={"Json-Rpc-Tonce":t.toString(),Authorization:"Basic "+this.decode(this.stringToBase64(c)),"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,DDoSProtection:a,AuthenticationError:o,InvalidOrder:n}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"lbank",name:"LBank",countries:["CN"],version:"v1",has:{fetchTickers:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!1,fetchClosedOrders:!0},timeframes:{"1m":"minute1","5m":"minute5","15m":"minute15","30m":"minute30","1h":"hour1","2h":"hour2","4h":"hour4","6h":"hour6","8h":"hour8","12h":"hour12","1d":"day1","1w":"week1"},urls:{logo:"https://user-images.githubusercontent.com/1294454/38063602-9605e28a-3302-11e8-81be-64b1e53c4cfb.jpg",api:"https://api.lbank.info",www:"https://www.lbank.info",doc:"https://github.com/LBank-exchange/lbank-official-api-docs",fees:"https://lbankinfo.zendesk.com/hc/zh-cn/articles/115002295114--%E8%B4%B9%E7%8E%87%E8%AF%B4%E6%98%8E",referral:"https://www.lbank.info/sign-up.html?icode=7QCY&lang=en-US"},api:{public:{get:["currencyPairs","ticker","depth","trades","kline","accuracy"]},private:{post:["user_info","create_order","cancel_order","orders_info","orders_info_history","withdraw","withdrawCancel","withdraws","withdrawConfigs"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:void 0,ZEC:.01,ETH:.01,ETC:.01,VEN:10,BCH:2e-4,SC:50,BTM:20,NAS:1,EOS:1,XWC:5,BTS:1,INK:10,BOT:3,YOYOW:15,TGC:10,NEO:0,CMT:20,SEER:2e3,FIL:void 0,BTG:void 0}}},commonCurrencies:{VET_ERC20:"VEN"}})}async fetchMarkets(e={}){let t=await this.publicGetAccuracy(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.symbol,a=r.split("_"),o=void 0,n=void 0;a.length>2?(o=a[0]+"_"+a[1],n=a[2]):(o=a[0],n=a[1]);let d=this.commonCurrencyCode(o.toUpperCase()),c=this.commonCurrencyCode(n.toUpperCase()),h=d+"/"+c,l={amount:this.safeInteger(s,"quantityAccuracy"),price:this.safeInteger(s,"priceAccuracy")};i.push({id:r,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:!0,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:void 0},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)},cost:{min:void 0,max:void 0}},info:r})}return i}parseTicker(e,t){let i=void 0;if(void 0===t){let t=this.safeString(e,"symbol");if(t in this.markets_by_id){i=this.marketsById[t].symbol}else{let e=t.split("_"),s=void 0,r=void 0;e.length>2?(s=e[0]+"_"+e[1],r=e[2]):(s=e[0],r=e[1]),i=this.commonCurrencyCode(s.toUpperCase())+"/"+this.commonCurrencyCode(r.toUpperCase())}}let s=this.safeInteger(e,"timestamp"),r=e;e=r.ticker;let a=this.safeFloat(e,"latest"),o=this.safeFloat(e,"change"),n=o/100,d=a/this.sum(1,n),c=a-d,h=this.sum(a,d)/2;return void 0!==t&&(i=t.symbol),{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:c,percentage:o,average:h,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"turnover"),info:r}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTicker(this.extend({symbol:i.id},t));return this.parseTicker(s,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(this.extend({symbol:"all"},t)),s={};for(let e=0;e<i.length;e++){let t=this.parseTicker(i[e]);s[t.symbol]=t}return s}async fetchOrderBook(e,t=60,i={}){await this.loadMarkets();let s=60;void 0!==t&&(s=Math.min(t,s));let r=await this.publicGetDepth(this.extend({symbol:this.marketId(e),size:s},i));return this.parseOrderBook(r)}parseTrade(e,t){let i=t.symbol,s=parseInt(e.date_ms),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),o=this.costToPrecision(i,r*a);return{timestamp:s,datetime:this.iso8601(s),symbol:i,id:this.safeString(e,"tid"),order:void 0,type:void 0,side:e.type,price:r,amount:a,cost:parseFloat(o),fee:void 0,info:this.safeValue(e,"info",e)}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={symbol:r.id,size:100};void 0!==t&&(a.time=parseInt(t)),void 0!==i&&(a.size=i);let o=await this.publicGetTrades(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[1],e[2],e[3],e[4],e[5]]}async fetchOHLCV(e,t="5m",i,s=1e3,a={}){await this.loadMarkets();let o=this.market(e);if(void 0===i)throw new r(this.id+" fetchOHLCV requires a since argument");if(void 0===s)throw new r(this.id+" fetchOHLCV requires a limit argument");let n={symbol:o.id,type:this.timeframes[t],size:s,time:parseInt(i/1e3)},d=await this.publicGetKline(this.extend(n,a));return this.parseOHLCVs(d,o,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostUserInfo(e),i={info:t},s=Object.keys(this.extend(t.info.free,t.info.freeze));for(let e=0;e<s.length;e++){let r=s[e],a=r;r in this.currencies_by_id&&(a=this.currencies_by_id[r].code);let o={free:this.safeFloat(t.info.free,r,0),used:this.safeFloat(t.info.freeze,r,0),total:0};o.total=this.sum(o.free,o.used),i[a]=o}return this.parseBalance(i)}parseOrderStatus(e){return this.safeString({"-1":"cancelled",0:"open",1:"open",2:"closed",4:"closed"},e)}parseOrder(e,t){let i=void 0,s=this.safeValue(this.marketsById,e.symbol);void 0!==s?i=s.symbol:void 0!==t&&(i=t.symbol);let r=this.safeInteger(e,"create_time"),a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount",0),n=this.safeFloat(e,"deal_amount",0),d=this.safeFloat(e,"avg_price"),c=void 0;void 0!==d&&(c=n*d);let h=this.parseOrderStatus(this.safeString(e,"status"));return{id:this.safeString(e,"order_id"),datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:h,symbol:i,type:this.safeString(e,"order_type"),side:e.type,price:a,cost:c,amount:o,filled:n,remaining:o-n,trades:void 0,fee:void 0,info:this.safeValue(e,"info",e)}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n={symbol:o.id,type:i,amount:s};"market"===t?n.type+="_market":n.price=r;let d=await this.privatePostCreateOrder(this.extend(n,a));(n=this.omit(n,"type")).order_id=d.order_id,n.type=i,n.order_type=t,n.create_time=this.milliseconds(),n.info=d;let c=(n=this.parseOrder(n,o)).id;return this.orders[c]=n,n}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t);return await this.privatePostCancelOrder(this.extend({symbol:s.id,order_id:e},i))}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t),r=await this.privatePostOrdersInfo(this.extend({symbol:s.id,order_id:e},i)),a=this.parseOrders(r.orders,s);return 1===a.length?a[0]:a}async fetchOrders(e,t,i,s={}){await this.loadMarkets(),void 0===i&&(i=100);let r=this.market(e),a=await this.privatePostOrdersInfoHistory(this.extend({symbol:r.id,current_page:1,page_length:i},s));return this.parseOrders(a.orders,void 0,t,i)}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s);return this.filterBy(r,"status","closed")+this.filterBy(r,"status","cancelled")}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a={assetCode:this.currency(e).id,amount:t,account:i};void 0!==s&&(a.memo=s);let o=this.privatePostWithdraw(this.extend(a,r));return{id:o.id,info:o}}sign(e,t="public",i="GET",s={},r,a){let o=this.omit(s,this.extractParams(e)),n=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);if(n+=".do","public"===t)Object.keys(o).length&&(n+="?"+this.urlencode(o));else{this.checkRequiredCredentials();let e=this.keysort(this.extend({api_key:this.apiKey},s)),t=this.rawencode(e)+"&secret_key="+this.secret;e.sign=this.hash(this.encode(t)).toUpperCase(),a=this.urlencode(e),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:n,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},d,c){let h=await this.fetch2(e,t,i,s,d,c);if("false"===this.safeString(h,"result")){let e=this.safeString(h,"error_code"),t=this.safeString({10000:"Internal error",10001:"The required parameters can not be empty",10002:"verification failed",10003:"Illegal parameters",10004:"User requests are too frequent",10005:"Key does not exist",10006:"user does not exist",10007:"Invalid signature",10008:"This currency pair is not supported",10009:"Limit orders can not be missing orders and the number of orders",10010:"Order price or order quantity must be greater than 0",10011:"Market orders can not be missing the amount of the order",10012:"market sell orders can not be missing orders",10013:"is less than the minimum trading position 0.001",10014:"Account number is not enough",10015:"The order type is wrong",10016:"Account balance is not enough",10017:"Abnormal server",10018:"order inquiry can not be more than 50 less than one",10019:"withdrawal orders can not be more than 3 less than one",10020:"less than the minimum amount of the transaction limit of 0.001",10022:"Insufficient key authority"},e,this.json(h));throw new(this.safeValue({10002:o,10004:a,10005:o,10006:o,10007:o,10009:n,10010:n,10011:n,10012:n,10013:n,10014:n,10015:n,10016:n,10022:o},e,r))(t)}return h}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,InvalidNonce:o,OrderNotFound:n,InvalidOrder:d,InsufficientFunds:c,AuthenticationError:h,DDoSProtection:l}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"liquid",name:"Liquid",countries:["JP","CN","TW"],version:"2",rateLimit:1e3,has:{CORS:!1,fetchTickers:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/45798859-1a872600-bcb4-11e8-8746-69291ce87b04.jpg",api:"https://api.liquid.com",www:"https://www.liquid.com",doc:["https://developers.quoine.com","https://developers.quoine.com/v2"],fees:"https://help.liquid.com/getting-started-with-liquid/the-platform/fee-structure",referral:"https://www.liquid.com?affiliate=SbzC62lt30976"},api:{public:{get:["currencies","products","products/{id}","products/{id}/price_levels","executions","ir_ladders/{currency}"]},private:{get:["accounts/balance","accounts/main_asset","accounts/{id}","crypto_accounts","executions/me","fiat_accounts","loan_bids","loans","orders","orders/{id}","orders/{id}/trades","orders/{id}/executions","trades","trades/{id}/loans","trading_accounts","trading_accounts/{id}","transactions"],post:["fiat_accounts","loan_bids","orders"],put:["loan_bids/{id}/close","loans/{id}","orders/{id}","orders/{id}/cancel","trades/{id}","trades/{id}/close","trades/close_all","trading_accounts/{id}"]}},skipJsonOnStatusCodes:[401],exceptions:{"API rate limit exceeded. Please retry after 300s":l,"API Authentication failed":h,"Nonce is too small":o,"Order not found":n,"Can not update partially filled order":d,"Can not update non-live order":n,not_enough_free_balance:c,must_be_positive:d,less_than_order_size:d},commonCurrencies:{WIN:"WCOIN"},options:{cancelOrderException:!0}})}async fetchCurrencies(e={}){let t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){let s=t[e],r=this.safeString(s,"currency"),a=this.commonCurrencyCode(r),o=s.depositable&&s.withdrawable,n=this.safeInteger(s,"display_precision"),d=this.safeInteger(s,"quoting_precision"),c=Math.max(n,d);i[a]={id:r,code:a,info:s,name:a,active:o,fee:this.safeFloat(s,"withdrawal_fee"),precision:c,limits:{amount:{min:Math.pow(10,-n),max:Math.pow(10,n)},price:{min:Math.pow(10,-d),max:Math.pow(10,d)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(s,"minimum_withdrawal"),max:void 0}}}}return i}async fetchMarkets(e={}){let t=await this.publicGetProducts(),i=await this.fetchCurrencies(),s=this.indexBy(i,"code"),r=[];for(let e=0;e<t.length;e++){let i=t[e],a=i.id.toString(),o=i.base_currency,n=i.quoted_currency,d=this.commonCurrencyCode(o),c=this.commonCurrencyCode(n),h=d+"/"+c,l=this.safeFloat(i,"maker_fee"),u=this.safeFloat(i,"taker_fee"),p=!i.disabled,m=this.safeValue(s,d),f=this.safeValue(s,c),y={amount:8,price:8},b=void 0;void 0!==m&&(b=this.safeFloat(m.info,"minimum_order_quantity"),y.amount=this.safeInteger(m.info,"quoting_precision"));let w=void 0;void 0!==f&&(y.price=this.safeInteger(f.info,"display_precision"),w=Math.pow(10,-y.price));let v=void 0;void 0!==w&&void 0!==b&&(v=w*b);let g={amount:{min:b,max:void 0},price:{min:w,max:void 0},cost:{min:v,max:void 0}};r.push({id:a,symbol:h,base:d,quote:c,baseId:o,quoteId:n,maker:l,taker:u,limits:g,precision:y,active:p,info:i})}return r}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetAccountsBalance(e),i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.currency,a=r;r in this.currencies_by_id&&(a=this.currencies_by_id[r].code);let o=parseFloat(s.balance),n={free:o,used:void 0,total:o};i[a]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetProductsIdPriceLevels(this.extend({id:this.marketId(e)},i));return this.parseOrderBook(s,void 0,"buy_price_levels","sell_price_levels")}parseTicker(e,t){let i=this.milliseconds(),s=void 0;if("last_traded_price"in e&&e.last_traded_price){e.last_traded_price.length>0&&(s=this.safeFloat(e,"last_traded_price"))}let r=void 0;if(void 0===t){let i=this.safeString(e,"id");if(i in this.markets_by_id)t=this.markets_by_id[i];else{let i=this.safeString(e,"base_currency"),s=this.safeString(e,"quoted_currency");r in this.markets?t=this.markets[r]:r=this.commonCurrencyCode(i)+"/"+this.commonCurrencyCode(s)}}void 0!==t&&(r=t.symbol);let a=void 0,o=void 0,n=void 0,d=this.safeFloat(e,"last_price_24h");return void 0!==d&&void 0!==s&&(a=s-d,n=this.sum(s,d)/2,d>0&&(o=a/d*100)),{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high_market_ask"),low:this.safeFloat(e,"low_market_bid"),bid:this.safeFloat(e,"market_bid"),bidVolume:void 0,ask:this.safeFloat(e,"market_ask"),askVolume:void 0,vwap:void 0,open:d,close:s,last:s,previousClose:void 0,change:a,percentage:o,average:n,baseVolume:this.safeFloat(e,"volume_24h"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetProducts(t),s={};for(let e=0;e<i.length;e++){let t=this.parseTicker(i[e]);s[t.symbol]=t}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetProductsId(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=1e3*e.created_at,s=this.safeString(e,"order_id"),r=this.safeString(e,"taker_side"),a=this.safeString(e,"my_side"),o=void 0!==a?a:r,n=void 0;void 0!==a&&(n=r===a?"taker":"maker");let d=void 0,c=this.safeFloat(e,"price"),h=this.safeFloat(e,"quantity");return void 0!==c&&void 0!==h&&(d=c*h),{info:e,id:e.id.toString(),order:s,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:o,takerOrMaker:n,price:c,amount:h,cost:d,fee:void 0}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={product_id:r.id};void 0!==i&&(a.limit=i),void 0!==t&&(a.timestamp=parseInt(t/1e3));let o=await this.publicGetExecutions(this.extend(a,s)),n=void 0!==t?o:o.models;return this.parseTrades(n,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={product_id:r.id,with_details:!0};void 0!==i&&(a.limit=i);let o=await this.privateGetExecutionsMe(this.extend(a,s));return this.parseTrades(o.models,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={order_type:t,product_id:this.marketId(e),side:i,quantity:this.amountToPrecision(e,s)};"limit"===t&&(o.price=this.priceToPrecision(e,r));let n=await this.privatePostOrders(this.extend(o,a));return this.parseOrder(n)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePutOrdersIdCancel(this.extend({id:e},i)),r=this.parseOrder(s);if("closed"===r.status&&this.options.cancelOrderException)throw new n(this.id+" order closed already: "+this.json(s));return r}async editOrder(e,t,i,s,r,o,n={}){if(await this.loadMarkets(),void 0===o)throw new a(this.id+" editOrder requires the price argument");let d={order:{quantity:this.amountToPrecision(t,r),price:this.priceToPrecision(t,o)}},c=await this.privatePutOrdersId(this.extend({id:e},d));return this.parseOrder(c)}parseOrderStatus(e){return this.safeString({live:"open",filled:"closed",cancelled:"canceled"},e,e)}parseOrder(e,t){let i=this.safeString(e,"id"),s=this.safeInteger(e,"created_at");void 0!==s&&(s*=1e3);let r=this.safeString(e,"product_id");t=this.safeValue(this.markets_by_id,r);let a=this.parseOrderStatus(this.safeString(e,"status")),o=this.safeFloat(e,"quantity"),n=this.safeFloat(e,"filled_quantity"),d=this.safeFloat(e,"price"),c=void 0,h=void 0;void 0!==t&&(c=t.symbol,h=t.quote);let l=e.order_type,u=0,p=0,m=this.safeFloat(e,"average_price"),f=void 0;if("executions"in e){let s=(f=this.parseTrades(this.safeValue(e,"executions",[]),t)).length;for(let e=0;e<s;e++){let t=f[e];t.order=i,t.type=l,u+=t.amount,p+=t.cost}!m&&s>0&&u>0&&(m=p/u)}let y=n*m;return{id:i,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,type:l,status:a,symbol:c,side:e.side,price:d,amount:o,filled:n,cost:y,remaining:o-n,trades:f,fee:{currency:h,cost:this.safeFloat(e,"order_fee")},info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetOrdersId(this.extend({id:e},i));return this.parseOrder(s)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.product_id=r.id);let o=this.safeValue(s,"status");o&&(s=this.omit(s,"status"),"open"===o?a.status="live":"closed"===o?a.status="filled":"canceled"===o&&(a.status="cancelled")),void 0!==i&&(a.limit=i);let n=(await this.privateGetOrders(this.extend(a,s))).models;return this.parseOrders(n,r,t,i)}fetchOpenOrders(e,t,i,s={}){return this.fetchOrders(e,t,i,this.extend({status:"open"},s))}fetchClosedOrders(e,t,i,s={}){return this.fetchOrders(e,t,i,this.extend({status:"closed"},s))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o="/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if(r={"X-Quoine-API-Version":this.version,"Content-Type":"application/json"},"private"===t){this.checkRequiredCredentials(),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(a=this.json(n));let e=this.nonce(),t={path:o,nonce:e,token_id:this.apiKey,iat:Math.floor(e/1e3)};r["X-Quoine-Auth"]=this.jwt(t,this.secret)}else Object.keys(n).length&&(o+="?"+this.urlencode(n));return{url:o=this.urls.api+o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if(e>=200&&e<300)return;const d=this.exceptions;if(401===e){if(o in d)throw new d[o](this.id+" "+o);return}if(429===e)throw new l(this.id+" "+o);if(void 0===n)return;const c=this.id+" "+o,h=this.safeString(n,"message"),u=this.safeValue(n,"errors");if(void 0!==h){if(h in d)throw new d[h](c)}else{if(void 0===u)throw new r(c);{const e=Object.keys(u);for(let t=0;t<e.length;t++){const i=u[e[t]];for(let e=0;e<i.length;e++){const t=i[e];if(t in d)throw new d[t](c)}}}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,AuthenticationError:o,NotSupported:n,InvalidOrder:d,OrderNotFound:c,ExchangeNotAvailable:h,DDoSProtection:l,InsufficientFunds:u}=i(0),{TRUNCATE:p,DECIMAL_PLACES:m}=i(4);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"livecoin",name:"LiveCoin",countries:["US","UK","RU"],rateLimit:1e3,userAgent:this.userAgents.chrome,has:{fetchDepositAddress:!0,CORS:!1,fetchTickers:!0,fetchCurrencies:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchOrders:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27980768-f22fc424-638a-11e7-89c9-6010a54ff9be.jpg",api:"https://api.livecoin.net",www:"https://www.livecoin.net",doc:"https://www.livecoin.net/api?lang=en",referral:"https://livecoin.net/?from=Livecoin-CQ1hfx44"},api:{public:{get:["exchange/all/order_book","exchange/last_trades","exchange/maxbid_minask","exchange/order_book","exchange/restrictions","exchange/ticker","info/coinInfo"]},private:{get:["exchange/client_orders","exchange/order","exchange/trades","exchange/commission","exchange/commissionCommonInfo","payment/balances","payment/balance","payment/get/address","payment/history/size","payment/history/transactions"],post:["exchange/buylimit","exchange/buymarket","exchange/cancellimit","exchange/selllimit","exchange/sellmarket","payment/out/capitalist","payment/out/card","payment/out/coin","payment/out/okpay","payment/out/payeer","payment/out/perfectmoney","payment/voucher/amount","payment/voucher/make","payment/voucher/redeem"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0018,taker:.0018}},commonCurrencies:{BTCH:"Bithash",CPC:"CapriCoin",EDR:"E-Dinar Coin",eETT:"EETT",FirstBlood:"1ST",FORTYTWO:"42",ORE:"Orectic",RUR:"RUB",SCT:"SpaceCoin",TPI:"ThaneCoin",wETT:"WETT",XBT:"Bricktox"},exceptions:{1:r,10:o,100:r,101:o,102:o,103:d,104:d,105:d,11:o,12:o,2:o,20:o,30:o,31:n,32:r,429:l,503:h}})}async fetchMarkets(e={}){let t=await this.publicGetExchangeTicker(),i=await this.publicGetExchangeRestrictions(),s=this.indexBy(i.restrictions,"currencyPair"),r=[];for(let e=0;e<t.length;e++){let i=t[e],a=i.symbol,[o,n]=a.split("/"),d=this.commonCurrencyCode(o),c=this.commonCurrencyCode(n),h=d+"/"+c,l=this.safeValue(s,h),u={price:5,amount:8,cost:8},p={amount:{min:Math.pow(10,-u.amount),max:Math.pow(10,u.amount)}};l&&(u.price=this.safeInteger(l,"priceScale",5),p.amount.min=this.safeFloat(l,"minLimitQuantity",p.amount.min)),p.price={min:Math.pow(10,-u.price),max:Math.pow(10,u.price)},r.push({id:a,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:!0,precision:u,limits:p,info:i})}return r}async fetchCurrencies(e={}){let t=(await this.publicGetInfoCoinInfo(e)).info,i={};for(let e=0;e<t.length;e++){let s=t[e],r=s.symbol,a=this.commonCurrencyCode(r),o=8,n="normal"===s.walletStatus;i[a]={id:r,code:a,info:s,name:s.name,active:n,fee:s.withdrawFee,precision:o,limits:{amount:{min:s.minOrderAmount,max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:s.minOrderAmount,max:void 0},withdraw:{min:s.minWithdrawAmount,max:Math.pow(10,o)},deposit:{min:s.minDepositAmount,max:void 0}}}}return i=this.appendFiatCurrencies(i)}appendFiatCurrencies(e){let t={info:void 0,active:!0,fee:void 0,precision:8,limits:{withdraw:{min:void 0,max:void 0},deposit:{min:void 0,max:void 0},amount:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},price:{min:Math.pow(10,-8),max:Math.pow(10,8)}}},i=[{id:"USD",code:"USD",name:"US Dollar"},{id:"EUR",code:"EUR",name:"Euro"}];i.push({id:"RUR",code:this.commonCurrencyCode("RUR"),name:"Russian ruble"});for(let s=0;s<i.length;s++){let r=i[s];e[r.code]=this.extend(t,r)}return e}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetPaymentBalances(),i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.currency,a=void 0;a=r in i?i[r]:this.account(),"total"===s.type&&(a.total=parseFloat(s.value)),"available"===s.type&&(a.free=parseFloat(s.value)),"trade"===s.type&&(a.used=parseFloat(s.value)),i[r]=a}return this.parseBalance(i)}async fetchTradingFees(e={}){await this.loadMarkets();let t=await this.privateGetExchangeCommissionCommonInfo(e);const i=this.safeFloat(t,"commission");return{info:t,maker:i,taker:i}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={currencyPair:this.marketId(e),groupByPrice:"false"};void 0!==t&&(s.depth=t);let r=await this.publicGetExchangeOrderBook(this.extend(s,i)),a=r.timestamp;return this.parseOrderBook(r,a)}parseTicker(e,t){let i=this.milliseconds(),s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"vwap"),a=this.safeFloat(e,"volume"),o=void 0;void 0!==a&&void 0!==r&&(o=a*r);let n=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"best_bid"),bidVolume:void 0,ask:this.safeFloat(e,"best_ask"),askVolume:void 0,vwap:this.safeFloat(e,"vwap"),open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetExchangeTicker(t),s=this.indexBy(i,"symbol"),r=Object.keys(s),a={};for(let e=0;e<r.length;e++){let t=r[e],i=this.markets_by_id[t],o=i.symbol,n=s[t];a[o]=this.parseTicker(n,i)}return a}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetExchangeTicker(this.extend({currencyPair:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=1e3*e.time;return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:e.id.toString(),order:void 0,type:void 0,side:e.type.toLowerCase(),price:e.price,amount:e.quantity}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetExchangeLastTrades(this.extend({currencyPair:r.id},s));return this.parseTrades(a,r,t,i)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s={orderId:e},r=await this.privateGetExchangeOrder(this.extend(s,i));return this.parseOrder(r)}parseOrderStatus(e){const t={OPEN:"open",PARTIALLY_FILLED:"open",EXECUTED:"closed",CANCELLED:"canceled",PARTIALLY_FILLED_AND_CANCELLED:"canceled"};return e in t?t[e]:e}parseOrder(e,t){let i=void 0;"lastModificationTime"in e&&void 0!==(i=this.safeString(e,"lastModificationTime"))&&(i=i.indexOf("T")>=0?this.parse8601(i):this.safeInteger(e,"lastModificationTime"));let s=this.parseOrderStatus(this.safeString2(e,"status","orderStatus")),r=void 0;if(void 0===t){let i=this.safeString(e,"currencyPair");(i=this.safeString(e,"symbol",i))in this.markets_by_id&&(t=this.markets_by_id[i])}let a=void 0,o=void 0;if("type"in e){let t=e.type.toLowerCase().split("_");a=t[0],o=t[1]}let n=this.safeFloat(e,"price"),d=this.safeFloat(e,"remainingQuantity");d=this.safeFloat(e,"remaining_quantity",d);let c=this.safeFloat(e,"quantity",d),h=void 0;void 0!==d&&(h=c-d);let l=void 0;void 0!==h&&void 0!==n&&(l=h*n);const u=this.safeFloat(e,"commission_rate");let p=void 0;void 0!==l&&void 0!==u&&(p=l*u);let m=void 0;return void 0!==t&&(r=t.symbol,m=t.quote),{info:e,id:e.id,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:s,symbol:r,type:a,side:o,price:n,amount:c,cost:l,filled:h,remaining:d,trades:void 0,fee:{cost:p,currency:m,rate:u}}}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.currencyPair=r.id),void 0!==t&&(a.issuedFrom=parseInt(t)),void 0!==i&&(a.endRow=i-1);let o=await this.privateGetExchangeClientOrders(this.extend(a,s)),n=[],d=[];o.data&&(d=o.data);for(let e=0;e<d.length;e++){let t=d[e];n.push(this.parseOrder(t,r))}return this.sortBy(n,"timestamp")}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({openClosed:"OPEN"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({openClosed:"CLOSED"},s))}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="privatePostExchange"+this.capitalize(i)+t,n=this.market(e),d={quantity:this.amountToPrecision(e,s),currencyPair:n.id};"limit"===t&&(d.price=this.priceToPrecision(e,r));let c=await this[o](this.extend(d,a));const h={info:c,id:c.orderId.toString()};return this.safeValue(c,"success")&&(h.status="open"),h}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();let s=this.market(t).id,o=await this.privatePostExchangeCancellimit(this.extend({orderId:e,currencyPair:s},i)),n=this.safeString(o,"message",this.json(o));if("success"in o){if(!o.success)throw new d(n);if("cancelled"in o){if(o.cancelled)return{status:"canceled",info:o};throw new c(n)}}throw new r(this.id+" cancelOrder() failed: "+this.json(o))}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a=this.currency(e),o=i;void 0!==s&&(o+="::"+s);let n={amount:this.decimalToPrecision(t,p,a.precision,m),currency:a.id,wallet:o},d=await this.privatePostPaymentOutCoin(this.extend(n,r)),c=this.safeInteger(d,"id");if(void 0===c)throw new u(this.id+" insufficient funds to cover requested withdrawal amount post fees "+this.json(d));return{info:d,id:c}}async fetchDepositAddress(e,t={}){let i={currency:e},s=await this.privateGetPaymentGetAddress(this.extend(i,t)),r=this.safeString(s,"wallet"),a=void 0;if(r.indexOf(":")>=0){let e=r.split(":");r=e[0],a=e[2]}return this.checkAddress(r),{currency:e,address:r,tag:a,info:s}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+e,n=this.urlencode(this.keysort(s));if("GET"===i&&Object.keys(s).length&&(o+="?"+n),"private"===t){this.checkRequiredCredentials(),"POST"===i&&(a=n);let e=this.hmac(this.encode(n),this.encode(this.secret),"sha256");r={"Api-Key":this.apiKey,Sign:e.toUpperCase(),"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&"{"===o[0]){if(e>=300){let e=this.safeString(n,"errorCode");if(e in this.exceptions){throw new(0,this.exceptions[e])(this.id+" "+o)}throw new r(this.id+" "+o)}if(!this.safeValue(n,"success",!0)){const e=this.safeString(n,"message");if(void 0!==e&&e.indexOf("Cannot find order")>=0)throw new c(this.id+" "+o);const t=this.safeString(n,"exception");if(void 0!==t&&t.indexOf("Minimal amount is")>=0)throw new d(this.id+" "+o);throw new r(this.id+" "+o)}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"luno",name:"luno",countries:["GB","SG","ZA"],rateLimit:1e3,version:"1",has:{CORS:!1,fetchTickers:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766607-8c1a69d8-5ede-11e7-930c-540b5eb9be24.jpg",api:"https://api.mybitx.com/api",www:"https://www.luno.com",doc:["https://www.luno.com/en/api","https://npmjs.org/package/bitx","https://github.com/bausmeier/node-bitx"]},api:{public:{get:["orderbook","orderbook_top","ticker","tickers","trades"]},private:{get:["accounts/{id}/pending","accounts/{id}/transactions","balance","fee_info","funding_address","listorders","listtrades","orders/{id}","quotes/{id}","withdrawals","withdrawals/{id}"],post:["accounts","postorder","marketorder","stoporder","funding_address","withdrawals","send","quotes","oauth2/grant"],put:["quotes/{id}"],delete:["quotes/{id}","withdrawals/{id}"]}}})}async fetchMarkets(e={}){let t=await this.publicGetTickers(),i=[];for(let e=0;e<t.tickers.length;e++){let s=t.tickers[e],r=s.pair,a=r.slice(0,3),o=r.slice(3,6),n=(a=this.commonCurrencyCode(a))+"/"+(o=this.commonCurrencyCode(o));i.push({id:r,symbol:n,base:a,quote:o,info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetBalance(),i=t.balance,s={info:t};for(let e=0;e<i.length;e++){let t=i[e],r=this.commonCurrencyCode(t.asset),a=parseFloat(t.reserved),o=parseFloat(t.unconfirmed),n=parseFloat(t.balance),d={free:0,used:this.sum(a,o),total:this.sum(n,o)};d.free=d.total-d.used,s[r]=d}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s="publicGetOrderbook";void 0!==t&&t<=100&&(s+="Top");let r=await this[s](this.extend({pair:this.marketId(e)},i)),a=r.timestamp;return this.parseOrderBook(r,a,"bids","asks","price","volume")}parseOrder(e,t){let i=e.creation_timestamp,s="PENDING"===e.state?"open":"closed",r="ASK"===e.type?"sell":"buy";void 0===t&&(t=this.findMarket(e.pair));let a=t.symbol,o=this.safeFloat(e,"limit_price"),n=this.safeFloat(e,"limit_volume"),d=this.safeFloat(e,"fee_counter"),c=this.safeFloat(e,"fee_base"),h=this.safeFloat(e,"base"),l=this.safeFloat(e,"counter"),u=void 0;void 0!==n&&void 0!==h&&(u=Math.max(0,n-h));let p={currency:void 0};return d?(p.side="quote",p.cost=d):(p.side="base",p.cost=c),{id:e.order_id,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:s,symbol:a,type:void 0,side:r,price:o,amount:n,filled:h,cost:l,remaining:u,trades:void 0,fee:p,info:e}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetOrdersId(this.extend({id:e},i));return this.parseOrder(s)}async fetchOrdersByState(e,t,i,s,r={}){await this.loadMarkets();let a={},o=void 0;void 0!==e&&(a.state=e),void 0!==t&&(o=this.market(t),a.pair=o.id);let n=await this.privateGetListorders(this.extend(a,r)),d=this.safeValue(n,"orders",[]);return this.parseOrders(d,o,i,s)}async fetchOrders(e,t,i,s={}){return await this.fetchOrdersByState(void 0,e,t,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByState("PENDING",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByState("COMPLETE",e,t,i,s)}parseTicker(e,t){let i=e.timestamp,s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"last_trade");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"rolling_24_hour_volume"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s=this.indexBy(i.tickers,"pair"),r=Object.keys(s),a={};for(let e=0;e<r.length;e++){let t=r[e],i=this.markets_by_id[t],o=i.symbol,n=s[t];a[o]=this.parseTicker(n,i)}return a}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTicker(this.extend({pair:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=this.safeString(e,"order_id"),s=void 0,r=void 0;void 0!==i?s="sell"===(r="ASK"===e.type?"sell":"buy")&&e.is_buy?"maker":"buy"!==r||e.is_buy?"taker":"maker":r=e.is_buy?"buy":"sell";let a=this.safeFloat(e,"fee_base"),o=this.safeFloat(e,"fee_counter"),n=void 0,d=void 0;return void 0!==a?0!==a&&(n=t.base,d=a):void 0!==o&&0!==o&&(n=t.quote,d=o),{info:e,id:void 0,timestamp:e.timestamp,datetime:this.iso8601(e.timestamp),symbol:t.symbol,order:i,type:void 0,side:r,takerOrMaker:s,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:this.safeFloat(e,"counter"),fee:{cost:d,currency:n}}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={pair:r.id};void 0!==t&&(a.since=t);let o=await this.publicGetTrades(this.extend(a,s)),n=this.safeValue(o,"trades",[]);return this.parseTrades(n,r,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();let r=this.market(e),o={pair:r.id};void 0!==t&&(o.since=t),void 0!==i&&(o.limit=i);let n=await this.privateGetListtrades(this.extend(o,s)),d=this.safeValue(n,"trades",[]);return this.parseTrades(d,r,t,i)}async fetchTradingFees(e={}){await this.loadMarkets();let t=await this.privateGetFeeInfo(e);return{info:t,maker:this.safeFloat(t,"maker_fee"),taker:this.safeFloat(t,"taker_fee")}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o="privatePost",n={pair:this.marketId(e)};"market"===t?(o+="Marketorder",n.type=i.toUpperCase(),"buy"===i?n.counter_volume=s:n.base_volume=s):(o+="Postorder",n.volume=s,n.price=r,n.type="buy"===i?"BID":"ASK");let d=await this[o](this.extend(n,a));return{info:d,id:d.order_id}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostStoporder({order_id:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if(Object.keys(n).length&&(o+="?"+this.urlencode(n)),"private"===t){this.checkRequiredCredentials();let e=this.encode(this.apiKey+":"+this.secret);e=this.stringToBase64(e),r={Authorization:"Basic "+this.decode(e)}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"lykke",name:"Lykke",countries:["CH"],version:"v1",rateLimit:200,has:{CORS:!1,fetchOHLCV:!1,fetchTrades:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrder:!0,fetchOrders:!0},requiredCredentials:{apiKey:!0,secret:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/34487620-3139a7b0-efe6-11e7-90f5-e520cef74451.jpg",api:{mobile:"https://public-api.lykke.com/api",public:"https://hft-api.lykke.com/api",private:"https://hft-api.lykke.com/api",test:{mobile:"https://public-api.lykke.com/api",public:"https://hft-service-dev.lykkex.net/api",private:"https://hft-service-dev.lykkex.net/api"}},www:"https://www.lykke.com",doc:["https://hft-api.lykke.com/swagger/ui/","https://www.lykke.com/lykke_api"],fees:"https://www.lykke.com/trading-conditions"},api:{mobile:{get:["Market/{market}"]},public:{get:["AssetPairs","AssetPairs/{id}","IsAlive","OrderBooks","OrderBooks/{AssetPairId}"]},private:{get:["Orders","Orders/{id}","Wallets"],post:["Orders/limit","Orders/market","Orders/{id}/Cancel"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001},deposit:{BTC:0}}}})}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetWallets(),i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.AssetId,a=s.Balance,o=s.Reserved,n=a-o;i[r]={free:n,used:o,total:a}}return this.parseBalance(i)}async cancelOrder(e,t,i={}){return await this.privatePostOrdersIdCancel({id:e})}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n={AssetPairId:o.id,OrderAction:this.capitalize(i),Volume:s};"market"===t?n.Asset="buy"===i?o.base:o.quote:"limit"===t&&(n.Price=r);let d="privatePostOrders"+this.capitalize(t);return{id:void 0,info:await this[d](this.extend(n,a))}}async fetchMarkets(e={}){let t=await this.publicGetAssetPairs(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.Id,a=s.Name,[o,n]=a.split("/"),d=this.commonCurrencyCode(o),c=this.commonCurrencyCode(n),h=d+"/"+c,l={amount:s.Accuracy,price:s.InvertedAccuracy};i.push({id:r,symbol:h,base:d,quote:c,active:!0,info:s,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:Math.pow(10,l.amount)},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)},cost:{min:void 0,max:void 0}}})}return i}parseTicker(e,t){let i=this.milliseconds(),s=void 0;t&&(s=t.symbol);let r=parseFloat(e.lastPrice);return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:parseFloat(e.bid),bidVolume:void 0,ask:parseFloat(e.ask),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:parseFloat(e.volume24H),info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.mobileGetMarketMarket(this.extend({market:i.id},t));return this.parseTicker(s,i)}parseOrderStatus(e){return this.safeString({Pending:"open",InOrderBook:"open",Processing:"open",Matched:"closed",Cancelled:"canceled"},e,e)}parseOrder(e,t){let i=this.parseOrderStatus(this.safeString(e,"Status")),s=void 0;if(void 0===t){let i=this.safeString(e,"AssetPairId");t=this.safeValue(this.markets_by_id,i)}t&&(s=t.symbol);let r=this.parse8601(this.safeString(e,"LastMatchTime")),a=void 0;"Registered"in e&&e.Registered?a=this.parse8601(e.Registered):"CreatedAt"in e&&e.CreatedAt&&(a=this.parse8601(e.CreatedAt));let o=this.safeFloat(e,"Price"),n=this.safeFloat(e,"Volume"),d=this.safeFloat(e,"RemainingVolume"),c=n-d,h=c*o;return{info:e,id:e.Id,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:r,symbol:s,type:void 0,side:void 0,price:o,cost:h,average:void 0,amount:n,filled:c,remaining:d,status:i,fee:void 0}}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetOrdersId(this.extend({id:e},i));return this.parseOrder(s)}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=await this.privateGetOrders();return this.parseOrders(r,void 0,t,i)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=await this.privateGetOrders(this.extend({status:"InOrderBook"},s));return this.parseOrders(r,void 0,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=await this.privateGetOrders(this.extend({status:"Matched"},s));return this.parseOrders(r,void 0,t,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetOrderBooksAssetPairId(this.extend({AssetPairId:this.marketId(e)},i)),r={timestamp:void 0,bids:[],asks:[]},a=void 0;for(let e=0;e<s.length;e++){let t=s[e];t.IsBuy?r.bids=this.arrayConcat(r.bids,t.Prices):r.asks=this.arrayConcat(r.asks,t.Prices);let i=this.parse8601(t.Timestamp);a=void 0===a?i:Math.max(a,i)}return this.parseOrderBook(r,a,"bids","asks","Price","Volume")}parseBidAsk(e,t=0,i=1){let s=parseFloat(e[t]),r=parseFloat(e[i]);return r<0&&(r=-r),[s,r]}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));return"public"===t?Object.keys(n).length&&(o+="?"+this.urlencode(n)):"private"===t&&("GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n)),this.checkRequiredCredentials(),r={"api-key":this.apiKey,Accept:"application/json","Content-Type":"application/json"},"POST"===i&&Object.keys(s).length&&(a=this.json(s))),{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"mercado",name:"Mercado Bitcoin",countries:["BR"],rateLimit:1e3,version:"v3",has:{CORS:!0,createMarketOrder:!1,fetchOrder:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27837060-e7c58714-60ea-11e7-9192-f05e86adb83f.jpg",api:{public:"https://www.mercadobitcoin.net/api",private:"https://www.mercadobitcoin.net/tapi"},www:"https://www.mercadobitcoin.com.br",doc:["https://www.mercadobitcoin.com.br/api-doc","https://www.mercadobitcoin.com.br/trade-api"]},api:{public:{get:["{coin}/orderbook/","{coin}/ticker/","{coin}/trades/","{coin}/trades/{from}/","{coin}/trades/{from}/{to}","{coin}/day-summary/{year}/{month}/{day}/"]},private:{post:["cancel_order","get_account_info","get_order","get_withdrawal","list_system_messages","list_orders","list_orderbook","place_buy_order","place_sell_order","withdraw_coin"]}},markets:{"BTC/BRL":{id:"BRLBTC",symbol:"BTC/BRL",base:"BTC",quote:"BRL",suffix:"Bitcoin"},"LTC/BRL":{id:"BRLLTC",symbol:"LTC/BRL",base:"LTC",quote:"BRL",suffix:"Litecoin"},"BCH/BRL":{id:"BRLBCH",symbol:"BCH/BRL",base:"BCH",quote:"BRL",suffix:"BCash"},"XRP/BRL":{id:"BRLXRP",symbol:"XRP/BRL",base:"XRP",quote:"BRL",suffix:"Ripple"},"ETH/BRL":{id:"BRLETH",symbol:"ETH/BRL",base:"ETH",quote:"BRL",suffix:"Ethereum"}},fees:{trading:{maker:.003,taker:.7/100}}})}async fetchOrderBook(e,t,i={}){let s=this.market(e),r=await this.publicGetCoinOrderbook(this.extend({coin:s.base},i));return this.parseOrderBook(r)}async fetchTicker(e,t={}){let i=this.market(e),s=(await this.publicGetCoinTicker(this.extend({coin:i.base},t))).ticker,r=1e3*parseInt(s.date),a=this.safeFloat(s,"last");return{symbol:e,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"buy"),bidVolume:void 0,ask:this.safeFloat(s,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"vol"),quoteVolume:void 0,info:s}}parseTrade(e,t){let i=1e3*e.date;return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:e.tid.toString(),order:void 0,type:void 0,side:e.type,price:e.price,amount:e.amount}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a="publicGetCoinTrades",o={coin:r.base};void 0!==t&&(a+="From",o.from=parseInt(t/1e3)),void 0!==this.safeInteger(s,"to")&&(a+="To");let n=await this[a](this.extend(o,s));return this.parseTrades(n,r,t,i)}async fetchBalance(e={}){let t=await this.privatePostGetAccountInfo(),i=t.response_data.balance,s={info:t},r=Object.keys(this.currencies);for(let e=0;e<r.length;e++){let t=r[e],a=t.toLowerCase(),o=this.account();a in i&&(o.free=parseFloat(i[a].available),o.total=parseFloat(i[a].total),o.used=o.total-o.free),s[t]=o}return this.parseBalance(s)}async createOrder(e,t,i,s,a,o={}){if("market"===t)throw new r(this.id+" allows limit orders only");let n="privatePostPlace"+this.capitalize(i)+"Order",d={coin_pair:this.marketId(e),quantity:s,limit_price:a},c=await this[n](this.extend(d,o));return{info:c,id:c.response_data.order.order_id.toString()}}async cancelOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();let s=this.market(t),r=await this.privatePostCancelOrder(this.extend({coin_pair:s.id,order_id:e},i));return this.parseOrder(r.response_data.order,s)}parseOrderStatus(e){return this.safeString({2:"open",3:"canceled",4:"closed"},e,e)}parseOrder(e,t){const i=this.safeString(e,"order_id");let s=void 0;"order_type"in e&&(s=1===e.order_type?"buy":"sell");let r=this.parseOrderStatus(this.safeString(e,"status")),a=void 0;if(void 0===t){let i=this.safeString(e,"coin_pair");t=this.safeValue(this.markets_by_id,i)}void 0!==t&&(a=t.symbol);let o=this.safeInteger(e,"created_timestamp");void 0!==o&&(o*=1e3);let n={cost:this.safeFloat(e,"fee"),currency:t.quote},d=this.safeFloat(e,"limit_price"),c=this.safeFloat(e,"executed_price_avg"),h=this.safeFloat(e,"quantity"),l=this.safeFloat(e,"executed_quantity"),u=h-l,p=h*c,m=this.safeInteger(e,"updated_timestamp");return void 0!==m&&(m*=1e3),{info:e,id:i,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:m,symbol:a,type:"limit",side:s,price:d,cost:p,average:c,amount:h,filled:l,remaining:u,status:r,fee:n,trades:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new a(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();let s=this.market(t),r=void 0;return r=await this.privatePostGetOrder(this.extend({coin_pair:s.id,order_id:parseInt(e)},i)),this.parseOrder(r.response_data.order)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();let o={coin:this.currency(e).id,quantity:t.toFixed(10),address:i};if("BRL"===e){if(!("account_ref"in a))throw new r(this.id+" requires account_ref parameter to withdraw "+e)}else if("LTC"!==e){if(!("tx_fee"in a))throw new r(this.id+" requires tx_fee parameter to withdraw "+e);if("XRP"===e)if(void 0===s){if(!("destination_tag"in a))throw new r(this.id+" requires a tag argument or destination_tag parameter to withdraw "+e)}else o.destination_tag=s}let n=await this.privatePostWithdrawCoin(this.extend(o,a));return{info:n,id:n.response_data.withdrawal.id}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/",n=this.omit(s,this.extractParams(e));if("public"===t)o+=this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials(),o+=this.version+"/";let t=this.nonce();a=this.urlencode(this.extend({tapi_method:e,tapi_nonce:t},s));let i="/tapi/"+this.version+"/?"+a;r={"Content-Type":"application/x-www-form-urlencoded","TAPI-ID":this.apiKey,"TAPI-MAC":this.hmac(this.encode(i),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("error_message"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"mixcoins",name:"MixCoins",countries:["GB","HK"],rateLimit:1500,version:"v1",has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/30237212-ed29303c-9535-11e7-8af8-fcd381cfa20c.jpg",api:"https://mixcoins.com/api",www:"https://mixcoins.com",doc:"https://mixcoins.com/help/api/"},api:{public:{get:["ticker","trades","depth"]},private:{post:["cancel","info","orders","order","transactions","trade"]}},markets:{"BTC/USD":{id:"btc_usd",symbol:"BTC/USD",base:"BTC",quote:"USD",maker:.0015,taker:.0025},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",maker:.001,taker:.0015},"BCH/BTC":{id:"bch_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",maker:.001,taker:.0015},"LSK/BTC":{id:"lsk_btc",symbol:"LSK/BTC",base:"LSK",quote:"BTC",maker:.0015,taker:.0025},"BCH/USD":{id:"bch_usd",symbol:"BCH/USD",base:"BCH",quote:"USD",maker:.001,taker:.0015},"ETH/USD":{id:"eth_usd",symbol:"ETH/USD",base:"ETH",quote:"USD",maker:.001,taker:.0015}}})}async fetchBalance(e={}){let t=(await this.privatePostInfo()).result.wallet,i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=r.toLowerCase(),o=this.account();a in t&&(o.free=parseFloat(t[a].avail),o.used=parseFloat(t[a].lock),o.total=this.sum(o.free,o.used)),i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){let s=await this.publicGetDepth(this.extend({market:this.marketId(e)},i));return this.parseOrderBook(s.result)}async fetchTicker(e,t={}){let i=(await this.publicGetTicker(this.extend({market:this.marketId(e)},t))).result,s=this.milliseconds(),r=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"buy"),bidVolume:void 0,ask:this.safeFloat(i,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(i,"vol"),quoteVolume:void 0,info:i}}parseTrade(e,t){let i=1e3*parseInt(e.date);return{id:e.id.toString(),info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTrades(this.extend({market:r.id},s));return this.parseTrades(a.result,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o={market:this.marketId(e),op:i,amount:s};"market"===t?(o.order_type=1,o.price=r):o.order_type=0;let n=await this.privatePostTrade(this.extend(o,a));return{info:n,id:n.result.id.toString()}}async cancelOrder(e,t,i={}){return await this.privatePostCancel({id:e})}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.nonce();a=this.urlencode(this.extend({nonce:e},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.secret,"sha512")}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("status"in n&&200===n.status)return n;throw new r(this.id+" "+this.json(n))}}},function(e,t,i){"use strict";const s=i(1),{ArgumentsRequired:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"negociecoins",name:"NegocieCoins",countries:["BR"],rateLimit:1e3,version:"v3",has:{fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/38008571-25a6246e-3258-11e8-969b-aeb691049245.jpg",api:{public:"https://broker.negociecoins.com.br/api/v3",private:"https://broker.negociecoins.com.br/tradeapi/v1"},www:"https://www.negociecoins.com.br",doc:["https://www.negociecoins.com.br/documentacao-tradeapi","https://www.negociecoins.com.br/documentacao-api"],fees:"https://www.negociecoins.com.br/comissoes"},api:{public:{get:["{PAR}/ticker","{PAR}/orderbook","{PAR}/trades","{PAR}/trades/{timestamp_inicial}","{PAR}/trades/{timestamp_inicial}/{timestamp_final}"]},private:{get:["user/balance","user/order/{orderId}"],post:["user/order","user/orders"],delete:["user/order/{orderId}"]}},markets:{"B2X/BRL":{id:"b2xbrl",symbol:"B2X/BRL",base:"B2X",quote:"BRL"},"BCH/BRL":{id:"bchbrl",symbol:"BCH/BRL",base:"BCH",quote:"BRL"},"BTC/BRL":{id:"btcbrl",symbol:"BTC/BRL",base:"BTC",quote:"BRL"},"BTG/BRL":{id:"btgbrl",symbol:"BTG/BRL",base:"BTG",quote:"BRL"},"DASH/BRL":{id:"dashbrl",symbol:"DASH/BRL",base:"DASH",quote:"BRL"},"LTC/BRL":{id:"ltcbrl",symbol:"LTC/BRL",base:"LTC",quote:"BRL"}},fees:{trading:{maker:.003,taker:.004},funding:{withdraw:{BTC:.001,BCH:3e-5,BTG:9e-5,LTC:.005}}},limits:{amount:{min:.001,max:void 0}},precision:{amount:8,price:8}})}parseTicker(e,t){let i=1e3*e.date,s=void 0!==t?t.symbol:void 0,r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetPARTicker(this.extend({PAR:i.id},t));return this.parseTicker(s,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetPAROrderbook(this.extend({PAR:this.marketId(e)},i));return this.parseOrderBook(s,void 0,"bid","ask","price","quantity")}parseTrade(e,t){let i=1e3*e.date,s=this.safeFloat(e,"price"),r=this.safeFloat(e,"amount"),a=t.symbol,o=parseFloat(this.costToPrecision(a,s*r));return{timestamp:i,datetime:this.iso8601(i),symbol:a,id:this.safeString(e,"tid"),order:void 0,type:"limit",side:e.type.toLowerCase(),price:s,amount:r,cost:o,fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e);void 0===t&&(t=0);let a={PAR:r.id,timestamp_inicial:parseInt(t/1e3)},o=await this.publicGetPARTradesTimestampInicial(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetUserBalance(e),i={info:t},s=this.safeValue(t,"coins");for(let e=0;e<s.length;e++){const t=s[e],r=this.safeString(t,"name"),a=this.commonCurrencyCode(r),o=this.safeFloat(t,"openOrders"),n=this.safeFloat(t,"withdraw"),d={free:this.safeFloat(t,"total"),used:this.sum(o,n),total:this.safeFloat(t,"available")};d.used=d.total-d.free,i[a]=d}return this.parseBalance(i)}parseOrder(e,t){let i=void 0;void 0===t&&(t=this.safeValue(this.marketsById,e.pair))&&(i=t.symbol);let s=this.parse8601(e.created),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"quantity"),o=this.safeFloat(e,"total"),n=this.safeFloat(e,"pending_quantity"),d=this.safeFloat(e,"executed_quantity"),c=e.status;c="filled"===c?"closed":"cancelled"===c?"canceled":"open";return{id:e.id.toString(),datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:c,symbol:i,type:"limit",side:e.type,price:r,cost:o,amount:a,filled:d,remaining:n,trades:void 0,fee:{currency:t.quote,cost:this.safeFloat(e,"fee")},info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n=await this.privatePostUserOrder(this.extend({pair:o.id,price:this.priceToPrecision(e,r),volume:this.amountToPrecision(e,s),type:i},a)),d=this.parseOrder(n[0],o),c=d.id;return this.orders[c]=d,d}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=this.markets[t],r=await this.privateDeleteUserOrderOrderId(this.extend({orderId:e},i));return this.parseOrder(r[0],s)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetUserOrderOrderId(this.extend({orderId:e},i));return this.parseOrder(s[0])}async fetchOrders(e,t,i,s={}){if(await this.loadMarkets(),void 0===e)throw new r(this.id+" fetchOrders () requires a symbol argument");let a=this.market(e),o={pair:a.id};void 0!==t&&(o.startDate=this.ymd(t)),void 0!==i&&(o.pageSize=i);let n=await this.privatePostUserOrders(this.extend(o,s));return this.parseOrders(n,a)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"pending"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"filled"},s))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t]+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e)),d=this.urlencode(n);if("public"===t)d.length&&(o+="?"+d);else{this.checkRequiredCredentials();let e=this.seconds().toString(),t=this.nonce().toString(),s="";d.length?(a=this.json(n),s=this.hash(this.encode(a),"md5","base64")):a="";let c=this.encodeURIComponent(o).toLowerCase(),h=[this.apiKey,i,c,e,t,s].join(""),l=this.base64ToBinary(this.secret),u=this.hmac(this.encode(h),l,"sha256","base64");u=this.binaryToString(u),r={Authorization:"amx "+[this.apiKey,u,t,e].join(":")},"POST"===i?(r["Content-Type"]="application/json; charset=UTF-8",r["Content-Length"]=a.length):d.length&&(o+="?"+d,a=void 0)}return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"nova",name:"Novaexchange",countries:["TZ"],rateLimit:2e3,version:"v2",has:{CORS:!1,createMarketOrder:!1,createDepositAddress:!0,fetchDepositAddress:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30518571-78ca0bca-9b8a-11e7-8840-64b83a4a94b2.jpg",api:"https://novaexchange.com/remote",www:"https://novaexchange.com",doc:"https://novaexchange.com/remote/faq"},api:{public:{get:["markets/","markets/{basecurrency}/","market/info/{pair}/","market/orderhistory/{pair}/","market/openorders/{pair}/buy/","market/openorders/{pair}/sell/","market/openorders/{pair}/both/","market/openorders/{pair}/{ordertype}/"]},private:{post:["getbalances/","getbalance/{currency}/","getdeposits/","getwithdrawals/","getnewdepositaddress/{currency}/","getdepositaddress/{currency}/","myopenorders/","myopenorders_market/{pair}/","cancelorder/{orderid}/","withdraw/{currency}/","trade/{pair}/","tradehistory/","getdeposithistory/","getwithdrawalhistory/","walletstatus/","walletstatus/{currency}/"]}}})}async fetchMarkets(e={}){let t=(await this.publicGetMarkets()).markets,i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.marketname,[a,o]=r.split("_"),n=o+"/"+a,d=!0;s.disabled&&(d=!1),i.push({id:r,symbol:n,base:o,quote:a,active:d,info:s})}return i}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetMarketOpenordersPairBoth(this.extend({pair:this.marketId(e)},i));return this.parseOrderBook(s,void 0,"buyorders","sellorders","price","amount")}async fetchTicker(e,t={}){await this.loadMarkets();let i=(await this.publicGetMarketInfoPair(this.extend({pair:this.marketId(e)},t))).markets[0],s=this.milliseconds(),r=this.safeFloat(i,"last_price");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high24h"),low:this.safeFloat(i,"low24h"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:this.safeFloat(i,"change24h"),average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(i,"volume24h"),info:i}}parseTrade(e,t){let i=1e3*e.unix_t_datestamp;return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:void 0,order:void 0,type:void 0,side:e.tradetype.toLowerCase(),price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetMarketOrderhistoryPair(this.extend({pair:r.id},s));return this.parseTrades(a.items,r,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostGetbalances(),i=t.balances,s={info:t};for(let e=0;e<i.length;e++){let t=i[e],r=t.currency,a=parseFloat(t.amount_lockbox),o=parseFloat(t.amount_trades),n={free:parseFloat(t.amount),used:this.sum(a,o),total:parseFloat(t.amount_total)};s[r]=n}return this.parseBalance(s)}async createOrder(e,t,i,s,a,o={}){if("market"===t)throw new r(this.id+" allows limit orders only");await this.loadMarkets(),s=s.toString(),a=a.toString();const n=this.market(e),d={tradetype:i.toUpperCase(),tradeamount:s,tradeprice:a,tradebase:1,pair:n.id},c=await this.privatePostTradePair(this.extend(d,o)),h=this.safeValue(c,"tradeitems",[]),l=this.indexBy(h,"type"),u=this.safeValue(l,"created",{});return{info:c,id:this.safeString(u,"orderid")}}async cancelOrder(e,t,i={}){return await this.privatePostCancelorder(this.extend({orderid:e},i))}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);let s=await this.privatePostGetnewdepositaddressCurrency(this.extend({currency:i},t));const r=this.safeString(s,"address");return this.checkAddress(r),{currency:e,address:r,tag:this.safeString(s,"tag"),info:s}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);let s=await this.privatePostGetdepositaddressCurrency(this.extend({currency:i},t));const r=this.safeString(s,"address");return this.checkAddress(r),{currency:e,address:r,tag:this.safeString(s,"tag"),info:s}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/";"private"===t&&(o+=t+"/"),o+=this.implodeParams(e,s);let n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString();o+="?"+this.urlencode({nonce:e});let t=this.hmac(this.encode(o),this.encode(this.secret),"sha512","base64");a=this.urlencode(this.extend({apikey:this.apiKey,signature:t},n)),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("status"in n&&"success"!==n.status)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(13);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okcoincny",name:"OKCoin CNY",countries:["CN"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766792-8be9157a-5ee5-11e7-926c-6d69b8d3378d.jpg",api:{web:"https://www.okcoin.cn",public:"https://www.okcoin.cn/api",private:"https://www.okcoin.cn/api"},www:"https://www.okcoin.cn",doc:"https://www.okcoin.cn/rest_getStarted.html"},markets:{"BTC/CNY":{id:"btc_cny",symbol:"BTC/CNY",base:"BTC",quote:"CNY",type:"spot",spot:!0,future:!1},"LTC/CNY":{id:"ltc_cny",symbol:"LTC/CNY",base:"LTC",quote:"CNY",type:"spot",spot:!0,future:!1},"ETH/CNY":{id:"eth_cny",symbol:"ETH/CNY",base:"ETH",quote:"CNY",type:"spot",spot:!0,future:!1},"ETC/CNY":{id:"etc_cny",symbol:"ETC/CNY",base:"ETC",quote:"CNY",type:"spot",spot:!0,future:!1},"BCH/CNY":{id:"bcc_cny",symbol:"BCH/CNY",base:"BCH",quote:"CNY",type:"spot",spot:!0,future:!1}}})}}},function(e,t,i){"use strict";const s=i(13);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"okex",name:"OKEX",countries:["CN","US"],has:{CORS:!1,futures:!0,fetchTickers:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/32552768-0d6dd3c6-c4a6-11e7-90f8-c043b64756a7.jpg",api:{web:"https://www.okex.com/v2",public:"https://www.okex.com/api",private:"https://www.okex.com/api"},www:"https://www.okex.com",doc:["https://github.com/okcoin-okex/API-docs-OKEx.com","https://www.okex.com/docs/en/"],fees:"https://www.okex.com/pages/products/fees.html"},commonCurrencies:{FAIR:"FairGame",HOT:"Hydro Protocol",HSR:"HC",MAG:"Maggie",YOYO:"YOYOW"},options:{fetchTickersMethod:"fetch_tickers_from_api"}})}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d="quote",c=n[a],h=parseFloat(this.costToPrecision(e,s*c));return"sell"===i?h*=r:d="base",{type:a,currency:n[d],rate:c,cost:parseFloat(this.feeToPrecision(e,h))}}async fetchMarkets(e={}){let t=await super.fetchMarkets(e);for(let e=0;e<t.length;e++)t[e].spot?(t[e].maker=.001,t[e].taker=.0015):(t[e].maker=2e-4,t[e].taker=3e-4);return t}async fetchTickersFromApi(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(this.extend({},t)),s=i.tickers,r=1e3*parseInt(i.date),a={};for(let e=0;e<s.length;e++){let t=s[e];a[(t=this.parseTicker(this.extend(s[e],{timestamp:r}))).symbol]=t}return a}async fetchTickersFromWeb(e,t={}){await this.loadMarkets();let i=(await this.webGetSpotMarketsTickers(this.extend({},t))).data,s={};for(let e=0;e<i.length;e++){let t=this.parseTicker(i[e]);s[t.symbol]=t}return s}async fetchTickers(e,t={}){let i=this.options.fetchTickersMethod;return await this[i](e,t)}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"paymium",name:"Paymium",countries:["FR","EU"],rateLimit:2e3,version:"v1",has:{CORS:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27790564-a945a9d4-5ff9-11e7-9d2d-b635763f2f24.jpg",api:"https://paymium.com/api",www:"https://www.paymium.com",doc:["https://github.com/Paymium/api-documentation","https://www.paymium.com/page/developers"]},api:{public:{get:["countries","data/{id}/ticker","data/{id}/trades","data/{id}/depth","bitcoin_charts/{id}/trades","bitcoin_charts/{id}/depth"]},private:{get:["merchant/get_payment/{UUID}","user","user/addresses","user/addresses/{btc_address}","user/orders","user/orders/{UUID}","user/price_alerts"],post:["user/orders","user/addresses","user/payment_requests","user/price_alerts","merchant/create_payment"],delete:["user/orders/{UUID}/cancel","user/price_alerts/{id}"]}},markets:{"BTC/EUR":{id:"eur",symbol:"BTC/EUR",base:"BTC",quote:"EUR"}},fees:{trading:{maker:.0059,taker:.0059}}})}async fetchBalance(e={}){let t=await this.privateGetUser(),i={info:t},s=Object.keys(this.currencies);for(let e=0;e<s.length;e++){let r=s[e],a=r.toLowerCase(),o=this.account(),n="balance_"+a,d="locked_"+a;n in t&&(o.free=t[n]),d in t&&(o.used=t[d]),o.total=this.sum(o.free,o.used),i[r]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){let s=await this.publicGetDataIdDepth(this.extend({id:this.marketId(e)},i));return this.parseOrderBook(s,void 0,"bids","asks","price","amount")}async fetchTicker(e,t={}){let i=await this.publicGetDataIdTicker(this.extend({id:this.marketId(e)},t)),s=1e3*i.at,r=this.safeFloat(i,"vwap"),a=this.safeFloat(i,"volume"),o=void 0;void 0!==a&&void 0!==r&&(o=a*r);let n=this.safeFloat(i,"price");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:r,open:this.safeFloat(i,"open"),close:n,last:n,previousClose:void 0,change:void 0,percentage:this.safeFloat(i,"variation"),average:void 0,baseVolume:a,quoteVolume:o,info:i}}parseTrade(e,t){let i=1e3*parseInt(e.created_at_int),s="traded_"+t.base.toLowerCase();return{info:e,id:e.uuid,order:void 0,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:e.side,price:e.price,amount:e[s]}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetDataIdTrades(this.extend({id:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o={type:this.capitalize(t)+"Order",currency:this.marketId(e),direction:i,amount:s};"market"!==t&&(o.price=r);let n=await this.privatePostUserOrders(this.extend(o,a));return{info:n,id:n.uuid}}async cancelOrder(e,t,i={}){return await this.privateDeleteUserOrdersUUIDCancel(this.extend({UUID:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=e+o;"POST"===i&&Object.keys(n).length&&(t+=a=this.json(n)),r={"Api-Key":this.apiKey,"Api-Signature":this.hmac(this.encode(t),this.encode(this.secret)),"Api-Nonce":e,"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("errors"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ExchangeNotAvailable:a,RequestTimeout:o,AuthenticationError:n,PermissionDenied:d,DDoSProtection:c,InsufficientFunds:h,OrderNotFound:l,OrderNotCached:u,InvalidOrder:p,AccountSuspended:m,CancelPending:f,InvalidNonce:y}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"poloniex",name:"Poloniex",countries:["US"],rateLimit:1e3,has:{CORS:!1,createDepositAddress:!0,createMarketOrder:!1,editOrder:!0,fetchClosedOrders:"emulated",fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:"emulated",fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrder:"emulated",fetchOrderBooks:!0,fetchOrders:"emulated",fetchOrderStatus:"emulated",fetchOrderTrades:!0,fetchTickers:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:"emulated",withdraw:!0},timeframes:{"5m":300,"15m":900,"30m":1800,"2h":7200,"4h":14400,"1d":86400},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766817-e9456312-5ee6-11e7-9b3c-b628ca5626a5.jpg",api:{public:"https://poloniex.com/public",private:"https://poloniex.com/tradingApi"},www:"https://poloniex.com",doc:"https://docs.poloniex.com",fees:"https://poloniex.com/fees"},api:{public:{get:["return24hVolume","returnChartData","returnCurrencies","returnLoanOrders","returnOrderBook","returnTicker","returnTradeHistory"]},private:{post:["buy","cancelLoanOffer","cancelOrder","closeMarginPosition","createLoanOffer","generateNewAddress","getMarginPosition","marginBuy","marginSell","moveOrder","returnActiveLoans","returnAvailableAccountBalances","returnBalances","returnCompleteBalances","returnDepositAddresses","returnDepositsWithdrawals","returnFeeInfo","returnLendingHistory","returnMarginAccountSummary","returnOpenLoanOffers","returnOpenOrders","returnOrderTrades","returnTradableBalances","returnTradeHistory","sell","toggleAutoRenew","transferBalance","withdraw"]}},fees:{trading:{maker:.001,taker:.002},funding:{}},limits:{amount:{min:1e-6,max:1e9},price:{min:1e-8,max:1e9},cost:{min:0,max:1e9}},precision:{amount:8,price:8},commonCurrencies:{AIR:"AirCoin",APH:"AphroditeCoin",BCC:"BTCtalkcoin",BDG:"Badgercoin",BTM:"Bitmark",CON:"Coino",GOLD:"GoldEagles",GPUC:"GPU",HOT:"Hotcoin",ITC:"Information Coin",PLX:"ParallaxCoin",KEY:"KEYCoin",STR:"XLM",SOC:"SOCC",XAP:"API Coin"},options:{limits:{cost:{min:{BTC:1e-4,ETH:1e-4,XMR:1e-4,USDT:1}}}},exceptions:{exact:{"You may only place orders that reduce your position.":p,"Invalid order number, or you are not the person who placed the order.":l,"Permission denied":d,"Connection timed out. Please try again.":o,"Internal error. Please try again.":a,"Order not found, or you are not the person who placed it.":l,"Invalid API key/secret pair.":n,"Please do not make more than 8 API calls per second.":c,"Rate must be greater than zero.":p},broad:{"Total must be at least":p,"This account is frozen.":m,"Not enough":h,"Nonce must be greater":y,"You have already called cancelOrder or moveOrder on this order.":f,"Amount must be at least":p}}})}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d="quote",c=n[a],h=parseFloat(this.costToPrecision(e,s*c));return"sell"===i?h*=r:d="base",{type:a,currency:n[d],rate:c,cost:parseFloat(this.feeToPrecision(e,h))}}parseOHLCV(e,t,i="5m",s,r){return[1e3*e.date,e.open,e.high,e.low,e.close,e.quoteVolume]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();let a=this.market(e);void 0===i&&(i=0);let o={currencyPair:a.id,period:this.timeframes[t],start:parseInt(i/1e3)};o.end=void 0!==s?this.sum(o.start,s*this.timeframes[t]):this.sum(this.seconds(),1);let n=await this.publicGetReturnChartData(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}async fetchMarkets(e={}){const t=await this.publicGetReturnTicker(),i=Object.keys(t),s=[];for(let e=0;e<i.length;e++){const r=i[e],a=t[r],[o,n]=r.split("_"),d=this.commonCurrencyCode(n),c=this.commonCurrencyCode(o),h=d+"/"+c,l=this.extend(this.limits,{cost:{min:this.safeValue(this.options.limits.cost.min,c)}});s.push(this.extend(this.fees.trading,{id:r,symbol:h,baseId:n,quoteId:o,base:d,quote:c,active:"1"!==a.isFrozen,limits:l,info:a}))}return s}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostReturnCompleteBalances(this.extend({account:"all"},e)),i={info:t},s=Object.keys(t);for(let e=0;e<s.length;e++){let r=s[e],a=t[r],o=this.commonCurrencyCode(r),n={free:parseFloat(a.available),used:parseFloat(a.onOrders),total:0};n.total=this.sum(n.free,n.used),i[o]=n}return this.parseBalance(i)}async fetchTradingFees(e={}){await this.loadMarkets();let t=await this.privatePostReturnFeeInfo();return{info:t,maker:this.safeFloat(t,"makerFee"),taker:this.safeFloat(t,"takerFee"),withdraw:{},deposit:{}}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={currencyPair:this.marketId(e)};void 0!==t&&(s.depth=t);let r=await this.publicGetReturnOrderBook(this.extend(s,i)),a=this.parseOrderBook(r);return a.nonce=this.safeInteger(r,"seq"),a}async fetchOrderBooks(e,t={}){await this.loadMarkets();let i=await this.publicGetReturnOrderBook(this.extend({currencyPair:"all"},t)),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){let t=s[e],a=void 0;if(t in this.markets_by_id)a=this.markets_by_id[t].symbol;else{let[e,i]=t.split("_");a=this.commonCurrencyCode(i)+"/"+this.commonCurrencyCode(e)}let o=this.parseOrderBook(i[t]);o.nonce=this.safeInteger(i[t],"seq"),r[a]=o}return r}parseTicker(e,t){let i=this.milliseconds(),s=void 0;t&&(s=t.symbol);let r=void 0,a=void 0,o=void 0,n=this.safeFloat(e,"last"),d=this.safeFloat(e,"percentChange");return-1!==d&&(a=n-(r=n/this.sum(1,d)),o=this.sum(n,r)/2),{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high24hr"),low:this.safeFloat(e,"low24hr"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:r,close:n,last:n,previousClose:void 0,change:a,percentage:100*d,average:o,baseVolume:this.safeFloat(e,"quoteVolume"),quoteVolume:this.safeFloat(e,"baseVolume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetReturnTicker(t),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){let t=s[e],a=void 0,o=void 0;if(t in this.markets_by_id)a=(o=this.markets_by_id[t]).symbol;else{let[e,i]=t.split("_");o={symbol:a=this.commonCurrencyCode(i)+"/"+this.commonCurrencyCode(e)}}let n=i[t];r[a]=this.parseTicker(n,o)}return r}async fetchCurrencies(e={}){let t=await this.publicGetReturnCurrencies(e),i=Object.keys(t),s={};for(let e=0;e<i.length;e++){let r=i[e],a=t[r],o=8,n=this.commonCurrencyCode(r),d=0===a.delisted&&!a.disabled;s[n]={id:r,code:n,info:a,name:a.name,active:d,fee:this.safeFloat(a,"txFee"),precision:o,limits:{amount:{min:Math.pow(10,-o),max:Math.pow(10,o)},price:{min:Math.pow(10,-o),max:Math.pow(10,o)},cost:{min:void 0,max:void 0},withdraw:{min:a.txFee,max:Math.pow(10,o)}}}}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=(await this.publicGetReturnTicker(t))[i.id];return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.date),s=void 0,r=void 0,a=void 0;if(!t&&"currencyPair"in e){let i=e.currencyPair;if(i in this.markets_by_id)t=this.markets_by_id[i];else{let e=i.split("_");a=e[0],s=(r=e[1])+"/"+a}}void 0!==t&&(s=t.symbol,r=t.base,a=t.quote);let o=e.type,n=void 0,d=this.safeFloat(e,"total"),c=this.safeFloat(e,"amount");if("fee"in e){let t=this.safeFloat(e,"fee"),i=void 0,s=void 0;"buy"===o?(s=r,i=c*t):(s=a,void 0!==d&&(i=d*t)),n={type:void 0,rate:t,cost:i,currency:s}}return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,id:this.safeString(e,"tradeID"),order:this.safeString(e,"orderNumber"),type:"limit",side:o,price:this.safeFloat(e,"rate"),amount:c,cost:d,fee:n}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={currencyPair:r.id};void 0!==t&&(a.start=parseInt(t/1e3),a.end=this.seconds());let o=await this.publicGetReturnTradeHistory(this.extend(a,s));return this.parseTrades(o,r,t,i)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));let a={currencyPair:r?r.id:"all"};void 0!==t&&(a.start=parseInt(t/1e3),a.end=this.seconds()+1),void 0!==i&&(a.limit=parseInt(i));let o=await this.privatePostReturnTradeHistory(this.extend(a,s)),n=[];if(void 0!==r)n=this.parseTrades(o,r);else if(o){let e=Object.keys(o);for(let t=0;t<e.length;t++){let i=e[t],s=void 0;if(i in this.markets_by_id){s=this.markets_by_id[i];let e=this.parseTrades(o[i],s);for(let t=0;t<e.length;t++)n.push(e[t])}else{let[e,t]=i.split("_"),s=this.commonCurrencyCode(t)+"/"+this.commonCurrencyCode(e),r=o[i];for(let e=0;e<r.length;e++)n.push(this.extend(this.parseTrade(r[e]),{symbol:s}))}}}return this.filterBySinceLimit(n,t,i)}parseOrderStatus(e){return this.safeString({Open:"open","Partially filled":"open"},e,e)}parseOrder(e,t){let i=this.safeInteger(e,"timestamp");i||(i=this.parse8601(e.date));let s=void 0;"resultingTrades"in e&&(s=this.parseTrades(e.resultingTrades,t));let r=void 0;const a=this.safeString(e,"currencyPair");void 0!==(t=this.safeValue(this.markets_by_id,a,t))&&(r=t.symbol);let o=this.safeFloat2(e,"price","rate"),n=this.safeFloat(e,"amount"),d=this.safeFloat(e,"startingAmount",n),c=void 0,h=0;if(void 0!==d&&void 0!==n&&(c=d-n,void 0!==o&&(h=c*o)),void 0===c&&void 0!==s){c=0,h=0;for(let e=0;e<s.length;e++){let t=s[e],i=t.amount,r=t.price;c=this.sum(c,i),h+=r*i}}const l=this.parseOrderStatus(this.safeString(e,"status"));let u=this.safeString(e,"type");const p=this.safeString(e,"side",u);return u===p&&(u=void 0),{info:e,id:e.orderNumber,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:l,symbol:r,type:u,side:p,price:o,cost:h,amount:d,filled:c,remaining:n,trades:s,fee:void 0}}parseOpenOrders(e,t,i){for(let s=0;s<e.length;s++){let r=e[s],a=this.extend(r,{status:"open",type:"limit",side:r.type,price:r.rate});i.push(this.parseOrder(a,t))}return i}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));let a=r?r.id:"all",o=await this.privatePostReturnOpenOrders(this.extend({currencyPair:a})),n=[];if(void 0!==r)n=this.parseOpenOrders(o,r,n);else{let e=Object.keys(o);for(let t=0;t<e.length;t++){let i=e[t],s=o[i],r=this.markets_by_id[i];n=this.parseOpenOrders(s,r,n)}}for(let e=0;e<n.length;e++)this.orders[n[e].id]=n[e];let d=this.indexBy(n,"id"),c=Object.keys(this.orders),h=[];for(let t=0;t<c.length;t++){let i=c[t];if(i in d)this.orders[i]=this.extend(this.orders[i],d[i]);else{let e=this.orders[i];"open"===e.status&&(void 0===(e=this.extend(e,{status:"closed",cost:void 0,filled:e.amount,remaining:0})).cost&&void 0!==e.filled&&(e.cost=e.filled*e.price),this.orders[i]=e)}let s=this.orders[i];void 0!==r?s.symbol===e&&h.push(s):h.push(s)}return this.filterBySinceLimit(h,t,i)}async fetchOrder(e,t,i={}){let s=this.safeValue(i,"since"),r=this.safeValue(i,"limit"),a=this.omit(i,["since","limit"]),o=await this.fetchOrders(t,s,r,a);for(let t=0;t<o.length;t++)if(o[t].id===e)return o[t];throw new u(this.id+" order id "+e.toString()+' is not in "open" state and not found in cache')}filterOrdersByStatus(e,t){let i=[];for(let s=0;s<e.length;s++)e[s].status===t&&i.push(e[s]);return i}async fetchOpenOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s);return this.filterOrdersByStatus(r,"open")}async fetchClosedOrders(e,t,i,s={}){let r=await this.fetchOrders(e,t,i,s);return this.filterOrdersByStatus(r,"closed")}async createOrder(e,t,i,s,a,o={}){if("market"===t)throw new r(this.id+" allows limit orders only");await this.loadMarkets();let n="privatePost"+this.capitalize(i),d=this.market(e),c={currencyPair:d.id,rate:this.priceToPrecision(e,a),amount:this.amountToPrecision(e,s)},h=await this[n](this.extend(c,o)),l=this.milliseconds(),u=this.parseOrder(this.extend({timestamp:l,status:"open",type:t,side:i,price:a,amount:s},h),d),p=u.id;return this.orders[p]=u,this.extend({info:h},u)}async editOrder(e,t,i,s,r,a,o={}){await this.loadMarkets(),a=parseFloat(a);let n={orderNumber:e,rate:this.priceToPrecision(t,a)};void 0!==r&&(n.amount=this.amountToPrecision(t,r));let d=await this.privatePostMoveOrder(this.extend(n,o)),c=void 0;if(e in this.orders){this.orders[e].status="canceled";let t=d.orderNumber;this.orders[t]=this.extend(this.orders[e],{id:t,price:a,status:"open"}),void 0!==r&&(this.orders[t].amount=r),c=this.extend(this.orders[t],{info:d})}else{let e=void 0;void 0!==t&&(e=this.market(t)),c=this.parseOrder(d,e),this.orders[c.id]=c}return c}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=void 0;try{s=await this.privatePostCancelOrder(this.extend({orderNumber:e},i))}catch(t){throw t instanceof f&&e in this.orders&&(this.orders[e].status="canceled"),t}return e in this.orders&&(this.orders[e].status="canceled"),s}async fetchOpenOrder(e,t,i={}){await this.loadMarkets(),e=e.toString();const s=await this.privatePostReturnOrderStatus(this.extend({orderNumber:e},i)),r=this.safeValue(s.result,e);if(void 0===r)throw new l(this.id+" order id "+e+" not found");const a=this.parseOrder(r);return a.id=e,this.orders[e]=a,a}async fetchOrderStatus(e,t,i={}){await this.loadMarkets();let s=await this.fetchOpenOrders(t,void 0,void 0,i);return e in this.indexBy(s,"id")?"open":"closed"}async fetchOrderTrades(e,t,i,s,r={}){await this.loadMarkets();let a=await this.privatePostReturnOrderTrades(this.extend({orderNumber:e},r));return this.parseTrades(a)}async createDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privatePostGenerateNewAddress({currency:i.id}),r=void 0,a=void 0;1===s.success&&(r=this.safeString(s,"response")),this.checkAddress(r);const o=this.safeString(i.info,"depositAddress");return void 0!==o&&(a=r,r=o),{currency:e,address:r,tag:a,info:s}}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privatePostReturnDepositAddresses(),r=i.id,a=this.safeString(s,r),o=void 0;this.checkAddress(a);const n=this.safeString(i.info,"depositAddress");return void 0!==n&&(o=a,a=n),{currency:e,address:a,tag:o,info:s}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a={currency:this.currency(e).id,amount:t,address:i};s&&(a.paymentId=s);let o=await this.privatePostWithdraw(this.extend(a,r));return{info:o,id:o.response}}async fetchTransactionsHelper(e,t,i,s={}){await this.loadMarkets();const r=this.seconds();let a={start:void 0!==t?parseInt(t/1e3):r-31104e4,end:r};return void 0!==i&&(a.limit=i),await this.privatePostReturnDepositsWithdrawals(this.extend(a,s))}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();let r=await this.fetchTransactionsHelper(e,t,i,s);for(let e=0;e<r.deposits.length;e++)r.deposits[e].type="deposit";for(let e=0;e<r.withdrawals.length;e++)r.withdrawals[e].type="withdrawal";let a=void 0;void 0!==e&&(a=this.currency(e));let o=this.parseTransactions(r.withdrawals,a,t,i),n=this.parseTransactions(r.deposits,a,t,i),d=this.arrayConcat(n,o);return this.filterByCurrencySinceLimit(this.sortBy(d,"timestamp"),e,t,i)}async fetchWithdrawals(e,t,i,s={}){let r=await this.fetchTransactionsHelper(e,t,i,s);for(let e=0;e<r.withdrawals.length;e++)r.withdrawals[e].type="withdrawal";let a=void 0;void 0!==e&&(a=this.currency(e));let o=this.parseTransactions(r.withdrawals,a,t,i);return this.filterByCurrencySinceLimit(o,e,t,i)}async fetchDeposits(e,t,i,s={}){let r=await this.fetchTransactionsHelper(e,t,i,s);for(let e=0;e<r.deposits.length;e++)r.deposits[e].type="deposit";let a=void 0;void 0!==e&&(a=this.currency(e));let o=this.parseTransactions(r.deposits,a,t,i);return this.filterByCurrencySinceLimit(o,e,t,i)}parseTransactionStatus(e){return this.safeString({COMPLETE:"ok"},e,e)}parseTransaction(e,t){let i=this.safeInteger(e,"timestamp");void 0!==i&&(i*=1e3);let s=void 0,r=this.safeString(e,"currency");void 0===(t=this.safeValue(this.currencies_by_id,r))&&(s=this.commonCurrencyCode(r)),void 0!==t&&(s=t.code);let a=this.safeString(e,"status","pending"),o=this.safeString(e,"txid");if(void 0!==a){let e=a.split(": "),t=e.length;a=e[0],t>1&&void 0===o&&(o=e[1]),a=this.parseTransactionStatus(a)}const n=this.safeString(e,"withdrawalNumber"),d=void 0!==n?"withdrawal":"deposit";let c=this.safeFloat(e,"amount");const h=this.safeString(e,"address");let l=this.safeFloat(e,"fee");return void 0===l&&(l=0),"withdrawal"===d&&(c-=l),{info:e,id:n,currency:s,amount:c,address:h,tag:void 0,status:a,type:d,updated:void 0,txid:o,timestamp:i,datetime:this.iso8601(i),fee:{currency:s,cost:l}}}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t],n=this.extend({command:e},s);return"public"===t?o+="?"+this.urlencode(n):(this.checkRequiredCredentials(),n.nonce=this.nonce(),a=this.urlencode(n),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if(void 0!==n&&"error"in n){const e=n.error,t=this.id+" "+this.json(n);let i=this.exceptions.exact;if(e in i)throw new i[e](t);const s=this.exceptions.broad,a=this.findBroadlyMatchedKey(s,e);if(void 0!==a)throw new s[a](t);throw new r(t)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,AuthenticationError:a,OrderNotFound:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"quadrigacx",name:"QuadrigaCX",countries:["CA"],rateLimit:1e3,version:"v2",has:{fetchDepositAddress:!0,fetchTickers:!0,fetchOrder:!0,fetchMyTrades:!0,fetchTransactions:!0,CORS:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766825-98a6d0de-5ee7-11e7-9fa4-38e11a2c6f52.jpg",api:"https://api.quadrigacx.com",www:"https://www.quadrigacx.com",doc:"https://www.quadrigacx.com/api_info",referral:"https://www.quadrigacx.com/?ref=laiqgbp6juewva44finhtmrk"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["order_book","ticker","transactions"]},private:{post:["balance","bitcoin_deposit_address","bitcoin_withdrawal","bitcoincash_deposit_address","bitcoincash_withdrawal","bitcoingold_deposit_address","bitcoingold_withdrawal","buy","cancel_order","ether_deposit_address","ether_withdrawal","litecoin_deposit_address","litecoin_withdrawal","lookup_order","open_orders","sell","user_transactions"]}},markets:{"BTC/CAD":{id:"btc_cad",symbol:"BTC/CAD",base:"BTC",quote:"CAD",baseId:"btc",quoteId:"cad",maker:.005,taker:.005},"BTC/USD":{id:"btc_usd",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"btc",quoteId:"usd",maker:.005,taker:.005},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",maker:.002,taker:.002},"ETH/CAD":{id:"eth_cad",symbol:"ETH/CAD",base:"ETH",quote:"CAD",baseId:"eth",quoteId:"cad",maker:.005,taker:.005},"LTC/CAD":{id:"ltc_cad",symbol:"LTC/CAD",base:"LTC",quote:"CAD",baseId:"ltc",quoteId:"cad",maker:.005,taker:.005},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc",maker:.005,taker:.005},"BCH/CAD":{id:"bch_cad",symbol:"BCH/CAD",base:"BCH",quote:"CAD",baseId:"bch",quoteId:"cad",maker:.005,taker:.005},"BCH/BTC":{id:"bch_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"bch",quoteId:"btc",maker:.005,taker:.005},"BSV/CAD":{id:"bsv_cad",symbol:"BSV/CAD",base:"BSV",quote:"CAD",baseId:"bsv",quoteId:"cad",maker:.005,taker:.005},"BTG/CAD":{id:"btg_cad",symbol:"BTG/CAD",base:"BTG",quote:"CAD",baseId:"btg",quoteId:"cad",maker:.005,taker:.005},"BTG/BTC":{id:"btg_btc",symbol:"BTG/BTC",base:"BTG",quote:"BTC",baseId:"btg",quoteId:"btc",maker:.005,taker:.005}},exceptions:{101:a,106:o}})}async fetchBalance(e={}){let t=await this.privatePostBalance(),i={info:t},s=Object.keys(this.currencies_by_id);for(let e=0;e<s.length;e++){let r=s[e];i[this.currencies_by_id[r].code]={free:this.safeFloat(t,r+"_available"),used:this.safeFloat(t,r+"_reserved"),total:this.safeFloat(t,r+"_balance")}}return this.parseBalance(i)}async fetchMyTrades(e,t,i,s={}){let r=void 0,a={};void 0!==e&&(r=this.market(e),a.book=r.id),void 0!==i&&(a.limit=i);let o=await this.privatePostUserTransactions(this.extend(a,s)),n=this.filterBy(o,"type",2);return this.parseTrades(n,r,t,i)}async fetchTransactions(e,t,i,s={}){let r=void 0,a={};void 0!==e&&(r=this.market(e),a.book=r.id),void 0!==i&&(a.limit=i);let o=await this.privatePostUserTransactions(this.extend(a,s)),n=this.filterByArray(o,"type",[0,1],!1);return this.parseTransactions(n,r,t,i)}parseTransaction(e,t){let i=void 0,s=void 0,r=this.omit(e,["datetime","type","method","fee"]),a=Object.keys(r);for(let e=0;e<a.length;e++)a[e]in this.currencies_by_id&&(i=a[e]);void 0!==i&&(s=this.safeString(e,i));let o=this.parse8601(this.safeString(e,"datetime"));const n=this.safeFloat(e,"fee");let d=this.safeInteger(e,"type");return d=1===d?"withdrawal":"deposit",{info:e,id:void 0,txid:void 0,timestamp:o,datetime:this.iso8601(o),address:void 0,tag:void 0,type:d,amount:s,currency:i,status:"ok",updated:void 0,fee:{currency:i,cost:n}}}async fetchOrder(e,t,i={}){let s={id:e},r=await this.privatePostLookupOrder(this.extend(s,i));return this.parseOrders(r)}parseOrderStatus(e){return this.safeString({"-1":"canceled",0:"open",1:"open",2:"closed"},e,e)}parseOrder(e,t){let i=this.safeString(e,"id"),s=this.safeFloat(e,"price"),r=void 0,a=void 0,o=this.safeFloat(e,"amount"),n=void 0,d=void 0,c=this.safeString(e,"book");if(c in this.markets_by_id)t=this.markets_by_id[c];else{let[e,t]=c.split("_"),i=e.toUpperCase(),s=t.toUpperCase();d=(i=this.commonCurrencyCode(i))+"/"+(s=this.commonCurrencyCode(s))}let h=this.safeString(e,"type");h="0"===h?"buy":"sell";let l=this.parseOrderStatus(this.safeString(e,"status")),u=this.parse8601(this.safeString(e,"created")),p=this.parse8601(this.safeString(e,"updated")),m=0===s?"market":"limit";return void 0!==t&&(d=t.symbol),"closed"===l&&(r=o,a=o,o=0),"limit"===m&&void 0!==s&&void 0!==a&&(n=s*a),{info:e,id:i,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:p,symbol:d,type:m,side:h,price:s,cost:n,average:void 0,amount:r,filled:a,remaining:o,status:l,fee:void 0}}async fetchOrderBook(e,t,i={}){let s=await this.publicGetOrderBook(this.extend({book:this.marketId(e)},i)),r=1e3*parseInt(s.timestamp);return this.parseOrderBook(s,r)}async fetchTickers(e,t={}){let i=await this.publicGetTicker(this.extend({book:"all"},t)),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){let t=s[e],a=t,o=void 0;if(t in this.markets_by_id)a=(o=this.markets_by_id[t]).symbol;else{let[e,i]=t.split("_"),s=e.toUpperCase(),r=i.toUpperCase();o={symbol:a=(s=this.commonCurrencyCode(s))+"/"+(r=this.commonCurrencyCode(s))}}r[a]=this.parseTicker(i[t],o)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTicker(this.extend({book:i.id},t));return this.parseTicker(s,i)}parseTicker(e,t){let i=void 0;void 0!==t&&(i=t.symbol);let s=1e3*parseInt(e.timestamp),r=this.safeFloat(e,"vwap"),a=this.safeFloat(e,"volume"),o=void 0;void 0!==a&&void 0!==r&&(o=a*r);let n=this.safeFloat(e,"last");return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:r,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:e}}parseTrade(e,t){let i=this.safeString2(e,"tid","id"),s=this.parse8601(this.safeString(e,"datetime"));void 0===s&&void 0!==(s=this.safeInteger(e,"date"))&&(s*=1e3);let r=void 0,a=this.omit(e,["datetime","id","type","method","order_id","fee","rate"]),o=Object.keys(a),n=this.safeFloat(e,"rate");for(let i=0;i<o.length;i++){let s=o[i];if(this.safeFloat(e,s)===n)if(s in this.markets_by_id)t=this.markets_by_id[s];else{let e=s.split("_");if(2===e.length){let t=e[0],i=e[1],s=t.toUpperCase(),a=i.toUpperCase();r=(s=this.commonCurrencyCode(s))+"/"+(a=this.commonCurrencyCode(s))}}}let d=this.safeString(e,"order_id"),c=this.safeString(e,"side"),h=this.safeFloat(e,"price",n),l=this.safeFloat(e,"amount"),u=void 0;if(void 0!==t){r=t.symbol;let i=t.baseId,s=t.quoteId;if(void 0===l&&void 0!==(l=this.safeFloat(e,i))&&(l=Math.abs(l)),void 0!==(u=this.safeFloat(e,s))&&(u=Math.abs(u)),void 0===c){let i=this.safeFloat(e,t.baseId);c=void 0!==i&&i>0?"buy":"sell"}}void 0===u&&void 0!==h&&void 0!==l&&(u=l*h);let p=void 0,m=this.safeFloat(e,"fee");if(void 0!==m){let e=void 0;void 0!==t&&(e="buy"===c?t.base:t.quote),p={cost:m,currency:e}}return{info:e,id:i,timestamp:s,datetime:this.iso8601(s),symbol:r,order:d,type:void 0,side:c,takerOrMaker:void 0,price:h,amount:l,cost:u,fee:p}}async fetchTrades(e,t,i,s={}){let r=this.market(e),a=await this.publicGetTransactions(this.extend({book:r.id},s));return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o="privatePost"+this.capitalize(i),n={amount:s,book:this.marketId(e)};"limit"===t&&(n.price=r);let d=await this[o](this.extend(n,a));return{info:d,id:d.id.toString()}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder(this.extend({id:e},i))}async fetchDepositAddress(e,t={}){let i="privatePost"+this.getCurrencyName(e)+"DepositAddress",s=await this[i](t);if(s.indexOf("rror")>=0)throw new r(this.id+" "+s);return this.checkAddress(s),{currency:e,address:s,tag:void 0,info:s}}getCurrencyName(e){return{ETH:"Ether",BTC:"Bitcoin",LTC:"Litecoin",BCH:"Bitcoincash",BTG:"Bitcoingold"}[e]}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a={amount:t,address:i},o="privatePost"+this.getCurrencyName(e)+"Withdrawal";return{info:await this[o](this.extend(a,r)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+e;if("public"===t)o+="?"+this.urlencode(s);else{this.checkRequiredCredentials();let e=this.nonce(),t=[e.toString(),this.uid,this.apiKey].join(""),i=this.hmac(this.encode(t),this.encode(this.secret)),o=this.extend({key:this.apiKey,nonce:e,signature:i},s);a=this.json(o),r={"Content-Type":"application/json"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&!(o.length<2||"{"!==o[0]&&"["!==o[0])){let e=this.safeValue(n,"error");if(void 0!==e){const t=this.safeString(e,"code"),i=this.id+" "+this.json(n),s=this.exceptions;throw t in s?new s[t](i):new r(this.id+' unknown "error" value: '+this.json(n))}}}}},function(e,t,i){"use strict";const s=i(1),{ROUND:r}=i(4),{ExchangeError:a,ArgumentsRequired:o,AuthenticationError:n,InsufficientFunds:d,InvalidOrder:c,OrderNotFound:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"rightbtc",name:"RightBTC",countries:["AE"],has:{privateAPI:!1,fetchTickers:!0,fetchOHLCV:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!1,fetchOrder:"emulated",fetchMyTrades:!0},timeframes:{"1m":"min1","5m":"min5","15m":"min15","30m":"min30","1h":"hr1","1d":"day1","1w":"week"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42633917-7d20757e-85ea-11e8-9f53-fffe9fbb7695.jpg",api:"https://www.rightbtc.com/api",www:"https://www.rightbtc.com",doc:["https://52.53.159.206/api/trader/","https://support.rightbtc.com/hc/en-us/articles/360012809412"]},api:{public:{get:["trading_pairs","ticker/{trading_pair}","tickers","depth/{trading_pair}","depth/{trading_pair}/{count}","trades/{trading_pair}","trades/{trading_pair}/{count}","candlestick/latest/{trading_pair}","candlestick/{timeSymbol}/{trading_pair}","candlestick/{timeSymbol}/{trading_pair}/{count}"]},trader:{get:["balance/{symbol}","balances","deposits/{asset}/{page}","withdrawals/{asset}/{page}","orderpage/{trading_pair}/{cursor}","orders/{trading_pair}/{ids}","history/{trading_pair}/{ids}","historys/{trading_pair}/{page}","trading_pairs"],post:["order"],delete:["order/{trading_pair}/{ids}"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{ETP:.01,BTC:.001,ETH:.01,ETC:.01,STORJ:3,LTC:.001,ZEC:.001,BCC:.001,XRB:0,NXS:.1}}},commonCurrencies:{XRB:"NANO"},exceptions:{ERR_USERTOKEN_NOT_FOUND:n,ERR_ASSET_NOT_EXISTS:a,ERR_ASSET_NOT_AVAILABLE:a,ERR_BALANCE_NOT_ENOUGH:d,ERR_CREATE_ORDER:c,ERR_CANDLESTICK_DATA:a}})}async fetchMarkets(e={}){let t=await this.publicGetTradingPairs(),i=this.extend(t.status.message),s=Object.keys(i),r=[];for(let e=0;e<s.length;e++){let t=s[e],a=i[t],o=a.bid_asset_symbol,n=a.ask_asset_symbol,d=this.commonCurrencyCode(o),c=this.commonCurrencyCode(n),h=d+"/"+c,l={amount:parseInt(a.bid_asset_decimals),price:parseInt(a.ask_asset_decimals)};r.push({id:t,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:!0,precision:l,limits:{amount:{min:Math.pow(10,-l.amount),max:Math.pow(10,l.price)},price:{min:Math.pow(10,-l.price),max:Math.pow(10,l.price)},cost:{min:void 0,max:void 0}},info:a})}return r}divideSafeFloat(e,t,i){let s=this.safeFloat(e,t);return void 0!==s?s/i:s}parseTicker(e,t){let i=t.symbol,s=e.date,r=this.divideSafeFloat(e,"last",1e8),a=this.divideSafeFloat(e,"high",1e8),o=this.divideSafeFloat(e,"low",1e8),n=this.divideSafeFloat(e,"buy",1e8),d=this.divideSafeFloat(e,"sell",1e8),c=this.divideSafeFloat(e,"vol24h",1e8);return{symbol:i,timestamp:s,datetime:this.iso8601(s),high:a,low:o,bid:n,bidVolume:void 0,ask:d,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:c,quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerTradingPair(this.extend({trading_pair:i.id},t));return this.parseTicker(s.result,i)}async fetchTickers(e,t={}){await this.loadMarkets();let i=(await this.publicGetTickers(t)).result,s={};for(let e=0;e<i.length;e++){let t=i[e],r=t.market;if(!(r in this.marketsById))continue;let a=this.marketsById[r];s[a.symbol]=this.parseTicker(t,a)}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={trading_pair:this.marketId(e)},r="publicGetDepthTradingPair";void 0!==t&&(r+="Count",s.count=t);let a=await this[r](this.extend(s,i)),o={},n=["bid","ask"];for(let e=0;e<n.length;e++){let t=n[e];o[t]=[];for(let e=0;e<a.result[t].length;e++){let[i,s,r]=a.result[t][e];o[t].push([i/1e8,s/1e8,r/1e8])}}return this.parseOrderBook(o,void 0,"bid","ask")}parseTrade(e,t){let i=this.safeInteger(e,"date");void 0===i&&(i=this.parse8601(this.safeString(e,"created_at")));let s=this.safeString(e,"tid");s=this.safeString(e,"trade_id",s);let r=this.safeString(e,"order_id"),a=this.divideSafeFloat(e,"price",1e8),o=this.safeFloat(e,"amount");void 0!==(o=this.safeFloat(e,"quantity",o))&&(o/=1e8);let n=void 0;if(void 0===t){let i=this.safeString(e,"trading_pair");i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(n=t.symbol);let d=this.costToPrecision(n,a*o);d=parseFloat(d);let c=this.safeString(e,"side");return"b"===(c=c.toLowerCase())?c="buy":"s"===c&&(c="sell"),{timestamp:i,datetime:this.iso8601(i),symbol:n,id:s,order:r,type:"limit",side:c,price:a,amount:o,cost:d,fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradesTradingPair(this.extend({trading_pair:r.id},s));return this.parseTrades(a.result,r,t,i)}parseOHLCV(e,t,i="5m",s,r){return[e[0],e[2]/1e8,e[3]/1e8,e[4]/1e8,e[5]/1e8,e[1]/1e8]}async fetchOHLCV(e,t="5m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o=await this.publicGetCandlestickTimeSymbolTradingPair(this.extend({trading_pair:a.id,timeSymbol:this.timeframes[t]},r));return this.parseOHLCVs(o.result,a,t,i,s)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.traderGetBalances(e),i={info:t},s=t.result;for(let e=0;e<s.length;e++){let t=s[e],r=t.asset,a=this.commonCurrencyCode(r);r in this.currencies_by_id&&(a=this.currencies_by_id[r].code);let o=this.divideSafeFloat(t,"balance",1e8),n=this.divideSafeFloat(t,"frozen",1e8),d={free:o,used:n,total:this.sum(o,n)};i[a]=d}return this.parseBalance(i)}async createOrder(e,t,i,s,a,o={}){await this.loadMarkets();let n={trading_pair:this.market(e).id,quantity:parseInt(this.decimalToPrecision(1e8*s,r,0,this.precisionMode)),limit:parseInt(this.decimalToPrecision(1e8*a,r,0,this.precisionMode)),type:t.toUpperCase(),side:i.toUpperCase()},d=await this.traderPostOrder(this.extend(n,o));return this.parseOrder(d)}async cancelOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" cancelOrder requires a symbol argument");await this.loadMarkets();let s=this.market(t);return await this.traderDeleteOrderTradingPairIds(this.extend({trading_pair:s.id,ids:e},i))}parseOrderStatus(e){let t={NEW:"open",TRADE:"closed",CANCEL:"canceled"};return e in t?t[e]:e}parseOrder(e,t){let i=this.safeString(e,"id"),s=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeString(e,"trading_pair");void 0===t&&r in this.markets_by_id&&(t=this.markets_by_id[r]);let a=r;void 0!==t&&(a=t.symbol);let o=this.safeInteger(e,"created");void 0===o&&(o=this.parse8601(this.safeString(e,"created_at"))),"time"in e?o=e.time:"transactTime"in e&&(o=e.transactTime);let n=this.safeFloat(e,"limit");void 0!==(n=this.safeFloat(e,"price",n))&&(n/=1e8);let d=this.divideSafeFloat(e,"quantity",1e8),c=this.divideSafeFloat(e,"filled_quantity",1e8),h=this.divideSafeFloat(e,"rest",1e8),l=this.divideSafeFloat(e,"cost",1e8);void 0!==d&&(void 0===h&&void 0!==c&&(h=Math.max(0,d-c)),void 0===c&&void 0!==h&&(c=Math.max(0,d-h)));let u=this.safeString(e,"side");void 0!==u&&(u=u.toLowerCase());let p=this.divideSafeFloat(e,"min_fee",1e8),m=void 0;if(void 0!==p){let i=void 0;void 0!==t&&(i=t.quote),m={rate:this.safeFloat(e,"fee"),cost:p,currency:i}}return{info:e,id:i,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:a,type:"limit",side:u,price:n,amount:d,cost:l,filled:c,remaining:h,status:s,fee:m,trades:void 0}}async fetchOrder(e,t,i={}){if(void 0===t)throw new o(this.id+" fetchOrder requires a symbol argument");await this.loadMarkets();let s=this.market(t),r={trading_pair:s.id,ids:e},a=await this.traderGetOrdersTradingPairIds(this.extend(r,i)),n=this.parseOrders(a.result,s),d=this.indexBy(n,"id");if(!(e in d))throw new h(this.id+" fetchOrder could not find order "+e.toString()+" in open orders.");return d[e]}async fetchOpenOrders(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchOpenOrders requires a symbol argument");await this.loadMarkets();let r=this.market(e),a={trading_pair:r.id,cursor:0},n=await this.traderGetOrderpageTradingPairCursor(this.extend(a,s));return this.parseOrders(n.result.orders,r,t,i)}async fetchOrders(e,t,i,s={}){let r=this.safeString(s,"ids");if(void 0===e||void 0===r)throw new o(this.id+" fetchOrders requires a 'symbol' argument and an extra 'ids' parameter. The 'ids' should be an array or a string of one or more order ids separated with slashes.");Array.isArray(r)&&(r=r.join("/")),await this.loadMarkets();let a={trading_pair:this.market(e).id,ids:r},n=await this.traderGetHistoryTradingPairIds(this.extend(a,s));return this.parseOrders(n.result,void 0,t,i)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new o(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();let r=this.market(e),a=await this.traderGetHistorysTradingPairPage(this.extend({trading_pair:r.id,page:0},s));return this.parseTrades(a.result,void 0,t,i)}sign(e,t="public",i="GET",s={},r,a){let o=this.omit(s,this.extractParams(e)),n=this.urls.api+"/"+t+"/"+this.implodeParams(e,s);return"public"===t?Object.keys(o).length&&(n+="?"+this.urlencode(o)):(this.checkRequiredCredentials(),r={apikey:this.apiKey,signature:this.secret},"GET"===i?Object.keys(o).length&&(n+="?"+this.urlencode(o)):(a=this.json(o),r["Content-Type"]="application/json")),{url:n,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,o,n){if("string"==typeof o&&!(o.length<2||"{"!==o[0]&&"["!==o[0])){let e=this.safeValue(n,"status");if(void 0!==e){if("1"!==this.safeString(e,"success")){const t=this.safeString(e,"message"),i=this.id+" "+this.json(n),s=this.exceptions;if(t in s)throw new s[t](i);throw new a(i)}}}}}},function(e,t,i){"use strict";const s=i(1);let{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"southxchange",name:"SouthXchange",countries:["AR"],rateLimit:1e3,has:{CORS:!0,createDepositAddress:!0,fetchOpenOrders:!0,fetchTickers:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27838912-4f94ec8a-60f6-11e7-9e5d-bbf9bd50a559.jpg",api:"https://www.southxchange.com/api",www:"https://www.southxchange.com",doc:"https://www.southxchange.com/Home/Api"},api:{public:{get:["markets","price/{symbol}","prices","book/{symbol}","trades/{symbol}"]},private:{post:["cancelMarketOrders","cancelOrder","generatenewaddress","listOrders","listBalances","placeOrder","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},commonCurrencies:{SMT:"SmartNode",MTC:"Marinecoin"}})}async fetchMarkets(e={}){let t=await this.publicGetMarkets(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s[0],a=s[1],o=this.commonCurrencyCode(r),n=this.commonCurrencyCode(a),d=o+"/"+n,c=d;i.push({id:c,symbol:d,base:o,quote:n,baseId:r,quoteId:a,active:void 0,info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privatePostListBalances();if(!t)throw new r(this.id+" fetchBalance got an unrecognized response");let i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.Currency.toUpperCase(),a=this.currencies_by_id[r].code,o=parseFloat(s.Available),n=parseFloat(s.Deposited),d=parseFloat(s.Unconfirmed),c=this.sum(n,d),h={free:o,used:c-o,total:c};i[a]=h}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetBookSymbol(this.extend({symbol:this.marketId(e)},i));return this.parseOrderBook(s,void 0,"BuyOrders","SellOrders","Price","Amount")}parseTicker(e,t){let i=this.milliseconds(),s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"Last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"Variation24Hr"),average:void 0,baseVolume:this.safeFloat(e,"Volume24Hr"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetPrices(t),s=this.indexBy(i,"Market"),r=Object.keys(s),a={};for(let e=0;e<r.length;e++){let t=r[e],i=t,o=void 0;t in this.markets_by_id&&(i=(o=this.markets_by_id[t]).symbol);let n=s[t];a[i]=this.parseTicker(n,o)}return a}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetPriceSymbol(this.extend({symbol:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=1e3*e.At;return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,id:void 0,order:void 0,type:void 0,side:e.Type,price:e.Price,amount:e.Amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradesSymbol(this.extend({symbol:r.id},s));return this.parseTrades(a,r,t,i)}parseOrder(e,t){let i=e.ListingCurrency+"/"+e.ReferenceCurrency,s=this.safeFloat(e,"LimitPrice"),r=this.safeFloat(e,"OriginalAmount"),a=this.safeFloat(e,"Amount"),o=void 0,n=void 0;void 0!==r&&(n=s*r,void 0!==a&&(o=r-a));let d=e.Type.toLowerCase();return{info:e,id:e.Code.toString(),timestamp:void 0,datetime:this.iso8601(void 0),lastTradeTimestamp:void 0,symbol:i,type:"limit",side:d,price:s,amount:r,cost:n,filled:o,remaining:a,status:"open",fee:void 0}}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));let a=await this.privatePostListOrders();return this.parseOrders(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n={listingCurrency:o.base,referenceCurrency:o.quote,type:i,amount:s};"limit"===t&&(n.limitPrice=r);let d=await this.privatePostPlaceOrder(this.extend(n,a));return{info:d,id:d.toString()}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelOrder(this.extend({orderCode:e},i))}async createDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privatePostGeneratenewaddress(this.extend({currency:i.id},t)),r=s.split("|"),a=r.length,o=r[0];this.checkAddress(o);let n=void 0;return a>1&&(n=r[1]),{currency:e,address:o,tag:n,info:s}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a={currency:this.currency(e).id,address:i,amount:t};return void 0!==s&&(a.address=i+"|"+s),{info:await this.privatePostWithdraw(this.extend(a,r)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();let e=this.nonce();n=this.extend({key:this.apiKey,nonce:e},n),a=this.json(n),r={"Content-Type":"application/json",Hash:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{InvalidNonce:r,AuthenticationError:a,AccountSuspended:o,InsufficientFunds:n,ExchangeError:d,ArgumentsRequired:c,NotSupported:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"stronghold",name:"Stronghold",country:["US"],rateLimit:1e3,version:"v1",comment:"This comment is optional",urls:{logo:"https://user-images.githubusercontent.com/1294454/52160042-98c1f300-26be-11e9-90dd-da8473944c83.jpg",api:{public:"https://api.stronghold.co",private:"https://api.stronghold.co"},www:"https://stronghold.co",doc:["https://docs.stronghold.co"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},has:{fetchMarkets:!0,fetchCurrencies:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchTrades:!0,fetchMyTrades:!0,fetchDepositAddress:!1,createDepositAddress:!0,withdraw:!0,fetchTicker:!1,fetchAccounts:!0},api:{public:{get:["utilities/time","utilities/uuid","venues","venues/{venueId}/assets","venues/{venueId}/markets","venues/{venueId}/markets/{marketId}/orderbook","venues/{venueId}/markets/{marketId}/trades"],post:["venues/{venueId}/assets","iam/credentials","identities"],patch:["identities"],put:["iam/credentials/{credentialId}"],delete:["iam/credentials/{credentialId}"]},private:{get:["venues","venues/{venueId}/accounts","venues/{venueId}/accounts/{accountId}","venues/{venueId}/accounts/{accountId}/payments/{paymentId}","venues/{venueId}/accounts/{accountId}/orders","venues/{venueId}/accounts/{accountId}/trades","venues/{venueId}/accounts/{accountId}/transactions"],post:["venues/{venueId}/accounts","venues/{venueId}/accounts/{accountId}/orders","venues/{venueId}/accounts/{accountId}/deposit","venues/{venueId}/accounts/{accountId}/withdrawal","venues/{venueId}/accounts/{accountId}/payments","venues/{venueId}/accounts/{accountId}/payments/{paymentId}/stop","venues/{venueId}/custody/accounts/{accountId}/operations/{operationId}/signatures","venues/{venueId}/anchor/withdrawal","venues/{venueId}/testing/friendbot"],delete:["venues/{venueId}/accounts/{accountId}/orders/{orderId}"]}},options:{accountId:void 0,venueId:"trade-public",venues:{trade:"trade-public",sandbox:"sandbox-public"},paymentMethods:{ETH:"ethereum",BTC:"bitcoin",XLM:"stellar",XRP:"ripple",LTC:"litecoin"}},exceptions:{CREDENTIAL_MISSING:a,CREDENTIAL_INVALID:a,CREDENTIAL_REVOKED:o,CREDENTIAL_NO_IDENTITY:a,PASSPHRASE_INVALID:a,SIGNATURE_INVALID:a,TIME_INVALID:r,BYPASS_INVALID:a,INSUFFICIENT_FUNDS:n}})}async getActiveAccount(){if(void 0!==this.options.accountId)return this.options.accountId;if(await this.loadAccounts(),this.accounts.length>0)return this.accounts[0].id;throw new d(this.id+" requires an accountId.")}async fetchAccounts(e={}){const t={venueId:this.options.venueId};return(await this.privateGetVenuesVenueIdAccounts(this.extend(t,e))).result}async fetchTime(e={}){const t=await this.publicGetUtilitiesTime(e);return this.parse8601(this.safeString(t.result,"timestamp"))}async fetchMarkets(e={}){const t={venueId:this.options.venueId},i=(await this.publicGetVenuesVenueIdMarkets(this.extend(t,e))).result,s={};for(let e=0;e<i.length;e++){const t=i[e],r=t.id,a=t.baseAssetId,o=t.counterAssetId,n=a.split("/")[0],d=o.split("/")[0],c=this.commonCurrencyCode(n),h=this.commonCurrencyCode(d),l=c+"/"+h,u={amount:{min:this.safeFloat(t,"minimumOrderSize"),max:void 0}},p={price:this.safeInteger(t,"displayDecimalsPrice"),amount:this.safeInteger(t,"displayDecimalsAmount")};s[l]={symbol:l,id:r,base:c,quote:h,baseId:a,quoteId:o,precision:p,info:t,limits:u}}return s}async fetchCurrencies(e={}){const t={venueId:this.options.venueId},i=(await this.publicGetVenuesVenueIdAssets(this.extend(t,e))).result,s={},r={amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}};for(let e=0;e<i.length;e++){const t=i[e],a=this.safeString(t,"id"),o=this.safeString(t,"code"),n=this.commonCurrencyCode(o),d=this.safeInteger(t,"displayDecimalsFull");s[n]={code:n,id:a,precision:d,info:t,active:void 0,name:void 0,limits:r}}return s}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const s={marketId:this.marketId(e),venueId:this.options.venueId},r=await this.publicGetVenuesVenueIdMarketsMarketIdOrderbook(this.extend(s,i)),a=r.result,o=this.parse8601(this.safeString(r,"timestamp"));return this.parseOrderBook(a,o)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={marketId:r.id,venueId:this.options.venueId},o=await this.publicGetVenuesVenueIdMarketsMarketIdTrades(this.extend(a,s));return this.parseTrades(o.result.trades,r,t,i)}parseTrade(e,t){let i=void 0,s=void 0,r=void 0,a=void 0,o=void 0,n=void 0,d=void 0,c=void 0;if(Array.isArray(e))r=parseFloat(e[0]),a=parseFloat(e[1]),n=e[2],d=this.parse8601(e[3]);else{i=this.safeString(e,"id"),r=this.safeFloat(e,"price"),a=this.safeFloat(e,"size"),n=this.safeString(e,"side"),d=this.parse8601(this.safeString(e,"executedAt")),c=this.safeString(e,"orderId");let o=this.safeString(e,"marketId");t=this.safeValue(this.markets_by_id,o),s=this.safeValue(e,"maker")?"maker":"taker"}void 0!==a&&void 0!==r&&(o=a*r);let h=void 0;return void 0!==t&&(h=t.symbol),{id:i,info:e,timestamp:d,datetime:this.iso8601(d),symbol:h,type:void 0,order:c,side:n,price:r,amount:a,cost:o,takerOrMaker:s,fee:{cost:void 0,currency:void 0,rate:void 0}}}async fetchTransactions(e,t,i,s={}){await this.loadMarkets();const r=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount()},s);if(!r.accountId)throw new c(this.id+" fetchTransactions requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const a=await this.privateGetVenuesVenueIdAccountsAccountIdTransactions(r);let o=void 0;return void 0!==e&&(o=this.currency(e)),this.parseTransactions(a.result,o,t,i)}parseTransactionStatus(e){return this.safeString({queued:"pending"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"assetId");let r=void 0;if(void 0!==s){const e=s.split("/")[0];r=this.commonCurrencyCode(e)}else void 0!==t&&(r=t.code);const a=this.safeFloat(e,"amount"),o=this.parseTransactionStatus(this.safeString(e,"status")),n=this.safeFloat(e,"feeAmount");let d=void 0;return void 0!==n&&(d=n/a),{id:i,info:e,currency:r,amount:a,status:o,fee:{cost:n,rate:d},tag:void 0,type:"outgoing"===this.safeString(e,"direction")?"withdraw":"deposit",updated:void 0,address:void 0,txid:void 0,timestamp:void 0,datetime:void 0}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();const o=this.market(e),n=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount(),marketID:o.id,type:t,side:i,size:this.amountToPrecision(e,s),price:this.priceToPrecision(e,r)},a);if(!n.accountId)throw new c(this.id+" createOrder requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const d=await this.privatePostVenuesVenueIdAccountsAccountIdOrders(n);return this.parseOrder(d,o)}async cancelOrder(e,t,i={}){const s=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount(),orderId:e},i);if(!s.accountId)throw new c(this.id+" cancelOrder requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const r=await this.privateDeleteVenuesVenueIdAccountsAccountIdOrdersOrderId(s);return this.parseOrder(r)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0;void 0!==e&&(r=this.market(e));const a=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount()},s);if(!a.accountId)throw new c(this.id+" cancelOrder requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const o=await this.privateGetVenuesVenueIdAccountsAccountIdOrders(a);return this.parseOrders(o.result,r,t,i)}parseOrder(e,t){const i=this.safeString(e,"marketId");void 0!==i&&(t=this.safeValue(this.marketsById,i));let s=void 0;void 0!==t&&(s=t.symbol);const r=this.safeString(e,"id"),a=this.safeString(e,"placedAt"),o=this.safeFloat(e,"size"),n=this.safeFloat(e,"price"),d=this.safeFloat(e,"sizeFilled");let c=void 0,h=void 0;return void 0!==o&&(void 0!==d&&(h=o-d),void 0!==n&&(c=o*n)),{id:r,info:e,symbol:s,datetime:a,timestamp:this.parse8601(a),side:this.safeString(e,"side"),amount:o,filled:d,remaining:h,price:n,cost:c,trades:[],lastTradeTimestamp:void 0,status:void 0,type:void 0,average:void 0}}nonce(){return this.seconds()}setSandboxMode(e){this.options.venueId=e?this.options.venues.sandbox:this.options.venues.trade}async fetchBalance(e={}){const t=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount()},e);if(!("accountId"in t))throw new c(this.id+" fetchBalance requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const i=(await this.privateGetVenuesVenueIdAccountsAccountId(t)).result.balances;let s={};for(let e=0;e<i.length;e++){const t=i[e],r=t.assetId.split("/")[0],a=this.commonCurrencyCode(r);let o={};o.total=this.safeFloat(t,"amount",0),o.free=this.safeFloat(t,"availableForTrade",0),o.used=o.total-o.free,s[a]=o}return this.parseBalance(s)}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();const r=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount()},s);if(!r.accountId)throw new c(this.id+" fetchMyTrades requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const a=await this.privateGetVenuesVenueIdAccountsAccountIdTrades(r);let o=void 0;return void 0!==e&&(o=this.market(e)),this.parseTrades(a.result,o,t,i)}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.safeString(this.options.paymentMethods,e);if(void 0===i)throw new h(this.id+" createDepositAddress requires code to be BTC, ETH, or XLM");const s=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount(),assetId:this.currencyId(e),paymentMethod:i},t);if(!s.accountId)throw new c(this.id+" createDepositAddress requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const r=await this.privatePostVenuesVenueIdAccountsAccountIdDeposit(s),a=r.result.paymentMethodInstructions,o=a.deposit_address,n=this.safeString(a,"reference");return{currency:e,address:this.checkAddress(o),tag:n,info:r}}async withdraw(e,t,i,s,r={}){await this.loadMarkets();const a=this.safeString(this.options.paymentMethods,e);if(void 0===a)throw new h(this.id+" withdraw requires code to be BTC, ETH, or XLM");let o=this.extend({venueId:this.options.venueId,accountId:await this.getActiveAccount(),assetId:this.currencyId(e),amount:t,paymentMethod:a,paymentMethodDetails:{withdrawal_address:i}},r);if(void 0!==s&&(o.paymentMethodDetails.reference=s),!o.accountId)throw new c(this.id+" withdraw requires either the 'accountId' extra parameter or exchange.options['accountId'] = 'YOUR_ACCOUNT_ID'.");const n=await this.privatePostVenuesVenueIdAccountsAccountIdWithdrawal(o),d=n.result;return{id:this.safeString(d,"id"),info:n}}handleErrors(e,t,i,s,r,a,o){if(!o)return;const n=this.safeString(o,"errorCode");if(n in this.exceptions){throw new(0,this.exceptions[n])(this.id+" "+a)}if(!this.safeValue(o,"success"))throw new d(this.id+" "+a)}sign(e,t="public",i="GET",s={},r,a){const o="/"+this.version+"/"+this.implodeParams(e,s);let n=this.omit(s,this.extractParams(e)),d=this.urls.api[t]+o;if(Object.keys(n).length&&("GET"===i?d+="?"+this.urlencode(n):a=this.json(n)),"private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t=e+i+o;void 0!==a&&(t+=a);const s=this.base64ToBinary(this.secret);r={"SH-CRED-ID":this.apiKey,"SH-CRED-SIG":this.hmac(this.encode(t),s,"sha256","base64"),"SH-CRED-TIME":e,"SH-CRED-PASS":this.password,"Content-Type":"application/json"}}return{url:d,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(11);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"surbitcoin",name:"SurBitcoin",countries:["VE"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991511-f0a50194-6481-11e7-99b5-8f02932424cc.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://surbitcoin.com",doc:"https://blinktrade.com/docs"},options:{brokerId:"1"}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ExchangeNotAvailable:a,ArgumentsRequired:o,BadRequest:n,AuthenticationError:d,InvalidOrder:c,OrderNotFound:h,NotSupported:l,OrderNotFillable:u,InvalidAddress:p,InsufficientFunds:m}=i(0);e.exports=class extends s{describe(){return this.checkRequiredDependencies(),this.deepExtend(super.describe(),{id:"theocean",name:"The Ocean",countries:["US"],rateLimit:3e3,version:"v1",certified:!0,requiresWeb3:!0,timeframes:{"5m":"300","15m":"900","1h":"3600","6h":"21600","1d":"86400"},has:{cancelAllOrders:!0,CORS:!1,fetchClosedOrders:!0,fetchOHLCV:!1,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchTickers:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/43103756-d56613ce-8ed7-11e8-924e-68f9d4bcacab.jpg",api:"https://api.theocean.trade",www:"https://theocean.trade",doc:"https://docs.theocean.trade",fees:"https://theocean.trade/fees"},api:{public:{get:["fee_components","token_pairs","ticker","tickers","candlesticks","candlesticks/intervals","trade_history","order_book","order/{orderHash}","version"]},private:{get:["balance","available_balance","order_history","order/unsigned","order/unsigned/market"],post:["order"],delete:["order/{orderHash}","order"]}},exceptions:{exact:{"Order not found":h},broad:{"Price can't exceed 8 digits in precision.":c,"Order cannot be canceled":c,"Greater than available wallet balance.":m,"Fillable amount under minimum":c,"Fillable amount over maximum":c,"Schema validation failed for 'params'":n,"Service Temporarily Unavailable":a}},options:{decimals:{},fetchOrderMethod:"fetch_order_from_history"}})}async fetchMarkets(e={}){let t=await this.publicGetTokenPairs(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.baseToken,a=s.quoteToken,o=r.address,n=a.address,d=r.symbol,c=a.symbol,h=(d=this.commonCurrencyCode(d))+"/"+(c=this.commonCurrencyCode(c)),l=o+"/"+n,u=this.safeInteger(r,"decimals"),p=this.safeInteger(a,"decimals");this.options.decimals[d]=u,this.options.decimals[c]=p;let m={amount:-parseInt(r.precision),price:-parseInt(a.precision)},f={amount:{min:this.fromWei(this.safeString(r,"minAmount"),"ether",u),max:this.fromWei(this.safeString(r,"maxAmount"),"ether",u)},price:{min:void 0,max:void 0},cost:{min:this.fromWei(this.safeString(a,"minAmount"),"ether",p),max:this.fromWei(this.safeString(a,"maxAmount"),"ether",p)}},y=!0;i.push({id:l,symbol:h,base:d,quote:c,baseId:o,quoteId:n,active:y,precision:m,limits:f,info:s})}return i}parseOHLCV(e,t,i="5m",s,r){let a=this.safeInteger(this.options.decimals,t.base,18);return[1e3*this.safeInteger(e,"startTime"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.fromWei(this.safeString(e,"baseVolume"),"ether",a)]}async fetchOHLCV(e,t="5m",i,s,a={}){await this.loadMarkets();let o=this.market(e),n={baseTokenAddress:o.baseId,quoteTokenAddress:o.quoteId,interval:this.timeframes[t]};if(void 0===i)throw new r(this.id+" fetchOHLCV requires a since argument");i=parseInt(i),n.startTime=i;let d=await this.publicGetCandlesticks(this.extend(n,a));return this.parseOHLCVs(d,o,t,i,s)}async fetchBalanceByCode(e,t={}){if(!this.walletAddress||0!==this.walletAddress.indexOf("0x"))throw new p(this.id+' fetchBalanceByCode() requires the .walletAddress to be a "0x"-prefixed hexstring like "0xbF2d65B3b2907214EEA3562f21B80f6Ed7220377"');await this.loadMarkets();let i=this.currency(e),s={walletAddress:this.walletAddress.toLowerCase(),tokenAddress:i.id},r=await this.privateGetBalance(this.extend(s,t)),a=this.safeInteger(this.options.decimals,e,18);return{free:this.fromWei(this.safeString(r,"available"),"ether",a),used:this.fromWei(this.safeString(r,"committed"),"ether",a),total:this.fromWei(this.safeString(r,"total"),"ether",a)}}async fetchBalance(e={}){if(!this.walletAddress||0!==this.walletAddress.indexOf("0x"))throw new p(this.id+' fetchBalance() requires the .walletAddress to be a "0x"-prefixed hexstring like "0xbF2d65B3b2907214EEA3562f21B80f6Ed7220377"');let t=this.safeValue(this.options,"fetchBalanceCurrencies");if(void 0===t&&(t=this.safeValue(e,"codes")),void 0===t||!Array.isArray(t))throw new r(this.id+" fetchBalance() requires a `codes` parameter (an array of currency codes)");await this.loadMarkets();let i={};for(let e=0;e<t.length;e++){const s=t[e];i[s]=await this.fetchBalanceByCode(s)}return this.parseBalance(i)}parseBidAsk(e,t=0,i=1,s){if(void 0===s)throw new o(this.id+" parseBidAsk requires a market argument");let r=parseFloat(e[t]),a=this.safeInteger(this.options.decimals,s.base,18);return[r,this.fromWei(e[i],"ether",a)]}parseOrderBook(e,t,i="bids",s="asks",r=0,a=1,o){let n={timestamp:t,datetime:this.iso8601(t),nonce:void 0},d=[i,s];for(let t=0;t<d.length;t++){let i=d[t],s=[],c=this.safeValue(e,i);for(let e=0;e<c.length;e++)s.push(this.parseBidAsk(c[e],r,a,o));n[i]=s}return n[i]=this.sortBy(n[i],0,!0),n[s]=this.sortBy(n[s],0),n}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r={baseTokenAddress:s.baseId,quoteTokenAddress:s.quoteId};void 0!==t&&(r.depth=t);let a=await this.publicGetOrderBook(this.extend(r,i));return this.parseOrderBook(a,void 0,"bids","asks","price","availableAmount",s)}parseTicker(e,t){let i=parseInt(this.safeInteger(e,"timestamp")/1e3),s=void 0,r=void 0;void 0!==t&&(s=t.symbol,r=t.base);let a=this.safeInteger(this.options.decimals,r,18),o=this.fromWei(this.safeString(e,"volume"),"ether",a),n=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"priceChange"),average:void 0,baseVolume:o,quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s={};for(let e=0;e<i.length;e++){let t=i[e],r=this.safeString(t,"baseTokenAddress")+"/"+this.safeString(t,"quoteTokenAddress"),a=void 0,o=r;r in this.markets_by_id&&(o=(a=this.markets_by_id[r]).symbol),s[o]=this.parseTicker(t.ticker,a)}return s}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s={baseTokenAddress:i.baseId,quoteTokenAddress:i.quoteId},r=await this.publicGetTicker(this.extend(s,t));return this.parseTicker(r,i)}parseTrade(e,t){let i=this.safeInteger(e,"lastUpdated"),s=this.safeFloat(e,"price"),r=this.safeString(e,"id"),a=this.safeString(e,"side"),o=void 0,n=void 0;void 0!==t&&(o=t.symbol,n=t.base);let d=this.safeInteger(this.options.decimals,n,18),c=this.fromWei(this.safeString(e,"amount"),"ether",d),h=void 0;void 0!==c&&void 0!==s&&(h=c*s);return{id:r,order:r,timestamp:i,datetime:this.iso8601(i),symbol:o,type:void 0,side:a,takerOrMaker:"taker",price:s,amount:c,cost:h,fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a={baseTokenAddress:r.baseId,quoteTokenAddress:r.quoteId},o=await this.publicGetTradeHistory(this.extend(a,s));return this.parseTrades(o,r,t,i)}async createOrder(e,t,i,s,r,a={}){let o=this.id+' createOrder() requires `exchange.walletAddress` and `exchange.privateKey`. The .walletAddress should be a "0x"-prefixed hexstring like "0xbF2d65B3b2907214EEA3562f21B80f6Ed7220377". The .privateKey for that wallet should be a "0x"-prefixed hexstring like "0xe4f40d465efa94c98aec1a51f574329344c772c1bce33be07fa20a56795fdd09".';if(!this.walletAddress||0!==this.walletAddress.indexOf("0x"))throw new p(o);if(!this.privateKey||0!==this.privateKey.indexOf("0x"))throw new p(o);let n=await this.fetchOrderParamsToSign(e,t,i,s,r,a),d=n.unsignedZeroExOrder;if(void 0===d)throw new u(this.id+" "+t+" order to "+i+" "+e+" is not fillable at the moment");let c=await this.signZeroExOrderV2(d,this.privateKey),h=this.safeString(c,"orderHash");await this.postSignedOrder(c,n,a);let l=await this.fetchOrder(h);return l.type=t,l}async fetchOrderParamsToSign(e,t,i,s,a,o={}){if("buy"!==i&&"sell"!==i)throw new r(i+" is not valid side param. Use 'buy' or 'sell'");if("market"!==t&&"limit"!==t)throw new r(t+" is not valid type param. Use 'market' or 'limit'");if("limit"===t&&void 0===a)throw new r("Price is not provided for limit order");await this.loadMarkets();let n=this.market(e),d=this.safeInteger(this.options.decimals,n.base,18),c={walletAddress:this.walletAddress.toLowerCase(),baseTokenAddress:n.baseId,quoteTokenAddress:n.quoteId,side:i,amount:this.toWei(this.amountToPrecision(e,s),"ether",d)},h=void 0;if("limit"===t)h="privateGetOrderUnsigned",c.price=this.priceToPrecision(e,a);else{if("market"!==t)throw new r("Unsupported order type: "+t);h="privateGetOrderUnsignedMarket"}return await this[h](this.extend(c,o))}async postSignedOrder(e,t,i={}){let s=t;return s.signedZeroExOrder=e,s=this.omit(s,"unsignedZeroExOrder"),await this.privatePostOrder(this.extend(s,i))}async cancelOrder(e,t,i={}){await this.loadMarkets();let s={orderHash:e},r=await this.privateDeleteOrderOrderHash(this.extend(s,i)),a=void 0;return void 0!==t&&(a=this.market(t)),this.extend(this.parseOrder(r.canceledOrder,a),{status:"canceled"})}async cancelAllOrders(e,t={}){return await this.privateDeleteOrder(t)}parseOrder(e,t){let i=this.safeValue(e,"zeroExOrder"),s=this.safeString(e,"orderHash");void 0===s&&void 0!==i&&(s=this.safeString(i,"orderHash"));let r=this.safeString(e,"side"),a=this.safeString(e,"type"),o=this.safeInteger(e,"creationTimestamp");"undefined"!==o&&(o=parseInt(o/1e3));let n=void 0,d=this.safeString(e,"baseTokenAddress"),c=this.safeString(e,"quoteTokenAddress"),h=void 0;void 0!==d&&void 0!==c&&(h=d+"/"+c);let u=void 0;void 0!==(t=this.safeValue(this.markets_by_id,h,t))&&(n=t.symbol,u=t.base);let p=this.safeInteger(this.options.decimals,u,18),m=this.safeFloat(e,"price"),f=this.fromWei(this.safeString(e,"filledAmount"),"ether",p),y=this.fromWei(this.safeString(e,"settledAmount"),"ether",p),b=this.fromWei(this.safeString(e,"confirmedAmount"),"ether",p),w=this.fromWei(this.safeString(e,"failedAmount"),"ether",p),v=this.fromWei(this.safeString(e,"deadAmount"),"ether",p),g=this.fromWei(this.safeString(e,"prunedAmount"),"ether",p),k=this.fromWei(this.safeString(e,"initialAmount"),"ether",p),T=this.sum(f,y,b),C=void 0,_=void 0,O=this.safeValue(e,"timeline"),x=void 0,S=void 0;if(void 0!==O){if(O.length>0){let e=this.groupBy(O,"action");if("error"in e&&(S="failed"),"filled"in e){let i=this.safeValue(e,"filled"),o=i.length;_=_=this.safeInteger(i[o-1],"timestamp"),x=[];for(let e=0;e<o;e++){let o=this.parseTrade(this.extend(i[e],{price:m}),t);x.push(this.extend(o,{order:s,type:a,side:r}))}}}}let B=void 0;void 0!==T&&(void 0===C&&void 0!==k&&(C=k-T),void 0!==m&&(B=T*m));let I=void 0,M=this.safeString(e,"feeAmount");if(void 0!==M){let i=this.safeString(e,"feeOption"),s=void 0;if("feeInNative"===i)void 0!==t&&(s=t.base);else{if("feeInZRX"!==i)throw new l(this.id+" encountered an unsupported order fee option: "+i);s="ZRX"}let r=this.safeInteger(this.options.decimals,s,18);I={cost:this.fromWei(M,"ether",r),currency:s}}let F=t?t.precision.amount:8;if(void 0!==C&&void 0===S){S="open",C-w-v-g<Math.pow(10,-F)&&(S=T<k?"canceled":"closed")}return{info:e,id:s,symbol:n,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:_,type:a,side:r,price:m,cost:B,amount:k,remaining:C,filled:T,status:S,fee:I,trades:x}}async fetchOpenOrder(e,t,i={}){let s=this.options.fetchOrderMethod;return await this[s](e,t,this.extend({openAmount:1},i))}async fetchClosedOrder(e,t,i={}){let s=this.options.fetchOrderMethod;return await this[s](e,t,this.extend(i))}async fetchOrderFromHistory(e,t,i={}){let s=await this.fetchOrders(t,void 0,void 0,this.extend({orderHash:e},i)),r=this.indexBy(s,"id");if(e in r)return r[e];throw new h(this.id+" could not find order "+e+" in order history")}async fetchOrderById(e,t,i={}){await this.loadMarkets();let s={orderHash:e},r=await this.publicGetOrderOrderHash(this.extend(s,i));return this.parseOrder(r)}async fetchOrder(e,t,i={}){let s={orderHash:e},r=await this.fetchOrders(t,void 0,void 0,this.extend(s,i));if(1!==r.length)throw new h(this.id+" order "+e+" not found");return r[0]}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let r={},a=void 0;void 0!==e&&(a=this.market(e),r.baseTokenAddress=a.baseId,r.quoteTokenAddress=a.quoteId),void 0!==i&&(r.limit=i);let o=await this.privateGetOrderHistory(this.extend(r,s));return this.parseOrders(o,void 0,t,i)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({openAmount:1},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({openAmount:0},s))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();let e=this.seconds().toString(),t=this.apiKey+e+i;"POST"===i?t+=a=this.json(n):(Object.keys(n).length&&(o+="?"+this.urlencode(n)),t+=this.json({}));let s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");r={"TOX-ACCESS-KEY":this.apiKey,"TOX-ACCESS-SIGN":s,"TOX-ACCESS-TIMESTAMP":e,"Content-Type":"application/json"}}else"public"===t&&Object.keys(n).length&&(o+="?"+this.urlencode(n));return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&!(o.length<2)){if("'Authentication failed'"===o)throw new d(this.id+" "+o);if("{"===o[0]||"["===o[0]){const e=this.safeString(n,"message");if(void 0!==e){const t=this.id+" "+this.json(n),i=this.exceptions.exact;if(e in i)throw new i[e](t);const s=this.exceptions.broad,a=this.findBroadlyMatchedKey(s,o);if(void 0!==a)throw new s[a](t);throw new r(t)}}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"therock",name:"TheRockTrading",countries:["MT"],rateLimit:1e3,version:"v1",has:{CORS:!1,fetchTickers:!0,fetchMyTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766869-75057fa2-5ee9-11e7-9a6f-13e641fa4707.jpg",api:"https://api.therocktrading.com",www:"https://therocktrading.com",doc:["https://api.therocktrading.com/doc/v1/index.html","https://api.therocktrading.com/doc/"]},api:{public:{get:["funds","funds/{id}/orderbook","funds/{id}/ticker","funds/{id}/trades","funds/tickers"]},private:{get:["balances","balances/{id}","discounts","discounts/{id}","funds","funds/{id}","funds/{id}/trades","funds/{fund_id}/orders","funds/{fund_id}/orders/{id}","funds/{fund_id}/position_balances","funds/{fund_id}/positions","funds/{fund_id}/positions/{id}","transactions","transactions/{id}","withdraw_limits/{id}","withdraw_limits"],post:["atms/withdraw","funds/{fund_id}/orders"],delete:["funds/{fund_id}/orders/{id}","funds/{fund_id}/orders/remove_all"]}},fees:{trading:{maker:.002,taker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,BCH:5e-4,PPC:.02,ETH:.001,ZEC:.001,LTC:.002,EUR:2.5},deposit:{BTC:0,BCH:0,PPC:0,ETH:0,ZEC:0,LTC:0,EUR:0}}}})}async fetchMarkets(e={}){let t=await this.publicGetFunds(),i=this.safeValue(t,"funds"),s=[];if(void 0===i)throw new r(this.id+" fetchMarkets got an unexpected response");for(let e=0;e<i.length;e++){let t=i[e],r=this.safeString(t,"id"),a=this.safeString(t,"trade_currency"),o=this.safeString(t,"base_currency"),n=this.commonCurrencyCode(a),d=this.commonCurrencyCode(o),c=n+"/"+d,h=this.safeFloat(t,"buy_fee"),l=this.safeFloat(t,"sell_fee"),u=Math.max(h,l),p=u/=100;s.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,info:t,active:!0,maker:p,taker:u,precision:{amount:this.safeInteger(t,"trade_currency_decimals"),price:this.safeInteger(t,"base_currency_decimals")},limits:{amount:{min:this.safeFloat(t,"minimum_quantity_offer"),max:void 0},price:{min:this.safeFloat(t,"minimum_price_offer"),max:void 0},cost:{min:void 0,max:void 0}}})}return s}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetBalances(),i=t.balances,s={info:t};for(let e=0;e<i.length;e++){let t=i[e],r=t.currency,a=t.trading_balance,o=t.balance,n={free:a,used:o-a,total:o};s[r]=n}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetFundsIdOrderbook(this.extend({id:this.marketId(e)},i)),r=this.parse8601(s.date);return this.parseOrderBook(s,r,"bids","asks","price","amount")}parseTicker(e,t){let i=this.parse8601(e.date),s=void 0;t&&(s=t.symbol);let r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:r,last:r,previousClose:this.safeFloat(e,"close"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume_traded"),quoteVolume:this.safeFloat(e,"volume"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetFundsTickers(t),s=this.indexBy(i.tickers,"fund_id"),r=Object.keys(s),a={};for(let e=0;e<r.length;e++){let t=r[e],i=this.markets_by_id[t],o=i.symbol,n=s[t];a[o]=this.parseTicker(n,i)}return a}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetFundsIdTicker(this.extend({id:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){t||(t=this.markets_by_id[e.fund_id]);const i=this.parse8601(this.safeString(e,"date")),s=this.safeString(e,"id"),r=this.safeString(e,"order_id"),a=this.safeString(e,"side"),o=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount");let d=void 0;void 0!==o&&void 0!==n&&(d=o*n);let c=void 0,h=void 0;const l=this.safeValue(e,"transactions",[]),u=this.groupBy(l,"type"),p=this.safeValue(u,"paid_commission",[]);for(let e=0;e<p.length;e++)void 0===h&&(h=0),h=this.sum(h,this.safeFloat(p[e],"price"));return void 0!==h&&(c={cost:h,currency:t.quote}),{info:e,id:s,order:r,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:a,price:o,amount:n,cost:d,fee:c}}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();const r=this.market(e),o={id:r.id};void 0!==i&&(o.per_page=i),void 0!==t&&(o.after=this.iso8601(t));const n=await this.privateGetFundsIdTrades(this.extend(o,s));return this.parseTrades(n.trades,r,t,i)}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a={id:r.id};void 0!==i&&(a.per_page=i),void 0!==t&&(a.after=this.iso8601(t));const o=await this.publicGetFundsIdTrades(this.extend(a,s));return this.parseTrades(o.trades,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets(),"market"===t&&(r=0);let o=await this.privatePostFundsFundIdOrders(this.extend({fund_id:this.marketId(e),side:i,amount:s,price:r},a));return{info:o,id:o.id.toString()}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privateDeleteFundsFundIdOrdersId(this.extend({id:e,fund_id:this.marketId(t)},i))}parseOrderStatus(e){return this.safeString({active:"open",executed:"closed",deleted:"canceled"},e,e)}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s),n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();let e=this.nonce().toString(),t=e+o;r={"X-TRT-KEY":this.apiKey,"X-TRT-NONCE":e,"X-TRT-SIGN":this.hmac(this.encode(t),this.encode(this.secret),"sha512")},Object.keys(n).length&&(a=this.json(n),r["Content-Type"]="application/json")}else"public"===t&&Object.keys(n).length&&(o+="?"+this.rawencode(n));return{url:o,method:i,body:a,headers:r}}async request(e,t="public",i="GET",s={},a,o){let n=await this.fetch2(e,t,i,s,a,o);if("errors"in n)throw new r(this.id+" "+this.json(n));return n}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,InsufficientFunds:a,OrderNotFound:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"tidebit",name:"TideBit",countries:["HK"],rateLimit:1e3,version:"v2",has:{fetchDepositAddress:!0,CORS:!0,fetchTickers:!0,fetchOHLCV:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/39034921-e3acf016-4480-11e8-9945-a6086a1082fe.jpg",api:"https://www.tidebit.com",www:"https://www.tidebit.com",doc:["https://www.tidebit.com/documents/api/guide","https://www.tidebit.com/swagger/#/default"]},api:{public:{get:["markets","tickers","tickers/{market}","timestamp","trades","trades/{market}","order_book","order","k_with_pending_trades","k","depth"],post:[]},private:{get:["addresses/{address}","deposits/history","deposits/get_deposit","deposits/deposit_address","historys/orders","historys/vouchers","historys/accounts","historys/snapshots","linkage/get_status","members/me","order","orders","partners/orders/{id}/trades","referral_commissions/get_undeposited","referral_commissions/get_graph_data","trades/my","withdraws/bind_account_list","withdraws/get_withdraw_account","withdraws/fetch_bind_info"],post:["deposits/deposit_cash","favorite_markets/update","order/delete","orders","orders/multi","orders/clear","referral_commissions/deposit","withdraws/apply","withdraws/bind_bank","withdraws/bind_address"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002},funding:{tierBased:!1,percentage:!0,withdraw:{}}},exceptions:{2002:a,2003:o}})}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i=this.currency(e),s=await this.privateGetDepositAddress(this.extend({currency:i.id},t));if("success"in s&&s.success){let t=this.safeString(s,"address"),i=this.safeString(s,"addressTag");return{currency:e,address:this.checkAddress(t),tag:i,info:s}}}async fetchMarkets(e={}){let t=await this.publicGetMarkets(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.id,a=s.name,[o,n]=a.split("/"),d=this.commonCurrencyCode(o),c=this.commonCurrencyCode(n);i.push({id:r,symbol:a,base:d,quote:c,baseId:o,quoteId:n,info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privateGetMembersMe()).accounts,i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.currency,a=r.toUpperCase();r in this.currencies_by_id&&(a=this.currencies_by_id[r].code);let o={free:parseFloat(s.balance),used:parseFloat(s.locked),total:0};o.total=this.sum(o.free,o.used),i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r={market:s.id};void 0===t&&(r.limit=t),r.market=s.id;let a=await this.publicGetDepth(this.extend(r,i)),o=1e3*a.timestamp;return this.parseOrderBook(a,o)}parseTicker(e,t){let i=1e3*e.at;e=e.ticker;let s=void 0;void 0!==t&&(s=t.symbol);let r=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),ask:this.safeFloat(e,"sell"),bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,change:void 0,percentage:void 0,previousClose:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTickers(t),s=Object.keys(i),r={};for(let e=0;e<s.length;e++){let t=s[e],a=void 0,o=t;if(t in this.markets_by_id)o=(a=this.markets_by_id[t]).symbol;else{let e=t.slice(0,3),i=t.slice(3,6);e=e.toUpperCase(),i=i.toUpperCase(),o=(e=this.commonCurrencyCode(e))+"/"+(i=this.commonCurrencyCode(i))}let n=i[t];r[o]=this.parseTicker(n,a)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickersMarket(this.extend({market:i.id},t));return this.parseTicker(s,i)}parseTrade(e,t){let i=this.parse8601(e.created_at);return{id:e.id.toString(),timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:void 0,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:this.safeFloat(e,"funds"),info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTrades(this.extend({market:r.id},s));return this.parseTrades(a,r,t,i)}parseOHLCV(e,t,i="1m",s,r){return[1e3*e[0],e[1],e[2],e[3],e[4],e[5]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e);void 0===s&&(s=30);let o={market:a.id,period:this.timeframes[t],limit:s};o.timestamp=void 0!==i?i:18e5;let n=await this.publicGetK(this.extend(o,r));return this.parseOHLCVs(n,a,t,i,s)}parseOrder(e,t){let i=void 0;if(void 0!==t)i=t.symbol;else{let t=e.market;i=this.markets_by_id[t].symbol}let s=this.parse8601(e.created_at),r=e.state,a=void 0;return"done"===r?a="closed":"wait"===r?a="open":"cancel"===r&&(a="canceled"),{id:e.id.toString(),timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,status:a,symbol:i,type:e.ord_type,side:e.side,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),filled:this.safeFloat(e,"executed_volume"),remaining:this.safeFloat(e,"remaining_volume"),trades:void 0,fee:void 0,info:e}}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={market:this.marketId(e),side:i,volume:s.toString(),ord_type:t};"limit"===t&&(o.price=r.toString());let n=await this.privatePostOrders(this.extend(o,a)),d=this.markets_by_id[n.market];return this.parseOrder(n,d)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=await this.privatePostOrderDelete({id:e}),r=this.parseOrder(s),a=r.status;if("closed"===a||"canceled"===a)throw new o(this.id+" "+this.json(r));return r}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();let o=this.currency(e),n=this.safeString(a,"id");if(void 0===n)throw new r(this.id+" withdraw() requires an extra id param (withdraw account id according to withdraws/bind_account_list endpoint");let d={id:n,currency_type:"coin",currency:o.toLowerCase(),body:t};return void 0!==s&&(d.memo=s),{info:await this.privatePostWithdrawsApply(this.extend(d,a)),id:void 0}}nonce(){return this.milliseconds()}encodeParams(e){return this.urlencode(this.keysort(e))}sign(e,t="public",i="GET",s={},r,a){let o="/api/"+this.version+"/"+this.implodeParams(e,s)+".json",n=this.omit(s,this.extractParams(e)),d=this.urls.api+o;if("public"===t)Object.keys(n).length&&(d+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=this.keysort(this.extend({access_key:this.apiKey,tonce:e},s)),n=this.urlencode(t),c=i+"|"+o+"|"+n,h=n+"&signature="+this.hmac(this.encode(c),this.encode(this.secret));"GET"===i?d+="?"+h:(a=h,r={"Content-Type":"application/x-www-form-urlencoded"})}return{url:d,method:i,body:a,headers:r}}handleErrors(e,t,i,s,r,a,o){if(400===e){const e=this.safeValue(o,"error"),t=this.safeString(e,"code"),i=this.id+" "+this.json(o),s=this.exceptions;if(t in s)throw new s[t](i)}}}},function(e,t,i){"use strict";const s=i(15);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"tidex",name:"Tidex",countries:["UK"],rateLimit:2e3,version:"3",has:{fetchCurrencies:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30781780-03149dc4-a12e-11e7-82bb-313b269d24d4.jpg",api:{web:"https://gate.tidex.com/api",public:"https://api.tidex.com/api/3",private:"https://api.tidex.com/tapi"},www:"https://tidex.com",doc:"https://tidex.com/exchange/public-api",fees:["https://tidex.com/exchange/assets-spec","https://tidex.com/exchange/pairs-spec"]},api:{web:{get:["currency","pairs","tickers","orders","ordershistory","trade-data","trade-data/{id}"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},commonCurrencies:{MGO:"WMGO",EMGO:"MGO"}})}async fetchCurrencies(e={}){let t=await this.webGetCurrency(e),i={};for(let e=0;e<t.length;e++){let s=t[e],r=s.symbol,a=s.amountPoint,o=r.toUpperCase();o=this.commonCurrencyCode(o);let n=!0===s.visible,d=!0===s.withdrawEnable,c=!0===s.depositEnable;d&&c||(n=!1),i[o]={id:r,code:o,name:s.name,active:n,precision:a,funding:{withdraw:{active:d,fee:s.withdrawFee},deposit:{active:c,fee:0}},limits:{amount:{min:void 0,max:Math.pow(10,a)},price:{min:Math.pow(10,-a),max:Math.pow(10,a)},cost:{min:void 0,max:void 0},withdraw:{min:s.withdrawMinAmout,max:void 0},deposit:{min:s.depositMinAmount,max:void 0}},info:s}}return i}getVersionString(){return""}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t],n=this.omit(s,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();let t=this.nonce();a=this.urlencode(this.extend({nonce:t,method:e},n));let i=this.signBodyWithSecret(a);r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:i}}else"public"===t?(o+=this.getVersionString()+"/"+this.implodeParams(e,s),Object.keys(n).length&&(o+="?"+this.urlencode(n))):(o+="/"+this.implodeParams(e,s),"GET"===i?Object.keys(n).length&&(o+="?"+this.urlencode(n)):Object.keys(n).length&&(a=this.urlencode(n),r={"Content-Type":"application/x-www-form-urlencoded"}));return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,ArgumentsRequired:a,ExchangeNotAvailable:o,AuthenticationError:n,InvalidOrder:d,InvalidAddress:c,InsufficientFunds:h,OrderNotFound:l,PermissionDenied:u}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"uex",name:"UEX",countries:["SG","US"],version:"v1.0.3",rateLimit:1e3,certified:!1,has:{CORS:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","3h":"180","4h":"240","6h":"360","12h":"720","1d":"1440"},urls:{logo:"https://user-images.githubusercontent.com/1294454/43999923-051d9884-9e1f-11e8-965a-76948cb17678.jpg",api:"https://open-api.uex.com/open/api",www:"https://www.uex.com",doc:"https://download.uex.com/doc/UEX-API-English-1.0.3.pdf",fees:"https://www.uex.com/footer/ufees.html",referral:"https://www.uex.com/signup.html?code=VAGQLL"},api:{public:{get:["common/coins","common/symbols","get_records","get_ticker","get_trades","market_dept"]},private:{get:["deposit_address_list","withdraw_address_list","deposit_history","withdraw_history","user/account","market","order_info","new_order","all_order","all_trade"],post:["create_order","cancel_order","create_withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},exceptions:{4:h,5:d,6:d,7:d,8:d,9:r,13:r,19:h,22:l,23:d,24:d,100001:r,100002:o,100004:r,100005:n,100007:u,110002:r,110003:n,110004:n,110005:h,110020:n,110023:n,110024:n,110025:u,110032:u,110033:r,110034:r,"-100":r,"-1000":o},requiredCredentials:{apiKey:!0,secret:!0},options:{createMarketBuyOrderRequiresPrice:!0,limits:{"BTC/USDT":{amount:{min:.001},price:{min:.01}},"ETH/USDT":{amount:{min:.001},price:{min:.01}},"BCH/USDT":{amount:{min:.001},price:{min:.01}},"ETH/BTC":{amount:{min:.001},price:{min:1e-6}},"BCH/BTC":{amount:{min:.001},price:{min:1e-6}},"LEEK/ETH":{amount:{min:10},price:{min:10}},"CTXC/ETH":{amount:{min:10},price:{min:10}},"COSM/ETH":{amount:{min:10},price:{min:10}},"MANA/ETH":{amount:{min:10},price:{min:10}},"LBA/BTC":{amount:{min:10},price:{min:10}},"OLT/ETH":{amount:{min:10},price:{min:10}},"DTA/ETH":{amount:{min:10},price:{min:10}},"KNT/ETH":{amount:{min:10},price:{min:10}},"REN/ETH":{amount:{min:10},price:{min:10}},"LBA/ETH":{amount:{min:10},price:{min:10}},"EXC/ETH":{amount:{min:10},price:{min:10}},"ZIL/ETH":{amount:{min:10},price:{min:10}},"RATING/ETH":{amount:{min:100},price:{min:100}},"CENNZ/ETH":{amount:{min:10},price:{min:10}},"TTC/ETH":{amount:{min:10},price:{min:10}}}}})}calculateFee(e,t,i,s,r,a="taker",o={}){let n=this.markets[e],d="quote",c=n[a],h=parseFloat(this.costToPrecision(e,s*c));return"sell"===i?h*=r:d="base",{type:a,currency:n[d],rate:c,cost:parseFloat(this.currencyToPrecision(n[d],h))}}async fetchMarkets(e={}){let t=[],i=(await this.publicGetCommonSymbols()).data;for(let e=0;e<i.length;e++){let s=i[e],r=s.symbol,a=s.base_coin,o=s.count_coin,n=a.toUpperCase(),d=o.toUpperCase(),c=(n=this.commonCurrencyCode(n))+"/"+(d=this.commonCurrencyCode(d)),h={amount:s.amount_precision,price:s.price_precision},l=!0,u=this.safeValue(this.options.limits,c,{}),p=this.deepExtend({amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},u);t.push({id:r,symbol:c,base:n,quote:d,baseId:a,quoteId:o,active:l,info:s,precision:h,limits:p})}return t}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privateGetUserAccount(e)).data.coin_list,i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.coin,a=r.toUpperCase();a=r in this.currencies_by_id?this.currencies_by_id[r].code:this.commonCurrencyCode(a);let o=this.account(),n=parseFloat(s.normal),d=parseFloat(s.locked),c=this.sum(n,d);o.free=n,o.used=d,o.total=c,i[a]=o}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetMarketDept(this.extend({symbol:this.marketId(e),type:"step0"},i)),r=this.safeInteger(s.data.tick,"time");return this.parseOrderBook(s.data.tick,r)}parseTicker(e,t){let i=this.safeInteger(e,"time"),s=void 0;if(void 0===t){let i=this.safeString(e,"symbol");(i=i.toLowerCase())in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(s=t.symbol);let r=this.safeFloat(e,"last"),a=100*this.safeFloat(e,"change");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:a,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetGetTicker(this.extend({symbol:i.id},t));return this.parseTicker(s.data,i)}parseTrade(e,t){let i=this.safeInteger2(e,"create_time","ctime");if(void 0===i){let t=this.safeString(e,"created_at");void 0!==t&&(i=this.parse8601("2018-"+t+":00Z"))}let s=this.safeString2(e,"side","type");void 0!==s&&(s=s.toLowerCase());let r=this.safeString(e,"id"),a=void 0;void 0!==t&&(a=t.symbol);let o=this.safeFloat(e,"price"),n=this.safeFloat2(e,"volume","amount"),d=this.safeFloat(e,"deal_price");void 0===d&&void 0!==n&&void 0!==o&&(d=n*o);let c=void 0,h=this.safeFloat2(e,"fee","deal_fee");if(void 0!==h){let t=this.safeString(e,"feeCoin");if(void 0!==t){let e=t.toLowerCase();e in this.currencies_by_id&&(t=this.currencies_by_id[e].code)}c={cost:h,currency:t}}let l="sell"===s?"ask_id":"bid_id",u=this.safeString(e,l);return{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:a,order:u,type:void 0,side:s,price:o,amount:n,cost:d,fee:c}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetGetTrades(this.extend({symbol:r.id},s));return this.parseTrades(a.data,r,t,i)}parseOHLCV(e,t,i="1d",s,r){return[1e3*e[0],e[1],e[2],e[3],e[4],e[5]]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o={symbol:a.id,period:this.timeframes[t]},n=await this.publicGetGetRecords(this.extend(o,r));return this.parseOHLCVs(n.data,a,t,i,s)}async createOrder(e,t,i,s,r,a={}){if("market"===t&&"buy"===i&&this.options.createMarketBuyOrderRequiresPrice){if(void 0===r)throw new d(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");s*=r}await this.loadMarkets();let o=this.market(e),n="limit"===t?"1":"2",c=i.toUpperCase(),h=this.amountToPrecision(e,s),l={side:c,type:n,symbol:o.id,volume:h},u=void 0;"limit"===t&&(u=this.priceToPrecision(e,r),l.price=u);let p=await this.privatePostCreateOrder(this.extend(l,a)),m=this.parseOrder(p.data,o);return this.extend(m,{info:p,symbol:e,type:t,side:i,status:"open",price:parseFloat(u),amount:parseFloat(h)})}async cancelOrder(e,t,i={}){await this.loadMarkets();let s={order_id:e,symbol:this.market(t).id},r=await this.privatePostCancelOrder(this.extend(s,i)),a=this.safeValue(r,"data",{});return this.extend(this.parseOrder(a),{id:e,symbol:t,status:"canceled"})}parseOrderStatus(e){let t={0:"open",1:"open",2:"closed",3:"open",4:"canceled",5:"canceled",6:"canceled"};return e in t?t[e]:e}parseOrder(e,t){let i=this.safeString(e,"side");void 0!==i&&(i=i.toLowerCase());let s=this.parseOrderStatus(this.safeString(e,"status")),r=void 0;if(void 0===t){let i=this.safeString(e,"baseCoin"),s=this.safeString(e,"countCoin"),a=i+s;if(a in this.markets_by_id)t=this.markets_by_id[a];else if(void 0!==i&&void 0!==s){let e=i.toUpperCase(),t=s.toUpperCase();r=(e=this.commonCurrencyCode(e))+"/"+(t=this.commonCurrencyCode(t))}}void 0!==t&&(r=t.symbol);let a=this.safeInteger(e,"created_at");if(void 0===a){let t=this.safeString(e,"created_at");void 0!==t&&(a=this.parse8601("2018-"+t+":00Z"))}let o=void 0,n=void 0,d=this.safeFloat(e,"avg_price"),c=this.safeFloat(e,"price");0===c&&(c=d);let h=this.safeFloat(e,"volume"),l=this.safeFloat(e,"deal_volume"),u=this.safeFloat(e,"remain_volume"),p=this.safeFloat(e,"total_price"),m=this.safeString2(e,"id","order_id"),f=void 0,y=this.safeValue(e,"tradeList",[]),b={},w=void 0;for(let e=0;e<y.length;e++){let i=this.parseTrade(y[e],t);void 0===w&&(w=0),w+=i.fee.cost,b[i.fee.currency]=i.fee.cost,void 0===f&&(f=[]),o=i.timestamp,f.push(this.extend(i,{order:m}))}if(void 0!==w){let e=void 0,t=Object.keys(b);1===t.length&&(e=t[0]),n={cost:w,currency:e}}return{info:e,id:m,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:o,symbol:r,type:"limit",side:i,price:c,cost:p,average:d,amount:h,filled:l,remaining:u,status:s,fee:n,trades:f}}async fetchOrdersWithMethod(e,t,i,s,r={}){if(void 0===t)throw new a(this.id+" fetchOrdersWithMethod() requires a symbol argument");await this.loadMarkets();let o=this.market(t),n={symbol:o.id};void 0!==s&&(n.pageSize=s);let d=await this[e](this.extend(n,r)),c=this.safeValue2(d.data,"orderList","resultList",[]);return this.parseOrders(c,o,i,s)}async fetchOpenOrders(e,t,i,s={}){return this.fetchOrdersWithMethod("privateGetNewOrder",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return this.fetchOrdersWithMethod("privateGetAllOrder",e,t,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=this.market(t),r={order_id:e,symbol:s.id},a=await this.privateGetOrderInfo(this.extend(r,i));return this.parseOrder(a.data.order_info,s)}async fetchMyTrades(e,t,i,s={}){if(void 0===e)throw new a(this.id+" fetchMyTrades requires a symbol argument");await this.loadMarkets();let r=this.market(e),o={symbol:r.id};void 0!==i&&(o.pageSize=i);let n=await this.privateGetAllTrade(this.extend(o,s)),d=this.safeValue(n.data,"resultList",[]);return this.parseTrades(d,r,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i={coin:this.currency(e).id},s=await this.privateGetDepositAddressList(this.extend(i,t)),r=this.safeValue(s,"data");if(void 0===r)throw new c(this.id+" privateGetDepositAddressList() returned no data");let a=this.safeValue(r,"addressList");if(void 0===a)throw new c(this.id+" privateGetDepositAddressList() returned no address list");if(a.length<1)throw new c(this.id+" privatePostDepositAddresses() returned no addresses");let o=a[0],n=this.safeString(o,"address"),d=this.safeString(o,"tag");return this.checkAddress(n),{currency:e,address:n,tag:d,info:s}}async fetchTransactionsByType(e,t,i,s,r={}){if(void 0===t)throw new a(this.id+" fetchWithdrawals requires a currency code argument");const o={coin:this.currency(t).id};void 0!==s&&(o.pageSize=s);const n="deposit"===e?"deposit":"withdraw",d="privateGet"+this.capitalize(n)+"History",c=await this[d](this.extend(o,r)),h=this.safeValue(c.data,n+"List");return this.parseTransactionsByType(e,h,t,i,s)}async fetchDeposits(e,t,i,s={}){return await this.fetchTransactionsByType("deposit",e,t,i,s)}async fetchWithdrawals(e,t,i,s={}){return await this.fetchTransactionsByType("withdrawal",e,t,i,s)}parseTransactionsByType(e,t,i,s,r){const a=[];for(let i=0;i<t.length;i++){const s=this.parseTransaction(this.extend({type:e},t[i]));a.push(s)}return this.filterByCurrencySinceLimit(a,i,s,r)}parseTransaction(e,t){const i=this.safeString(e,"id"),s=this.safeString(e,"txid");let r=this.safeInteger(e,"createdAt"),a=this.safeInteger(e,"updateAt"),o=void 0,n=this.safeString2(e,"symbol","coin");o=void 0!==(t=this.safeValue(this.currencies_by_id,n))?t.code:this.commonCurrencyCode(n);const d=this.safeString(e,"addressTo"),c=this.safeString(e,"tag"),h=this.safeFloat(e,"amount"),l=this.parseTransactionStatus(this.safeString(e,"status")),u=this.safeString(e,"type");let p=this.safeFloat(e,"fee");return"deposit"===u&&void 0===p&&(p=0),{info:e,id:i,currency:o,amount:h,address:d,tag:c,status:l,type:u,updated:a,txid:s,timestamp:r,datetime:this.iso8601(r),fee:{currency:o,cost:p}}}parseTransactionStatus(e){return this.safeString({0:"pending",1:"ok",2:"failed",3:"pending",4:"failed",5:"ok",6:"canceled"},e,e)}async withdraw(e,t,i,s,r={}){await this.loadMarkets();const o=this.safeFloat(r,"fee");if(void 0===o)throw new a(this.id+'requires a "fee" extra parameter in its last argument');this.checkAddress(i);let n={coin:this.currency(e).id,address:i,amount:t,fee:o};void 0!==s&&(n.tag=s);return{info:await this.privatePostCreateWithdraw(this.extend(n,r)),id:void 0}}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.implodeParams(e,s);if("public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();let e=this.seconds().toString(),t="",n=this.keysort(this.extend(s,{api_key:this.apiKey,time:e})),d=Object.keys(n);for(let e=0;e<d.length;e++){let i=d[e];t+=i,t+=n[i].toString()}let c=this.hash(this.encode(t+this.secret));Object.keys(n).length&&("GET"===i?o+="?"+this.urlencode(n)+"&sign="+c:a=this.urlencode(n)+"&sign="+c),r={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if("string"==typeof o&&!(o.length<2||"{"!==o[0]&&"["!==o[0])){const e=this.safeString(n,"code"),t=this.id+" "+this.json(n),i=this.exceptions;if("0"!==e)throw e in i?new i[e](t):new r(t)}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,BadRequest:a,AuthenticationError:o,InvalidOrder:n,InsufficientFunds:d,OrderNotFound:c,PermissionDenied:h}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"upbit",name:"Upbit",countries:["KR"],version:"v1",rateLimit:1e3,certified:!0,has:{CORS:!0,createDepositAddress:!0,createMarketOrder:!1,fetchDepositAddress:!0,fetchClosedOrders:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOrder:!0,fetchOrderBooks:!0,fetchOpenOrders:!0,fetchOrders:!1,fetchTickers:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1},timeframes:{"1m":"minutes","3m":"minutes","5m":"minutes","15m":"minutes","30m":"minutes","1h":"minutes","4h":"minutes","1d":"days","1w":"weeks","1M":"months"},urls:{logo:"https://user-images.githubusercontent.com/1294454/49245610-eeaabe00-f423-11e8-9cba-4b0aed794799.jpg",api:"https://api.upbit.com",www:"https://upbit.com",doc:"https://docs.upbit.com/docs/%EC%9A%94%EC%B2%AD-%EC%88%98-%EC%A0%9C%ED%95%9C",fees:"https://upbit.com/service_center/guide"},api:{public:{get:["market/all","candles/{timeframe}","candles/{timeframe}/{unit}","candles/minutes/{unit}","candles/minutes/1","candles/minutes/3","candles/minutes/5","candles/minutes/15","candles/minutes/30","candles/minutes/60","candles/minutes/240","candles/days","candles/weeks","candles/months","trades/ticks","ticker","orderbook"]},private:{get:["accounts","orders/chance","order","orders","withdraws","withdraw","withdraws/chance","deposits","deposit","deposits/coin_addresses","deposits/coin_address"],post:["orders","withdraws/coin","withdraws/krw","deposits/generate_coin_address"],delete:["order"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.0025},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{exact:{"Missing request parameter error. Check the required parameters!":a,"side is missing, side does not have a valid value":n},broad:{thirdparty_agreement_required:h,out_of_scope:h,order_not_found:c,insufficient_funds_ask:d,insufficient_funds_bid:d,invalid_access_key:o,jwt_verification:o}},options:{fetchTickersMaxLength:4096,fetchOrderBooksMaxLength:4096,symbolSeparator:"-",tradingFeesByQuoteCurrency:{KRW:5e-4}}})}async fetchCurrency(e,t={}){await this.loadMarkets();const i=this.currency(e);return await this.fetchCurrencyById(i.id,t)}async fetchCurrencyById(e,t={}){const i={currency:e},s=await this.privateGetWithdrawsChance(this.extend(i,t)),r=this.safeValue(s,"member_level",{}),a=this.safeValue(s,"currency",{}),o=this.safeValue(s,"withdraw_limit",{}),n=this.safeValue(o,"can_withdraw"),d=this.safeString(a,"wallet_state"),c=this.safeValue(r,"wallet_locked"),h=this.safeValue(r,"locked");let l=!0;void 0!==n&&n?l=!1:"working"!==d?l=!1:void 0!==c&&c?l=!1:void 0!==h&&h&&(l=!1);const u=this.safeFloat(o,"onetime"),p=this.safeFloat(o,"daily",u),m=this.safeFloat(o,"remaining_daily",p);let f=void 0;f=m>0?m:p;const y=this.safeString(a,"code");let b=this.commonCurrencyCode(y);return{info:s,id:y,code:b,name:b,active:l,fee:this.safeFloat(a,"withdraw_fee"),precision:void 0,limits:{withdraw:{min:this.safeFloat(o,"minimum"),max:f}}}}async fetchMarket(e,t={}){await this.loadMarkets();const i=this.market(e);return await this.fetchMarketById(i.id,t)}async fetchMarketById(e,t={}){const i={market:e},s=await this.privateGetOrdersChance(this.extend(i,t)),r=this.safeValue(s,"market"),a=this.safeValue(r,"bid"),o=this.safeValue(r,"ask"),n=this.safeString(r,"id"),d=this.safeString(o,"currency"),c=this.safeString(a,"currency"),h=this.commonCurrencyCode(d),l=this.commonCurrencyCode(c),u=h+"/"+l,p={amount:8,price:8},m="active"===this.safeString(r,"state"),f=this.safeFloat(s,"bid_fee"),y=this.safeFloat(s,"ask_fee"),b=Math.max(f,y);return{info:s,id:n,symbol:u,base:h,quote:l,baseId:d,quoteId:c,active:m,precision:p,maker:b,taker:b,limits:{amount:{min:this.safeFloat(o,"min_total"),max:void 0},price:{min:Math.pow(10,-p.price),max:void 0},cost:{min:this.safeFloat(a,"min_total"),max:this.safeFloat(r,"max_total")}}}}async fetchMarkets(e={}){const t=await this.publicGetMarketAll(e),i=[];for(let e=0;e<t.length;e++){const s=t[e],r=this.safeString(s,"market"),[a,o]=r.split("-"),n=this.commonCurrencyCode(o),d=this.commonCurrencyCode(a),c=n+"/"+d,h={amount:8,price:8},l=!0,u=this.safeFloat(this.options.tradingFeesByQuoteCurrency,d,this.fees.trading.maker),p=this.safeFloat(this.options.tradingFeesByQuoteCurrency,d,this.fees.trading.taker);i.push({id:r,symbol:c,base:n,quote:d,baseId:o,quoteId:a,active:l,info:s,precision:h,maker:u,taker:p,limits:{amount:{min:Math.pow(10,-h.amount),max:void 0},price:{min:Math.pow(10,-h.price),max:void 0},cost:{min:void 0,max:void 0}}})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetAccounts(e),i={info:t},s=this.indexBy(t,"currency"),r=Object.keys(s);for(let e=0;e<r.length;e++){let t=r[e],a=this.commonCurrencyCode(t),o=this.account(),n=s[t],d=this.safeFloat(n,"balance"),c=this.safeFloat(n,"locked"),h=this.sum(d,c);o.free=d,o.used=c,o.total=h,i[a]=o}return this.parseBalance(i)}getSymbolFromMarketId(e,t){if(void 0===e)return;if(void 0!==(t=this.safeValue(this.markets_by_id,e,t)))return t.symbol;const[i,s]=e.split(this.options.symbolSeparator);return this.commonCurrencyCode(i)+"/"+this.commonCurrencyCode(s)}async fetchOrderBooks(e,t={}){await this.loadMarkets();let i=void 0;if(void 0===e){if((i=this.ids.join(",")).length>this.options.fetchOrderBooksMaxLength){let e=this.ids.length;throw new r(this.id+" has "+e.toString()+" symbols ("+i.length.toString()+" characters) exceeding max URL length ("+this.options.fetchOrderBooksMaxLength.toString()+" characters), you are required to specify a list of symbols in the first argument to fetchOrderBooks")}}else i=(i=this.marketIds(e)).join(",");const s={markets:i},a=await this.publicGetOrderbook(this.extend(s,t));let o={};for(let e=0;e<a.length;e++){const t=a[e],i=this.getSymbolFromMarketId(this.safeString(t,"market")),s=this.safeInteger(t,"timestamp");o[i]={bids:this.sortBy(this.parseBidsAsks(t.orderbook_units,"bid_price","bid_size"),0,!0),asks:this.sortBy(this.parseBidsAsks(t.orderbook_units,"ask_price","ask_size"),0),timestamp:s,datetime:this.iso8601(s),nonce:void 0}}return o}async fetchOrderBook(e,t,i={}){let s=await this.fetchOrderBooks([e],i);return this.safeValue(s,e)}parseTicker(e,t){let i=this.safeInteger(e,"trade_timestamp"),s=this.getSymbolFromMarketId(this.safeString(e,"market"),t),r=this.safeFloat(e,"prev_closing_price"),a=this.safeFloat(e,"trade_price"),o=this.safeFloat(e,"signed_change_price"),n=this.safeFloat(e,"signed_change_rate");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high_price"),low:this.safeFloat(e,"low_price"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"opening_price"),close:a,last:a,previousClose:r,change:o,percentage:n,average:void 0,baseVolume:this.safeFloat(e,"acc_trade_volume_24h"),quoteVolume:this.safeFloat(e,"acc_trade_price_24h"),info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=void 0;if(void 0===e){if((i=this.ids.join(",")).length>this.options.fetchTickersMaxLength){let e=this.ids.length;throw new r(this.id+" has "+e.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchTickers")}}else i=(i=this.marketIds(e)).join(",");const s={markets:i};let a=await this.publicGetTicker(this.extend(s,t)),o={};for(let e=0;e<a.length;e++){let t=this.parseTicker(a[e]);o[t.symbol]=t}return o}async fetchTicker(e,t={}){const i=await this.fetchTickers([e],t);return this.safeValue(i,e)}parseTrade(e,t){let i=this.safeString2(e,"sequential_id","uuid"),s=this.safeInteger(e,"timestamp");void 0===s&&(s=this.parse8601(this.safeString(e,"created_at")));let r=void 0,a=this.safeString2(e,"ask_bid","side");void 0!==a&&(a=a.toLowerCase()),"ask"===a?r="sell":"bid"===a&&(r="buy");let o=this.safeFloat(e,"funds"),n=this.safeFloat2(e,"trade_price","price"),d=this.safeFloat2(e,"trade_volume","volume");void 0===o&&void 0!==d&&void 0!==n&&(o=n*d);let c=this.safeString(e,"market"),h=void 0,l=void 0,u=void 0;if(void 0!==(t=this.safeValue(this.markets_by_id,c)))u=t.symbol,l=t.quote;else{const[e,t]=c.split("-"),i=this.commonCurrencyCode(e),s=this.commonCurrencyCode(t);u=i+"/"+s,l=s}let p=this.safeString(e,a+"_fee");return void 0!==p&&(h={currency:l,cost:p}),{id:i,info:e,order:void 0,timestamp:s,datetime:this.iso8601(s),symbol:u,type:"limit",side:r,price:n,amount:d,cost:o,fee:h}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e);void 0===i&&(i=200);const a={market:r.id,count:i};let o=await this.publicGetTradesTicks(this.extend(a,s));return this.parseTrades(o,r,t,i)}parseOHLCV(e,t,i="1d",s,r){return[this.parse8601(this.safeString(e,"candle_date_time_utc")),this.safeFloat(e,"opening_price"),this.safeFloat(e,"high_price"),this.safeFloat(e,"low_price"),this.safeFloat(e,"trade_price"),this.safeFloat(e,"candle_acc_trade_volume")]}async fetchOHLCV(e,t="1m",i,s,r={}){await this.loadMarkets();let a=this.market(e),o=this.parseTimeframe(t),n=this.timeframes[t];void 0===s&&(s=200);let d={market:a.id,timeframe:n,count:s},c="publicGetCandlesTimeframe";if("minutes"===n){let e=Math.round(o/60);d.unit=e,c+="Unit"}let h=await this[c](this.extend(d,r));return this.parseOHLCVs(h,a,t,i,s)}async createOrder(e,t,i,s,r,a={}){if("limit"!==t)throw new n(this.id+" createOrder allows limit orders only!");let o=void 0;if("buy"===i)o="bid";else{if("sell"!==i)throw new n(this.id+" createOrder allows buy or sell side only!");o="ask"}await this.loadMarkets();const d={market:this.market(e).id,side:o,volume:this.amountToPrecision(e,s),price:this.priceToPrecision(e,r),ord_type:t},c=await this.privatePostOrders(this.extend(d,a));return this.parseOrder(c)}async cancelOrder(e,t,i={}){await this.loadMarkets();let s={uuid:e},r=await this.privateDeleteOrder(this.extend(s,i));return this.parseOrder(r)}async fetchDeposits(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.limit=i);const o=await this.privateGetDeposits(this.extend(r,s));return this.parseTransactions(o,a,t,i)}async fetchWithdrawals(e,t,i,s={}){await this.loadMarkets();const r={};let a=void 0;void 0!==e&&(a=this.currency(e),r.currency=a.id),void 0!==i&&(r.limit=i);const o=await this.privateGetWithdraws(this.extend(r,s));return this.parseTransactions(o,a,t,i)}parseTransactionStatus(e){return this.safeString({ACCEPTED:"ok",submitting:"pending",submitted:"pending",almost_accepted:"pending",rejected:"failed",accepted:"pending",processing:"pending",done:"ok",canceled:"canceled"},e,e)}parseTransaction(e,t){const i=this.safeString(e,"uuid"),s=this.safeFloat(e,"amount"),r=this.safeString(e,"txid"),a=this.parse8601(this.safeString(e,"done_at")),o=this.parse8601(this.safeString(e,"created_at",a));let n=this.safeString(e,"type");"withdraw"===n&&(n="withdrawal");let d=void 0,c=this.safeString(e,"currency");d=void 0!==(t=this.safeValue(this.currencies_by_id,c))?t.code:this.commonCurrencyCode(c);let h=this.parseTransactionStatus(this.safeString(e,"state")),l=this.safeFloat(e,"fee");return{info:e,id:i,currency:d,amount:s,address:void 0,tag:void 0,status:h,type:n,updated:a,txid:r,timestamp:o,datetime:this.iso8601(o),fee:{currency:d,cost:l}}}parseOrderStatus(e){return this.safeString({wait:"open",done:"closed",cancel:"canceled"},e,e)}parseOrder(e,t){let i=this.safeString(e,"uuid"),s=this.safeString(e,"side");s="bid"===s?"buy":"sell";let r=this.safeString(e,"ord_type"),a=this.parse8601(this.safeString(e,"created_at")),o=this.parseOrderStatus(this.safeString(e,"state")),n=void 0,d=this.safeFloat(e,"price"),c=this.safeFloat(e,"volume"),h=this.safeFloat(e,"remaining_volume"),l=this.safeFloat(e,"executed_volume"),u=void 0,p=d;void 0===u&&void 0!==d&&void 0!==l&&(u=d*l);let m=this.safeValue(e,"trades"),f=void 0;void 0!==m&&(f=this.parseTrades(m));let y=void 0,b=this.safeFloat(e,"paid_fee"),w=void 0,v=this.safeString(e,"market"),g=void 0;if(void 0!==(t=this.safeValue(this.markets_by_id,v)))g=t.symbol,w=t.quote;else{const[e,t]=v.split("-"),i=this.commonCurrencyCode(e),s=this.commonCurrencyCode(t);g=i+"/"+s,w=s}if(void 0!==f){let e=f.length;if(e>0&&(void 0===n&&(n=f[e-1].timestamp),void 0===b))for(let t=0;t<e;t++){let e=this.safeValue(f[t],"fee",{}),i=this.safeFloat(e,"cost");void 0!==i&&(void 0===b&&(b=0),b=this.sum(b,i))}}return void 0!==b&&(y={currency:w,cost:b}),{info:e,id:i,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:n,symbol:g,type:r,side:s,price:d,cost:u,average:p,amount:c,filled:l,remaining:h,status:o,fee:y,trades:f}}async fetchOrdersByState(e,t,i,s,r={}){await this.loadMarkets();let a={state:e},o=void 0;void 0!==t&&(o=this.market(t),a.market=o.id);const n=await this.privateGetOrders(this.extend(a,r));return this.parseOrders(n,o,i,s)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrdersByState("wait",e,t,i,s)}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrdersByState("done",e,t,i,s)}async fetchCanceledOrders(e,t,i,s={}){return await this.fetchOrdersByState("cancel",e,t,i,s)}async fetchOrder(e,t,i={}){await this.loadMarkets();const s={uuid:e};let r=await this.privateGetOrder(this.extend(s,i));return this.parseOrder(r)}parseDepositAddresses(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.parseDepositAddress(e[i]));return t}async fetchDepositAddresses(e,t={}){await this.loadMarkets();const i=await this.privateGetDepositsCoinAddresses(t);return this.parseDepositAddresses(i)}parseDepositAddress(e,t){const i=this.safeString(e,"deposit_address"),s=this.safeString(e,"secondary_address"),r=this.commonCurrencyCode(this.safeString(e,"currency"));return this.checkAddress(i),{currency:r,address:i,tag:s,info:e}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e),s=await this.privateGetDepositsCoinAddress(this.extend({currency:i.id},t));return this.parseDepositAddress(s)}async createDepositAddress(e,t={}){await this.loadMarkets();let i={currency:this.currency(e).id},s=await this.fetchDepositAddress(e,this.extend(i,t));return void 0!==this.safeString(s,"message")?{currency:e,address:void 0,tag:void 0,info:s}:this.parseDepositAddress(s)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();const a=this.currency(e),o={amount:t};let n="privatePostWithdraws";"KRW"!==e?(n+="Coin",o.currency=a.id,o.address=i,void 0!==s&&(o.secondary_address=s)):n+="Krw";let d=await this[n](this.extend(o,r));return this.parseTransaction(d)}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,s);const n=this.omit(s,this.extractParams(e));if("GET"===i&&Object.keys(n).length&&(o+="?"+this.urlencode(n)),"private"===t){this.checkRequiredCredentials();const e=this.nonce(),t={access_key:this.apiKey,nonce:e};Object.keys(n).length&&(t.query=this.urlencode(n)),r={Authorization:"Bearer "+this.jwt(t,this.secret)},"GET"!==i&&(a=this.json(s),r["Content-Type"]="application/json")}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if(void 0===n)return;const d=this.safeValue(n,"error");if(void 0!==d){const e=this.safeString(d,"message"),t=this.safeString(d,"name"),i=this.id+" "+this.json(n),s=this.exceptions.exact;if(e in s)throw new s[e](i);if(t in s)throw new s[t](i);const a=this.exceptions.broad;let o=this.findBroadlyMatchedKey(a,e);if(void 0!==o)throw new a[o](i);if(void 0!==(o=this.findBroadlyMatchedKey(a,t)))throw new a[o](i);throw new r(i)}}}},function(e,t,i){"use strict";const s=i(11);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"urdubit",name:"UrduBit",countries:["PK"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991453-156bf3ae-6480-11e7-82eb-7295fe1b5bb4.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://urdubit.com",doc:"https://blinktrade.com/docs"},options:{brokerId:"8"}})}}},function(e,t,i){"use strict";const s=i(1);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"vaultoro",name:"Vaultoro",countries:["CH"],rateLimit:1e3,version:"1",has:{CORS:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766880-f205e870-5ee9-11e7-8fe2-0d5b15880752.jpg",api:"https://api.vaultoro.com",www:"https://www.vaultoro.com",doc:"https://api.vaultoro.com"},commonCurrencies:{GLD:"Gold"},api:{public:{get:["bidandask","buyorders","latest","latesttrades","markets","orderbook","sellorders","transactions/day","transactions/hour","transactions/month"]},private:{get:["balance","mytrades","orders"],post:["buy/{symbol}/{type}","cancel/{id}","sell/{symbol}/{type}","withdraw"]}}})}async fetchMarkets(e={}){let t=[],i=(await this.publicGetMarkets()).data,s=i.MarketCurrency,r=i.BaseCurrency,a=this.commonCurrencyCode(s),o=this.commonCurrencyCode(r),n=a+"/"+o,d=i.MarketName;return t.push({id:d,symbol:n,base:a,quote:o,baseId:s,quoteId:r,info:i}),t}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privateGetBalance()).data,i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.currency_code.toUpperCase(),a=r;r in this.currencies_by_id[r]&&(a=this.currencies_by_id[r].code);let o=s.cash,n=s.reserved,d={free:o,used:n,total:this.sum(o,n)};i[a]=d}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetOrderbook(i),r={bids:s.data[0].b,asks:s.data[1].s};return this.parseOrderBook(r,void 0,"bids","asks","Gold_Price","Gold_Amount")}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.publicGetBidandask(t),s=i.bids.length,r=i.bids[s-1],a=i.asks[0],o=(await this.publicGetMarkets(t)).data,n=this.milliseconds(),d=this.safeFloat(o,"LastPrice");return{symbol:e,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(o,"24hHigh"),low:this.safeFloat(o,"24hLow"),bid:r[0],bidVolume:void 0,ask:a[0],askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(o,"24hVolume"),info:o}}parseTrade(e,t){let i=this.parse8601(e.Time);return{id:void 0,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,order:void 0,type:void 0,side:void 0,price:e.Gold_Price,amount:e.Gold_Amount}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTransactionsDay(s);return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o=this.market(e),n="privatePost"+this.capitalize(i)+"SymbolType",d=await this[n](this.extend({symbol:o.quoteId.toLowerCase(),type:t,gld:s,price:r||1},a));return{info:d,id:d.data.Order_ID}}async cancelOrder(e,t,i={}){return await this.loadMarkets(),await this.privatePostCancelId(this.extend({id:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/";if("public"===t)o+=e;else{this.checkRequiredCredentials();let t=this.nonce();o+=this.version+"/"+this.implodeParams(e,s);let i=this.extend({nonce:t,apikey:this.apiKey},this.omit(s,this.extractParams(e)));o+="?"+this.urlencode(i),r={"Content-Type":"application/json","X-Signature":this.hmac(this.encode(o),this.encode(this.secret))}}return{url:o,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(11);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"vbtc",name:"VBTC",countries:["VN"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991481-1f53d1d8-6481-11e7-884e-21d17e7939db.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://vbtc.exchange",doc:"https://blinktrade.com/docs"},options:{brokerId:"3"}})}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"virwox",name:"VirWoX",countries:["AT","EU"],rateLimit:1e3,has:{CORS:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766894-6da9d360-5eea-11e7-90aa-41f2711b7405.jpg",api:{public:"https://api.virwox.com/api/json.php",private:"https://www.virwox.com/api/trading.php"},www:"https://www.virwox.com",doc:"https://www.virwox.com/developers.php"},requiredCredentials:{apiKey:!0,secret:!1,login:!0,password:!0},api:{public:{get:["getInstruments","getBestPrices","getMarketDepth","estimateMarketOrder","getTradedPriceVolume","getRawTradeData","getStatistics","getTerminalList","getGridList","getGridStatistics"],post:["getInstruments","getBestPrices","getMarketDepth","estimateMarketOrder","getTradedPriceVolume","getRawTradeData","getStatistics","getTerminalList","getGridList","getGridStatistics"]},private:{get:["cancelOrder","getBalances","getCommissionDiscount","getOrders","getTransactions","placeOrder"],post:["cancelOrder","getBalances","getCommissionDiscount","getOrders","getTransactions","placeOrder"]}}})}async fetchMarkets(e={}){let t=await this.publicGetGetInstruments(),i=Object.keys(t.result),s=[];for(let e=0;e<i.length;e++){let r=t.result[i[e]],a=r.instrumentID,o=r.symbol,n=r.longCurrency,d=r.shortCurrency;s.push({id:a,symbol:o,base:n,quote:d,info:r})}return s}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetBalances()).result.accountList,i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.currency,a=s.balance,o={free:a,used:0,total:a};i[r]=o}return this.parseBalance(i)}async fetchMarketPrice(e,t={}){await this.loadMarkets();let i=(await this.publicPostGetBestPrices(this.extend({symbols:[e]},t))).result;return{bid:this.safeFloat(i[0],"bestBuyPrice"),ask:this.safeFloat(i[0],"bestSellPrice")}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s={symbols:[e]};void 0!==t&&(s.buyDepth=t,s.sellDepth=t);let r=(await this.publicPostGetMarketDepth(this.extend(s,i))).result[0];return this.parseOrderBook(r,void 0,"buy","sell","price","volume")}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.milliseconds(),s=i-864e5,r=(await this.publicGetGetTradedPriceVolume(this.extend({instrument:e,endDate:this.ymdhms(i),startDate:this.ymdhms(s),HLOC:1},t))).result.priceVolumeList,a=Object.keys(r),o=r[a[a.length-1]],n=this.milliseconds(),d=this.safeFloat(o,"close");return{symbol:e,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(o,"high"),low:this.safeFloat(o,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeFloat(o,"open"),close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(o,"longVolume"),quoteVolume:this.safeFloat(o,"shortVolume"),info:o}}parseTrade(e,t){let i=1e3*this.safeInteger(e,"time");return{id:e.tid,timestamp:i,datetime:this.iso8601(i),order:void 0,symbol:t,type:void 0,side:void 0,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"vol"),fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();const r=this.market(e),a=await this.publicGetGetRawTradeData(this.extend({instrument:e,timespan:3600},s)),o=this.safeValue(a,"result",{}),n=this.safeValue(o,"data",[]);return this.parseTrades(n,r)}async createOrder(e,t,i,s,r,a={}){await this.loadMarkets();let o={instrument:this.market(e).symbol,orderType:i.toUpperCase(),amount:s};"limit"===t&&(o.price=r);let n=await this.privatePostPlaceOrder(this.extend(o,a));return{info:n,id:n.result.orderID.toString()}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder(this.extend({orderID:e},i))}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api[t],n={};"private"===t&&(this.checkRequiredCredentials(),n.key=this.apiKey,n.user=this.login,n.pass=this.password);let d=this.nonce();return"GET"===i?o+="?"+this.urlencode(this.extend({method:e,id:d},n,s)):(r={"Content-Type":"application/json"},a=this.json({method:e,params:this.extend(n,s),id:d})),{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if(200===e){if("{"!==o[0]&&"["!==o[0])throw new r(this.id+" returned a non-JSON reply: "+o);if(!("result"in n))throw new r(this.id+" malformed response: no result in response: "+o);{let e=n.result;if("errorCode"in e){if("OK"!==e.errorCode)throw new r(this.id+" error returned: "+o)}}}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,NotSupported:a,AuthenticationError:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"xbtce",name:"xBTCe",countries:["RU"],rateLimit:2e3,version:"v1",has:{CORS:!1,fetchTickers:!0,createMarketOrder:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/28059414-e235970c-662c-11e7-8c3a-08e31f78684b.jpg",api:"https://cryptottlivewebapi.xbtce.net:8443/api",www:"https://www.xbtce.com",doc:["https://www.xbtce.com/tradeapi","https://support.xbtce.info/Knowledgebase/Article/View/52/25/xbtce-exchange-api"]},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency","currency/{filter}","level2","level2/{filter}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/level2","quotehistory/{symbol}/ticks","symbol","symbol/{filter}","tick","tick/{filter}","ticker","ticker/{filter}","tradesession"]},private:{get:["tradeserverinfo","tradesession","currency","currency/{filter}","level2","level2/{filter}","symbol","symbol/{filter}","tick","tick/{filter}","account","asset","asset/{id}","position","position/{id}","trade","trade/{id}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/ask/info","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/{periodicity}/bars/bid/info","quotehistory/{symbol}/level2","quotehistory/{symbol}/level2/info","quotehistory/{symbol}/periodicities","quotehistory/{symbol}/ticks","quotehistory/{symbol}/ticks/info","quotehistory/cache/{symbol}/{periodicity}/bars/ask","quotehistory/cache/{symbol}/{periodicity}/bars/bid","quotehistory/cache/{symbol}/level2","quotehistory/cache/{symbol}/ticks","quotehistory/symbols","quotehistory/version"],post:["trade","tradehistory"],put:["trade"],delete:["trade"]}}})}async fetchMarkets(e={}){let t=await this.privateGetSymbol(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.Symbol,a=s.MarginCurrency,o=s.ProfitCurrency;"DSH"===a&&(a="DASH");let n=a+"/"+o;n=s.IsTradeAllowed?n:r,i.push({id:r,symbol:n,base:a,quote:o,info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetAsset(),i={info:t};for(let e=0;e<t.length;e++){let s=t[e],r=s.Currency.toUpperCase();"DSH"===r&&(r="DASH");let a={free:s.FreeAmount,used:s.LockedAmount,total:s.Amount};i[r]=a}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=this.market(e),r=await this.privateGetLevel2Filter(this.extend({filter:s.id},i)),a=(r=r[0]).Timestamp;return this.parseOrderBook(r,a,"Bids","Asks","Price","Volume")}parseTicker(e,t){let i=0,s=void 0;"LastBuyTimestamp"in e&&i<e.LastBuyTimestamp&&(i=e.LastBuyTimestamp,s=e.LastBuyPrice),"LastSellTimestamp"in e&&i<e.LastSellTimestamp&&(i=e.LastSellTimestamp,s=e.LastSellPrice),i||(i=this.milliseconds());let r=void 0;return t&&(r=t.symbol),{symbol:r,timestamp:i,datetime:this.iso8601(i),high:e.DailyBestBuyPrice,low:e.DailyBestSellPrice,bid:e.BestBid,bidVolume:void 0,ask:e.BestAsk,askVolume:void 0,vwap:void 0,open:void 0,close:s,last:s,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:e.DailyTradedTotalVolume,quoteVolume:void 0,info:e}}async fetchTickers(e,t={}){await this.loadMarkets();let i=await this.publicGetTicker(t);i=this.indexBy(i,"Symbol");let s=Object.keys(i),r={};for(let e=0;e<s.length;e++){let t=s[e],a=void 0,o=void 0;if(t in this.markets_by_id)o=(a=this.markets_by_id[t]).symbol;else{let e=t.slice(0,3),i=t.slice(3,6);"DSH"===e&&(e="DASH"),"DSH"===i&&(i="DASH"),o=e+"/"+i}let n=i[t];r[o]=this.parseTicker(n,a)}return r}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetTickerFilter(this.extend({filter:i.id},t));if(s.length<1)throw new r(this.id+" fetchTicker returned empty response, xBTCe public API error");let a=(s=this.indexBy(s,"Symbol"))[i.id];return this.parseTicker(a,i)}async fetchTrades(e,t,i,s={}){return await this.loadMarkets(),await this.privateGetTrade(s)}parseOHLCV(e,t,i="1m",s,r){return[e.Timestamp,e.Open,e.High,e.Low,e.Close,e.Volume]}async fetchOHLCV(e,t="1m",i,s,r={}){throw new a(this.id+" fetchOHLCV is disabled by the exchange")}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"market"===t)throw new r(this.id+" allows limit orders only");let n=await this.privatePostTrade(this.extend({pair:this.marketId(e),type:i,amount:s,rate:a},o));return{info:n,id:n.Id.toString()}}async cancelOrder(e,t,i={}){return await this.privateDeleteTrade(this.extend({Type:"Cancel",Id:e},i))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},r,a){if(!this.apiKey)throw new o(this.id+" requires apiKey for all requests, their public API is always busy");if(!this.uid)throw new o(this.id+" requires uid property for authentication and trading, their public API is always busy");let n=this.urls.api+"/"+this.version;"public"===t&&(n+="/"+t),n+="/"+this.implodeParams(e,s);let d=this.omit(s,this.extractParams(e));if("public"===t)Object.keys(d).length&&(n+="?"+this.urlencode(d));else{this.checkRequiredCredentials(),r={"Accept-Encoding":"gzip, deflate"};let e=this.nonce().toString();"POST"===i&&(Object.keys(d).length?(r["Content-Type"]="application/json",a=this.json(d)):n+="?"+this.urlencode(d));let t=e+this.uid+this.apiKey+i+n;a&&(t+=a);let s=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64"),o=this.uid+":"+this.apiKey+":"+e+":"+this.binaryToString(s);r.Authorization="HMAC "+o}return{url:n,method:i,body:a,headers:r}}}},function(e,t,i){"use strict";const s=i(15),{ExchangeError:r,InsufficientFunds:a,AuthenticationError:o}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"yobit",name:"YoBit",countries:["RU"],rateLimit:3e3,version:"3",has:{createDepositAddress:!0,fetchDepositAddress:!0,fetchDeposits:!1,fetchWithdrawals:!1,fetchTransactions:!1,CORS:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766910-cdcbfdae-5eea-11e7-9859-03fea873272d.jpg",api:{public:"https://yobit.net/api",private:"https://yobit.net/tapi"},www:"https://www.yobit.net",doc:"https://www.yobit.net/en/api/",fees:"https://www.yobit.net/en/fees/"},api:{public:{get:["depth/{pair}","info","ticker/{pair}","trades/{pair}"]},private:{post:["ActiveOrders","CancelOrder","GetDepositAddress","getInfo","OrderInfo","Trade","TradeHistory","WithdrawCoinsToAddress"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{}}},commonCurrencies:{AIR:"AirCoin",ANI:"ANICoin",ANT:"AntsCoin",ATMCHA:"ATM",ASN:"Ascension",AST:"Astral",ATM:"Autumncoin",BCC:"BCH",BCS:"BitcoinStake",BLN:"Bulleon",BOT:"BOTcoin",BON:"BONES",BPC:"BitcoinPremium",BTS:"Bitshares2",CAT:"BitClave",CMT:"CometCoin",COV:"Coven Coin",COVX:"COV",CPC:"Capricoin",CS:"CryptoSpots",DCT:"Discount",DGD:"DarkGoldCoin",DIRT:"DIRTY",DROP:"FaucetCoin",EKO:"EkoCoin",ENTER:"ENTRC",EPC:"ExperienceCoin",ERT:"Eristica Token",ESC:"EdwardSnowden",EUROPE:"EUROP",EXT:"LifeExtension",FUNK:"FUNKCoin",GCC:"GlobalCryptocurrency",GEN:"Genstake",GENE:"Genesiscoin",GOLD:"GoldMint",GOT:"Giotto Coin",HTML5:"HTML",HYPERX:"HYPER",ICN:"iCoin",INSANE:"INSN",JNT:"JointCoin",JPC:"JupiterCoin",KNC:"KingN Coin",LBTCX:"LiteBitcoin",LIZI:"LiZi",LOC:"LocoCoin",LOCX:"LOC",LUNYR:"LUN",LUN:"LunarCoin",MDT:"Midnight",NAV:"NavajoCoin",NBT:"NiceBytes",OMG:"OMGame",PAC:"$PAC",PLAY:"PlayCoin",PIVX:"Darknet",PRS:"PRE",PUTIN:"PUT",STK:"StakeCoin",SUB:"Subscriptio",PAY:"EPAY",PLC:"Platin Coin",RCN:"RCoin",REP:"Republicoin",RUR:"RUB",XIN:"XINCoin"},options:{fetchOrdersRequiresSymbol:!0,fetchTickersMaxLength:512},exceptions:{broad:{"Total transaction amount":r,"Insufficient funds":a,"invalid key":o}}})}parseOrderStatus(e){let t={0:"open",1:"closed",2:"canceled",3:"open"};return e in t?t[e]:e}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetInfo()).return,i={info:t},s={free:"funds",total:"funds_incl_orders"},r=Object.keys(s);for(let e=0;e<r.length;e++){let a=r[e],o=s[a];if(o in t){let e=Object.keys(t[o]);for(let s=0;s<e.length;s++){let r=e[s],n=r.toUpperCase(),d=this.commonCurrencyCode(n),c=void 0;(c=d in i?i[d]:this.account())[a]=t[o][r],void 0!==c.total&&void 0!==c.free&&(c.used=c.total-c.free),i[d]=c}}}return this.parseBalance(i)}async createDepositAddress(e,t={}){let i=await this.fetchDepositAddress(e,this.extend({need_new:1},t)),s=this.safeString(i,"address");return this.checkAddress(s),{currency:e,address:s,tag:void 0,info:i.info}}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i={coinName:this.currency(e).id,need_new:0},s=await this.privatePostGetDepositAddress(this.extend(i,t)),r=this.safeString(s.return,"address");return this.checkAddress(r),{currency:e,address:r,tag:void 0,info:s}}async fetchMyTrades(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.pair=r.id),void 0!==i&&(a.count=parseInt(i)),void 0!==t&&(a.since=parseInt(t/1e3));let o=this.options.fetchMyTradesMethod,n=await this[o](this.extend(a,s)),d=this.safeValue(n,"return",{}),c=Object.keys(d),h=[];for(let e=0;e<c.length;e++){const t=c[e],i=this.parseTrade(this.extend(d[t],{trade_id:t}),r);h.push(i)}return this.filterBySymbolSinceLimit(h,e,t,i)}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let a=this.currency(e);return{info:await this.privatePostWithdrawCoinsToAddress(this.extend({coinName:a.id,amount:t,address:i},r)),id:void 0}}}},function(e,t,i){"use strict";const s=i(1),{ExchangeError:r,BadRequest:a}=i(0);e.exports=class extends s{describe(){return this.deepExtend(super.describe(),{id:"zaif",name:"Zaif",countries:["JP"],rateLimit:2e3,version:"1",has:{CORS:!1,createMarketOrder:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766927-39ca2ada-5eeb-11e7-972f-1b4199518ca6.jpg",api:"https://api.zaif.jp",www:"https://zaif.jp",doc:["https://techbureau-api-document.readthedocs.io/ja/latest/index.html","https://corp.zaif.jp/api-docs","https://corp.zaif.jp/api-docs/api_links","https://www.npmjs.com/package/zaif.jp","https://github.com/you21979/node-zaif"],fees:"https://zaif.jp/fee?lang=en"},fees:{trading:{percentage:!0,taker:.001,maker:0}},api:{public:{get:["depth/{pair}","currencies/{pair}","currencies/all","currency_pairs/{pair}","currency_pairs/all","last_price/{pair}","ticker/{pair}","trades/{pair}"]},private:{post:["active_orders","cancel_order","deposit_history","get_id_info","get_info","get_info2","get_personal_info","trade","trade_history","withdraw","withdraw_history"]},ecapi:{post:["createInvoice","getInvoice","getInvoiceIdsByOrderNumber","cancelInvoice"]},tlapi:{post:["get_positions","position_history","active_positions","create_position","change_position","cancel_position"]},fapi:{get:["groups/{group_id}","last_price/{group_id}/{pair}","ticker/{group_id}/{pair}","trades/{group_id}/{pair}","depth/{group_id}/{pair}"]}},options:{fees:{"BTC/JPY":{maker:0,taker:0},"BCH/JPY":{maker:0,taker:.003},"BCH/BTC":{maker:0,taker:.003},"PEPECASH/JPY":{maker:0,taker:1e-4},"PEPECASH/BT":{maker:0,taker:1e-4}}},exceptions:{exact:{"unsupported currency_pair":a},broad:{}}})}async fetchMarkets(e={}){let t=await this.publicGetCurrencyPairsAll(),i=[];for(let e=0;e<t.length;e++){let s=t[e],r=s.currency_pair,a=s.name,[o,n]=a.split("/"),d={amount:-Math.log10(s.item_unit_step),price:s.aux_unit_point};const c=this.safeValue(this.options.fees,a,this.fees.trading),h=c.taker,l=c.maker;i.push({id:r,symbol:a,base:o,quote:n,active:!0,precision:d,taker:h,maker:l,limits:{amount:{min:this.safeFloat(s,"item_unit_min"),max:void 0},price:{min:this.safeFloat(s,"aux_unit_min"),max:void 0},cost:{min:void 0,max:void 0}},info:s})}return i}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetInfo()).return,i={info:t},s=Object.keys(t.funds);for(let e=0;e<s.length;e++){let r=s[e],a=t.funds[r],o=r.toUpperCase(),n={free:a,used:0,total:a};"deposit"in t&&r in t.deposit&&(n.total=t.deposit[r],n.used=n.total-n.free),i[o]=n}return this.parseBalance(i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetDepthPair(this.extend({pair:this.marketId(e)},i));return this.parseOrderBook(s)}async fetchTicker(e,t={}){await this.loadMarkets();let i=await this.publicGetTickerPair(this.extend({pair:this.marketId(e)},t)),s=this.milliseconds(),r=i.vwap,a=i.volume,o=void 0;void 0!==a&&void 0!==r&&(o=a*r);let n=i.last;return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:i.high,low:i.low,bid:i.bid,bidVolume:void 0,ask:i.ask,askVolume:void 0,vwap:r,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:o,info:i}}parseTrade(e,t){let i="bid"===e.trade_type?"buy":"sell",s=1e3*e.date,r=this.safeString(e,"id");r=this.safeString(e,"tid",r);let a=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount");return t||(t=this.markets_by_id[e.currency_pair]),{id:r.toString(),info:e,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,type:void 0,side:i,price:a,amount:o}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let r=this.market(e),a=await this.publicGetTradesPair(this.extend({pair:r.id},s));if(1===a.length){let e=a[0];Object.keys(e).length||(a=[])}return this.parseTrades(a,r,t,i)}async createOrder(e,t,i,s,a,o={}){if(await this.loadMarkets(),"market"===t)throw new r(this.id+" allows limit orders only");let n=await this.privatePostTrade(this.extend({currency_pair:this.marketId(e),action:"buy"===i?"bid":"ask",amount:s,price:a},o));return{info:n,id:n.return.order_id.toString()}}async cancelOrder(e,t,i={}){return await this.privatePostCancelOrder(this.extend({order_id:e},i))}parseOrder(e,t){let i="bid"===e.action?"buy":"sell",s=1e3*parseInt(e.timestamp);t||(t=this.markets_by_id[e.currency_pair]);let r=e.price,a=e.amount;return{id:e.id.toString(),timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,status:"open",symbol:t.symbol,type:"limit",side:i,price:r,cost:r*a,amount:a,filled:void 0,remaining:void 0,trades:void 0,fee:void 0}}parseOrders(e,t,i,s){let r=Object.keys(e),a=[];for(let i=0;i<r.length;i++){let s=r[i],o=e[s],n=this.extend(o,{id:s});a.push(this.parseOrder(n,t))}return this.filterBySinceLimit(a,i,s)}async fetchOpenOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.currency_pair=r.id);let o=await this.privatePostActiveOrders(this.extend(a,s));return this.parseOrders(o.return,r,t,i)}async fetchClosedOrders(e,t,i,s={}){await this.loadMarkets();let r=void 0,a={};void 0!==e&&(r=this.market(e),a.currency_pair=r.id);let o=await this.privatePostTradeHistory(this.extend(a,s));return this.parseOrders(o.return,r,t,i)}async withdraw(e,t,i,s,a={}){this.checkAddress(i),await this.loadMarkets();let o=this.currency(e);if("JPY"===e)throw new r(this.id+" withdraw() does not allow "+e+" withdrawals");let n={currency:o.id,amount:t,address:i};void 0!==s&&(n.message=s);let d=await this.privatePostWithdraw(this.extend(n,a));return{info:d,id:d.return.txid,fee:d.return.fee}}nonce(){return parseFloat(this.milliseconds()/1e3).toFixed(8)}sign(e,t="public",i="GET",s={},r,a){let o=this.urls.api+"/";if("public"===t)o+="api/"+this.version+"/"+this.implodeParams(e,s);else if("fapi"===t)o+="fapi/"+this.version+"/"+this.implodeParams(e,s);else{this.checkRequiredCredentials(),o+="ecapi"===t?"ecapi":"tlapi"===t?"tlapi":"tapi";let i=this.nonce();a=this.urlencode(this.extend({method:e,nonce:i},s)),r={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:o,method:i,body:a,headers:r}}handleErrors(e,t,i,s,a,o,n){if(void 0===n)return;const d=this.id+" "+o,c=this.safeString(n,"error");if(void 0!==c){const e=this.exceptions.exact;if(c in e)throw new e[c](d);const t=this.exceptions.broad,i=this.findBroadlyMatchedKey(t,c);if(void 0!==i)throw new t[i](d);throw new r(d)}if(!this.safeValue(n,"success",!0))throw new r(d)}}}]);